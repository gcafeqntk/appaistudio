(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function Ob(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var em={exports:{}},Il={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yv;function fw(){if(yv)return Il;yv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,c){var h=null;if(c!==void 0&&(h=""+c),o.key!==void 0&&(h=""+o.key),"key"in o){c={};for(var g in o)g!=="key"&&(c[g]=o[g])}else c=o;return o=c.ref,{$$typeof:i,type:r,key:h,ref:o!==void 0?o:null,props:c}}return Il.Fragment=e,Il.jsx=n,Il.jsxs=n,Il}var vv;function mw(){return vv||(vv=1,em.exports=fw()),em.exports}var f=mw(),tm={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _v;function gw(){if(_v)return Ne;_v=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),A=Symbol.iterator;function V(M){return M===null||typeof M!="object"?null:(M=A&&M[A]||M["@@iterator"],typeof M=="function"?M:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ne=Object.assign,B={};function X(M,W,le){this.props=M,this.context=W,this.refs=B,this.updater=le||G}X.prototype.isReactComponent={},X.prototype.setState=function(M,W){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,W,"setState")},X.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function J(){}J.prototype=X.prototype;function ue(M,W,le){this.props=M,this.context=W,this.refs=B,this.updater=le||G}var U=ue.prototype=new J;U.constructor=ue,ne(U,X.prototype),U.isPureReactComponent=!0;var K=Array.isArray;function se(){}var C={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function R(M,W,le){var fe=le.ref;return{$$typeof:i,type:M,key:W,ref:fe!==void 0?fe:null,props:le}}function j(M,W){return R(M.type,W,M.props)}function O(M){return typeof M=="object"&&M!==null&&M.$$typeof===i}function I(M){var W={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(le){return W[le]})}var N=/\/+/g;function Q(M,W){return typeof M=="object"&&M!==null&&M.key!=null?I(""+M.key):W.toString(36)}function ae(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(se,se):(M.status="pending",M.then(function(W){M.status==="pending"&&(M.status="fulfilled",M.value=W)},function(W){M.status==="pending"&&(M.status="rejected",M.reason=W)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function D(M,W,le,fe,Te){var Se=typeof M;(Se==="undefined"||Se==="boolean")&&(M=null);var Oe=!1;if(M===null)Oe=!0;else switch(Se){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(M.$$typeof){case i:case e:Oe=!0;break;case x:return Oe=M._init,D(Oe(M._payload),W,le,fe,Te)}}if(Oe)return Te=Te(M),Oe=fe===""?"."+Q(M,0):fe,K(Te)?(le="",Oe!=null&&(le=Oe.replace(N,"$&/")+"/"),D(Te,W,le,"",function(wn){return wn})):Te!=null&&(O(Te)&&(Te=j(Te,le+(Te.key==null||M&&M.key===Te.key?"":(""+Te.key).replace(N,"$&/")+"/")+Oe)),W.push(Te)),1;Oe=0;var yt=fe===""?".":fe+":";if(K(M))for(var nt=0;nt<M.length;nt++)fe=M[nt],Se=yt+Q(fe,nt),Oe+=D(fe,W,le,Se,Te);else if(nt=V(M),typeof nt=="function")for(M=nt.call(M),nt=0;!(fe=M.next()).done;)fe=fe.value,Se=yt+Q(fe,nt++),Oe+=D(fe,W,le,Se,Te);else if(Se==="object"){if(typeof M.then=="function")return D(ae(M),W,le,fe,Te);throw W=String(M),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function ee(M,W,le){if(M==null)return M;var fe=[],Te=0;return D(M,fe,"","",function(Se){return W.call(le,Se,Te++)}),fe}function de(M){if(M._status===-1){var W=M._result;W=W(),W.then(function(le){(M._status===0||M._status===-1)&&(M._status=1,M._result=le)},function(le){(M._status===0||M._status===-1)&&(M._status=2,M._result=le)}),M._status===-1&&(M._status=0,M._result=W)}if(M._status===1)return M._result.default;throw M._result}var pe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},je={map:ee,forEach:function(M,W,le){ee(M,function(){W.apply(this,arguments)},le)},count:function(M){var W=0;return ee(M,function(){W++}),W},toArray:function(M){return ee(M,function(W){return W})||[]},only:function(M){if(!O(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Ne.Activity=E,Ne.Children=je,Ne.Component=X,Ne.Fragment=n,Ne.Profiler=o,Ne.PureComponent=ue,Ne.StrictMode=r,Ne.Suspense=v,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(M){return C.H.useMemoCache(M)}},Ne.cache=function(M){return function(){return M.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(M,W,le){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var fe=ne({},M.props),Te=M.key;if(W!=null)for(Se in W.key!==void 0&&(Te=""+W.key),W)!S.call(W,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&W.ref===void 0||(fe[Se]=W[Se]);var Se=arguments.length-2;if(Se===1)fe.children=le;else if(1<Se){for(var Oe=Array(Se),yt=0;yt<Se;yt++)Oe[yt]=arguments[yt+2];fe.children=Oe}return R(M.type,Te,fe)},Ne.createContext=function(M){return M={$$typeof:h,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:c,_context:M},M},Ne.createElement=function(M,W,le){var fe,Te={},Se=null;if(W!=null)for(fe in W.key!==void 0&&(Se=""+W.key),W)S.call(W,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(Te[fe]=W[fe]);var Oe=arguments.length-2;if(Oe===1)Te.children=le;else if(1<Oe){for(var yt=Array(Oe),nt=0;nt<Oe;nt++)yt[nt]=arguments[nt+2];Te.children=yt}if(M&&M.defaultProps)for(fe in Oe=M.defaultProps,Oe)Te[fe]===void 0&&(Te[fe]=Oe[fe]);return R(M,Se,Te)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(M){return{$$typeof:g,render:M}},Ne.isValidElement=O,Ne.lazy=function(M){return{$$typeof:x,_payload:{_status:-1,_result:M},_init:de}},Ne.memo=function(M,W){return{$$typeof:p,type:M,compare:W===void 0?null:W}},Ne.startTransition=function(M){var W=C.T,le={};C.T=le;try{var fe=M(),Te=C.S;Te!==null&&Te(le,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(se,pe)}catch(Se){pe(Se)}finally{W!==null&&le.types!==null&&(W.types=le.types),C.T=W}},Ne.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Ne.use=function(M){return C.H.use(M)},Ne.useActionState=function(M,W,le){return C.H.useActionState(M,W,le)},Ne.useCallback=function(M,W){return C.H.useCallback(M,W)},Ne.useContext=function(M){return C.H.useContext(M)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(M,W){return C.H.useDeferredValue(M,W)},Ne.useEffect=function(M,W){return C.H.useEffect(M,W)},Ne.useEffectEvent=function(M){return C.H.useEffectEvent(M)},Ne.useId=function(){return C.H.useId()},Ne.useImperativeHandle=function(M,W,le){return C.H.useImperativeHandle(M,W,le)},Ne.useInsertionEffect=function(M,W){return C.H.useInsertionEffect(M,W)},Ne.useLayoutEffect=function(M,W){return C.H.useLayoutEffect(M,W)},Ne.useMemo=function(M,W){return C.H.useMemo(M,W)},Ne.useOptimistic=function(M,W){return C.H.useOptimistic(M,W)},Ne.useReducer=function(M,W,le){return C.H.useReducer(M,W,le)},Ne.useRef=function(M){return C.H.useRef(M)},Ne.useState=function(M){return C.H.useState(M)},Ne.useSyncExternalStore=function(M,W,le){return C.H.useSyncExternalStore(M,W,le)},Ne.useTransition=function(){return C.H.useTransition()},Ne.version="19.2.3",Ne}var bv;function eg(){return bv||(bv=1,tm.exports=gw()),tm.exports}var ce=eg();const tg=Ob(ce);var nm={exports:{}},Rl={},sm={exports:{}},im={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xv;function pw(){return xv||(xv=1,(function(i){function e(D,ee){var de=D.length;D.push(ee);e:for(;0<de;){var pe=de-1>>>1,je=D[pe];if(0<o(je,ee))D[pe]=ee,D[de]=je,de=pe;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var ee=D[0],de=D.pop();if(de!==ee){D[0]=de;e:for(var pe=0,je=D.length,M=je>>>1;pe<M;){var W=2*(pe+1)-1,le=D[W],fe=W+1,Te=D[fe];if(0>o(le,de))fe<je&&0>o(Te,le)?(D[pe]=Te,D[fe]=de,pe=fe):(D[pe]=le,D[W]=de,pe=W);else if(fe<je&&0>o(Te,de))D[pe]=Te,D[fe]=de,pe=fe;else break e}}return ee}function o(D,ee){var de=D.sortIndex-ee.sortIndex;return de!==0?de:D.id-ee.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var h=Date,g=h.now();i.unstable_now=function(){return h.now()-g}}var v=[],p=[],x=1,E=null,A=3,V=!1,G=!1,ne=!1,B=!1,X=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,ue=typeof setImmediate<"u"?setImmediate:null;function U(D){for(var ee=n(p);ee!==null;){if(ee.callback===null)r(p);else if(ee.startTime<=D)r(p),ee.sortIndex=ee.expirationTime,e(v,ee);else break;ee=n(p)}}function K(D){if(ne=!1,U(D),!G)if(n(v)!==null)G=!0,se||(se=!0,I());else{var ee=n(p);ee!==null&&ae(K,ee.startTime-D)}}var se=!1,C=-1,S=5,R=-1;function j(){return B?!0:!(i.unstable_now()-R<S)}function O(){if(B=!1,se){var D=i.unstable_now();R=D;var ee=!0;try{e:{G=!1,ne&&(ne=!1,J(C),C=-1),V=!0;var de=A;try{t:{for(U(D),E=n(v);E!==null&&!(E.expirationTime>D&&j());){var pe=E.callback;if(typeof pe=="function"){E.callback=null,A=E.priorityLevel;var je=pe(E.expirationTime<=D);if(D=i.unstable_now(),typeof je=="function"){E.callback=je,U(D),ee=!0;break t}E===n(v)&&r(v),U(D)}else r(v);E=n(v)}if(E!==null)ee=!0;else{var M=n(p);M!==null&&ae(K,M.startTime-D),ee=!1}}break e}finally{E=null,A=de,V=!1}ee=void 0}}finally{ee?I():se=!1}}}var I;if(typeof ue=="function")I=function(){ue(O)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Q=N.port2;N.port1.onmessage=O,I=function(){Q.postMessage(null)}}else I=function(){X(O,0)};function ae(D,ee){C=X(function(){D(i.unstable_now())},ee)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(D){D.callback=null},i.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<D?Math.floor(1e3/D):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_next=function(D){switch(A){case 1:case 2:case 3:var ee=3;break;default:ee=A}var de=A;A=ee;try{return D()}finally{A=de}},i.unstable_requestPaint=function(){B=!0},i.unstable_runWithPriority=function(D,ee){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var de=A;A=D;try{return ee()}finally{A=de}},i.unstable_scheduleCallback=function(D,ee,de){var pe=i.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?pe+de:pe):de=pe,D){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=de+je,D={id:x++,callback:ee,priorityLevel:D,startTime:de,expirationTime:je,sortIndex:-1},de>pe?(D.sortIndex=de,e(p,D),n(v)===null&&D===n(p)&&(ne?(J(C),C=-1):ne=!0,ae(K,de-pe))):(D.sortIndex=je,e(v,D),G||V||(G=!0,se||(se=!0,I()))),D},i.unstable_shouldYield=j,i.unstable_wrapCallback=function(D){var ee=A;return function(){var de=A;A=ee;try{return D.apply(this,arguments)}finally{A=de}}}})(im)),im}var Tv;function yw(){return Tv||(Tv=1,sm.exports=pw()),sm.exports}var rm={exports:{}},Yt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ev;function vw(){if(Ev)return Yt;Ev=1;var i=eg();function e(v){var p="https://react.dev/errors/"+v;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)p+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+v+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(v,p,x){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:v,containerInfo:p,implementation:x}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(v,p){if(v==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Yt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Yt.createPortal=function(v,p){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return c(v,p,null,x)},Yt.flushSync=function(v){var p=h.T,x=r.p;try{if(h.T=null,r.p=2,v)return v()}finally{h.T=p,r.p=x,r.d.f()}},Yt.preconnect=function(v,p){typeof v=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(v,p))},Yt.prefetchDNS=function(v){typeof v=="string"&&r.d.D(v)},Yt.preinit=function(v,p){if(typeof v=="string"&&p&&typeof p.as=="string"){var x=p.as,E=g(x,p.crossOrigin),A=typeof p.integrity=="string"?p.integrity:void 0,V=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;x==="style"?r.d.S(v,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:V}):x==="script"&&r.d.X(v,{crossOrigin:E,integrity:A,fetchPriority:V,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Yt.preinitModule=function(v,p){if(typeof v=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var x=g(p.as,p.crossOrigin);r.d.M(v,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(v)},Yt.preload=function(v,p){if(typeof v=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var x=p.as,E=g(x,p.crossOrigin);r.d.L(v,x,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Yt.preloadModule=function(v,p){if(typeof v=="string")if(p){var x=g(p.as,p.crossOrigin);r.d.m(v,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(v)},Yt.requestFormReset=function(v){r.d.r(v)},Yt.unstable_batchedUpdates=function(v,p){return v(p)},Yt.useFormState=function(v,p,x){return h.H.useFormState(v,p,x)},Yt.useFormStatus=function(){return h.H.useHostTransitionStatus()},Yt.version="19.2.3",Yt}var wv;function _w(){if(wv)return rm.exports;wv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),rm.exports=vw(),rm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sv;function bw(){if(Sv)return Rl;Sv=1;var i=yw(),e=eg(),n=_w();function r(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function h(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function g(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function v(t){if(c(t)!==t)throw Error(r(188))}function p(t){var s=t.alternate;if(!s){if(s=c(t),s===null)throw Error(r(188));return s!==t?null:t}for(var a=t,l=s;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return v(d),t;if(m===l)return v(d),s;m=m.sibling}throw Error(r(188))}if(a.return!==l.return)a=d,l=m;else{for(var _=!1,T=d.child;T;){if(T===a){_=!0,a=d,l=m;break}if(T===l){_=!0,l=d,a=m;break}T=T.sibling}if(!_){for(T=m.child;T;){if(T===a){_=!0,a=m,l=d;break}if(T===l){_=!0,l=m,a=d;break}T=T.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:s}function x(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=x(t),s!==null)return s;t=t.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),V=Symbol.for("react.transitional.element"),G=Symbol.for("react.portal"),ne=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),J=Symbol.for("react.consumer"),ue=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function I(t){return t===null||typeof t!="object"?null:(t=O&&t[O]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function Q(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ne:return"Fragment";case X:return"Profiler";case B:return"StrictMode";case K:return"Suspense";case se:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case G:return"Portal";case ue:return t.displayName||"Context";case J:return(t._context.displayName||"Context")+".Consumer";case U:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C:return s=t.displayName||null,s!==null?s:Q(t.type)||"Memo";case S:s=t._payload,t=t._init;try{return Q(t(s))}catch{}}return null}var ae=Array.isArray,D=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},pe=[],je=-1;function M(t){return{current:t}}function W(t){0>je||(t.current=pe[je],pe[je]=null,je--)}function le(t,s){je++,pe[je]=t.current,t.current=s}var fe=M(null),Te=M(null),Se=M(null),Oe=M(null);function yt(t,s){switch(le(Se,s),le(Te,t),le(fe,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?zy(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=zy(s),t=By(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}W(fe),le(fe,t)}function nt(){W(fe),W(Te),W(Se)}function wn(t){t.memoizedState!==null&&le(Oe,t);var s=fe.current,a=By(s,t.type);s!==a&&(le(Te,t),le(fe,a))}function oa(t){Te.current===t&&(W(fe),W(Te)),Oe.current===t&&(W(Oe),Sl._currentValue=de)}var la,ca;function as(t){if(la===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);la=s&&s[1]||"",ca=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+la+t+ca}var So=!1;function dr(t,s){if(!t||So)return"";So=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Y){var F=Y}Reflect.construct(t,[],ie)}else{try{ie.call()}catch(Y){F=Y}t.call(ie.prototype)}}else{try{throw Error()}catch(Y){F=Y}(ie=t())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Y){if(Y&&F&&typeof Y.stack=="string")return[Y.stack,F.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),_=m[0],T=m[1];if(_&&T){var k=_.split(`
`),q=T.split(`
`);for(d=l=0;l<k.length&&!k[l].includes("DetermineComponentFrameRoot");)l++;for(;d<q.length&&!q[d].includes("DetermineComponentFrameRoot");)d++;if(l===k.length||d===q.length)for(l=k.length-1,d=q.length-1;1<=l&&0<=d&&k[l]!==q[d];)d--;for(;1<=l&&0<=d;l--,d--)if(k[l]!==q[d]){if(l!==1||d!==1)do if(l--,d--,0>d||k[l]!==q[d]){var Z=`
`+k[l].replace(" at new "," at ");return t.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",t.displayName)),Z}while(1<=l&&0<=d);break}}}finally{So=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?as(a):""}function Ao(t,s){switch(t.tag){case 26:case 27:case 5:return as(t.type);case 16:return as("Lazy");case 13:return t.child!==s&&s!==null?as("Suspense Fallback"):as("Suspense");case 19:return as("SuspenseList");case 0:case 15:return dr(t.type,!1);case 11:return dr(t.type.render,!1);case 1:return dr(t.type,!0);case 31:return as("Activity");default:return""}}function No(t){try{var s="",a=null;do s+=Ao(t,a),a=t,t=t.return;while(t);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var vt=Object.prototype.hasOwnProperty,It=i.unstable_scheduleCallback,fi=i.unstable_cancelCallback,td=i.unstable_shouldYield,vc=i.unstable_requestPaint,en=i.unstable_now,fr=i.unstable_getCurrentPriorityLevel,Co=i.unstable_ImmediatePriority,Io=i.unstable_UserBlockingPriority,mi=i.unstable_NormalPriority,nd=i.unstable_LowPriority,_c=i.unstable_IdlePriority,bc=i.log,xc=i.unstable_setDisableYieldValue,Hn=null,Pt=null;function Sn(t){if(typeof bc=="function"&&xc(t),Pt&&typeof Pt.setStrictMode=="function")try{Pt.setStrictMode(Hn,t)}catch{}}var dt=Math.clz32?Math.clz32:Ec,Tc=Math.log,ua=Math.LN2;function Ec(t){return t>>>=0,t===0?32:31-(Tc(t)/ua|0)|0}var os=256,mr=262144,_t=4194304;function ls(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function cs(t,s,a){var l=t.pendingLanes;if(l===0)return 0;var d=0,m=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~m,l!==0?d=ls(l):(_&=T,_!==0?d=ls(_):a||(a=T&~t,a!==0&&(d=ls(a))))):(T=l&~m,T!==0?d=ls(T):_!==0?d=ls(_):a||(a=l&~t,a!==0&&(d=ls(a)))),d===0?0:s!==0&&s!==d&&(s&m)===0&&(m=d&-d,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:d}function Gn(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function sd(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(){var t=_t;return _t<<=1,(_t&62914560)===0&&(_t=4194304),t}function us(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function gr(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function id(t,s,a,l,d,m){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,k=t.expirationTimes,q=t.hiddenUpdates;for(a=_&~a;0<a;){var Z=31-dt(a),ie=1<<Z;T[Z]=0,k[Z]=-1;var F=q[Z];if(F!==null)for(q[Z]=null,Z=0;Z<F.length;Z++){var Y=F[Z];Y!==null&&(Y.lane&=-536870913)}a&=~ie}l!==0&&pr(t,l,0),m!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=m&~(_&~s))}function pr(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-dt(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Ro(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var l=31-dt(a),d=1<<l;d&s|t[l]&s&&(t[l]|=s),a&=~d}}function ko(t,s){var a=s&-s;return a=(a&42)!==0?1:yr(a),(a&(t.suspendedLanes|s))!==0?0:a}function yr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Us(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Sc(){var t=ee.p;return t!==0?t:(t=window.event,t===void 0?32:uv(t.type))}function qn(t,s){var a=ee.p;try{return ee.p=t,s()}finally{ee.p=a}}var Fn=Math.random().toString(36).slice(2),bt="__reactFiber$"+Fn,Ot="__reactProps$"+Fn,hs="__reactContainer$"+Fn,ha="__reactEvents$"+Fn,rd="__reactListeners$"+Fn,Ac="__reactHandles$"+Fn,Nc="__reactResources$"+Fn,ds="__reactMarker$"+Fn;function da(t){delete t[bt],delete t[Ot],delete t[ha],delete t[rd],delete t[Ac]}function fs(t){var s=t[bt];if(s)return s;for(var a=t.parentNode;a;){if(s=a[hs]||a[bt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=Yy(t);t!==null;){if(a=t[bt])return a;t=Yy(t)}return s}t=a,a=t.parentNode}return null}function An(t){if(t=t[bt]||t[hs]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function mn(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(r(33))}function ms(t){var s=t[Nc];return s||(s=t[Nc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function xt(t){t[ds]=!0}var jo=new Set,Oo={};function gs(t,s){ps(t,s),ps(t+"Capture",s)}function ps(t,s){for(Oo[t]=s,t=0;t<s.length;t++)jo.add(s[t])}var Do=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mo={},Vo={};function Cc(t){return vt.call(Vo,t)?!0:vt.call(Mo,t)?!1:Do.test(t)?Vo[t]=!0:(Mo[t]=!0,!1)}function fa(t,s,a){if(Cc(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function gn(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function Tt(t,s,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+l)}}function Dt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gi(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Lo(t,s,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,m=l.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return d.call(this)},set:function(_){a=""+_,m.call(this,_)}}),Object.defineProperty(t,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Ye(t){if(!t._valueTracker){var s=gi(t)?"checked":"value";t._valueTracker=Lo(t,s,""+t[s])}}function vr(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return t&&(l=gi(t)?t.checked?"true":"false":t.value),t=l,t!==a?(s.setValue(t),!0):!1}function ys(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var _r=/[\n"\\]/g;function rn(t){return t.replace(_r,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ma(t,s,a,l,d,m,_,T){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),s!=null?_==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+Dt(s)):t.value!==""+Dt(s)&&(t.value=""+Dt(s)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),s!=null?Po(t,_,Dt(s)):a!=null?Po(t,_,Dt(a)):l!=null&&t.removeAttribute("value"),d==null&&m!=null&&(t.defaultChecked=!!m),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+Dt(T):t.removeAttribute("name")}function Ic(t,s,a,l,d,m,_,T){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){Ye(t);return}a=a!=null?""+Dt(a):"",s=s!=null?""+Dt(s):a,T||s===t.value||(t.value=s),t.defaultValue=s}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),Ye(t)}function Po(t,s,a){s==="number"&&ys(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function pi(t,s,a,l){if(t=t.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=s.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Dt(a),s=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,l&&(t[d].defaultSelected=!0);return}s!==null||t[d].disabled||(s=t[d])}s!==null&&(s.selected=!0)}}function Rc(t,s,a){if(s!=null&&(s=""+Dt(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+Dt(a):""}function yi(t,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(r(92));if(ae(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=Dt(s),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Ye(t)}function an(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var kc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Uo(t,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,a):typeof a!="number"||a===0||kc.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function zo(t,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var d in s)l=s[d],s.hasOwnProperty(d)&&a[d]!==l&&Uo(t,d,l)}else for(var m in s)s.hasOwnProperty(m)&&Uo(t,m,s[m])}function ga(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pa(t){return vi.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Kn(){}var Bo=null;function Nn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _i=null,vs=null;function br(t){var s=An(t);if(s&&(t=s.stateNode)){var a=t[Ot]||null;e:switch(t=s.stateNode,s.type){case"input":if(ma(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+rn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==t&&l.form===t.form){var d=l[Ot]||null;if(!d)throw Error(r(90));ma(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===t.form&&vr(l)}break e;case"textarea":Rc(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&pi(t,!!a.multiple,s,!1)}}}var ya=!1;function bi(t,s,a){if(ya)return t(s,a);ya=!0;try{var l=t(s);return l}finally{if(ya=!1,(_i!==null||vs!==null)&&(Su(),_i&&(s=_i,t=vs,vs=_i=null,br(s),t)))for(s=0;s<t.length;s++)br(t[s])}}function $n(t,s){var a=t.stateNode;if(a===null)return null;var l=a[Ot]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xr=!1;if(Cn)try{var Je={};Object.defineProperty(Je,"passive",{get:function(){xr=!0}}),window.addEventListener("test",Je,Je),window.removeEventListener("test",Je,Je)}catch{xr=!1}var _s=null,Ho=null,Tr=null;function Go(){if(Tr)return Tr;var t,s=Ho,a=s.length,l,d="value"in _s?_s.value:_s.textContent,m=d.length;for(t=0;t<a&&s[t]===d[t];t++);var _=a-t;for(l=1;l<=_&&s[a-l]===d[m-l];l++);return Tr=d.slice(t,1<l?1-l:void 0)}function Er(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function zs(){return!0}function Yn(){return!1}function Ut(t){function s(a,l,d,m,_){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?zs:Yn,this.isPropagationStopped=Yn,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=zs)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=zs)},persist:function(){},isPersistent:zs}),s}var Bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bs=Ut(Bs),xi=E({},Bs,{view:0,detail:0}),qo=Ut(xi),Ti,va,xs,_a=E({},xi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ei,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xs&&(xs&&t.type==="mousemove"?(Ti=t.screenX-xs.screenX,va=t.screenY-xs.screenY):va=Ti=0,xs=t),Ti)},movementY:function(t){return"movementY"in t?t.movementY:va}}),Fo=Ut(_a),wr=E({},_a,{dataTransfer:0}),Oc=Ut(wr),Dc=E({},xi,{relatedTarget:0}),Sr=Ut(Dc),Ko=E({},Bs,{animationName:0,elapsedTime:0,pseudoElement:0}),Mc=Ut(Ko),ba=E({},Bs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Vc=Ut(ba),Lc=E({},Bs,{data:0}),Ts=Ut(Lc),Pc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bc(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=zc[t])?!!s[t]:!1}function Ei(){return Bc}var tn=E({},xi,{key:function(t){if(t.key){var s=Pc[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Er(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Uc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ei,charCode:function(t){return t.type==="keypress"?Er(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Er(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Hc=Ut(tn),Gc=E({},_a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hs=Ut(Gc),u=E({},xi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ei}),y=Ut(u),b=E({},Bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=Ut(b),z=E({},_a,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$=Ut(z),he=E({},Bs,{newState:0,oldState:0}),Ie=Ut(he),ft=[9,13,27,32],Fe=Cn&&"CompositionEvent"in window,at=null;Cn&&"documentMode"in document&&(at=document.documentMode);var In=Cn&&"TextEvent"in window&&!at,Es=Cn&&(!Fe||at&&8<at&&11>=at),Qn=" ",Xn=!1;function Ar(t,s){switch(t){case"keyup":return ft.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xa(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ta=!1;function LT(t,s){switch(t){case"compositionend":return xa(s);case"keypress":return s.which!==32?null:(Xn=!0,Qn);case"textInput":return t=s.data,t===Qn&&Xn?null:t;default:return null}}function PT(t,s){if(Ta)return t==="compositionend"||!Fe&&Ar(t,s)?(t=Go(),Tr=Ho=_s=null,Ta=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Es&&s.locale!=="ko"?null:s.data;default:return null}}var UT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jg(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!UT[t.type]:s==="textarea"}function Wg(t,s,a,l){_i?vs?vs.push(l):vs=[l]:_i=l,s=ju(s,"onChange"),0<s.length&&(a=new bs("onChange","change",null,a,l),t.push({event:a,listeners:s}))}var $o=null,Yo=null;function zT(t){Dy(t,0)}function qc(t){var s=mn(t);if(vr(s))return t}function Zg(t,s){if(t==="change")return s}var ep=!1;if(Cn){var ad;if(Cn){var od="oninput"in document;if(!od){var tp=document.createElement("div");tp.setAttribute("oninput","return;"),od=typeof tp.oninput=="function"}ad=od}else ad=!1;ep=ad&&(!document.documentMode||9<document.documentMode)}function np(){$o&&($o.detachEvent("onpropertychange",sp),Yo=$o=null)}function sp(t){if(t.propertyName==="value"&&qc(Yo)){var s=[];Wg(s,Yo,t,Nn(t)),bi(zT,s)}}function BT(t,s,a){t==="focusin"?(np(),$o=s,Yo=a,$o.attachEvent("onpropertychange",sp)):t==="focusout"&&np()}function HT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qc(Yo)}function GT(t,s){if(t==="click")return qc(s)}function qT(t,s){if(t==="input"||t==="change")return qc(s)}function FT(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var pn=typeof Object.is=="function"?Object.is:FT;function Qo(t,s){if(pn(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!vt.call(s,d)||!pn(t[d],s[d]))return!1}return!0}function ip(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function rp(t,s){var a=ip(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=s&&l>=s)return{node:a,offset:s-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ip(a)}}function ap(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?ap(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function op(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=ys(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=ys(t.document)}return s}function ld(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var KT=Cn&&"documentMode"in document&&11>=document.documentMode,Ea=null,cd=null,Xo=null,ud=!1;function lp(t,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ud||Ea==null||Ea!==ys(l)||(l=Ea,"selectionStart"in l&&ld(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Xo&&Qo(Xo,l)||(Xo=l,l=ju(cd,"onSelect"),0<l.length&&(s=new bs("onSelect","select",null,s,a),t.push({event:s,listeners:l}),s.target=Ea)))}function Nr(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var wa={animationend:Nr("Animation","AnimationEnd"),animationiteration:Nr("Animation","AnimationIteration"),animationstart:Nr("Animation","AnimationStart"),transitionrun:Nr("Transition","TransitionRun"),transitionstart:Nr("Transition","TransitionStart"),transitioncancel:Nr("Transition","TransitionCancel"),transitionend:Nr("Transition","TransitionEnd")},hd={},cp={};Cn&&(cp=document.createElement("div").style,"AnimationEvent"in window||(delete wa.animationend.animation,delete wa.animationiteration.animation,delete wa.animationstart.animation),"TransitionEvent"in window||delete wa.transitionend.transition);function Cr(t){if(hd[t])return hd[t];if(!wa[t])return t;var s=wa[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in cp)return hd[t]=s[a];return t}var up=Cr("animationend"),hp=Cr("animationiteration"),dp=Cr("animationstart"),$T=Cr("transitionrun"),YT=Cr("transitionstart"),QT=Cr("transitioncancel"),fp=Cr("transitionend"),mp=new Map,dd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dd.push("scrollEnd");function Jn(t,s){mp.set(t,s),gs(s,[t])}var Fc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Rn=[],Sa=0,fd=0;function Kc(){for(var t=Sa,s=fd=Sa=0;s<t;){var a=Rn[s];Rn[s++]=null;var l=Rn[s];Rn[s++]=null;var d=Rn[s];Rn[s++]=null;var m=Rn[s];if(Rn[s++]=null,l!==null&&d!==null){var _=l.pending;_===null?d.next=d:(d.next=_.next,_.next=d),l.pending=d}m!==0&&gp(a,d,m)}}function $c(t,s,a,l){Rn[Sa++]=t,Rn[Sa++]=s,Rn[Sa++]=a,Rn[Sa++]=l,fd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function md(t,s,a,l){return $c(t,s,a,l),Yc(t)}function Ir(t,s){return $c(t,null,null,s),Yc(t)}function gp(t,s,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var d=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(d=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,d&&s!==null&&(d=31-dt(a),t=m.hiddenUpdates,l=t[d],l===null?t[d]=[s]:l.push(s),s.lane=a|536870912),m):null}function Yc(t){if(50<vl)throw vl=0,wf=null,Error(r(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Aa={};function XT(t,s,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(t,s,a,l){return new XT(t,s,a,l)}function gd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Gs(t,s){var a=t.alternate;return a===null?(a=yn(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function pp(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Qc(t,s,a,l,d,m){var _=0;if(l=t,typeof t=="function")gd(t)&&(_=1);else if(typeof t=="string")_=tw(t,a,fe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=yn(31,a,s,d),t.elementType=R,t.lanes=m,t;case ne:return Rr(a.children,d,m,s);case B:_=8,d|=24;break;case X:return t=yn(12,a,s,d|2),t.elementType=X,t.lanes=m,t;case K:return t=yn(13,a,s,d),t.elementType=K,t.lanes=m,t;case se:return t=yn(19,a,s,d),t.elementType=se,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ue:_=10;break e;case J:_=9;break e;case U:_=11;break e;case C:_=14;break e;case S:_=16,l=null;break e}_=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return s=yn(_,a,s,d),s.elementType=t,s.type=l,s.lanes=m,s}function Rr(t,s,a,l){return t=yn(7,t,l,s),t.lanes=a,t}function pd(t,s,a){return t=yn(6,t,null,s),t.lanes=a,t}function yp(t){var s=yn(18,null,null,0);return s.stateNode=t,s}function yd(t,s,a){return s=yn(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var vp=new WeakMap;function kn(t,s){if(typeof t=="object"&&t!==null){var a=vp.get(t);return a!==void 0?a:(s={value:t,source:s,stack:No(s)},vp.set(t,s),s)}return{value:t,source:s,stack:No(s)}}var Na=[],Ca=0,Xc=null,Jo=0,jn=[],On=0,wi=null,ws=1,Ss="";function qs(t,s){Na[Ca++]=Jo,Na[Ca++]=Xc,Xc=t,Jo=s}function _p(t,s,a){jn[On++]=ws,jn[On++]=Ss,jn[On++]=wi,wi=t;var l=ws;t=Ss;var d=32-dt(l)-1;l&=~(1<<d),a+=1;var m=32-dt(s)+d;if(30<m){var _=d-d%5;m=(l&(1<<_)-1).toString(32),l>>=_,d-=_,ws=1<<32-dt(s)+d|a<<d|l,Ss=m+t}else ws=1<<m|a<<d|l,Ss=t}function vd(t){t.return!==null&&(qs(t,1),_p(t,1,0))}function _d(t){for(;t===Xc;)Xc=Na[--Ca],Na[Ca]=null,Jo=Na[--Ca],Na[Ca]=null;for(;t===wi;)wi=jn[--On],jn[On]=null,Ss=jn[--On],jn[On]=null,ws=jn[--On],jn[On]=null}function bp(t,s){jn[On++]=ws,jn[On++]=Ss,jn[On++]=wi,ws=s.id,Ss=s.overflow,wi=t}var zt=null,st=null,Be=!1,Si=null,Dn=!1,bd=Error(r(519));function Ai(t){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Wo(kn(s,t)),bd}function xp(t){var s=t.stateNode,a=t.type,l=t.memoizedProps;switch(s[bt]=t,s[Ot]=l,a){case"dialog":Me("cancel",s),Me("close",s);break;case"iframe":case"object":case"embed":Me("load",s);break;case"video":case"audio":for(a=0;a<bl.length;a++)Me(bl[a],s);break;case"source":Me("error",s);break;case"img":case"image":case"link":Me("error",s),Me("load",s);break;case"details":Me("toggle",s);break;case"input":Me("invalid",s),Ic(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Me("invalid",s);break;case"textarea":Me("invalid",s),yi(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||Py(s.textContent,a)?(l.popover!=null&&(Me("beforetoggle",s),Me("toggle",s)),l.onScroll!=null&&Me("scroll",s),l.onScrollEnd!=null&&Me("scrollend",s),l.onClick!=null&&(s.onclick=Kn),s=!0):s=!1,s||Ai(t,!0)}function Tp(t){for(zt=t.return;zt;)switch(zt.tag){case 5:case 31:case 13:Dn=!1;return;case 27:case 3:Dn=!0;return;default:zt=zt.return}}function Ia(t){if(t!==zt)return!1;if(!Be)return Tp(t),Be=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Uf(t.type,t.memoizedProps)),a=!a),a&&st&&Ai(t),Tp(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));st=$y(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));st=$y(t)}else s===27?(s=st,zi(t.type)?(t=qf,qf=null,st=t):st=s):st=zt?Vn(t.stateNode.nextSibling):null;return!0}function kr(){st=zt=null,Be=!1}function xd(){var t=Si;return t!==null&&(un===null?un=t:un.push.apply(un,t),Si=null),t}function Wo(t){Si===null?Si=[t]:Si.push(t)}var Td=M(null),jr=null,Fs=null;function Ni(t,s,a){le(Td,s._currentValue),s._currentValue=a}function Ks(t){t._currentValue=Td.current,W(Td)}function Ed(t,s,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===a)break;t=t.return}}function wd(t,s,a,l){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var m=d.dependencies;if(m!==null){var _=d.child;m=m.firstContext;e:for(;m!==null;){var T=m;m=d;for(var k=0;k<s.length;k++)if(T.context===s[k]){m.lanes|=a,T=m.alternate,T!==null&&(T.lanes|=a),Ed(m.return,a,t),l||(_=null);break e}m=T.next}}else if(d.tag===18){if(_=d.return,_===null)throw Error(r(341));_.lanes|=a,m=_.alternate,m!==null&&(m.lanes|=a),Ed(_,a,t),_=null}else _=d.child;if(_!==null)_.return=d;else for(_=d;_!==null;){if(_===t){_=null;break}if(d=_.sibling,d!==null){d.return=_.return,_=d;break}_=_.return}d=_}}function Ra(t,s,a,l){t=null;for(var d=s,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var _=d.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var T=d.type;pn(d.pendingProps.value,_.value)||(t!==null?t.push(T):t=[T])}}else if(d===Oe.current){if(_=d.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(Sl):t=[Sl])}d=d.return}t!==null&&wd(s,t,a,l),s.flags|=262144}function Jc(t){for(t=t.firstContext;t!==null;){if(!pn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Or(t){jr=t,Fs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Bt(t){return Ep(jr,t)}function Wc(t,s){return jr===null&&Or(t),Ep(t,s)}function Ep(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Fs===null){if(t===null)throw Error(r(308));Fs=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else Fs=Fs.next=s;return a}var JT=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},WT=i.unstable_scheduleCallback,ZT=i.unstable_NormalPriority,Et={$$typeof:ue,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sd(){return{controller:new JT,data:new Map,refCount:0}}function Zo(t){t.refCount--,t.refCount===0&&WT(ZT,function(){t.controller.abort()})}var el=null,Ad=0,ka=0,ja=null;function eE(t,s){if(el===null){var a=el=[];Ad=0,ka=Rf(),ja={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Ad++,s.then(wp,wp),s}function wp(){if(--Ad===0&&el!==null){ja!==null&&(ja.status="fulfilled");var t=el;el=null,ka=0,ja=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function tE(t,s){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var d=0;d<a.length;d++)(0,a[d])(s)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var Sp=D.S;D.S=function(t,s){ly=en(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&eE(t,s),Sp!==null&&Sp(t,s)};var Dr=M(null);function Nd(){var t=Dr.current;return t!==null?t:tt.pooledCache}function Zc(t,s){s===null?le(Dr,Dr.current):le(Dr,s.pool)}function Ap(){var t=Nd();return t===null?null:{parent:Et._currentValue,pool:t}}var Oa=Error(r(460)),Cd=Error(r(474)),eu=Error(r(542)),tu={then:function(){}};function Np(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Cp(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(Kn,Kn),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Rp(t),t;default:if(typeof s.status=="string")s.then(Kn,Kn);else{if(t=tt,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=l}},function(l){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Rp(t),t}throw Vr=s,Oa}}function Mr(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Vr=a,Oa):a}}var Vr=null;function Ip(){if(Vr===null)throw Error(r(459));var t=Vr;return Vr=null,t}function Rp(t){if(t===Oa||t===eu)throw Error(r(483))}var Da=null,tl=0;function nu(t){var s=tl;return tl+=1,Da===null&&(Da=[]),Cp(Da,t,s)}function nl(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function su(t,s){throw s.$$typeof===A?Error(r(525)):(t=Object.prototype.toString.call(s),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function kp(t){function s(P,L){if(t){var H=P.deletions;H===null?(P.deletions=[L],P.flags|=16):H.push(L)}}function a(P,L){if(!t)return null;for(;L!==null;)s(P,L),L=L.sibling;return null}function l(P){for(var L=new Map;P!==null;)P.key!==null?L.set(P.key,P):L.set(P.index,P),P=P.sibling;return L}function d(P,L){return P=Gs(P,L),P.index=0,P.sibling=null,P}function m(P,L,H){return P.index=H,t?(H=P.alternate,H!==null?(H=H.index,H<L?(P.flags|=67108866,L):H):(P.flags|=67108866,L)):(P.flags|=1048576,L)}function _(P){return t&&P.alternate===null&&(P.flags|=67108866),P}function T(P,L,H,te){return L===null||L.tag!==6?(L=pd(H,P.mode,te),L.return=P,L):(L=d(L,H),L.return=P,L)}function k(P,L,H,te){var _e=H.type;return _e===ne?Z(P,L,H.props.children,te,H.key):L!==null&&(L.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===S&&Mr(_e)===L.type)?(L=d(L,H.props),nl(L,H),L.return=P,L):(L=Qc(H.type,H.key,H.props,null,P.mode,te),nl(L,H),L.return=P,L)}function q(P,L,H,te){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=yd(H,P.mode,te),L.return=P,L):(L=d(L,H.children||[]),L.return=P,L)}function Z(P,L,H,te,_e){return L===null||L.tag!==7?(L=Rr(H,P.mode,te,_e),L.return=P,L):(L=d(L,H),L.return=P,L)}function ie(P,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=pd(""+L,P.mode,H),L.return=P,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case V:return H=Qc(L.type,L.key,L.props,null,P.mode,H),nl(H,L),H.return=P,H;case G:return L=yd(L,P.mode,H),L.return=P,L;case S:return L=Mr(L),ie(P,L,H)}if(ae(L)||I(L))return L=Rr(L,P.mode,H,null),L.return=P,L;if(typeof L.then=="function")return ie(P,nu(L),H);if(L.$$typeof===ue)return ie(P,Wc(P,L),H);su(P,L)}return null}function F(P,L,H,te){var _e=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return _e!==null?null:T(P,L,""+H,te);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case V:return H.key===_e?k(P,L,H,te):null;case G:return H.key===_e?q(P,L,H,te):null;case S:return H=Mr(H),F(P,L,H,te)}if(ae(H)||I(H))return _e!==null?null:Z(P,L,H,te,null);if(typeof H.then=="function")return F(P,L,nu(H),te);if(H.$$typeof===ue)return F(P,L,Wc(P,H),te);su(P,H)}return null}function Y(P,L,H,te,_e){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return P=P.get(H)||null,T(L,P,""+te,_e);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case V:return P=P.get(te.key===null?H:te.key)||null,k(L,P,te,_e);case G:return P=P.get(te.key===null?H:te.key)||null,q(L,P,te,_e);case S:return te=Mr(te),Y(P,L,H,te,_e)}if(ae(te)||I(te))return P=P.get(H)||null,Z(L,P,te,_e,null);if(typeof te.then=="function")return Y(P,L,H,nu(te),_e);if(te.$$typeof===ue)return Y(P,L,H,Wc(L,te),_e);su(L,te)}return null}function ge(P,L,H,te){for(var _e=null,Ge=null,ye=L,ke=L=0,Le=null;ye!==null&&ke<H.length;ke++){ye.index>ke?(Le=ye,ye=null):Le=ye.sibling;var qe=F(P,ye,H[ke],te);if(qe===null){ye===null&&(ye=Le);break}t&&ye&&qe.alternate===null&&s(P,ye),L=m(qe,L,ke),Ge===null?_e=qe:Ge.sibling=qe,Ge=qe,ye=Le}if(ke===H.length)return a(P,ye),Be&&qs(P,ke),_e;if(ye===null){for(;ke<H.length;ke++)ye=ie(P,H[ke],te),ye!==null&&(L=m(ye,L,ke),Ge===null?_e=ye:Ge.sibling=ye,Ge=ye);return Be&&qs(P,ke),_e}for(ye=l(ye);ke<H.length;ke++)Le=Y(ye,P,ke,H[ke],te),Le!==null&&(t&&Le.alternate!==null&&ye.delete(Le.key===null?ke:Le.key),L=m(Le,L,ke),Ge===null?_e=Le:Ge.sibling=Le,Ge=Le);return t&&ye.forEach(function(Fi){return s(P,Fi)}),Be&&qs(P,ke),_e}function xe(P,L,H,te){if(H==null)throw Error(r(151));for(var _e=null,Ge=null,ye=L,ke=L=0,Le=null,qe=H.next();ye!==null&&!qe.done;ke++,qe=H.next()){ye.index>ke?(Le=ye,ye=null):Le=ye.sibling;var Fi=F(P,ye,qe.value,te);if(Fi===null){ye===null&&(ye=Le);break}t&&ye&&Fi.alternate===null&&s(P,ye),L=m(Fi,L,ke),Ge===null?_e=Fi:Ge.sibling=Fi,Ge=Fi,ye=Le}if(qe.done)return a(P,ye),Be&&qs(P,ke),_e;if(ye===null){for(;!qe.done;ke++,qe=H.next())qe=ie(P,qe.value,te),qe!==null&&(L=m(qe,L,ke),Ge===null?_e=qe:Ge.sibling=qe,Ge=qe);return Be&&qs(P,ke),_e}for(ye=l(ye);!qe.done;ke++,qe=H.next())qe=Y(ye,P,ke,qe.value,te),qe!==null&&(t&&qe.alternate!==null&&ye.delete(qe.key===null?ke:qe.key),L=m(qe,L,ke),Ge===null?_e=qe:Ge.sibling=qe,Ge=qe);return t&&ye.forEach(function(dw){return s(P,dw)}),Be&&qs(P,ke),_e}function et(P,L,H,te){if(typeof H=="object"&&H!==null&&H.type===ne&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case V:e:{for(var _e=H.key;L!==null;){if(L.key===_e){if(_e=H.type,_e===ne){if(L.tag===7){a(P,L.sibling),te=d(L,H.props.children),te.return=P,P=te;break e}}else if(L.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===S&&Mr(_e)===L.type){a(P,L.sibling),te=d(L,H.props),nl(te,H),te.return=P,P=te;break e}a(P,L);break}else s(P,L);L=L.sibling}H.type===ne?(te=Rr(H.props.children,P.mode,te,H.key),te.return=P,P=te):(te=Qc(H.type,H.key,H.props,null,P.mode,te),nl(te,H),te.return=P,P=te)}return _(P);case G:e:{for(_e=H.key;L!==null;){if(L.key===_e)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){a(P,L.sibling),te=d(L,H.children||[]),te.return=P,P=te;break e}else{a(P,L);break}else s(P,L);L=L.sibling}te=yd(H,P.mode,te),te.return=P,P=te}return _(P);case S:return H=Mr(H),et(P,L,H,te)}if(ae(H))return ge(P,L,H,te);if(I(H)){if(_e=I(H),typeof _e!="function")throw Error(r(150));return H=_e.call(H),xe(P,L,H,te)}if(typeof H.then=="function")return et(P,L,nu(H),te);if(H.$$typeof===ue)return et(P,L,Wc(P,H),te);su(P,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(a(P,L.sibling),te=d(L,H),te.return=P,P=te):(a(P,L),te=pd(H,P.mode,te),te.return=P,P=te),_(P)):a(P,L)}return function(P,L,H,te){try{tl=0;var _e=et(P,L,H,te);return Da=null,_e}catch(ye){if(ye===Oa||ye===eu)throw ye;var Ge=yn(29,ye,null,P.mode);return Ge.lanes=te,Ge.return=P,Ge}finally{}}}var Lr=kp(!0),jp=kp(!1),Ci=!1;function Id(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rd(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ii(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ri(t,s,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ke&2)!==0){var d=l.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),l.pending=s,s=Yc(t),gp(t,null,a),s}return $c(t,l,s,a),Yc(t)}function sl(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,Ro(t,a)}}function kd(t,s){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?d=m=_:m=m.next=_,a=a.next}while(a!==null);m===null?d=m=s:m=m.next=s}else d=m=s;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var jd=!1;function il(){if(jd){var t=ja;if(t!==null)throw t}}function rl(t,s,a,l){jd=!1;var d=t.updateQueue;Ci=!1;var m=d.firstBaseUpdate,_=d.lastBaseUpdate,T=d.shared.pending;if(T!==null){d.shared.pending=null;var k=T,q=k.next;k.next=null,_===null?m=q:_.next=q,_=k;var Z=t.alternate;Z!==null&&(Z=Z.updateQueue,T=Z.lastBaseUpdate,T!==_&&(T===null?Z.firstBaseUpdate=q:T.next=q,Z.lastBaseUpdate=k))}if(m!==null){var ie=d.baseState;_=0,Z=q=k=null,T=m;do{var F=T.lane&-536870913,Y=F!==T.lane;if(Y?(Ve&F)===F:(l&F)===F){F!==0&&F===ka&&(jd=!0),Z!==null&&(Z=Z.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var ge=t,xe=T;F=s;var et=a;switch(xe.tag){case 1:if(ge=xe.payload,typeof ge=="function"){ie=ge.call(et,ie,F);break e}ie=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=xe.payload,F=typeof ge=="function"?ge.call(et,ie,F):ge,F==null)break e;ie=E({},ie,F);break e;case 2:Ci=!0}}F=T.callback,F!==null&&(t.flags|=64,Y&&(t.flags|=8192),Y=d.callbacks,Y===null?d.callbacks=[F]:Y.push(F))}else Y={lane:F,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Z===null?(q=Z=Y,k=ie):Z=Z.next=Y,_|=F;if(T=T.next,T===null){if(T=d.shared.pending,T===null)break;Y=T,T=Y.next,Y.next=null,d.lastBaseUpdate=Y,d.shared.pending=null}}while(!0);Z===null&&(k=ie),d.baseState=k,d.firstBaseUpdate=q,d.lastBaseUpdate=Z,m===null&&(d.shared.lanes=0),Mi|=_,t.lanes=_,t.memoizedState=ie}}function Op(t,s){if(typeof t!="function")throw Error(r(191,t));t.call(s)}function Dp(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Op(a[t],s)}var Ma=M(null),iu=M(0);function Mp(t,s){t=ti,le(iu,t),le(Ma,s),ti=t|s.baseLanes}function Od(){le(iu,ti),le(Ma,Ma.current)}function Dd(){ti=iu.current,W(Ma),W(iu)}var vn=M(null),Mn=null;function ki(t){var s=t.alternate;le(mt,mt.current&1),le(vn,t),Mn===null&&(s===null||Ma.current!==null||s.memoizedState!==null)&&(Mn=t)}function Md(t){le(mt,mt.current),le(vn,t),Mn===null&&(Mn=t)}function Vp(t){t.tag===22?(le(mt,mt.current),le(vn,t),Mn===null&&(Mn=t)):ji()}function ji(){le(mt,mt.current),le(vn,vn.current)}function _n(t){W(vn),Mn===t&&(Mn=null),W(mt)}var mt=M(0);function ru(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Hf(a)||Gf(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var $s=0,Re=null,We=null,wt=null,au=!1,Va=!1,Pr=!1,ou=0,al=0,La=null,nE=0;function ut(){throw Error(r(321))}function Vd(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!pn(t[a],s[a]))return!1;return!0}function Ld(t,s,a,l,d,m){return $s=m,Re=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,D.H=t===null||t.memoizedState===null?_0:Wd,Pr=!1,m=a(l,d),Pr=!1,Va&&(m=Pp(s,a,l,d)),Lp(t),m}function Lp(t){D.H=cl;var s=We!==null&&We.next!==null;if($s=0,wt=We=Re=null,au=!1,al=0,La=null,s)throw Error(r(300));t===null||St||(t=t.dependencies,t!==null&&Jc(t)&&(St=!0))}function Pp(t,s,a,l){Re=t;var d=0;do{if(Va&&(La=null),al=0,Va=!1,25<=d)throw Error(r(301));if(d+=1,wt=We=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}D.H=b0,m=s(a,l)}while(Va);return m}function sE(){var t=D.H,s=t.useState()[0];return s=typeof s.then=="function"?ol(s):s,t=t.useState()[0],(We!==null?We.memoizedState:null)!==t&&(Re.flags|=1024),s}function Pd(){var t=ou!==0;return ou=0,t}function Ud(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function zd(t){if(au){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}au=!1}$s=0,wt=We=Re=null,Va=!1,al=ou=0,La=null}function nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Re.memoizedState=wt=t:wt=wt.next=t,wt}function gt(){if(We===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var s=wt===null?Re.memoizedState:wt.next;if(s!==null)wt=s,We=t;else{if(t===null)throw Re.alternate===null?Error(r(467)):Error(r(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},wt===null?Re.memoizedState=wt=t:wt=wt.next=t}return wt}function lu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ol(t){var s=al;return al+=1,La===null&&(La=[]),t=Cp(La,t,s),s=Re,(wt===null?s.memoizedState:wt.next)===null&&(s=s.alternate,D.H=s===null||s.memoizedState===null?_0:Wd),t}function cu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ol(t);if(t.$$typeof===ue)return Bt(t)}throw Error(r(438,String(t)))}function Bd(t){var s=null,a=Re.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=Re.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=lu(),Re.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),l=0;l<t;l++)a[l]=j;return s.index++,a}function Ys(t,s){return typeof s=="function"?s(t):s}function uu(t){var s=gt();return Hd(s,We,t)}function Hd(t,s,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var d=t.baseQueue,m=l.pending;if(m!==null){if(d!==null){var _=d.next;d.next=m.next,m.next=_}s.baseQueue=d=m,l.pending=null}if(m=t.baseState,d===null)t.memoizedState=m;else{s=d.next;var T=_=null,k=null,q=s,Z=!1;do{var ie=q.lane&-536870913;if(ie!==q.lane?(Ve&ie)===ie:($s&ie)===ie){var F=q.revertLane;if(F===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),ie===ka&&(Z=!0);else if(($s&F)===F){q=q.next,F===ka&&(Z=!0);continue}else ie={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},k===null?(T=k=ie,_=m):k=k.next=ie,Re.lanes|=F,Mi|=F;ie=q.action,Pr&&a(m,ie),m=q.hasEagerState?q.eagerState:a(m,ie)}else F={lane:ie,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},k===null?(T=k=F,_=m):k=k.next=F,Re.lanes|=ie,Mi|=ie;q=q.next}while(q!==null&&q!==s);if(k===null?_=m:k.next=T,!pn(m,t.memoizedState)&&(St=!0,Z&&(a=ja,a!==null)))throw a;t.memoizedState=m,t.baseState=_,t.baseQueue=k,l.lastRenderedState=m}return d===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Gd(t){var s=gt(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,d=a.pending,m=s.memoizedState;if(d!==null){a.pending=null;var _=d=d.next;do m=t(m,_.action),_=_.next;while(_!==d);pn(m,s.memoizedState)||(St=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,l]}function Up(t,s,a){var l=Re,d=gt(),m=Be;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=s();var _=!pn((We||d).memoizedState,a);if(_&&(d.memoizedState=a,St=!0),d=d.queue,Kd(Hp.bind(null,l,d,t),[t]),d.getSnapshot!==s||_||wt!==null&&wt.memoizedState.tag&1){if(l.flags|=2048,Pa(9,{destroy:void 0},Bp.bind(null,l,d,a,s),null),tt===null)throw Error(r(349));m||($s&127)!==0||zp(l,s,a)}return a}function zp(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=Re.updateQueue,s===null?(s=lu(),Re.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function Bp(t,s,a,l){s.value=a,s.getSnapshot=l,Gp(s)&&qp(t)}function Hp(t,s,a){return a(function(){Gp(s)&&qp(t)})}function Gp(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!pn(t,a)}catch{return!0}}function qp(t){var s=Ir(t,2);s!==null&&hn(s,t,2)}function qd(t){var s=nn();if(typeof t=="function"){var a=t;if(t=a(),Pr){Sn(!0);try{a()}finally{Sn(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:t},s}function Fp(t,s,a,l){return t.baseState=a,Hd(t,We,typeof l=="function"?l:Ys)}function iE(t,s,a,l,d){if(fu(t))throw Error(r(485));if(t=s.action,t!==null){var m={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};D.T!==null?a(!0):m.isTransition=!1,l(m),a=s.pending,a===null?(m.next=s.pending=m,Kp(s,m)):(m.next=a.next,s.pending=a.next=m)}}function Kp(t,s){var a=s.action,l=s.payload,d=t.state;if(s.isTransition){var m=D.T,_={};D.T=_;try{var T=a(d,l),k=D.S;k!==null&&k(_,T),$p(t,s,T)}catch(q){Fd(t,s,q)}finally{m!==null&&_.types!==null&&(m.types=_.types),D.T=m}}else try{m=a(d,l),$p(t,s,m)}catch(q){Fd(t,s,q)}}function $p(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Yp(t,s,l)},function(l){return Fd(t,s,l)}):Yp(t,s,a)}function Yp(t,s,a){s.status="fulfilled",s.value=a,Qp(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,Kp(t,a)))}function Fd(t,s,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,Qp(s),s=s.next;while(s!==l)}t.action=null}function Qp(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Xp(t,s){return s}function Jp(t,s){if(Be){var a=tt.formState;if(a!==null){e:{var l=Re;if(Be){if(st){t:{for(var d=st,m=Dn;d.nodeType!==8;){if(!m){d=null;break t}if(d=Vn(d.nextSibling),d===null){d=null;break t}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){st=Vn(d.nextSibling),l=d.data==="F!";break e}}Ai(l)}l=!1}l&&(s=a[0])}}return a=nn(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xp,lastRenderedState:s},a.queue=l,a=p0.bind(null,Re,l),l.dispatch=a,l=qd(!1),m=Jd.bind(null,Re,!1,l.queue),l=nn(),d={state:s,dispatch:null,action:t,pending:null},l.queue=d,a=iE.bind(null,Re,d,m,a),d.dispatch=a,l.memoizedState=t,[s,a,!1]}function Wp(t){var s=gt();return Zp(s,We,t)}function Zp(t,s,a){if(s=Hd(t,s,Xp)[0],t=uu(Ys)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=ol(s)}catch(_){throw _===Oa?eu:_}else l=s;s=gt();var d=s.queue,m=d.dispatch;return a!==s.memoizedState&&(Re.flags|=2048,Pa(9,{destroy:void 0},rE.bind(null,d,a),null)),[l,m,t]}function rE(t,s){t.action=s}function e0(t){var s=gt(),a=We;if(a!==null)return Zp(s,a,t);gt(),s=s.memoizedState,a=gt();var l=a.queue.dispatch;return a.memoizedState=t,[s,l,!1]}function Pa(t,s,a,l){return t={tag:t,create:a,deps:l,inst:s,next:null},s=Re.updateQueue,s===null&&(s=lu(),Re.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,s.lastEffect=t),t}function t0(){return gt().memoizedState}function hu(t,s,a,l){var d=nn();Re.flags|=t,d.memoizedState=Pa(1|s,{destroy:void 0},a,l===void 0?null:l)}function du(t,s,a,l){var d=gt();l=l===void 0?null:l;var m=d.memoizedState.inst;We!==null&&l!==null&&Vd(l,We.memoizedState.deps)?d.memoizedState=Pa(s,m,a,l):(Re.flags|=t,d.memoizedState=Pa(1|s,m,a,l))}function n0(t,s){hu(8390656,8,t,s)}function Kd(t,s){du(2048,8,t,s)}function aE(t){Re.flags|=4;var s=Re.updateQueue;if(s===null)s=lu(),Re.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function s0(t){var s=gt().memoizedState;return aE({ref:s,nextImpl:t}),function(){if((Ke&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function i0(t,s){return du(4,2,t,s)}function r0(t,s){return du(4,4,t,s)}function a0(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function o0(t,s,a){a=a!=null?a.concat([t]):null,du(4,4,a0.bind(null,s,t),a)}function $d(){}function l0(t,s){var a=gt();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&Vd(s,l[1])?l[0]:(a.memoizedState=[t,s],t)}function c0(t,s){var a=gt();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&Vd(s,l[1]))return l[0];if(l=t(),Pr){Sn(!0);try{t()}finally{Sn(!1)}}return a.memoizedState=[l,s],l}function Yd(t,s,a){return a===void 0||($s&1073741824)!==0&&(Ve&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=uy(),Re.lanes|=t,Mi|=t,a)}function u0(t,s,a,l){return pn(a,s)?a:Ma.current!==null?(t=Yd(t,a,l),pn(t,s)||(St=!0),t):($s&42)===0||($s&1073741824)!==0&&(Ve&261930)===0?(St=!0,t.memoizedState=a):(t=uy(),Re.lanes|=t,Mi|=t,s)}function h0(t,s,a,l,d){var m=ee.p;ee.p=m!==0&&8>m?m:8;var _=D.T,T={};D.T=T,Jd(t,!1,s,a);try{var k=d(),q=D.S;if(q!==null&&q(T,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var Z=tE(k,l);ll(t,s,Z,Tn(t))}else ll(t,s,l,Tn(t))}catch(ie){ll(t,s,{then:function(){},status:"rejected",reason:ie},Tn())}finally{ee.p=m,_!==null&&T.types!==null&&(_.types=T.types),D.T=_}}function oE(){}function Qd(t,s,a,l){if(t.tag!==5)throw Error(r(476));var d=d0(t).queue;h0(t,d,s,de,a===null?oE:function(){return f0(t),a(l)})}function d0(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:de},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function f0(t){var s=d0(t);s.next===null&&(s=t.alternate.memoizedState),ll(t,s.next.queue,{},Tn())}function Xd(){return Bt(Sl)}function m0(){return gt().memoizedState}function g0(){return gt().memoizedState}function lE(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=Tn();t=Ii(a);var l=Ri(s,t,a);l!==null&&(hn(l,s,a),sl(l,s,a)),s={cache:Sd()},t.payload=s;return}s=s.return}}function cE(t,s,a){var l=Tn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},fu(t)?y0(s,a):(a=md(t,s,a,l),a!==null&&(hn(a,t,l),v0(a,s,l)))}function p0(t,s,a){var l=Tn();ll(t,s,a,l)}function ll(t,s,a,l){var d={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(fu(t))y0(s,d);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var _=s.lastRenderedState,T=m(_,a);if(d.hasEagerState=!0,d.eagerState=T,pn(T,_))return $c(t,s,d,0),tt===null&&Kc(),!1}catch{}finally{}if(a=md(t,s,d,l),a!==null)return hn(a,t,l),v0(a,s,l),!0}return!1}function Jd(t,s,a,l){if(l={lane:2,revertLane:Rf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},fu(t)){if(s)throw Error(r(479))}else s=md(t,a,l,2),s!==null&&hn(s,t,2)}function fu(t){var s=t.alternate;return t===Re||s!==null&&s===Re}function y0(t,s){Va=au=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function v0(t,s,a){if((a&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,Ro(t,a)}}var cl={readContext:Bt,use:cu,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useLayoutEffect:ut,useInsertionEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useSyncExternalStore:ut,useId:ut,useHostTransitionStatus:ut,useFormState:ut,useActionState:ut,useOptimistic:ut,useMemoCache:ut,useCacheRefresh:ut};cl.useEffectEvent=ut;var _0={readContext:Bt,use:cu,useCallback:function(t,s){return nn().memoizedState=[t,s===void 0?null:s],t},useContext:Bt,useEffect:n0,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,hu(4194308,4,a0.bind(null,s,t),a)},useLayoutEffect:function(t,s){return hu(4194308,4,t,s)},useInsertionEffect:function(t,s){hu(4,2,t,s)},useMemo:function(t,s){var a=nn();s=s===void 0?null:s;var l=t();if(Pr){Sn(!0);try{t()}finally{Sn(!1)}}return a.memoizedState=[l,s],l},useReducer:function(t,s,a){var l=nn();if(a!==void 0){var d=a(s);if(Pr){Sn(!0);try{a(s)}finally{Sn(!1)}}}else d=s;return l.memoizedState=l.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},l.queue=t,t=t.dispatch=cE.bind(null,Re,t),[l.memoizedState,t]},useRef:function(t){var s=nn();return t={current:t},s.memoizedState=t},useState:function(t){t=qd(t);var s=t.queue,a=p0.bind(null,Re,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:$d,useDeferredValue:function(t,s){var a=nn();return Yd(a,t,s)},useTransition:function(){var t=qd(!1);return t=h0.bind(null,Re,t.queue,!0,!1),nn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var l=Re,d=nn();if(Be){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),tt===null)throw Error(r(349));(Ve&127)!==0||zp(l,s,a)}d.memoizedState=a;var m={value:a,getSnapshot:s};return d.queue=m,n0(Hp.bind(null,l,m,t),[t]),l.flags|=2048,Pa(9,{destroy:void 0},Bp.bind(null,l,m,a,s),null),a},useId:function(){var t=nn(),s=tt.identifierPrefix;if(Be){var a=Ss,l=ws;a=(l&~(1<<32-dt(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=ou++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=nE++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Xd,useFormState:Jp,useActionState:Jp,useOptimistic:function(t){var s=nn();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Jd.bind(null,Re,!0,a),a.dispatch=s,[t,s]},useMemoCache:Bd,useCacheRefresh:function(){return nn().memoizedState=lE.bind(null,Re)},useEffectEvent:function(t){var s=nn(),a={impl:t};return s.memoizedState=a,function(){if((Ke&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Wd={readContext:Bt,use:cu,useCallback:l0,useContext:Bt,useEffect:Kd,useImperativeHandle:o0,useInsertionEffect:i0,useLayoutEffect:r0,useMemo:c0,useReducer:uu,useRef:t0,useState:function(){return uu(Ys)},useDebugValue:$d,useDeferredValue:function(t,s){var a=gt();return u0(a,We.memoizedState,t,s)},useTransition:function(){var t=uu(Ys)[0],s=gt().memoizedState;return[typeof t=="boolean"?t:ol(t),s]},useSyncExternalStore:Up,useId:m0,useHostTransitionStatus:Xd,useFormState:Wp,useActionState:Wp,useOptimistic:function(t,s){var a=gt();return Fp(a,We,t,s)},useMemoCache:Bd,useCacheRefresh:g0};Wd.useEffectEvent=s0;var b0={readContext:Bt,use:cu,useCallback:l0,useContext:Bt,useEffect:Kd,useImperativeHandle:o0,useInsertionEffect:i0,useLayoutEffect:r0,useMemo:c0,useReducer:Gd,useRef:t0,useState:function(){return Gd(Ys)},useDebugValue:$d,useDeferredValue:function(t,s){var a=gt();return We===null?Yd(a,t,s):u0(a,We.memoizedState,t,s)},useTransition:function(){var t=Gd(Ys)[0],s=gt().memoizedState;return[typeof t=="boolean"?t:ol(t),s]},useSyncExternalStore:Up,useId:m0,useHostTransitionStatus:Xd,useFormState:e0,useActionState:e0,useOptimistic:function(t,s){var a=gt();return We!==null?Fp(a,We,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Bd,useCacheRefresh:g0};b0.useEffectEvent=s0;function Zd(t,s,a,l){s=t.memoizedState,a=a(l,s),a=a==null?s:E({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var ef={enqueueSetState:function(t,s,a){t=t._reactInternals;var l=Tn(),d=Ii(l);d.payload=s,a!=null&&(d.callback=a),s=Ri(t,d,l),s!==null&&(hn(s,t,l),sl(s,t,l))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var l=Tn(),d=Ii(l);d.tag=1,d.payload=s,a!=null&&(d.callback=a),s=Ri(t,d,l),s!==null&&(hn(s,t,l),sl(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=Tn(),l=Ii(a);l.tag=2,s!=null&&(l.callback=s),s=Ri(t,l,a),s!==null&&(hn(s,t,a),sl(s,t,a))}};function x0(t,s,a,l,d,m,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,_):s.prototype&&s.prototype.isPureReactComponent?!Qo(a,l)||!Qo(d,m):!0}function T0(t,s,a,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==t&&ef.enqueueReplaceState(s,s.state,null)}function Ur(t,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(t=t.defaultProps){a===s&&(a=E({},a));for(var d in t)a[d]===void 0&&(a[d]=t[d])}return a}function E0(t){Fc(t)}function w0(t){console.error(t)}function S0(t){Fc(t)}function mu(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function A0(t,s,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function tf(t,s,a){return a=Ii(a),a.tag=3,a.payload={element:null},a.callback=function(){mu(t,s)},a}function N0(t){return t=Ii(t),t.tag=3,t}function C0(t,s,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var m=l.value;t.payload=function(){return d(m)},t.callback=function(){A0(s,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){A0(s,a,l),typeof d!="function"&&(Vi===null?Vi=new Set([this]):Vi.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function uE(t,s,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&Ra(s,a,d,!0),a=vn.current,a!==null){switch(a.tag){case 31:case 13:return Mn===null?Au():a.alternate===null&&ht===0&&(ht=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===tu?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),Nf(t,l,d)),!1;case 22:return a.flags|=65536,l===tu?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),Nf(t,l,d)),!1}throw Error(r(435,a.tag))}return Nf(t,l,d),Au(),!1}if(Be)return s=vn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,l!==bd&&(t=Error(r(422),{cause:l}),Wo(kn(t,a)))):(l!==bd&&(s=Error(r(423),{cause:l}),Wo(kn(s,a))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,l=kn(l,a),d=tf(t.stateNode,l,d),kd(t,d),ht!==4&&(ht=2)),!1;var m=Error(r(520),{cause:l});if(m=kn(m,a),yl===null?yl=[m]:yl.push(m),ht!==4&&(ht=2),s===null)return!0;l=kn(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=d&-d,a.lanes|=t,t=tf(a.stateNode,l,t),kd(a,t),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Vi===null||!Vi.has(m))))return a.flags|=65536,d&=-d,a.lanes|=d,d=N0(d),C0(d,t,a,l),kd(a,d),!1}a=a.return}while(a!==null);return!1}var nf=Error(r(461)),St=!1;function Ht(t,s,a,l){s.child=t===null?jp(s,null,a,l):Lr(s,t.child,a,l)}function I0(t,s,a,l,d){a=a.render;var m=s.ref;if("ref"in l){var _={};for(var T in l)T!=="ref"&&(_[T]=l[T])}else _=l;return Or(s),l=Ld(t,s,a,_,m,d),T=Pd(),t!==null&&!St?(Ud(t,s,d),Qs(t,s,d)):(Be&&T&&vd(s),s.flags|=1,Ht(t,s,l,d),s.child)}function R0(t,s,a,l,d){if(t===null){var m=a.type;return typeof m=="function"&&!gd(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,k0(t,s,m,l,d)):(t=Qc(a.type,null,l,s,s.mode,d),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!hf(t,d)){var _=m.memoizedProps;if(a=a.compare,a=a!==null?a:Qo,a(_,l)&&t.ref===s.ref)return Qs(t,s,d)}return s.flags|=1,t=Gs(m,l),t.ref=s.ref,t.return=s,s.child=t}function k0(t,s,a,l,d){if(t!==null){var m=t.memoizedProps;if(Qo(m,l)&&t.ref===s.ref)if(St=!1,s.pendingProps=l=m,hf(t,d))(t.flags&131072)!==0&&(St=!0);else return s.lanes=t.lanes,Qs(t,s,d)}return sf(t,s,a,l,d)}function j0(t,s,a,l){var d=l.children,m=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=s.child=t.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~m}else l=0,s.child=null;return O0(t,s,m,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Zc(s,m!==null?m.cachePool:null),m!==null?Mp(s,m):Od(),Vp(s);else return l=s.lanes=536870912,O0(t,s,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(Zc(s,m.cachePool),Mp(s,m),ji(),s.memoizedState=null):(t!==null&&Zc(s,null),Od(),ji());return Ht(t,s,d,a),s.child}function ul(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function O0(t,s,a,l,d){var m=Nd();return m=m===null?null:{parent:Et._currentValue,pool:m},s.memoizedState={baseLanes:a,cachePool:m},t!==null&&Zc(s,null),Od(),Vp(s),t!==null&&Ra(t,s,l,!0),s.childLanes=d,null}function gu(t,s){return s=yu({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function D0(t,s,a){return Lr(s,t.child,null,a),t=gu(s,s.pendingProps),t.flags|=2,_n(s),s.memoizedState=null,t}function hE(t,s,a){var l=s.pendingProps,d=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(Be){if(l.mode==="hidden")return t=gu(s,l),s.lanes=536870912,ul(null,t);if(Md(s),(t=st)?(t=Ky(t,Dn),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:wi!==null?{id:ws,overflow:Ss}:null,retryLane:536870912,hydrationErrors:null},a=yp(t),a.return=s,s.child=a,zt=s,st=null)):t=null,t===null)throw Ai(s);return s.lanes=536870912,null}return gu(s,l)}var m=t.memoizedState;if(m!==null){var _=m.dehydrated;if(Md(s),d)if(s.flags&256)s.flags&=-257,s=D0(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(r(558));else if(St||Ra(t,s,a,!1),d=(a&t.childLanes)!==0,St||d){if(l=tt,l!==null&&(_=ko(l,a),_!==0&&_!==m.retryLane))throw m.retryLane=_,Ir(t,_),hn(l,t,_),nf;Au(),s=D0(t,s,a)}else t=m.treeContext,st=Vn(_.nextSibling),zt=s,Be=!0,Si=null,Dn=!1,t!==null&&bp(s,t),s=gu(s,l),s.flags|=4096;return s}return t=Gs(t.child,{mode:l.mode,children:l.children}),t.ref=s.ref,s.child=t,t.return=s,t}function pu(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function sf(t,s,a,l,d){return Or(s),a=Ld(t,s,a,l,void 0,d),l=Pd(),t!==null&&!St?(Ud(t,s,d),Qs(t,s,d)):(Be&&l&&vd(s),s.flags|=1,Ht(t,s,a,d),s.child)}function M0(t,s,a,l,d,m){return Or(s),s.updateQueue=null,a=Pp(s,l,a,d),Lp(t),l=Pd(),t!==null&&!St?(Ud(t,s,m),Qs(t,s,m)):(Be&&l&&vd(s),s.flags|=1,Ht(t,s,a,m),s.child)}function V0(t,s,a,l,d){if(Or(s),s.stateNode===null){var m=Aa,_=a.contextType;typeof _=="object"&&_!==null&&(m=Bt(_)),m=new a(l,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=ef,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=l,m.state=s.memoizedState,m.refs={},Id(s),_=a.contextType,m.context=typeof _=="object"&&_!==null?Bt(_):Aa,m.state=s.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Zd(s,a,_,l),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&ef.enqueueReplaceState(m,m.state,null),rl(s,l,m,d),il(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){m=s.stateNode;var T=s.memoizedProps,k=Ur(a,T);m.props=k;var q=m.context,Z=a.contextType;_=Aa,typeof Z=="object"&&Z!==null&&(_=Bt(Z));var ie=a.getDerivedStateFromProps;Z=typeof ie=="function"||typeof m.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,Z||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T||q!==_)&&T0(s,m,l,_),Ci=!1;var F=s.memoizedState;m.state=F,rl(s,l,m,d),il(),q=s.memoizedState,T||F!==q||Ci?(typeof ie=="function"&&(Zd(s,a,ie,l),q=s.memoizedState),(k=Ci||x0(s,a,k,l,F,q,_))?(Z||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=q),m.props=l,m.state=q,m.context=_,l=k):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{m=s.stateNode,Rd(t,s),_=s.memoizedProps,Z=Ur(a,_),m.props=Z,ie=s.pendingProps,F=m.context,q=a.contextType,k=Aa,typeof q=="object"&&q!==null&&(k=Bt(q)),T=a.getDerivedStateFromProps,(q=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==ie||F!==k)&&T0(s,m,l,k),Ci=!1,F=s.memoizedState,m.state=F,rl(s,l,m,d),il();var Y=s.memoizedState;_!==ie||F!==Y||Ci||t!==null&&t.dependencies!==null&&Jc(t.dependencies)?(typeof T=="function"&&(Zd(s,a,T,l),Y=s.memoizedState),(Z=Ci||x0(s,a,Z,l,F,Y,k)||t!==null&&t.dependencies!==null&&Jc(t.dependencies))?(q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,Y,k),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,Y,k)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&F===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&F===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=Y),m.props=l,m.state=Y,m.context=k,l=Z):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&F===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&F===t.memoizedState||(s.flags|=1024),l=!1)}return m=l,pu(t,s),l=(s.flags&128)!==0,m||l?(m=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&l?(s.child=Lr(s,t.child,null,d),s.child=Lr(s,null,a,d)):Ht(t,s,a,d),s.memoizedState=m.state,t=s.child):t=Qs(t,s,d),t}function L0(t,s,a,l){return kr(),s.flags|=256,Ht(t,s,a,l),s.child}var rf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function af(t){return{baseLanes:t,cachePool:Ap()}}function of(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=xn),t}function P0(t,s,a){var l=s.pendingProps,d=!1,m=(s.flags&128)!==0,_;if((_=m)||(_=t!==null&&t.memoizedState===null?!1:(mt.current&2)!==0),_&&(d=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,t===null){if(Be){if(d?ki(s):ji(),(t=st)?(t=Ky(t,Dn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:wi!==null?{id:ws,overflow:Ss}:null,retryLane:536870912,hydrationErrors:null},a=yp(t),a.return=s,s.child=a,zt=s,st=null)):t=null,t===null)throw Ai(s);return Gf(t)?s.lanes=32:s.lanes=536870912,null}var T=l.children;return l=l.fallback,d?(ji(),d=s.mode,T=yu({mode:"hidden",children:T},d),l=Rr(l,d,a,null),T.return=s,l.return=s,T.sibling=l,s.child=T,l=s.child,l.memoizedState=af(a),l.childLanes=of(t,_,a),s.memoizedState=rf,ul(null,l)):(ki(s),lf(s,T))}var k=t.memoizedState;if(k!==null&&(T=k.dehydrated,T!==null)){if(m)s.flags&256?(ki(s),s.flags&=-257,s=cf(t,s,a)):s.memoizedState!==null?(ji(),s.child=t.child,s.flags|=128,s=null):(ji(),T=l.fallback,d=s.mode,l=yu({mode:"visible",children:l.children},d),T=Rr(T,d,a,null),T.flags|=2,l.return=s,T.return=s,l.sibling=T,s.child=l,Lr(s,t.child,null,a),l=s.child,l.memoizedState=af(a),l.childLanes=of(t,_,a),s.memoizedState=rf,s=ul(null,l));else if(ki(s),Gf(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var q=_.dgst;_=q,l=Error(r(419)),l.stack="",l.digest=_,Wo({value:l,source:null,stack:null}),s=cf(t,s,a)}else if(St||Ra(t,s,a,!1),_=(a&t.childLanes)!==0,St||_){if(_=tt,_!==null&&(l=ko(_,a),l!==0&&l!==k.retryLane))throw k.retryLane=l,Ir(t,l),hn(_,t,l),nf;Hf(T)||Au(),s=cf(t,s,a)}else Hf(T)?(s.flags|=192,s.child=t.child,s=null):(t=k.treeContext,st=Vn(T.nextSibling),zt=s,Be=!0,Si=null,Dn=!1,t!==null&&bp(s,t),s=lf(s,l.children),s.flags|=4096);return s}return d?(ji(),T=l.fallback,d=s.mode,k=t.child,q=k.sibling,l=Gs(k,{mode:"hidden",children:l.children}),l.subtreeFlags=k.subtreeFlags&65011712,q!==null?T=Gs(q,T):(T=Rr(T,d,a,null),T.flags|=2),T.return=s,l.return=s,l.sibling=T,s.child=l,ul(null,l),l=s.child,T=t.child.memoizedState,T===null?T=af(a):(d=T.cachePool,d!==null?(k=Et._currentValue,d=d.parent!==k?{parent:k,pool:k}:d):d=Ap(),T={baseLanes:T.baseLanes|a,cachePool:d}),l.memoizedState=T,l.childLanes=of(t,_,a),s.memoizedState=rf,ul(t.child,l)):(ki(s),a=t.child,t=a.sibling,a=Gs(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,t!==null&&(_=s.deletions,_===null?(s.deletions=[t],s.flags|=16):_.push(t)),s.child=a,s.memoizedState=null,a)}function lf(t,s){return s=yu({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function yu(t,s){return t=yn(22,t,null,s),t.lanes=0,t}function cf(t,s,a){return Lr(s,t.child,null,a),t=lf(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function U0(t,s,a){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),Ed(t.return,s,a)}function uf(t,s,a,l,d,m){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d,treeForkCount:m}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=d,_.treeForkCount=m)}function z0(t,s,a){var l=s.pendingProps,d=l.revealOrder,m=l.tail;l=l.children;var _=mt.current,T=(_&2)!==0;if(T?(_=_&1|2,s.flags|=128):_&=1,le(mt,_),Ht(t,s,l,a),l=Be?Jo:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&U0(t,a,s);else if(t.tag===19)U0(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(d){case"forwards":for(a=s.child,d=null;a!==null;)t=a.alternate,t!==null&&ru(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),uf(s,!1,d,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(t=d.alternate,t!==null&&ru(t)===null){s.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}uf(s,!0,a,null,m,l);break;case"together":uf(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function Qs(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),Mi|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(Ra(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(r(153));if(s.child!==null){for(t=s.child,a=Gs(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=Gs(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function hf(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Jc(t)))}function dE(t,s,a){switch(s.tag){case 3:yt(s,s.stateNode.containerInfo),Ni(s,Et,t.memoizedState.cache),kr();break;case 27:case 5:wn(s);break;case 4:yt(s,s.stateNode.containerInfo);break;case 10:Ni(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Md(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(ki(s),s.flags|=128,null):(a&s.child.childLanes)!==0?P0(t,s,a):(ki(s),t=Qs(t,s,a),t!==null?t.sibling:null);ki(s);break;case 19:var d=(t.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(Ra(t,s,a,!1),l=(a&s.childLanes)!==0),d){if(l)return z0(t,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),le(mt,mt.current),l)break;return null;case 22:return s.lanes=0,j0(t,s,a,s.pendingProps);case 24:Ni(s,Et,t.memoizedState.cache)}return Qs(t,s,a)}function B0(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)St=!0;else{if(!hf(t,a)&&(s.flags&128)===0)return St=!1,dE(t,s,a);St=(t.flags&131072)!==0}else St=!1,Be&&(s.flags&1048576)!==0&&_p(s,Jo,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(t=Mr(s.elementType),s.type=t,typeof t=="function")gd(t)?(l=Ur(t,l),s.tag=1,s=V0(null,s,t,l,a)):(s.tag=0,s=sf(null,s,t,l,a));else{if(t!=null){var d=t.$$typeof;if(d===U){s.tag=11,s=I0(null,s,t,l,a);break e}else if(d===C){s.tag=14,s=R0(null,s,t,l,a);break e}}throw s=Q(t)||t,Error(r(306,s,""))}}return s;case 0:return sf(t,s,s.type,s.pendingProps,a);case 1:return l=s.type,d=Ur(l,s.pendingProps),V0(t,s,l,d,a);case 3:e:{if(yt(s,s.stateNode.containerInfo),t===null)throw Error(r(387));l=s.pendingProps;var m=s.memoizedState;d=m.element,Rd(t,s),rl(s,l,null,a);var _=s.memoizedState;if(l=_.cache,Ni(s,Et,l),l!==m.cache&&wd(s,[Et],a,!0),il(),l=_.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=L0(t,s,l,a);break e}else if(l!==d){d=kn(Error(r(424)),s),Wo(d),s=L0(t,s,l,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(st=Vn(t.firstChild),zt=s,Be=!0,Si=null,Dn=!0,a=jp(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(kr(),l===d){s=Qs(t,s,a);break e}Ht(t,s,l,a)}s=s.child}return s;case 26:return pu(t,s),t===null?(a=Wy(s.type,null,s.pendingProps,null))?s.memoizedState=a:Be||(a=s.type,t=s.pendingProps,l=Ou(Se.current).createElement(a),l[bt]=s,l[Ot]=t,Gt(l,a,t),xt(l),s.stateNode=l):s.memoizedState=Wy(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return wn(s),t===null&&Be&&(l=s.stateNode=Qy(s.type,s.pendingProps,Se.current),zt=s,Dn=!0,d=st,zi(s.type)?(qf=d,st=Vn(l.firstChild)):st=d),Ht(t,s,s.pendingProps.children,a),pu(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Be&&((d=l=st)&&(l=HE(l,s.type,s.pendingProps,Dn),l!==null?(s.stateNode=l,zt=s,st=Vn(l.firstChild),Dn=!1,d=!0):d=!1),d||Ai(s)),wn(s),d=s.type,m=s.pendingProps,_=t!==null?t.memoizedProps:null,l=m.children,Uf(d,m)?l=null:_!==null&&Uf(d,_)&&(s.flags|=32),s.memoizedState!==null&&(d=Ld(t,s,sE,null,null,a),Sl._currentValue=d),pu(t,s),Ht(t,s,l,a),s.child;case 6:return t===null&&Be&&((t=a=st)&&(a=GE(a,s.pendingProps,Dn),a!==null?(s.stateNode=a,zt=s,st=null,t=!0):t=!1),t||Ai(s)),null;case 13:return P0(t,s,a);case 4:return yt(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=Lr(s,null,l,a):Ht(t,s,l,a),s.child;case 11:return I0(t,s,s.type,s.pendingProps,a);case 7:return Ht(t,s,s.pendingProps,a),s.child;case 8:return Ht(t,s,s.pendingProps.children,a),s.child;case 12:return Ht(t,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,Ni(s,s.type,l.value),Ht(t,s,l.children,a),s.child;case 9:return d=s.type._context,l=s.pendingProps.children,Or(s),d=Bt(d),l=l(d),s.flags|=1,Ht(t,s,l,a),s.child;case 14:return R0(t,s,s.type,s.pendingProps,a);case 15:return k0(t,s,s.type,s.pendingProps,a);case 19:return z0(t,s,a);case 31:return hE(t,s,a);case 22:return j0(t,s,a,s.pendingProps);case 24:return Or(s),l=Bt(Et),t===null?(d=Nd(),d===null&&(d=tt,m=Sd(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=a),d=m),s.memoizedState={parent:l,cache:d},Id(s),Ni(s,Et,d)):((t.lanes&a)!==0&&(Rd(t,s),rl(s,null,null,a),il()),d=t.memoizedState,m=s.memoizedState,d.parent!==l?(d={parent:l,cache:l},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),Ni(s,Et,l)):(l=m.cache,Ni(s,Et,l),l!==d.cache&&wd(s,[Et],a,!0))),Ht(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Xs(t){t.flags|=4}function df(t,s,a,l,d){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(d&335544128)===d)if(t.stateNode.complete)t.flags|=8192;else if(my())t.flags|=8192;else throw Vr=tu,Cd}else t.flags&=-16777217}function H0(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!sv(s))if(my())t.flags|=8192;else throw Vr=tu,Cd}function vu(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?wc():536870912,t.lanes|=s,Ha|=s)}function hl(t,s){if(!Be)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function it(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(s)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=l,t.childLanes=a,s}function fE(t,s,a){var l=s.pendingProps;switch(_d(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(s),null;case 1:return it(s),null;case 3:return a=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Ks(Et),nt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ia(s)?Xs(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,xd())),it(s),null;case 26:var d=s.type,m=s.memoizedState;return t===null?(Xs(s),m!==null?(it(s),H0(s,m)):(it(s),df(s,d,null,l,a))):m?m!==t.memoizedState?(Xs(s),it(s),H0(s,m)):(it(s),s.flags&=-16777217):(t=t.memoizedProps,t!==l&&Xs(s),it(s),df(s,d,t,l,a)),null;case 27:if(oa(s),a=Se.current,d=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&Xs(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return it(s),null}t=fe.current,Ia(s)?xp(s):(t=Qy(d,l,a),s.stateNode=t,Xs(s))}return it(s),null;case 5:if(oa(s),d=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&Xs(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return it(s),null}if(m=fe.current,Ia(s))xp(s);else{var _=Ou(Se.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?_.createElement(d,{is:l.is}):_.createElement(d)}}m[bt]=s,m[Ot]=l;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=m;e:switch(Gt(m,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Xs(s)}}return it(s),df(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&Xs(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(t=Se.current,Ia(s)){if(t=s.stateNode,a=s.memoizedProps,l=null,d=zt,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}t[bt]=s,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Py(t.nodeValue,a)),t||Ai(s,!0)}else t=Ou(t).createTextNode(l),t[bt]=s,s.stateNode=t}return it(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(l=Ia(s),a!==null){if(t===null){if(!l)throw Error(r(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[bt]=s}else kr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;it(s),t=!1}else a=xd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(_n(s),s):(_n(s),null);if((s.flags&128)!==0)throw Error(r(558))}return it(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=Ia(s),l!==null&&l.dehydrated!==null){if(t===null){if(!d)throw Error(r(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[bt]=s}else kr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;it(s),d=!1}else d=xd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(_n(s),s):(_n(s),null)}return _n(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=s.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==d&&(l.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),vu(s,s.updateQueue),it(s),null);case 4:return nt(),t===null&&Df(s.stateNode.containerInfo),it(s),null;case 10:return Ks(s.type),it(s),null;case 19:if(W(mt),l=s.memoizedState,l===null)return it(s),null;if(d=(s.flags&128)!==0,m=l.rendering,m===null)if(d)hl(l,!1);else{if(ht!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=ru(t),m!==null){for(s.flags|=128,hl(l,!1),t=m.updateQueue,s.updateQueue=t,vu(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)pp(a,t),a=a.sibling;return le(mt,mt.current&1|2),Be&&qs(s,l.treeForkCount),s.child}t=t.sibling}l.tail!==null&&en()>Eu&&(s.flags|=128,d=!0,hl(l,!1),s.lanes=4194304)}else{if(!d)if(t=ru(m),t!==null){if(s.flags|=128,d=!0,t=t.updateQueue,s.updateQueue=t,vu(s,t),hl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!Be)return it(s),null}else 2*en()-l.renderingStartTime>Eu&&a!==536870912&&(s.flags|=128,d=!0,hl(l,!1),s.lanes=4194304);l.isBackwards?(m.sibling=s.child,s.child=m):(t=l.last,t!==null?t.sibling=m:s.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=en(),t.sibling=null,a=mt.current,le(mt,d?a&1|2:a&1),Be&&qs(s,l.treeForkCount),t):(it(s),null);case 22:case 23:return _n(s),Dd(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(it(s),s.subtreeFlags&6&&(s.flags|=8192)):it(s),a=s.updateQueue,a!==null&&vu(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),t!==null&&W(Dr),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Ks(Et),it(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function mE(t,s){switch(_d(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Ks(Et),nt(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return oa(s),null;case 31:if(s.memoizedState!==null){if(_n(s),s.alternate===null)throw Error(r(340));kr()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(_n(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(r(340));kr()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return W(mt),null;case 4:return nt(),null;case 10:return Ks(s.type),null;case 22:case 23:return _n(s),Dd(),t!==null&&W(Dr),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return Ks(Et),null;case 25:return null;default:return null}}function G0(t,s){switch(_d(s),s.tag){case 3:Ks(Et),nt();break;case 26:case 27:case 5:oa(s);break;case 4:nt();break;case 31:s.memoizedState!==null&&_n(s);break;case 13:_n(s);break;case 19:W(mt);break;case 10:Ks(s.type);break;case 22:case 23:_n(s),Dd(),t!==null&&W(Dr);break;case 24:Ks(Et)}}function dl(t,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&t)===t){l=void 0;var m=a.create,_=a.inst;l=m(),_.destroy=l}a=a.next}while(a!==d)}}catch(T){Xe(s,s.return,T)}}function Oi(t,s,a){try{var l=s.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var m=d.next;l=m;do{if((l.tag&t)===t){var _=l.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,d=s;var k=a,q=T;try{q()}catch(Z){Xe(d,k,Z)}}}l=l.next}while(l!==m)}}catch(Z){Xe(s,s.return,Z)}}function q0(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{Dp(s,a)}catch(l){Xe(t,t.return,l)}}}function F0(t,s,a){a.props=Ur(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Xe(t,s,l)}}function fl(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(d){Xe(t,s,d)}}function As(t,s){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){Xe(t,s,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){Xe(t,s,d)}else a.current=null}function K0(t){var s=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){Xe(t,t.return,d)}}function ff(t,s,a){try{var l=t.stateNode;VE(l,t.type,a,s),l[Ot]=s}catch(d){Xe(t,t.return,d)}}function $0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&zi(t.type)||t.tag===4}function mf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&zi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gf(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Kn));else if(l!==4&&(l===27&&zi(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(gf(t,s,a),t=t.sibling;t!==null;)gf(t,s,a),t=t.sibling}function _u(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(l!==4&&(l===27&&zi(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(_u(t,s,a),t=t.sibling;t!==null;)_u(t,s,a),t=t.sibling}function Y0(t){var s=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);Gt(s,l,a),s[bt]=t,s[Ot]=a}catch(m){Xe(t,t.return,m)}}var Js=!1,At=!1,pf=!1,Q0=typeof WeakSet=="function"?WeakSet:Set,Mt=null;function gE(t,s){if(t=t.containerInfo,Lf=zu,t=op(t),ld(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var _=0,T=-1,k=-1,q=0,Z=0,ie=t,F=null;t:for(;;){for(var Y;ie!==a||d!==0&&ie.nodeType!==3||(T=_+d),ie!==m||l!==0&&ie.nodeType!==3||(k=_+l),ie.nodeType===3&&(_+=ie.nodeValue.length),(Y=ie.firstChild)!==null;)F=ie,ie=Y;for(;;){if(ie===t)break t;if(F===a&&++q===d&&(T=_),F===m&&++Z===l&&(k=_),(Y=ie.nextSibling)!==null)break;ie=F,F=ie.parentNode}ie=Y}a=T===-1||k===-1?null:{start:T,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(Pf={focusedElem:t,selectionRange:a},zu=!1,Mt=s;Mt!==null;)if(s=Mt,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Mt=t;else for(;Mt!==null;){switch(s=Mt,m=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)d=t[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=s,d=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var ge=Ur(a.type,d);t=l.getSnapshotBeforeUpdate(ge,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(xe){Xe(a,a.return,xe)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)Bf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Bf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=s.sibling,t!==null){t.return=s.return,Mt=t;break}Mt=s.return}}function X0(t,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Zs(t,a),l&4&&dl(5,a);break;case 1:if(Zs(t,a),l&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(_){Xe(a,a.return,_)}else{var d=Ur(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(d,s,t.__reactInternalSnapshotBeforeUpdate)}catch(_){Xe(a,a.return,_)}}l&64&&q0(a),l&512&&fl(a,a.return);break;case 3:if(Zs(t,a),l&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Dp(t,s)}catch(_){Xe(a,a.return,_)}}break;case 27:s===null&&l&4&&Y0(a);case 26:case 5:Zs(t,a),s===null&&l&4&&K0(a),l&512&&fl(a,a.return);break;case 12:Zs(t,a);break;case 31:Zs(t,a),l&4&&Z0(t,a);break;case 13:Zs(t,a),l&4&&ey(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=wE.bind(null,a),qE(t,a))));break;case 22:if(l=a.memoizedState!==null||Js,!l){s=s!==null&&s.memoizedState!==null||At,d=Js;var m=At;Js=l,(At=s)&&!m?ei(t,a,(a.subtreeFlags&8772)!==0):Zs(t,a),Js=d,At=m}break;case 30:break;default:Zs(t,a)}}function J0(t){var s=t.alternate;s!==null&&(t.alternate=null,J0(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&da(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ot=null,on=!1;function Ws(t,s,a){for(a=a.child;a!==null;)W0(t,s,a),a=a.sibling}function W0(t,s,a){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(Hn,a)}catch{}switch(a.tag){case 26:At||As(a,s),Ws(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:At||As(a,s);var l=ot,d=on;zi(a.type)&&(ot=a.stateNode,on=!1),Ws(t,s,a),Tl(a.stateNode),ot=l,on=d;break;case 5:At||As(a,s);case 6:if(l=ot,d=on,ot=null,Ws(t,s,a),ot=l,on=d,ot!==null)if(on)try{(ot.nodeType===9?ot.body:ot.nodeName==="HTML"?ot.ownerDocument.body:ot).removeChild(a.stateNode)}catch(m){Xe(a,s,m)}else try{ot.removeChild(a.stateNode)}catch(m){Xe(a,s,m)}break;case 18:ot!==null&&(on?(t=ot,qy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Xa(t)):qy(ot,a.stateNode));break;case 4:l=ot,d=on,ot=a.stateNode.containerInfo,on=!0,Ws(t,s,a),ot=l,on=d;break;case 0:case 11:case 14:case 15:Oi(2,a,s),At||Oi(4,a,s),Ws(t,s,a);break;case 1:At||(As(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&F0(a,s,l)),Ws(t,s,a);break;case 21:Ws(t,s,a);break;case 22:At=(l=At)||a.memoizedState!==null,Ws(t,s,a),At=l;break;default:Ws(t,s,a)}}function Z0(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Xa(t)}catch(a){Xe(s,s.return,a)}}}function ey(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Xa(t)}catch(a){Xe(s,s.return,a)}}function pE(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new Q0),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new Q0),s;default:throw Error(r(435,t.tag))}}function bu(t,s){var a=pE(t);s.forEach(function(l){if(!a.has(l)){a.add(l);var d=SE.bind(null,t,l);l.then(d,d)}})}function ln(t,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],m=t,_=s,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(zi(T.type)){ot=T.stateNode,on=!1;break e}break;case 5:ot=T.stateNode,on=!1;break e;case 3:case 4:ot=T.stateNode.containerInfo,on=!0;break e}T=T.return}if(ot===null)throw Error(r(160));W0(m,_,d),ot=null,on=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)ty(s,t),s=s.sibling}var Wn=null;function ty(t,s){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ln(s,t),cn(t),l&4&&(Oi(3,t,t.return),dl(3,t),Oi(5,t,t.return));break;case 1:ln(s,t),cn(t),l&512&&(At||a===null||As(a,a.return)),l&64&&Js&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=Wn;if(ln(s,t),cn(t),l&512&&(At||a===null||As(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":m=d.getElementsByTagName("title")[0],(!m||m[ds]||m[bt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(l),d.head.insertBefore(m,d.querySelector("head > title"))),Gt(m,l,a),m[bt]=t,xt(m),l=m;break e;case"link":var _=tv("link","href",d).get(l+(a.href||""));if(_){for(var T=0;T<_.length;T++)if(m=_[T],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(T,1);break t}}m=d.createElement(l),Gt(m,l,a),d.head.appendChild(m);break;case"meta":if(_=tv("meta","content",d).get(l+(a.content||""))){for(T=0;T<_.length;T++)if(m=_[T],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(T,1);break t}}m=d.createElement(l),Gt(m,l,a),d.head.appendChild(m);break;default:throw Error(r(468,l))}m[bt]=t,xt(m),l=m}t.stateNode=l}else nv(d,t.type,t.stateNode);else t.stateNode=ev(d,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?nv(d,t.type,t.stateNode):ev(d,l,t.memoizedProps)):l===null&&t.stateNode!==null&&ff(t,t.memoizedProps,a.memoizedProps)}break;case 27:ln(s,t),cn(t),l&512&&(At||a===null||As(a,a.return)),a!==null&&l&4&&ff(t,t.memoizedProps,a.memoizedProps);break;case 5:if(ln(s,t),cn(t),l&512&&(At||a===null||As(a,a.return)),t.flags&32){d=t.stateNode;try{an(d,"")}catch(ge){Xe(t,t.return,ge)}}l&4&&t.stateNode!=null&&(d=t.memoizedProps,ff(t,d,a!==null?a.memoizedProps:d)),l&1024&&(pf=!0);break;case 6:if(ln(s,t),cn(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ge){Xe(t,t.return,ge)}}break;case 3:if(Vu=null,d=Wn,Wn=Du(s.containerInfo),ln(s,t),Wn=d,cn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Xa(s.containerInfo)}catch(ge){Xe(t,t.return,ge)}pf&&(pf=!1,ny(t));break;case 4:l=Wn,Wn=Du(t.stateNode.containerInfo),ln(s,t),cn(t),Wn=l;break;case 12:ln(s,t),cn(t);break;case 31:ln(s,t),cn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,bu(t,l)));break;case 13:ln(s,t),cn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Tu=en()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,bu(t,l)));break;case 22:d=t.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,q=Js,Z=At;if(Js=q||d,At=Z||k,ln(s,t),At=Z,Js=q,cn(t),l&8192)e:for(s=t.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(a===null||k||Js||At||zr(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){k=a=s;try{if(m=k.stateNode,d)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=k.stateNode;var ie=k.memoizedProps.style,F=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;T.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(ge){Xe(k,k.return,ge)}}}else if(s.tag===6){if(a===null){k=s;try{k.stateNode.nodeValue=d?"":k.memoizedProps}catch(ge){Xe(k,k.return,ge)}}}else if(s.tag===18){if(a===null){k=s;try{var Y=k.stateNode;d?Fy(Y,!0):Fy(k.stateNode,!1)}catch(ge){Xe(k,k.return,ge)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,bu(t,a))));break;case 19:ln(s,t),cn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,bu(t,l)));break;case 30:break;case 21:break;default:ln(s,t),cn(t)}}function cn(t){var s=t.flags;if(s&2){try{for(var a,l=t.return;l!==null;){if($0(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var d=a.stateNode,m=mf(t);_u(t,m,d);break;case 5:var _=a.stateNode;a.flags&32&&(an(_,""),a.flags&=-33);var T=mf(t);_u(t,T,_);break;case 3:case 4:var k=a.stateNode.containerInfo,q=mf(t);gf(t,q,k);break;default:throw Error(r(161))}}catch(Z){Xe(t,t.return,Z)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function ny(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;ny(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Zs(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)X0(t,s.alternate,s),s=s.sibling}function zr(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Oi(4,s,s.return),zr(s);break;case 1:As(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&F0(s,s.return,a),zr(s);break;case 27:Tl(s.stateNode);case 26:case 5:As(s,s.return),zr(s);break;case 22:s.memoizedState===null&&zr(s);break;case 30:zr(s);break;default:zr(s)}t=t.sibling}}function ei(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,d=t,m=s,_=m.flags;switch(m.tag){case 0:case 11:case 15:ei(d,m,a),dl(4,m);break;case 1:if(ei(d,m,a),l=m,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(q){Xe(l,l.return,q)}if(l=m,d=l.updateQueue,d!==null){var T=l.stateNode;try{var k=d.shared.hiddenCallbacks;if(k!==null)for(d.shared.hiddenCallbacks=null,d=0;d<k.length;d++)Op(k[d],T)}catch(q){Xe(l,l.return,q)}}a&&_&64&&q0(m),fl(m,m.return);break;case 27:Y0(m);case 26:case 5:ei(d,m,a),a&&l===null&&_&4&&K0(m),fl(m,m.return);break;case 12:ei(d,m,a);break;case 31:ei(d,m,a),a&&_&4&&Z0(d,m);break;case 13:ei(d,m,a),a&&_&4&&ey(d,m);break;case 22:m.memoizedState===null&&ei(d,m,a),fl(m,m.return);break;case 30:break;default:ei(d,m,a)}s=s.sibling}}function yf(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Zo(a))}function vf(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Zo(t))}function Zn(t,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)sy(t,s,a,l),s=s.sibling}function sy(t,s,a,l){var d=s.flags;switch(s.tag){case 0:case 11:case 15:Zn(t,s,a,l),d&2048&&dl(9,s);break;case 1:Zn(t,s,a,l);break;case 3:Zn(t,s,a,l),d&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Zo(t)));break;case 12:if(d&2048){Zn(t,s,a,l),t=s.stateNode;try{var m=s.memoizedProps,_=m.id,T=m.onPostCommit;typeof T=="function"&&T(_,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(k){Xe(s,s.return,k)}}else Zn(t,s,a,l);break;case 31:Zn(t,s,a,l);break;case 13:Zn(t,s,a,l);break;case 23:break;case 22:m=s.stateNode,_=s.alternate,s.memoizedState!==null?m._visibility&2?Zn(t,s,a,l):ml(t,s):m._visibility&2?Zn(t,s,a,l):(m._visibility|=2,Ua(t,s,a,l,(s.subtreeFlags&10256)!==0||!1)),d&2048&&yf(_,s);break;case 24:Zn(t,s,a,l),d&2048&&vf(s.alternate,s);break;default:Zn(t,s,a,l)}}function Ua(t,s,a,l,d){for(d=d&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=t,_=s,T=a,k=l,q=_.flags;switch(_.tag){case 0:case 11:case 15:Ua(m,_,T,k,d),dl(8,_);break;case 23:break;case 22:var Z=_.stateNode;_.memoizedState!==null?Z._visibility&2?Ua(m,_,T,k,d):ml(m,_):(Z._visibility|=2,Ua(m,_,T,k,d)),d&&q&2048&&yf(_.alternate,_);break;case 24:Ua(m,_,T,k,d),d&&q&2048&&vf(_.alternate,_);break;default:Ua(m,_,T,k,d)}s=s.sibling}}function ml(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,l=s,d=l.flags;switch(l.tag){case 22:ml(a,l),d&2048&&yf(l.alternate,l);break;case 24:ml(a,l),d&2048&&vf(l.alternate,l);break;default:ml(a,l)}s=s.sibling}}var gl=8192;function za(t,s,a){if(t.subtreeFlags&gl)for(t=t.child;t!==null;)iy(t,s,a),t=t.sibling}function iy(t,s,a){switch(t.tag){case 26:za(t,s,a),t.flags&gl&&t.memoizedState!==null&&nw(a,Wn,t.memoizedState,t.memoizedProps);break;case 5:za(t,s,a);break;case 3:case 4:var l=Wn;Wn=Du(t.stateNode.containerInfo),za(t,s,a),Wn=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=gl,gl=16777216,za(t,s,a),gl=l):za(t,s,a));break;default:za(t,s,a)}}function ry(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function pl(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Mt=l,oy(l,t)}ry(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ay(t),t=t.sibling}function ay(t){switch(t.tag){case 0:case 11:case 15:pl(t),t.flags&2048&&Oi(9,t,t.return);break;case 3:pl(t);break;case 12:pl(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,xu(t)):pl(t);break;default:pl(t)}}function xu(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Mt=l,oy(l,t)}ry(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Oi(8,s,s.return),xu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,xu(s));break;default:xu(s)}t=t.sibling}}function oy(t,s){for(;Mt!==null;){var a=Mt;switch(a.tag){case 0:case 11:case 15:Oi(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Zo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Mt=l;else e:for(a=t;Mt!==null;){l=Mt;var d=l.sibling,m=l.return;if(J0(l),l===a){Mt=null;break e}if(d!==null){d.return=m,Mt=d;break e}Mt=m}}}var yE={getCacheForType:function(t){var s=Bt(Et),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return Bt(Et).controller.signal}},vE=typeof WeakMap=="function"?WeakMap:Map,Ke=0,tt=null,De=null,Ve=0,Qe=0,bn=null,Di=!1,Ba=!1,_f=!1,ti=0,ht=0,Mi=0,Br=0,bf=0,xn=0,Ha=0,yl=null,un=null,xf=!1,Tu=0,ly=0,Eu=1/0,wu=null,Vi=null,Rt=0,Li=null,Ga=null,ni=0,Tf=0,Ef=null,cy=null,vl=0,wf=null;function Tn(){return(Ke&2)!==0&&Ve!==0?Ve&-Ve:D.T!==null?Rf():Sc()}function uy(){if(xn===0)if((Ve&536870912)===0||Be){var t=mr;mr<<=1,(mr&3932160)===0&&(mr=262144),xn=t}else xn=536870912;return t=vn.current,t!==null&&(t.flags|=32),xn}function hn(t,s,a){(t===tt&&(Qe===2||Qe===9)||t.cancelPendingCommit!==null)&&(qa(t,0),Pi(t,Ve,xn,!1)),gr(t,a),((Ke&2)===0||t!==tt)&&(t===tt&&((Ke&2)===0&&(Br|=a),ht===4&&Pi(t,Ve,xn,!1)),Ns(t))}function hy(t,s,a){if((Ke&6)!==0)throw Error(r(327));var l=!a&&(s&127)===0&&(s&t.expiredLanes)===0||Gn(t,s),d=l?xE(t,s):Af(t,s,!0),m=l;do{if(d===0){Ba&&!l&&Pi(t,s,0,!1);break}else{if(a=t.current.alternate,m&&!_E(a)){d=Af(t,s,!1),m=!1;continue}if(d===2){if(m=s,t.errorRecoveryDisabledLanes&m)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var T=t;d=yl;var k=T.current.memoizedState.isDehydrated;if(k&&(qa(T,_).flags|=256),_=Af(T,_,!1),_!==2){if(_f&&!k){T.errorRecoveryDisabledLanes|=m,Br|=m,d=4;break e}m=un,un=d,m!==null&&(un===null?un=m:un.push.apply(un,m))}d=_}if(m=!1,d!==2)continue}}if(d===1){qa(t,0),Pi(t,s,0,!0);break}e:{switch(l=t,m=d,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Pi(l,s,xn,!Di);break e;case 2:un=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(d=Tu+300-en(),10<d)){if(Pi(l,s,xn,!Di),cs(l,0,!0)!==0)break e;ni=s,l.timeoutHandle=Hy(dy.bind(null,l,a,un,wu,xf,s,xn,Br,Ha,Di,m,"Throttled",-0,0),d);break e}dy(l,a,un,wu,xf,s,xn,Br,Ha,Di,m,null,-0,0)}}break}while(!0);Ns(t)}function dy(t,s,a,l,d,m,_,T,k,q,Z,ie,F,Y){if(t.timeoutHandle=-1,ie=s.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Kn},iy(s,m,ie);var ge=(m&62914560)===m?Tu-en():(m&4194048)===m?ly-en():0;if(ge=sw(ie,ge),ge!==null){ni=m,t.cancelPendingCommit=ge(by.bind(null,t,s,m,a,l,d,_,T,k,Z,ie,null,F,Y)),Pi(t,m,_,!q);return}}by(t,s,m,a,l,d,_,T,k)}function _E(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],m=d.getSnapshot;d=d.value;try{if(!pn(m(),d))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Pi(t,s,a,l){s&=~bf,s&=~Br,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var d=s;0<d;){var m=31-dt(d),_=1<<m;l[m]=-1,d&=~_}a!==0&&pr(t,a,s)}function Su(){return(Ke&6)===0?(_l(0),!1):!0}function Sf(){if(De!==null){if(Qe===0)var t=De.return;else t=De,Fs=jr=null,zd(t),Da=null,tl=0,t=De;for(;t!==null;)G0(t.alternate,t),t=t.return;De=null}}function qa(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,UE(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),ni=0,Sf(),tt=t,De=a=Gs(t.current,null),Ve=s,Qe=0,bn=null,Di=!1,Ba=Gn(t,s),_f=!1,Ha=xn=bf=Br=Mi=ht=0,un=yl=null,xf=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var d=31-dt(l),m=1<<d;s|=t[d],l&=~m}return ti=s,Kc(),a}function fy(t,s){Re=null,D.H=cl,s===Oa||s===eu?(s=Ip(),Qe=3):s===Cd?(s=Ip(),Qe=4):Qe=s===nf?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,bn=s,De===null&&(ht=1,mu(t,kn(s,t.current)))}function my(){var t=vn.current;return t===null?!0:(Ve&4194048)===Ve?Mn===null:(Ve&62914560)===Ve||(Ve&536870912)!==0?t===Mn:!1}function gy(){var t=D.H;return D.H=cl,t===null?cl:t}function py(){var t=D.A;return D.A=yE,t}function Au(){ht=4,Di||(Ve&4194048)!==Ve&&vn.current!==null||(Ba=!0),(Mi&134217727)===0&&(Br&134217727)===0||tt===null||Pi(tt,Ve,xn,!1)}function Af(t,s,a){var l=Ke;Ke|=2;var d=gy(),m=py();(tt!==t||Ve!==s)&&(wu=null,qa(t,s)),s=!1;var _=ht;e:do try{if(Qe!==0&&De!==null){var T=De,k=bn;switch(Qe){case 8:Sf(),_=6;break e;case 3:case 2:case 9:case 6:vn.current===null&&(s=!0);var q=Qe;if(Qe=0,bn=null,Fa(t,T,k,q),a&&Ba){_=0;break e}break;default:q=Qe,Qe=0,bn=null,Fa(t,T,k,q)}}bE(),_=ht;break}catch(Z){fy(t,Z)}while(!0);return s&&t.shellSuspendCounter++,Fs=jr=null,Ke=l,D.H=d,D.A=m,De===null&&(tt=null,Ve=0,Kc()),_}function bE(){for(;De!==null;)yy(De)}function xE(t,s){var a=Ke;Ke|=2;var l=gy(),d=py();tt!==t||Ve!==s?(wu=null,Eu=en()+500,qa(t,s)):Ba=Gn(t,s);e:do try{if(Qe!==0&&De!==null){s=De;var m=bn;t:switch(Qe){case 1:Qe=0,bn=null,Fa(t,s,m,1);break;case 2:case 9:if(Np(m)){Qe=0,bn=null,vy(s);break}s=function(){Qe!==2&&Qe!==9||tt!==t||(Qe=7),Ns(t)},m.then(s,s);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:Np(m)?(Qe=0,bn=null,vy(s)):(Qe=0,bn=null,Fa(t,s,m,7));break;case 5:var _=null;switch(De.tag){case 26:_=De.memoizedState;case 5:case 27:var T=De;if(_?sv(_):T.stateNode.complete){Qe=0,bn=null;var k=T.sibling;if(k!==null)De=k;else{var q=T.return;q!==null?(De=q,Nu(q)):De=null}break t}}Qe=0,bn=null,Fa(t,s,m,5);break;case 6:Qe=0,bn=null,Fa(t,s,m,6);break;case 8:Sf(),ht=6;break e;default:throw Error(r(462))}}TE();break}catch(Z){fy(t,Z)}while(!0);return Fs=jr=null,D.H=l,D.A=d,Ke=a,De!==null?0:(tt=null,Ve=0,Kc(),ht)}function TE(){for(;De!==null&&!td();)yy(De)}function yy(t){var s=B0(t.alternate,t,ti);t.memoizedProps=t.pendingProps,s===null?Nu(t):De=s}function vy(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=M0(a,s,s.pendingProps,s.type,void 0,Ve);break;case 11:s=M0(a,s,s.pendingProps,s.type.render,s.ref,Ve);break;case 5:zd(s);default:G0(a,s),s=De=pp(s,ti),s=B0(a,s,ti)}t.memoizedProps=t.pendingProps,s===null?Nu(t):De=s}function Fa(t,s,a,l){Fs=jr=null,zd(s),Da=null,tl=0;var d=s.return;try{if(uE(t,d,s,a,Ve)){ht=1,mu(t,kn(a,t.current)),De=null;return}}catch(m){if(d!==null)throw De=d,m;ht=1,mu(t,kn(a,t.current)),De=null;return}s.flags&32768?(Be||l===1?t=!0:Ba||(Ve&536870912)!==0?t=!1:(Di=t=!0,(l===2||l===9||l===3||l===6)&&(l=vn.current,l!==null&&l.tag===13&&(l.flags|=16384))),_y(s,t)):Nu(s)}function Nu(t){var s=t;do{if((s.flags&32768)!==0){_y(s,Di);return}t=s.return;var a=fE(s.alternate,s,ti);if(a!==null){De=a;return}if(s=s.sibling,s!==null){De=s;return}De=s=t}while(s!==null);ht===0&&(ht=5)}function _y(t,s){do{var a=mE(t.alternate,t);if(a!==null){a.flags&=32767,De=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){De=t;return}De=t=a}while(t!==null);ht=6,De=null}function by(t,s,a,l,d,m,_,T,k){t.cancelPendingCommit=null;do Cu();while(Rt!==0);if((Ke&6)!==0)throw Error(r(327));if(s!==null){if(s===t.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=fd,id(t,a,m,_,T,k),t===tt&&(De=tt=null,Ve=0),Ga=s,Li=t,ni=a,Tf=m,Ef=d,cy=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,AE(mi,function(){return Sy(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=D.T,D.T=null,d=ee.p,ee.p=2,_=Ke,Ke|=4;try{gE(t,s,a)}finally{Ke=_,ee.p=d,D.T=l}}Rt=1,xy(),Ty(),Ey()}}function xy(){if(Rt===1){Rt=0;var t=Li,s=Ga,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=D.T,D.T=null;var l=ee.p;ee.p=2;var d=Ke;Ke|=4;try{ty(s,t);var m=Pf,_=op(t.containerInfo),T=m.focusedElem,k=m.selectionRange;if(_!==T&&T&&T.ownerDocument&&ap(T.ownerDocument.documentElement,T)){if(k!==null&&ld(T)){var q=k.start,Z=k.end;if(Z===void 0&&(Z=q),"selectionStart"in T)T.selectionStart=q,T.selectionEnd=Math.min(Z,T.value.length);else{var ie=T.ownerDocument||document,F=ie&&ie.defaultView||window;if(F.getSelection){var Y=F.getSelection(),ge=T.textContent.length,xe=Math.min(k.start,ge),et=k.end===void 0?xe:Math.min(k.end,ge);!Y.extend&&xe>et&&(_=et,et=xe,xe=_);var P=rp(T,xe),L=rp(T,et);if(P&&L&&(Y.rangeCount!==1||Y.anchorNode!==P.node||Y.anchorOffset!==P.offset||Y.focusNode!==L.node||Y.focusOffset!==L.offset)){var H=ie.createRange();H.setStart(P.node,P.offset),Y.removeAllRanges(),xe>et?(Y.addRange(H),Y.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),Y.addRange(H))}}}}for(ie=[],Y=T;Y=Y.parentNode;)Y.nodeType===1&&ie.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ie.length;T++){var te=ie[T];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}zu=!!Lf,Pf=Lf=null}finally{Ke=d,ee.p=l,D.T=a}}t.current=s,Rt=2}}function Ty(){if(Rt===2){Rt=0;var t=Li,s=Ga,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=D.T,D.T=null;var l=ee.p;ee.p=2;var d=Ke;Ke|=4;try{X0(t,s.alternate,s)}finally{Ke=d,ee.p=l,D.T=a}}Rt=3}}function Ey(){if(Rt===4||Rt===3){Rt=0,vc();var t=Li,s=Ga,a=ni,l=cy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Rt=5:(Rt=0,Ga=Li=null,wy(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(Vi=null),Us(a),s=s.stateNode,Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(Hn,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=D.T,d=ee.p,ee.p=2,D.T=null;try{for(var m=t.onRecoverableError,_=0;_<l.length;_++){var T=l[_];m(T.value,{componentStack:T.stack})}}finally{D.T=s,ee.p=d}}(ni&3)!==0&&Cu(),Ns(t),d=t.pendingLanes,(a&261930)!==0&&(d&42)!==0?t===wf?vl++:(vl=0,wf=t):vl=0,_l(0)}}function wy(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,Zo(s)))}function Cu(){return xy(),Ty(),Ey(),Sy()}function Sy(){if(Rt!==5)return!1;var t=Li,s=Tf;Tf=0;var a=Us(ni),l=D.T,d=ee.p;try{ee.p=32>a?32:a,D.T=null,a=Ef,Ef=null;var m=Li,_=ni;if(Rt=0,Ga=Li=null,ni=0,(Ke&6)!==0)throw Error(r(331));var T=Ke;if(Ke|=4,ay(m.current),sy(m,m.current,_,a),Ke=T,_l(0,!1),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(Hn,m)}catch{}return!0}finally{ee.p=d,D.T=l,wy(t,s)}}function Ay(t,s,a){s=kn(a,s),s=tf(t.stateNode,s,2),t=Ri(t,s,2),t!==null&&(gr(t,2),Ns(t))}function Xe(t,s,a){if(t.tag===3)Ay(t,t,a);else for(;s!==null;){if(s.tag===3){Ay(s,t,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Vi===null||!Vi.has(l))){t=kn(a,t),a=N0(2),l=Ri(s,a,2),l!==null&&(C0(a,l,s,t),gr(l,2),Ns(l));break}}s=s.return}}function Nf(t,s,a){var l=t.pingCache;if(l===null){l=t.pingCache=new vE;var d=new Set;l.set(s,d)}else d=l.get(s),d===void 0&&(d=new Set,l.set(s,d));d.has(a)||(_f=!0,d.add(a),t=EE.bind(null,t,s,a),s.then(t,t))}function EE(t,s,a){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,tt===t&&(Ve&a)===a&&(ht===4||ht===3&&(Ve&62914560)===Ve&&300>en()-Tu?(Ke&2)===0&&qa(t,0):bf|=a,Ha===Ve&&(Ha=0)),Ns(t)}function Ny(t,s){s===0&&(s=wc()),t=Ir(t,s),t!==null&&(gr(t,s),Ns(t))}function wE(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),Ny(t,a)}function SE(t,s){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),Ny(t,a)}function AE(t,s){return It(t,s)}var Iu=null,Ka=null,Cf=!1,Ru=!1,If=!1,Ui=0;function Ns(t){t!==Ka&&t.next===null&&(Ka===null?Iu=Ka=t:Ka=Ka.next=t),Ru=!0,Cf||(Cf=!0,CE())}function _l(t,s){if(!If&&Ru){If=!0;do for(var a=!1,l=Iu;l!==null;){if(t!==0){var d=l.pendingLanes;if(d===0)var m=0;else{var _=l.suspendedLanes,T=l.pingedLanes;m=(1<<31-dt(42|t)+1)-1,m&=d&~(_&~T),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,ky(l,m))}else m=Ve,m=cs(l,l===tt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Gn(l,m)||(a=!0,ky(l,m));l=l.next}while(a);If=!1}}function NE(){Cy()}function Cy(){Ru=Cf=!1;var t=0;Ui!==0&&PE()&&(t=Ui);for(var s=en(),a=null,l=Iu;l!==null;){var d=l.next,m=Iy(l,s);m===0?(l.next=null,a===null?Iu=d:a.next=d,d===null&&(Ka=a)):(a=l,(t!==0||(m&3)!==0)&&(Ru=!0)),l=d}Rt!==0&&Rt!==5||_l(t),Ui!==0&&(Ui=0)}function Iy(t,s){for(var a=t.suspendedLanes,l=t.pingedLanes,d=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var _=31-dt(m),T=1<<_,k=d[_];k===-1?((T&a)===0||(T&l)!==0)&&(d[_]=sd(T,s)):k<=s&&(t.expiredLanes|=T),m&=~T}if(s=tt,a=Ve,a=cs(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===s&&(Qe===2||Qe===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&fi(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Gn(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(l!==null&&fi(l),Us(a)){case 2:case 8:a=Io;break;case 32:a=mi;break;case 268435456:a=_c;break;default:a=mi}return l=Ry.bind(null,t),a=It(a,l),t.callbackPriority=s,t.callbackNode=a,s}return l!==null&&l!==null&&fi(l),t.callbackPriority=2,t.callbackNode=null,2}function Ry(t,s){if(Rt!==0&&Rt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Cu()&&t.callbackNode!==a)return null;var l=Ve;return l=cs(t,t===tt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(hy(t,l,s),Iy(t,en()),t.callbackNode!=null&&t.callbackNode===a?Ry.bind(null,t):null)}function ky(t,s){if(Cu())return null;hy(t,s,!0)}function CE(){zE(function(){(Ke&6)!==0?It(Co,NE):Cy()})}function Rf(){if(Ui===0){var t=ka;t===0&&(t=os,os<<=1,(os&261888)===0&&(os=256)),Ui=t}return Ui}function jy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:pa(""+t)}function Oy(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function IE(t,s,a,l,d){if(s==="submit"&&a&&a.stateNode===d){var m=jy((d[Ot]||null).action),_=l.submitter;_&&(s=(s=_[Ot]||null)?jy(s.formAction):_.getAttribute("formAction"),s!==null&&(m=s,_=null));var T=new bs("action","action",null,l,d);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ui!==0){var k=_?Oy(d,_):new FormData(d);Qd(a,{pending:!0,data:k,method:d.method,action:m},null,k)}}else typeof m=="function"&&(T.preventDefault(),k=_?Oy(d,_):new FormData(d),Qd(a,{pending:!0,data:k,method:d.method,action:m},m,k))},currentTarget:d}]})}}for(var kf=0;kf<dd.length;kf++){var jf=dd[kf],RE=jf.toLowerCase(),kE=jf[0].toUpperCase()+jf.slice(1);Jn(RE,"on"+kE)}Jn(up,"onAnimationEnd"),Jn(hp,"onAnimationIteration"),Jn(dp,"onAnimationStart"),Jn("dblclick","onDoubleClick"),Jn("focusin","onFocus"),Jn("focusout","onBlur"),Jn($T,"onTransitionRun"),Jn(YT,"onTransitionStart"),Jn(QT,"onTransitionCancel"),Jn(fp,"onTransitionEnd"),ps("onMouseEnter",["mouseout","mouseover"]),ps("onMouseLeave",["mouseout","mouseover"]),ps("onPointerEnter",["pointerout","pointerover"]),ps("onPointerLeave",["pointerout","pointerover"]),gs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gs("onBeforeInput",["compositionend","keypress","textInput","paste"]),gs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bl));function Dy(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],d=l.event;l=l.listeners;e:{var m=void 0;if(s)for(var _=l.length-1;0<=_;_--){var T=l[_],k=T.instance,q=T.currentTarget;if(T=T.listener,k!==m&&d.isPropagationStopped())break e;m=T,d.currentTarget=q;try{m(d)}catch(Z){Fc(Z)}d.currentTarget=null,m=k}else for(_=0;_<l.length;_++){if(T=l[_],k=T.instance,q=T.currentTarget,T=T.listener,k!==m&&d.isPropagationStopped())break e;m=T,d.currentTarget=q;try{m(d)}catch(Z){Fc(Z)}d.currentTarget=null,m=k}}}}function Me(t,s){var a=s[ha];a===void 0&&(a=s[ha]=new Set);var l=t+"__bubble";a.has(l)||(My(s,t,2,!1),a.add(l))}function Of(t,s,a){var l=0;s&&(l|=4),My(a,t,l,s)}var ku="_reactListening"+Math.random().toString(36).slice(2);function Df(t){if(!t[ku]){t[ku]=!0,jo.forEach(function(a){a!=="selectionchange"&&(jE.has(a)||Of(a,!1,t),Of(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[ku]||(s[ku]=!0,Of("selectionchange",!1,s))}}function My(t,s,a,l){switch(uv(s)){case 2:var d=aw;break;case 8:d=ow;break;default:d=Qf}a=d.bind(null,s,a,t),d=void 0,!xr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),l?d!==void 0?t.addEventListener(s,a,{capture:!0,passive:d}):t.addEventListener(s,a,!0):d!==void 0?t.addEventListener(s,a,{passive:d}):t.addEventListener(s,a,!1)}function Mf(t,s,a,l,d){var m=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var T=l.stateNode.containerInfo;if(T===d)break;if(_===4)for(_=l.return;_!==null;){var k=_.tag;if((k===3||k===4)&&_.stateNode.containerInfo===d)return;_=_.return}for(;T!==null;){if(_=fs(T),_===null)return;if(k=_.tag,k===5||k===6||k===26||k===27){l=m=_;continue e}T=T.parentNode}}l=l.return}bi(function(){var q=m,Z=Nn(a),ie=[];e:{var F=mp.get(t);if(F!==void 0){var Y=bs,ge=t;switch(t){case"keypress":if(Er(a)===0)break e;case"keydown":case"keyup":Y=Hc;break;case"focusin":ge="focus",Y=Sr;break;case"focusout":ge="blur",Y=Sr;break;case"beforeblur":case"afterblur":Y=Sr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Fo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Oc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=y;break;case up:case hp:case dp:Y=Mc;break;case fp:Y=w;break;case"scroll":case"scrollend":Y=qo;break;case"wheel":Y=$;break;case"copy":case"cut":case"paste":Y=Vc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Hs;break;case"toggle":case"beforetoggle":Y=Ie}var xe=(s&4)!==0,et=!xe&&(t==="scroll"||t==="scrollend"),P=xe?F!==null?F+"Capture":null:F;xe=[];for(var L=q,H;L!==null;){var te=L;if(H=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||H===null||P===null||(te=$n(L,P),te!=null&&xe.push(xl(L,te,H))),et)break;L=L.return}0<xe.length&&(F=new Y(F,ge,null,a,Z),ie.push({event:F,listeners:xe}))}}if((s&7)===0){e:{if(F=t==="mouseover"||t==="pointerover",Y=t==="mouseout"||t==="pointerout",F&&a!==Bo&&(ge=a.relatedTarget||a.fromElement)&&(fs(ge)||ge[hs]))break e;if((Y||F)&&(F=Z.window===Z?Z:(F=Z.ownerDocument)?F.defaultView||F.parentWindow:window,Y?(ge=a.relatedTarget||a.toElement,Y=q,ge=ge?fs(ge):null,ge!==null&&(et=c(ge),xe=ge.tag,ge!==et||xe!==5&&xe!==27&&xe!==6)&&(ge=null)):(Y=null,ge=q),Y!==ge)){if(xe=Fo,te="onMouseLeave",P="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(xe=Hs,te="onPointerLeave",P="onPointerEnter",L="pointer"),et=Y==null?F:mn(Y),H=ge==null?F:mn(ge),F=new xe(te,L+"leave",Y,a,Z),F.target=et,F.relatedTarget=H,te=null,fs(Z)===q&&(xe=new xe(P,L+"enter",ge,a,Z),xe.target=H,xe.relatedTarget=et,te=xe),et=te,Y&&ge)t:{for(xe=OE,P=Y,L=ge,H=0,te=P;te;te=xe(te))H++;te=0;for(var _e=L;_e;_e=xe(_e))te++;for(;0<H-te;)P=xe(P),H--;for(;0<te-H;)L=xe(L),te--;for(;H--;){if(P===L||L!==null&&P===L.alternate){xe=P;break t}P=xe(P),L=xe(L)}xe=null}else xe=null;Y!==null&&Vy(ie,F,Y,xe,!1),ge!==null&&et!==null&&Vy(ie,et,ge,xe,!0)}}e:{if(F=q?mn(q):window,Y=F.nodeName&&F.nodeName.toLowerCase(),Y==="select"||Y==="input"&&F.type==="file")var Ge=Zg;else if(Jg(F))if(ep)Ge=qT;else{Ge=HT;var ye=BT}else Y=F.nodeName,!Y||Y.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?q&&ga(q.elementType)&&(Ge=Zg):Ge=GT;if(Ge&&(Ge=Ge(t,q))){Wg(ie,Ge,a,Z);break e}ye&&ye(t,F,q),t==="focusout"&&q&&F.type==="number"&&q.memoizedProps.value!=null&&Po(F,"number",F.value)}switch(ye=q?mn(q):window,t){case"focusin":(Jg(ye)||ye.contentEditable==="true")&&(Ea=ye,cd=q,Xo=null);break;case"focusout":Xo=cd=Ea=null;break;case"mousedown":ud=!0;break;case"contextmenu":case"mouseup":case"dragend":ud=!1,lp(ie,a,Z);break;case"selectionchange":if(KT)break;case"keydown":case"keyup":lp(ie,a,Z)}var ke;if(Fe)e:{switch(t){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else Ta?Ar(t,a)&&(Le="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Le="onCompositionStart");Le&&(Es&&a.locale!=="ko"&&(Ta||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&Ta&&(ke=Go()):(_s=Z,Ho="value"in _s?_s.value:_s.textContent,Ta=!0)),ye=ju(q,Le),0<ye.length&&(Le=new Ts(Le,t,null,a,Z),ie.push({event:Le,listeners:ye}),ke?Le.data=ke:(ke=xa(a),ke!==null&&(Le.data=ke)))),(ke=In?LT(t,a):PT(t,a))&&(Le=ju(q,"onBeforeInput"),0<Le.length&&(ye=new Ts("onBeforeInput","beforeinput",null,a,Z),ie.push({event:ye,listeners:Le}),ye.data=ke)),IE(ie,t,q,a,Z)}Dy(ie,s)})}function xl(t,s,a){return{instance:t,listener:s,currentTarget:a}}function ju(t,s){for(var a=s+"Capture",l=[];t!==null;){var d=t,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=$n(t,a),d!=null&&l.unshift(xl(t,d,m)),d=$n(t,s),d!=null&&l.push(xl(t,d,m))),t.tag===3)return l;t=t.return}return[]}function OE(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Vy(t,s,a,l,d){for(var m=s._reactName,_=[];a!==null&&a!==l;){var T=a,k=T.alternate,q=T.stateNode;if(T=T.tag,k!==null&&k===l)break;T!==5&&T!==26&&T!==27||q===null||(k=q,d?(q=$n(a,m),q!=null&&_.unshift(xl(a,q,k))):d||(q=$n(a,m),q!=null&&_.push(xl(a,q,k)))),a=a.return}_.length!==0&&t.push({event:s,listeners:_})}var DE=/\r\n?/g,ME=/\u0000|\uFFFD/g;function Ly(t){return(typeof t=="string"?t:""+t).replace(DE,`
`).replace(ME,"")}function Py(t,s){return s=Ly(s),Ly(t)===s}function Ze(t,s,a,l,d,m){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||an(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&an(t,""+l);break;case"className":gn(t,"class",l);break;case"tabIndex":gn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":gn(t,a,l);break;case"style":zo(t,l,m);break;case"data":if(s!=="object"){gn(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=pa(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&Ze(t,s,"name",d.name,d,null),Ze(t,s,"formEncType",d.formEncType,d,null),Ze(t,s,"formMethod",d.formMethod,d,null),Ze(t,s,"formTarget",d.formTarget,d,null)):(Ze(t,s,"encType",d.encType,d,null),Ze(t,s,"method",d.method,d,null),Ze(t,s,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=pa(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Kn);break;case"onScroll":l!=null&&Me("scroll",t);break;case"onScrollEnd":l!=null&&Me("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=pa(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Me("beforetoggle",t),Me("toggle",t),fa(t,"popover",l);break;case"xlinkActuate":Tt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Tt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Tt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Tt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Tt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Tt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Tt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Tt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Tt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":fa(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=jc.get(a)||a,fa(t,a,l))}}function Vf(t,s,a,l,d,m){switch(a){case"style":zo(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?an(t,l):(typeof l=="number"||typeof l=="bigint")&&an(t,""+l);break;case"onScroll":l!=null&&Me("scroll",t);break;case"onScrollEnd":l!=null&&Me("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Kn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Oo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),s=a.slice(2,d?a.length-7:void 0),m=t[Ot]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(s,m,d),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,l,d);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):fa(t,a,l)}}}function Gt(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",t),Me("load",t);var l=!1,d=!1,m;for(m in a)if(a.hasOwnProperty(m)){var _=a[m];if(_!=null)switch(m){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Ze(t,s,m,_,a,null)}}d&&Ze(t,s,"srcSet",a.srcSet,a,null),l&&Ze(t,s,"src",a.src,a,null);return;case"input":Me("invalid",t);var T=m=_=d=null,k=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var Z=a[l];if(Z!=null)switch(l){case"name":d=Z;break;case"type":_=Z;break;case"checked":k=Z;break;case"defaultChecked":q=Z;break;case"value":m=Z;break;case"defaultValue":T=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,s));break;default:Ze(t,s,l,Z,a,null)}}Ic(t,m,T,k,q,_,d,!1);return;case"select":Me("invalid",t),l=_=m=null;for(d in a)if(a.hasOwnProperty(d)&&(T=a[d],T!=null))switch(d){case"value":m=T;break;case"defaultValue":_=T;break;case"multiple":l=T;default:Ze(t,s,d,T,a,null)}s=m,a=_,t.multiple=!!l,s!=null?pi(t,!!l,s,!1):a!=null&&pi(t,!!l,a,!0);return;case"textarea":Me("invalid",t),m=d=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(T=a[_],T!=null))switch(_){case"value":l=T;break;case"defaultValue":d=T;break;case"children":m=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:Ze(t,s,_,T,a,null)}yi(t,l,d,m);return;case"option":for(k in a)if(a.hasOwnProperty(k)&&(l=a[k],l!=null))switch(k){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ze(t,s,k,l,a,null)}return;case"dialog":Me("beforetoggle",t),Me("toggle",t),Me("cancel",t),Me("close",t);break;case"iframe":case"object":Me("load",t);break;case"video":case"audio":for(l=0;l<bl.length;l++)Me(bl[l],t);break;case"image":Me("error",t),Me("load",t);break;case"details":Me("toggle",t);break;case"embed":case"source":case"link":Me("error",t),Me("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Ze(t,s,q,l,a,null)}return;default:if(ga(s)){for(Z in a)a.hasOwnProperty(Z)&&(l=a[Z],l!==void 0&&Vf(t,s,Z,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&Ze(t,s,T,l,a,null))}function VE(t,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,_=null,T=null,k=null,q=null,Z=null;for(Y in a){var ie=a[Y];if(a.hasOwnProperty(Y)&&ie!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":k=ie;default:l.hasOwnProperty(Y)||Ze(t,s,Y,null,l,ie)}}for(var F in l){var Y=l[F];if(ie=a[F],l.hasOwnProperty(F)&&(Y!=null||ie!=null))switch(F){case"type":m=Y;break;case"name":d=Y;break;case"checked":q=Y;break;case"defaultChecked":Z=Y;break;case"value":_=Y;break;case"defaultValue":T=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,s));break;default:Y!==ie&&Ze(t,s,F,Y,l,ie)}}ma(t,_,T,k,q,Z,m,d);return;case"select":Y=_=T=F=null;for(m in a)if(k=a[m],a.hasOwnProperty(m)&&k!=null)switch(m){case"value":break;case"multiple":Y=k;default:l.hasOwnProperty(m)||Ze(t,s,m,null,l,k)}for(d in l)if(m=l[d],k=a[d],l.hasOwnProperty(d)&&(m!=null||k!=null))switch(d){case"value":F=m;break;case"defaultValue":T=m;break;case"multiple":_=m;default:m!==k&&Ze(t,s,d,m,l,k)}s=T,a=_,l=Y,F!=null?pi(t,!!a,F,!1):!!l!=!!a&&(s!=null?pi(t,!!a,s,!0):pi(t,!!a,a?[]:"",!1));return;case"textarea":Y=F=null;for(T in a)if(d=a[T],a.hasOwnProperty(T)&&d!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Ze(t,s,T,null,l,d)}for(_ in l)if(d=l[_],m=a[_],l.hasOwnProperty(_)&&(d!=null||m!=null))switch(_){case"value":F=d;break;case"defaultValue":Y=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==m&&Ze(t,s,_,d,l,m)}Rc(t,F,Y);return;case"option":for(var ge in a)if(F=a[ge],a.hasOwnProperty(ge)&&F!=null&&!l.hasOwnProperty(ge))switch(ge){case"selected":t.selected=!1;break;default:Ze(t,s,ge,null,l,F)}for(k in l)if(F=l[k],Y=a[k],l.hasOwnProperty(k)&&F!==Y&&(F!=null||Y!=null))switch(k){case"selected":t.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:Ze(t,s,k,F,l,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in a)F=a[xe],a.hasOwnProperty(xe)&&F!=null&&!l.hasOwnProperty(xe)&&Ze(t,s,xe,null,l,F);for(q in l)if(F=l[q],Y=a[q],l.hasOwnProperty(q)&&F!==Y&&(F!=null||Y!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,s));break;default:Ze(t,s,q,F,l,Y)}return;default:if(ga(s)){for(var et in a)F=a[et],a.hasOwnProperty(et)&&F!==void 0&&!l.hasOwnProperty(et)&&Vf(t,s,et,void 0,l,F);for(Z in l)F=l[Z],Y=a[Z],!l.hasOwnProperty(Z)||F===Y||F===void 0&&Y===void 0||Vf(t,s,Z,F,l,Y);return}}for(var P in a)F=a[P],a.hasOwnProperty(P)&&F!=null&&!l.hasOwnProperty(P)&&Ze(t,s,P,null,l,F);for(ie in l)F=l[ie],Y=a[ie],!l.hasOwnProperty(ie)||F===Y||F==null&&Y==null||Ze(t,s,ie,F,l,Y)}function Uy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function LE(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var d=a[l],m=d.transferSize,_=d.initiatorType,T=d.duration;if(m&&T&&Uy(_)){for(_=0,T=d.responseEnd,l+=1;l<a.length;l++){var k=a[l],q=k.startTime;if(q>T)break;var Z=k.transferSize,ie=k.initiatorType;Z&&Uy(ie)&&(k=k.responseEnd,_+=Z*(k<T?1:(T-q)/(k-q)))}if(--l,s+=8*(m+_)/(d.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Lf=null,Pf=null;function Ou(t){return t.nodeType===9?t:t.ownerDocument}function zy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function By(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Uf(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var zf=null;function PE(){var t=window.event;return t&&t.type==="popstate"?t===zf?!1:(zf=t,!0):(zf=null,!1)}var Hy=typeof setTimeout=="function"?setTimeout:void 0,UE=typeof clearTimeout=="function"?clearTimeout:void 0,Gy=typeof Promise=="function"?Promise:void 0,zE=typeof queueMicrotask=="function"?queueMicrotask:typeof Gy<"u"?function(t){return Gy.resolve(null).then(t).catch(BE)}:Hy;function BE(t){setTimeout(function(){throw t})}function zi(t){return t==="head"}function qy(t,s){var a=s,l=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(d),Xa(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Tl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Tl(a);for(var m=a.firstChild;m;){var _=m.nextSibling,T=m.nodeName;m[ds]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=_}}else a==="body"&&Tl(t.ownerDocument.body);a=d}while(a);Xa(s)}function Fy(t,s){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Bf(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Bf(a),da(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function HE(t,s,a,l){for(;t.nodeType===1;){var d=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[ds])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Vn(t.nextSibling),t===null)break}return null}function GE(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Vn(t.nextSibling),t===null))return null;return t}function Ky(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Vn(t.nextSibling),t===null))return null;return t}function Hf(t){return t.data==="$?"||t.data==="$~"}function Gf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function qE(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Vn(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var qf=null;function $y(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return Vn(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function Yy(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function Qy(t,s,a){switch(s=Ou(a),t){case"html":if(t=s.documentElement,!t)throw Error(r(452));return t;case"head":if(t=s.head,!t)throw Error(r(453));return t;case"body":if(t=s.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Tl(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);da(t)}var Ln=new Map,Xy=new Set;function Du(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var si=ee.d;ee.d={f:FE,r:KE,D:$E,C:YE,L:QE,m:XE,X:WE,S:JE,M:ZE};function FE(){var t=si.f(),s=Su();return t||s}function KE(t){var s=An(t);s!==null&&s.tag===5&&s.type==="form"?f0(s):si.r(t)}var $a=typeof document>"u"?null:document;function Jy(t,s,a){var l=$a;if(l&&typeof s=="string"&&s){var d=rn(s);d='link[rel="'+t+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),Xy.has(d)||(Xy.add(d),t={rel:t,crossOrigin:a,href:s},l.querySelector(d)===null&&(s=l.createElement("link"),Gt(s,"link",t),xt(s),l.head.appendChild(s)))}}function $E(t){si.D(t),Jy("dns-prefetch",t,null)}function YE(t,s){si.C(t,s),Jy("preconnect",t,s)}function QE(t,s,a){si.L(t,s,a);var l=$a;if(l&&t&&s){var d='link[rel="preload"][as="'+rn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+rn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+rn(a.imageSizes)+'"]')):d+='[href="'+rn(t)+'"]';var m=d;switch(s){case"style":m=Ya(t);break;case"script":m=Qa(t)}Ln.has(m)||(t=E({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),Ln.set(m,t),l.querySelector(d)!==null||s==="style"&&l.querySelector(El(m))||s==="script"&&l.querySelector(wl(m))||(s=l.createElement("link"),Gt(s,"link",t),xt(s),l.head.appendChild(s)))}}function XE(t,s){si.m(t,s);var a=$a;if(a&&t){var l=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+rn(l)+'"][href="'+rn(t)+'"]',m=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Qa(t)}if(!Ln.has(m)&&(t=E({rel:"modulepreload",href:t},s),Ln.set(m,t),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(wl(m)))return}l=a.createElement("link"),Gt(l,"link",t),xt(l),a.head.appendChild(l)}}}function JE(t,s,a){si.S(t,s,a);var l=$a;if(l&&t){var d=ms(l).hoistableStyles,m=Ya(t);s=s||"default";var _=d.get(m);if(!_){var T={loading:0,preload:null};if(_=l.querySelector(El(m)))T.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":s},a),(a=Ln.get(m))&&Ff(t,a);var k=_=l.createElement("link");xt(k),Gt(k,"link",t),k._p=new Promise(function(q,Z){k.onload=q,k.onerror=Z}),k.addEventListener("load",function(){T.loading|=1}),k.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Mu(_,s,l)}_={type:"stylesheet",instance:_,count:1,state:T},d.set(m,_)}}}function WE(t,s){si.X(t,s);var a=$a;if(a&&t){var l=ms(a).hoistableScripts,d=Qa(t),m=l.get(d);m||(m=a.querySelector(wl(d)),m||(t=E({src:t,async:!0},s),(s=Ln.get(d))&&Kf(t,s),m=a.createElement("script"),xt(m),Gt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(d,m))}}function ZE(t,s){si.M(t,s);var a=$a;if(a&&t){var l=ms(a).hoistableScripts,d=Qa(t),m=l.get(d);m||(m=a.querySelector(wl(d)),m||(t=E({src:t,async:!0,type:"module"},s),(s=Ln.get(d))&&Kf(t,s),m=a.createElement("script"),xt(m),Gt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(d,m))}}function Wy(t,s,a,l){var d=(d=Se.current)?Du(d):null;if(!d)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Ya(a.href),a=ms(d).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Ya(a.href);var m=ms(d).hoistableStyles,_=m.get(t);if(_||(d=d.ownerDocument||d,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,_),(m=d.querySelector(El(t)))&&!m._p&&(_.instance=m,_.state.loading=5),Ln.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ln.set(t,a),m||ew(d,t,a,_.state))),s&&l===null)throw Error(r(528,""));return _}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Qa(a),a=ms(d).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Ya(t){return'href="'+rn(t)+'"'}function El(t){return'link[rel="stylesheet"]['+t+"]"}function Zy(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function ew(t,s,a,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),Gt(s,"link",a),xt(s),t.head.appendChild(s))}function Qa(t){return'[src="'+rn(t)+'"]'}function wl(t){return"script[async]"+t}function ev(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+rn(a.href)+'"]');if(l)return s.instance=l,xt(l),l;var d=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),xt(l),Gt(l,"style",d),Mu(l,a.precedence,t),s.instance=l;case"stylesheet":d=Ya(a.href);var m=t.querySelector(El(d));if(m)return s.state.loading|=4,s.instance=m,xt(m),m;l=Zy(a),(d=Ln.get(d))&&Ff(l,d),m=(t.ownerDocument||t).createElement("link"),xt(m);var _=m;return _._p=new Promise(function(T,k){_.onload=T,_.onerror=k}),Gt(m,"link",l),s.state.loading|=4,Mu(m,a.precedence,t),s.instance=m;case"script":return m=Qa(a.src),(d=t.querySelector(wl(m)))?(s.instance=d,xt(d),d):(l=a,(d=Ln.get(m))&&(l=E({},a),Kf(l,d)),t=t.ownerDocument||t,d=t.createElement("script"),xt(d),Gt(d,"link",l),t.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,Mu(l,a.precedence,t));return s.instance}function Mu(t,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,m=d,_=0;_<l.length;_++){var T=l[_];if(T.dataset.precedence===s)m=T;else if(m!==d)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function Ff(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Kf(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Vu=null;function tv(t,s,a){if(Vu===null){var l=new Map,d=Vu=new Map;d.set(a,l)}else d=Vu,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),d=0;d<a.length;d++){var m=a[d];if(!(m[ds]||m[bt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(s)||"";_=t+_;var T=l.get(_);T?T.push(m):l.set(_,[m])}}return l}function nv(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function tw(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function sv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function nw(t,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=Ya(l.href),m=s.querySelector(El(d));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Lu.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=m,xt(m);return}m=s.ownerDocument||s,l=Zy(l),(d=Ln.get(d))&&Ff(l,d),m=m.createElement("link"),xt(m);var _=m;_._p=new Promise(function(T,k){_.onload=T,_.onerror=k}),Gt(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Lu.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var $f=0;function sw(t,s){return t.stylesheets&&t.count===0&&Uu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Uu(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+s);0<t.imgBytes&&$f===0&&($f=62500*LE());var d=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Uu(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>$f?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function Lu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Uu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Pu=null;function Uu(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Pu=new Map,s.forEach(iw,t),Pu=null,Lu.call(t))}function iw(t,s){if(!(s.state.loading&4)){var a=Pu.get(t);if(a)var l=a.get(null);else{a=new Map,Pu.set(t,a);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var _=d[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}d=s.instance,_=d.getAttribute("data-precedence"),m=a.get(_)||l,m===l&&a.set(null,d),a.set(_,d),this.count++,l=Lu.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),m?m.parentNode.insertBefore(d,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),s.state.loading|=4}}var Sl={$$typeof:ue,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function rw(t,s,a,l,d,m,_,T,k){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=us(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=us(0),this.hiddenUpdates=us(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function iv(t,s,a,l,d,m,_,T,k,q,Z,ie){return t=new rw(t,s,a,_,k,q,Z,ie,T),s=1,m===!0&&(s|=24),m=yn(3,null,null,s),t.current=m,m.stateNode=t,s=Sd(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:s},Id(m),t}function rv(t){return t?(t=Aa,t):Aa}function av(t,s,a,l,d,m){d=rv(d),l.context===null?l.context=d:l.pendingContext=d,l=Ii(s),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=Ri(t,l,s),a!==null&&(hn(a,t,s),sl(a,t,s))}function ov(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function Yf(t,s){ov(t,s),(t=t.alternate)&&ov(t,s)}function lv(t){if(t.tag===13||t.tag===31){var s=Ir(t,67108864);s!==null&&hn(s,t,67108864),Yf(t,67108864)}}function cv(t){if(t.tag===13||t.tag===31){var s=Tn();s=yr(s);var a=Ir(t,s);a!==null&&hn(a,t,s),Yf(t,s)}}var zu=!0;function aw(t,s,a,l){var d=D.T;D.T=null;var m=ee.p;try{ee.p=2,Qf(t,s,a,l)}finally{ee.p=m,D.T=d}}function ow(t,s,a,l){var d=D.T;D.T=null;var m=ee.p;try{ee.p=8,Qf(t,s,a,l)}finally{ee.p=m,D.T=d}}function Qf(t,s,a,l){if(zu){var d=Xf(l);if(d===null)Mf(t,s,l,Bu,a),hv(t,l);else if(cw(d,t,s,a,l))l.stopPropagation();else if(hv(t,l),s&4&&-1<lw.indexOf(t)){for(;d!==null;){var m=An(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=ls(m.pendingLanes);if(_!==0){var T=m;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var k=1<<31-dt(_);T.entanglements[1]|=k,_&=~k}Ns(m),(Ke&6)===0&&(Eu=en()+500,_l(0))}}break;case 31:case 13:T=Ir(m,2),T!==null&&hn(T,m,2),Su(),Yf(m,2)}if(m=Xf(l),m===null&&Mf(t,s,l,Bu,a),m===d)break;d=m}d!==null&&l.stopPropagation()}else Mf(t,s,l,null,a)}}function Xf(t){return t=Nn(t),Jf(t)}var Bu=null;function Jf(t){if(Bu=null,t=fs(t),t!==null){var s=c(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=h(s),t!==null)return t;t=null}else if(a===31){if(t=g(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return Bu=t,null}function uv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fr()){case Co:return 2;case Io:return 8;case mi:case nd:return 32;case _c:return 268435456;default:return 32}default:return 32}}var Wf=!1,Bi=null,Hi=null,Gi=null,Al=new Map,Nl=new Map,qi=[],lw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hv(t,s){switch(t){case"focusin":case"focusout":Bi=null;break;case"dragenter":case"dragleave":Hi=null;break;case"mouseover":case"mouseout":Gi=null;break;case"pointerover":case"pointerout":Al.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nl.delete(s.pointerId)}}function Cl(t,s,a,l,d,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[d]},s!==null&&(s=An(s),s!==null&&lv(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),t)}function cw(t,s,a,l,d){switch(s){case"focusin":return Bi=Cl(Bi,t,s,a,l,d),!0;case"dragenter":return Hi=Cl(Hi,t,s,a,l,d),!0;case"mouseover":return Gi=Cl(Gi,t,s,a,l,d),!0;case"pointerover":var m=d.pointerId;return Al.set(m,Cl(Al.get(m)||null,t,s,a,l,d)),!0;case"gotpointercapture":return m=d.pointerId,Nl.set(m,Cl(Nl.get(m)||null,t,s,a,l,d)),!0}return!1}function dv(t){var s=fs(t.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=h(a),s!==null){t.blockedOn=s,qn(t.priority,function(){cv(a)});return}}else if(s===31){if(s=g(a),s!==null){t.blockedOn=s,qn(t.priority,function(){cv(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hu(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=Xf(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Bo=l,a.target.dispatchEvent(l),Bo=null}else return s=An(a),s!==null&&lv(s),t.blockedOn=a,!1;s.shift()}return!0}function fv(t,s,a){Hu(t)&&a.delete(s)}function uw(){Wf=!1,Bi!==null&&Hu(Bi)&&(Bi=null),Hi!==null&&Hu(Hi)&&(Hi=null),Gi!==null&&Hu(Gi)&&(Gi=null),Al.forEach(fv),Nl.forEach(fv)}function Gu(t,s){t.blockedOn===s&&(t.blockedOn=null,Wf||(Wf=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,uw)))}var qu=null;function mv(t){qu!==t&&(qu=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){qu===t&&(qu=null);for(var s=0;s<t.length;s+=3){var a=t[s],l=t[s+1],d=t[s+2];if(typeof l!="function"){if(Jf(l||a)===null)continue;break}var m=An(a);m!==null&&(t.splice(s,3),s-=3,Qd(m,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function Xa(t){function s(k){return Gu(k,t)}Bi!==null&&Gu(Bi,t),Hi!==null&&Gu(Hi,t),Gi!==null&&Gu(Gi,t),Al.forEach(s),Nl.forEach(s);for(var a=0;a<qi.length;a++){var l=qi[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<qi.length&&(a=qi[0],a.blockedOn===null);)dv(a),a.blockedOn===null&&qi.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],m=a[l+1],_=d[Ot]||null;if(typeof m=="function")_||mv(a);else if(_){var T=null;if(m&&m.hasAttribute("formAction")){if(d=m,_=m[Ot]||null)T=_.formAction;else if(Jf(d)!==null)continue}else T=_.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),mv(a)}}}function gv(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return d=_})},focusReset:"manual",scroll:"manual"})}function s(){d!==null&&(d(),d=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),d!==null&&(d(),d=null)}}}function Zf(t){this._internalRoot=t}Fu.prototype.render=Zf.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,l=Tn();av(a,l,t,s,null,null)},Fu.prototype.unmount=Zf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;av(t.current,2,null,t,null,null),Su(),s[hs]=null}};function Fu(t){this._internalRoot=t}Fu.prototype.unstable_scheduleHydration=function(t){if(t){var s=Sc();t={blockedOn:null,target:t,priority:s};for(var a=0;a<qi.length&&s!==0&&s<qi[a].priority;a++);qi.splice(a,0,t),a===0&&dv(t)}};var pv=e.version;if(pv!=="19.2.3")throw Error(r(527,pv,"19.2.3"));ee.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=p(s),t=t!==null?x(t):null,t=t===null?null:t.stateNode,t};var hw={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ku=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ku.isDisabled&&Ku.supportsFiber)try{Hn=Ku.inject(hw),Pt=Ku}catch{}}return Rl.createRoot=function(t,s){if(!o(t))throw Error(r(299));var a=!1,l="",d=E0,m=w0,_=S0;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=iv(t,1,!1,null,null,a,l,null,d,m,_,gv),t[hs]=s.current,Df(t),new Zf(s)},Rl.hydrateRoot=function(t,s,a){if(!o(t))throw Error(r(299));var l=!1,d="",m=E0,_=w0,T=S0,k=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(k=a.formState)),s=iv(t,1,!0,s,a??null,l,d,k,m,_,T,gv),s.context=rv(null),a=s.current,l=Tn(),l=yr(l),d=Ii(l),d.callback=null,Ri(a,d,l),a=l,s.current.lanes=a,gr(s,a),Ns(s),t[hs]=s.current,Df(t),new Fu(s)},Rl.version="19.2.3",Rl}var Av;function xw(){if(Av)return nm.exports;Av=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),nm.exports=bw(),nm.exports}var Tw=xw();const Ew=Ob(Tw);var Cs;(function(i){i.STRING="string",i.NUMBER="number",i.INTEGER="integer",i.BOOLEAN="boolean",i.ARRAY="array",i.OBJECT="object"})(Cs||(Cs={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nv;(function(i){i.LANGUAGE_UNSPECIFIED="language_unspecified",i.PYTHON="python"})(Nv||(Nv={}));var Cv;(function(i){i.OUTCOME_UNSPECIFIED="outcome_unspecified",i.OUTCOME_OK="outcome_ok",i.OUTCOME_FAILED="outcome_failed",i.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Cv||(Cv={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv=["user","model","function","system"];var Rv;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Rv||(Rv={}));var kv;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(kv||(kv={}));var jv;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(jv||(jv={}));var Ov;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER"})(Ov||(Ov={}));var zl;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.OTHER="OTHER"})(zl||(zl={}));var Dv;(function(i){i.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",i.RETRIEVAL_QUERY="RETRIEVAL_QUERY",i.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",i.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",i.CLASSIFICATION="CLASSIFICATION",i.CLUSTERING="CLUSTERING"})(Dv||(Dv={}));var Mv;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(Mv||(Mv={}));var Vv;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Vv||(Vv={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Ja extends Wt{constructor(e,n){super(e),this.response=n}}class Db extends Wt{constructor(e,n,r,o){super(e),this.status=n,this.statusText=r,this.errorDetails=o}}class Zi extends Wt{}class Mb extends Wt{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="https://generativelanguage.googleapis.com",Sw="v1beta",Aw="0.24.1",Nw="genai-js";var $r;(function(i){i.GENERATE_CONTENT="generateContent",i.STREAM_GENERATE_CONTENT="streamGenerateContent",i.COUNT_TOKENS="countTokens",i.EMBED_CONTENT="embedContent",i.BATCH_EMBED_CONTENTS="batchEmbedContents"})($r||($r={}));class Cw{constructor(e,n,r,o,c){this.model=e,this.task=n,this.apiKey=r,this.stream=o,this.requestOptions=c}toString(){var e,n;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||Sw;let c=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||ww}/${r}/${this.model}:${this.task}`;return this.stream&&(c+="?alt=sse"),c}}function Iw(i){const e=[];return i!=null&&i.apiClient&&e.push(i.apiClient),e.push(`${Nw}/${Aw}`),e.join(" ")}async function Rw(i){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",Iw(i.requestOptions)),n.append("x-goog-api-key",i.apiKey);let r=(e=i.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(o){throw new Zi(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${o.message}`)}for(const[o,c]of r.entries()){if(o==="x-goog-api-key")throw new Zi(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new Zi(`Header name ${o} can only be set using the apiClient field`);n.append(o,c)}}return n}async function kw(i,e,n,r,o,c){const h=new Cw(i,e,n,r,c);return{url:h.toString(),fetchOptions:Object.assign(Object.assign({},Mw(c)),{method:"POST",headers:await Rw(h),body:o})}}async function ac(i,e,n,r,o,c={},h=fetch){const{url:g,fetchOptions:v}=await kw(i,e,n,r,o,c);return jw(g,v,h)}async function jw(i,e,n=fetch){let r;try{r=await n(i,e)}catch(o){Ow(o,i)}return r.ok||await Dw(r,i),r}function Ow(i,e){let n=i;throw n.name==="AbortError"?(n=new Mb(`Request aborted when fetching ${e.toString()}: ${i.message}`),n.stack=i.stack):i instanceof Db||i instanceof Zi||(n=new Wt(`Error fetching from ${e.toString()}: ${i.message}`),n.stack=i.stack),n}async function Dw(i,e){let n="",r;try{const o=await i.json();n=o.error.message,o.error.details&&(n+=` ${JSON.stringify(o.error.details)}`,r=o.error.details)}catch{}throw new Db(`Error fetching from ${e.toString()}: [${i.status} ${i.statusText}] ${n}`,i.status,i.statusText,r)}function Mw(i){const e={};if((i==null?void 0:i.signal)!==void 0||(i==null?void 0:i.timeout)>=0){const n=new AbortController;(i==null?void 0:i.timeout)>=0&&setTimeout(()=>n.abort(),i.timeout),i!=null&&i.signal&&i.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(i){return i.text=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),eh(i.candidates[0]))throw new Ja(`${$i(i)}`,i);return Vw(i)}else if(i.promptFeedback)throw new Ja(`Text not available. ${$i(i)}`,i);return""},i.functionCall=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),eh(i.candidates[0]))throw new Ja(`${$i(i)}`,i);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Lv(i)[0]}else if(i.promptFeedback)throw new Ja(`Function call not available. ${$i(i)}`,i)},i.functionCalls=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),eh(i.candidates[0]))throw new Ja(`${$i(i)}`,i);return Lv(i)}else if(i.promptFeedback)throw new Ja(`Function call not available. ${$i(i)}`,i)},i}function Vw(i){var e,n,r,o;const c=[];if(!((n=(e=i.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const h of(o=(r=i.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)h.text&&c.push(h.text),h.executableCode&&c.push("\n```"+h.executableCode.language+`
`+h.executableCode.code+"\n```\n"),h.codeExecutionResult&&c.push("\n```\n"+h.codeExecutionResult.output+"\n```\n");return c.length>0?c.join(""):""}function Lv(i){var e,n,r,o;const c=[];if(!((n=(e=i.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const h of(o=(r=i.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)h.functionCall&&c.push(h.functionCall);if(c.length>0)return c}const Lw=[zl.RECITATION,zl.SAFETY,zl.LANGUAGE];function eh(i){return!!i.finishReason&&Lw.includes(i.finishReason)}function $i(i){var e,n,r;let o="";if((!i.candidates||i.candidates.length===0)&&i.promptFeedback)o+="Response was blocked",!((e=i.promptFeedback)===null||e===void 0)&&e.blockReason&&(o+=` due to ${i.promptFeedback.blockReason}`),!((n=i.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(o+=`: ${i.promptFeedback.blockReasonMessage}`);else if(!((r=i.candidates)===null||r===void 0)&&r[0]){const c=i.candidates[0];eh(c)&&(o+=`Candidate was blocked due to ${c.finishReason}`,c.finishMessage&&(o+=`: ${c.finishMessage}`))}return o}function Yl(i){return this instanceof Yl?(this.v=i,this):new Yl(i)}function Pw(i,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(i,e||[]),o,c=[];return o={},h("next"),h("throw"),h("return"),o[Symbol.asyncIterator]=function(){return this},o;function h(A){r[A]&&(o[A]=function(V){return new Promise(function(G,ne){c.push([A,V,G,ne])>1||g(A,V)})})}function g(A,V){try{v(r[A](V))}catch(G){E(c[0][3],G)}}function v(A){A.value instanceof Yl?Promise.resolve(A.value.v).then(p,x):E(c[0][2],A)}function p(A){g("next",A)}function x(A){g("throw",A)}function E(A,V){A(V),c.shift(),c.length&&g(c[0][0],c[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Uw(i){const e=i.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=Hw(e),[r,o]=n.tee();return{stream:Bw(r),response:zw(o)}}async function zw(i){const e=[],n=i.getReader();for(;;){const{done:r,value:o}=await n.read();if(r)return ng(Gw(e));e.push(o)}}function Bw(i){return Pw(this,arguments,function*(){const n=i.getReader();for(;;){const{value:r,done:o}=yield Yl(n.read());if(o)break;yield yield Yl(ng(r))}})}function Hw(i){const e=i.getReader();return new ReadableStream({start(r){let o="";return c();function c(){return e.read().then(({value:h,done:g})=>{if(g){if(o.trim()){r.error(new Wt("Failed to parse stream"));return}r.close();return}o+=h;let v=o.match(Pv),p;for(;v;){try{p=JSON.parse(v[1])}catch{r.error(new Wt(`Error parsing JSON response: "${v[1]}"`));return}r.enqueue(p),o=o.substring(v[0].length),v=o.match(Pv)}return c()}).catch(h=>{let g=h;throw g.stack=h.stack,g.name==="AbortError"?g=new Mb("Request aborted when reading from the stream"):g=new Wt("Error reading from the stream"),g})}}})}function Gw(i){const e=i[i.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const r of i){if(r.candidates){let o=0;for(const c of r.candidates)if(n.candidates||(n.candidates=[]),n.candidates[o]||(n.candidates[o]={index:o}),n.candidates[o].citationMetadata=c.citationMetadata,n.candidates[o].groundingMetadata=c.groundingMetadata,n.candidates[o].finishReason=c.finishReason,n.candidates[o].finishMessage=c.finishMessage,n.candidates[o].safetyRatings=c.safetyRatings,c.content&&c.content.parts){n.candidates[o].content||(n.candidates[o].content={role:c.content.role||"user",parts:[]});const h={};for(const g of c.content.parts)g.text&&(h.text=g.text),g.functionCall&&(h.functionCall=g.functionCall),g.executableCode&&(h.executableCode=g.executableCode),g.codeExecutionResult&&(h.codeExecutionResult=g.codeExecutionResult),Object.keys(h).length===0&&(h.text=""),n.candidates[o].content.parts.push(h)}o++}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vb(i,e,n,r){const o=await ac(e,$r.STREAM_GENERATE_CONTENT,i,!0,JSON.stringify(n),r);return Uw(o)}async function Lb(i,e,n,r){const c=await(await ac(e,$r.GENERATE_CONTENT,i,!1,JSON.stringify(n),r)).json();return{response:ng(c)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(i){if(i!=null){if(typeof i=="string")return{role:"system",parts:[{text:i}]};if(i.text)return{role:"system",parts:[i]};if(i.parts)return i.role?i:{role:"system",parts:i.parts}}}function Ql(i){let e=[];if(typeof i=="string")e=[{text:i}];else for(const n of i)typeof n=="string"?e.push({text:n}):e.push(n);return qw(e)}function qw(i){const e={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,o=!1;for(const c of i)"functionResponse"in c?(n.parts.push(c),o=!0):(e.parts.push(c),r=!0);if(r&&o)throw new Wt("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!o)throw new Wt("No content is provided for sending chat message.");return r?e:n}function Fw(i,e){var n;let r={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const o=i.generateContentRequest!=null;if(i.contents){if(o)throw new Zi("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=i.contents}else if(o)r=Object.assign(Object.assign({},r),i.generateContentRequest);else{const c=Ql(i);r.contents=[c]}return{generateContentRequest:r}}function Uv(i){let e;return i.contents?e=i:e={contents:[Ql(i)]},i.systemInstruction&&(e.systemInstruction=Pb(i.systemInstruction)),e}function Kw(i){return typeof i=="string"||Array.isArray(i)?{content:Ql(i)}:i}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],$w={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Yw(i){let e=!1;for(const n of i){const{role:r,parts:o}=n;if(!e&&r!=="user")throw new Wt(`First content should be with role 'user', got ${r}`);if(!Iv.includes(r))throw new Wt(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(Iv)}`);if(!Array.isArray(o))throw new Wt("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new Wt("Each Content should have at least one part");const c={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const g of o)for(const v of zv)v in g&&(c[v]+=1);const h=$w[r];for(const g of zv)if(!h.includes(g)&&c[g]>0)throw new Wt(`Content with role '${r}' can't contain '${g}' part`);e=!0}}function Bv(i){var e;if(i.candidates===void 0||i.candidates.length===0)return!1;const n=(e=i.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const r of n.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="SILENT_ERROR";class Qw{constructor(e,n,r,o={}){this.model=n,this.params=r,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r!=null&&r.history&&(Yw(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var r,o,c,h,g,v;await this._sendPromise;const p=Ql(e),x={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(c=this.params)===null||c===void 0?void 0:c.tools,toolConfig:(h=this.params)===null||h===void 0?void 0:h.toolConfig,systemInstruction:(g=this.params)===null||g===void 0?void 0:g.systemInstruction,cachedContent:(v=this.params)===null||v===void 0?void 0:v.cachedContent,contents:[...this._history,p]},E=Object.assign(Object.assign({},this._requestOptions),n);let A;return this._sendPromise=this._sendPromise.then(()=>Lb(this._apiKey,this.model,x,E)).then(V=>{var G;if(Bv(V.response)){this._history.push(p);const ne=Object.assign({parts:[],role:"model"},(G=V.response.candidates)===null||G===void 0?void 0:G[0].content);this._history.push(ne)}else{const ne=$i(V.response);ne&&console.warn(`sendMessage() was unsuccessful. ${ne}. Inspect response object for details.`)}A=V}).catch(V=>{throw this._sendPromise=Promise.resolve(),V}),await this._sendPromise,A}async sendMessageStream(e,n={}){var r,o,c,h,g,v;await this._sendPromise;const p=Ql(e),x={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(c=this.params)===null||c===void 0?void 0:c.tools,toolConfig:(h=this.params)===null||h===void 0?void 0:h.toolConfig,systemInstruction:(g=this.params)===null||g===void 0?void 0:g.systemInstruction,cachedContent:(v=this.params)===null||v===void 0?void 0:v.cachedContent,contents:[...this._history,p]},E=Object.assign(Object.assign({},this._requestOptions),n),A=Vb(this._apiKey,this.model,x,E);return this._sendPromise=this._sendPromise.then(()=>A).catch(V=>{throw new Error(Hv)}).then(V=>V.response).then(V=>{if(Bv(V)){this._history.push(p);const G=Object.assign({},V.candidates[0].content);G.role||(G.role="model"),this._history.push(G)}else{const G=$i(V);G&&console.warn(`sendMessageStream() was unsuccessful. ${G}. Inspect response object for details.`)}}).catch(V=>{V.message!==Hv&&console.error(V)}),A}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xw(i,e,n,r){return(await ac(e,$r.COUNT_TOKENS,i,!1,JSON.stringify(n),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jw(i,e,n,r){return(await ac(e,$r.EMBED_CONTENT,i,!1,JSON.stringify(n),r)).json()}async function Ww(i,e,n,r){const o=n.requests.map(h=>Object.assign(Object.assign({},h),{model:e}));return(await ac(e,$r.BATCH_EMBED_CONTENTS,i,!1,JSON.stringify({requests:o}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,n,r={}){this.apiKey=e,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=Pb(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var r;const o=Uv(e),c=Object.assign(Object.assign({},this._requestOptions),n);return Lb(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),c)}async generateContentStream(e,n={}){var r;const o=Uv(e),c=Object.assign(Object.assign({},this._requestOptions),n);return Vb(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),c)}startChat(e){var n;return new Qw(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const r=Fw(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),n);return Xw(this.apiKey,this.model,r,o)}async embedContent(e,n={}){const r=Kw(e),o=Object.assign(Object.assign({},this._requestOptions),n);return Jw(this.apiKey,this.model,r,o)}async batchEmbedContents(e,n={}){const r=Object.assign(Object.assign({},this._requestOptions),n);return Ww(this.apiKey,this.model,e,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new Wt("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Gv(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,r){if(!e.name)throw new Zi("Cached content must contain a `name` field.");if(!e.model)throw new Zi("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const h of o)if(n!=null&&n[h]&&e[h]&&(n==null?void 0:n[h])!==e[h]){if(h==="model"){const g=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,v=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(g===v)continue}throw new Zi(`Different value for "${h}" specified in modelParams (${n[h]}) and cachedContent (${e[h]})`)}const c=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new Gv(this.apiKey,c,r)}}const am={},Zw=i=>{let e=[];if(i&&(e=i.split(`
`).map(n=>n.trim()).filter(n=>n)),e.length===0){const n=am==null?void 0:am.VITE_GEMINI_API_KEY;n&&e.push(n)}return e};let Nm=[];const Cm=i=>{Nm=i.filter(e=>e.trim()!=="")},e2=["gemini-2.0-flash-lite-preview-02-05","gemini-2.5-flash","gemini-2.0-flash-lite-001","gemini-2.0-flash","gemini-2.5-pro","gemini-flash-latest"],ea=async(i,e)=>{let n=Zw(i);if(n.length===0&&Nm.length>0&&(n=Nm),n.length===0)throw new Error("No API Keys provided.");let r;for(const o of n){const c=new Mh(o);for(const h of e2)try{const g=c.getGenerativeModel({model:h});return await e(g)}catch(g){console.warn(`Failed: Key(...${o.slice(-4)}) Model(${h}) error: ${g.message}`),r=g}}throw r||new Error("All keys and models failed to generate content.")},t2=async(i,e)=>ea(e,async n=>{const r=`
        c ton b "Kch bn i th" sau v phn tch theo quy tc:
        Kch bn: """${i}"""

        Mc tiu: Rt ra khung xng cu trc cm xc (Hook, Build-up, Value/Twist, CTA).
        
        Yu cu:
        1. Xc nh ranh gii phn theo chc nng cm xc.
        2. Vi tng phn m t: Ni dung chnh, Cm xc ch o, Cch truyn ti cm xc, L do hiu qu.
        3. Rt ra: 3 yu t ct li, c im ngn ng & tit tu (5-8 im), 3 pattern cm xc.
        
        Rng buc: Khng thm nhn vt/bi cnh ngoi script. Khng nh gi cm tnh. 
        KT THC BNG MT ON RING BIT C TIU  "PHONG CCH I TH" lit k cc c im phong cch  bc sau s dng.
      `;return(await n.generateContent(r)).response.text()}),n2=async(i,e)=>ea(e,async n=>{const r=`
        Da trn kt qu phn tch khung xng sau:
        """${i}"""
        
        Nhim v: Sng to ra 5  tng ni dung video mi, gi nguyn "linh hn cm xc" ca kch bn gc.
        
        Mi  tng gm:
        - Tiu  ngn
        - M t ni dung (3-5 cu)
        - Nhn vt/Bi cnh
        - Gi tr ni bt (Cm xc/Thc tin)
        - Kh nng lan truyn

        Response must be a valid JSON array matching the schema:
        [{ "id": number, "title": string, "description": string, "charactersContext": string, "highlightValue": string, "viralPotential": string }]
      `,o=await n.generateContent({contents:[{role:"user",parts:[{text:r}]}],generationConfig:{responseMimeType:"application/json"}});return JSON.parse(o.response.text())}),s2=async(i,e,n,r)=>ea(r,async o=>{const c=`
        Xy dng dn  chi tit da trn:
        - Khung xng gc: """${i}"""
        -  tng chn: """${JSON.stringify(e)}"""
        - Tng s t mc tiu: ${n}

        Cu trc: Gi nguyn form gc (Hook -> Build-up -> Value/Twist -> CTA).
        Yu cu: Vi mi phn nu r: Mc tiu, Cm xc chnh, Ni dung trin khai, Lin kt trc-sau, S t phn b.
      `;return(await o.generateContent(c)).response.text()}),i2=async(i,e,n)=>ea(n,async r=>{const o=`
        Vit li thoi kch bn hon chnh (voice-ready) da trn dn  v phong cch sau:
        - Dn : """${i}"""
        - Phong cch m phng: """${e}"""

        QUY TC NGHIM NGT:
        1. Ch tr v li thoi sch 100%. Khng tiu , khng ch thch, khng ngoc ( ), khng nhc nn.
        2. Vit lin mch theo th t Hook -> Build-up -> Value/Twist -> CTA.
      `;return(await r.generateContent(o)).response.text()}),r2=async(i,e,n)=>ea(n,async r=>{const o=`
        Da trn kch bn video sau:
        """${i}"""
        
        Hy chn ra 1 phong cch hnh nh ph hp nht t danh sch sau:
        ${e.join(", ")}
        
        Ch tr v duy nht tn ID ca phong cch , khng gii thch g thm.
      `;return(await r.generateContent(o)).response.text().trim()}),a2=async(i,e,n)=>ea(n,async r=>{const o=`
        Da trn kch bn sau v phong cch hnh nh [${e}]:
        Kch bn: """${i}"""
        
        Hy thit k chi tit cc nhn vt xut hin trong kch bn. Nu kch bn khng m t r, hy t sng to chi tit  m bo tnh thm m v ng b.
        
        QUY TC BT BUC: 
        1. Phn "bodyType" (Dng ngi): Ghi CC K NGN GN (v d: "Cao gy", "Mp mp", "Cn i", "Vm v").
        2. Phn "facialDetails" (c im khun mt): 
           - Nu kch bn thiu, hy t thm cho y  nhng phi M T GN GNG, KHNG LNG NHNG, KHNG VN HOA. 
           - CH C M T TRNG THI BNH THNG/TRUNG TNH (Neutral expression).
           - TUYT I KHNG a vo cm xc hay tnh hung c th (v d: KHNG ghi "ang khc", "mt lm lem", "ci nham him"). Ch m t cu trc vt l (mt, mi, ming, da, tc...).

        Tr v nh dng JSON mng cc i tng:
        - name: Tn nhn vt
        - gender: Gii tnh
        - country: Quc gia/Chng tc
        - age:  tui
        - bodyType: Dng ngi (ngn gn nht c th)
        - facialDetails: c im chi tit khun mt (cu trc vt l, gn gng, khng cm xc)
      `,c=await r.generateContent({contents:[{role:"user",parts:[{text:o}]}],generationConfig:{responseMimeType:"application/json"}});return JSON.parse(c.response.text())}),o2=async(i,e,n,r)=>ea(r,async o=>{const c=n.map(v=>`[Nhn vt: ${v.name} | Gii tnh: ${v.gender} | Quc gia: ${v.country} | Tui: ${v.age} | Dng ngi: ${v.bodyType} | Khun mt: ${v.facialDetails}]`).join(`
`),h=`
        Bn l mt CHUYN GIA PHN TCH TNH HUNG v o din hnh nh i ti.
        Nhim v: Phn tch kch bn sau  trch xut cc hnh ng quay (Shot Action).

        Kch bn: """${i}"""
        
        THNG TIN NHN VT GC (BT BUC PHI SAO CHP CHNH XC KHI NHC N):
        ${c}

        NGUYN TC PHN TCH TNH HUNG (SITUATIONAL ANALYSIS):
        1. QUAN ST NG CNH: Da vo ni dung lin trc (nu c) v lin sau ca mi hnh ng, hy suy lun logic xem nhn vt no ANG C MT trong cnh .
        2. D ON NHN VT: Nu kch bn khng nhc tn nhng logic tnh hung cho thy nhn vt  phi   (v d: ang i thoi, ang ng cnh), BT BUC phi a h vo.
        3. HIN TH TRONG 'ACTION': Trong trng 'action' (M t ngn hnh ng), hy lit k tn cc nhn vt c mt u tin, sau  n m t hnh ng.

        QUY TC TO PROMPT (Strict Compliance - Rules Override All):

        0. [TUN TH TUYT I - KHNG C B TRNG]:
           - Trng 'imagePrompt' (Stable Image AI Prompt) l BT BUC CHO MI ACTION.
           - Tuyt i KHNG tr v chui rng "" cho imagePrompt.
           - Nu khng ngh ra prompt mi, hy copy ni dung t motionPrompt sang v lc b cc yu t chuyn ng camera.
        
        1. [VISUAL STYLE]: Lun bt u bng phong cch: [${e}].

        2. [Bi cnh] (Context Memory):
           - Nu kch bn khng nu r, hy T THM chi tit (bn gh,  vt, b cc...).
           - C ch GHI NH: Nu bi cnh cha i so vi shot trc, hy DNG LI bi cnh c. Nu i, hy thit lp bi cnh mi chi tit v ghi nh cho cc shot sau.

        3. [CAMERA]: Gc my, chuyn ng my (Cinematic wording).

        4. [ACTION] (Character Consistency):
           - Khi nhc n nhn vt no, BT BUC COPY NGUYN VN "c im nhn vt" (Gii tnh, Tui, Dng, Khun mt) vo prompt. KHNG TM TT.
           - AI t c kch bn  b tr v tr nhn vt logic.
           - QUAN TRNG: Nu shot ch c NG 1 nhn vt, bt buc thm dng: "The scene contains EXACTLY ONE character" vo cui phn Action.

        5. [Trang Phc] (Costume Memory):
           - Nu kch bn khng nu, hy t thm v ghi mu sc c th.
           - C ch GHI NH: Tng t bi cnh, lp li trang phc nu cha i cnh/thi gian.

        6. [AUDIO/VOICE  LIP SYNC] (Video Only):
           - Cu trc: [Tn nhn vt ni: "Li thoi trong Master Transcript"]
           - Nu khng c thoi, b qua hoc ghi nhc nn.

        7. [SPEECH SYNC] (Video Only):
           - Nu c li thoi, BT BUC ghi: "Chuyn ng ming nhn vt ng b vi li thoi".

        8. [TECHNICAL]: nh sng, mu sc (Lighting, Color).

        CU TRC PROMPT VIDEO (Video Motion Ai Prompt - Output String):
        [${e}], [Bi cnh chi tit], [CAMERA], [ACTION: Tn NV + c im gc + Hnh ng chi tit. ${n.length===1?"The scene contains EXACTLY ONE character":"Check logic"}], [Trang phc], [AUDIO/VOICE  LIP SYNC], [SPEECH SYNC], [TECHNICAL]

        CU TRC PROMPT NH (Stable Image AI Prompt - Output String) - BT BUC C:
        [${e}], [Bi cnh chi tit], [CAMERA], [ACTION: Tn NV + c im gc + Hnh ng chi tit. ${n.length===1?"The scene contains EXACTLY ONE character":"Check logic"}], [Trang phc], [TECHNICAL]

        TR V JSON Array cc object:
        - action: [Tn cc NV c mt]: [M t hnh ng]
        - voiceText: Li thoi (nu c)
        - motionPrompt: Prompt video (Tun th cu trc trn)
        - imagePrompt: Prompt nh (Tun th cu trc trn - KHNG C RNG)
      `,g=await o.generateContent({contents:[{role:"user",parts:[{text:h}]}],generationConfig:{responseMimeType:"application/json"}});return JSON.parse(g.response.text())}),l2=({userId:i})=>{const[e,n]=ce.useState(!1),[r,o]=ce.useState(!1),[c,h]=ce.useState({gemini:"",chatgpt:"",openrouter:""}),[g,v]=ce.useState(!1),p=B=>{try{return btoa(B)}catch{return B}},x=B=>{try{return atob(B)}catch{return B}},E=`app_api_keys_${i}`;ce.useEffect(()=>{const B=localStorage.getItem(E);if(!B){h({gemini:"",chatgpt:"",openrouter:""}),Cm([]);return}if(B)try{const X=JSON.parse(B),J={gemini:x(X.gemini||""),chatgpt:x(X.chatgpt||""),openrouter:x(X.openrouter||"")};h(J),J.gemini&&A(J.gemini)}catch(X){console.error("Failed to parse keys",X)}},[i]);const A=B=>{const X=B.split(`
`).map(J=>J.trim()).filter(J=>J!=="");Cm(X)},V=()=>{if(!(c.gemini.trim()!==""||c.chatgpt.trim()!==""||c.openrouter.trim()!=="")){alert("Li: Bn phi nhp t nht 1 API Key vo mt trong 3 mc  tip tc!");return}const X={gemini:p(c.gemini),chatgpt:p(c.chatgpt),openrouter:p(c.openrouter)};localStorage.setItem(E,JSON.stringify(X)),c.gemini&&A(c.gemini),v(!0),setTimeout(()=>v(!1),3e3)},G=(B,X)=>{h(J=>({...J,[B]:X}))},ne=()=>f.jsx("div",{className:"absolute inset-0 bg-slate-900/90 backdrop-blur-sm flex items-center justify-center cursor-pointer z-10 rounded-lg border border-slate-700/50",onClick:()=>o(!0),children:f.jsxs("span",{className:"text-slate-400 text-xs font-medium flex items-center gap-2",children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}),"Click to Show Keys"]})});return f.jsxs("div",{className:"w-full bg-[#0f172a] border-b border-white/10 relative z-[200]",children:[f.jsxs("div",{className:"px-6 py-2 flex items-center justify-between cursor-pointer hover:bg-white/5 transition-all text-xs font-bold uppercase tracking-widest text-slate-400",onClick:()=>n(!e),children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{className:`w-4 h-4 transition-transform ${e?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})}),f.jsxs("span",{children:["API Configuration Manager",f.jsxs("span",{className:"ml-2 text-indigo-400 normal-case tracking-normal opacity-70",children:["(User: ",i.replace("user_","Account ")," - ",r?"Visible":"Hidden",")"]}),g&&f.jsx("span",{className:"text-emerald-400 ml-4 animate-in fade-in slide-in-from-left-2 normal-case tracking-normal",children:" Saved!"})]})]}),f.jsxs("div",{className:"flex gap-4 items-center",children:[f.jsx("button",{onClick:B=>{B.stopPropagation(),o(!r)},className:"text-[10px] bg-slate-800 px-2 py-1 rounded hover:bg-slate-700 transition",children:r?"Hide Keys":"Show Keys"}),f.jsxs("div",{className:"flex gap-4 opacity-50",children:[f.jsxs("span",{children:["Gemini: ",c.gemini?c.gemini.split(`
`).filter(B=>B.trim()).length:0]}),f.jsx("span",{className:"opacity-30",children:"|"}),f.jsxs("span",{children:["GPT: ",c.chatgpt?c.chatgpt.split(`
`).filter(B=>B.trim()).length:0]}),f.jsx("span",{className:"opacity-30",children:"|"}),f.jsxs("span",{children:["OR: ",c.openrouter?c.openrouter.split(`
`).filter(B=>B.trim()).length:0]})]})]})]}),e&&f.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-3 gap-6 animate-in slide-in-from-top-2 duration-300 bg-black/20",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-[10px] uppercase font-black text-indigo-400 tracking-widest",children:"Google Gemini Keys"}),f.jsxs("div",{className:"relative group",children:[!r&&f.jsx(ne,{}),f.jsx("textarea",{value:c.gemini,onChange:B=>G("gemini",B.target.value),placeholder:`AIzaSy...
AIzaSy...`,rows:4,disabled:!r,className:`w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white text-xs font-mono focus:border-indigo-500 focus:ring-1 outline-none transition-all resize-y ${r?"":"blur-sm select-none"}`})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-[10px] uppercase font-black text-emerald-400 tracking-widest",children:"ChatGPT Keys"}),f.jsxs("div",{className:"relative group",children:[!r&&f.jsx(ne,{}),f.jsx("textarea",{value:c.chatgpt,onChange:B=>G("chatgpt",B.target.value),placeholder:`sk-...
sk-...`,rows:4,disabled:!r,className:`w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white text-xs font-mono focus:border-emerald-500 focus:ring-1 outline-none transition-all resize-y ${r?"":"blur-sm select-none"}`})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-[10px] uppercase font-black text-rose-400 tracking-widest",children:"OpenRouter Keys"}),f.jsxs("div",{className:"relative group",children:[!r&&f.jsx(ne,{}),f.jsx("textarea",{value:c.openrouter,onChange:B=>G("openrouter",B.target.value),placeholder:`sk-or-...
sk-or-...`,rows:4,disabled:!r,className:`w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white text-xs font-mono focus:border-rose-500 focus:ring-1 outline-none transition-all resize-y ${r?"":"blur-sm select-none"}`})]})]}),f.jsxs("div",{className:"md:col-span-3 flex flex-col md:flex-row items-center justify-between mt-2 gap-4",children:[f.jsxs("p",{className:"text-[10px] text-slate-500 italic text-center md:text-left",children:["* Bo mt: Key lu ring cho ti khon ",f.jsx("b",{children:i}),". ",f.jsx("br",{}),"H thng t ng xoay vng key khi chy."]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:async()=>{const B=c.gemini.split(`
`).map(J=>J.trim()).filter(J=>J!=="");if(B.length===0){alert("Vui lng nhp v LU t nht 1 API Key Gemini trc khi test!");return}const X=B[0];try{const ue=await(await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${X}`)).json();if(ue.error)alert(`Li: ${ue.error.message}`);else if(ue.models){const U=ue.models.map(K=>K.name.replace("models/","")).slice(0,10).join(", ");alert(`Kt ni OK! C ${ue.models.length} models:
${U}`)}else alert("Phn hi l: "+JSON.stringify(ue))}catch(J){alert("Li mng: "+J.message)}},className:"bg-blue-600/20 text-blue-400 font-bold uppercase text-xs px-6 py-3 rounded-xl hover:bg-blue-600/30 transition-all border border-blue-600/30",children:"Test Local"}),f.jsx("button",{onClick:V,className:"bg-white text-slate-900 font-black uppercase text-xs px-8 py-3 rounded-xl hover:bg-slate-200 active:scale-95 transition-all shadow-lg flex items-center gap-2",children:"Lu cu hnh (Save)"})]})]})]})]})},c2=()=>{};var qv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub=function(i){const e=[];let n=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},u2=function(i){const e=[];let n=0,r=0;for(;n<i.length;){const o=i[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[n++];e[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[n++],h=i[n++],g=i[n++],v=((o&7)<<18|(c&63)<<12|(h&63)<<6|g&63)-65536;e[r++]=String.fromCharCode(55296+(v>>10)),e[r++]=String.fromCharCode(56320+(v&1023))}else{const c=i[n++],h=i[n++];e[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|h&63)}}return e.join("")},zb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const c=i[o],h=o+1<i.length,g=h?i[o+1]:0,v=o+2<i.length,p=v?i[o+2]:0,x=c>>2,E=(c&3)<<4|g>>4;let A=(g&15)<<2|p>>6,V=p&63;v||(V=64,h||(A=64)),r.push(n[x],n[E],n[A],n[V])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Ub(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):u2(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const c=n[i.charAt(o++)],g=o<i.length?n[i.charAt(o)]:0;++o;const p=o<i.length?n[i.charAt(o)]:64;++o;const E=o<i.length?n[i.charAt(o)]:64;if(++o,c==null||g==null||p==null||E==null)throw new h2;const A=c<<2|g>>4;if(r.push(A),p!==64){const V=g<<4&240|p>>2;if(r.push(V),E!==64){const G=p<<6&192|E;r.push(G)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class h2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const d2=function(i){const e=Ub(i);return zb.encodeByteArray(e,!0)},hh=function(i){return d2(i).replace(/\./g,"")},Bb=function(i){try{return zb.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=()=>f2().__FIREBASE_DEFAULTS__,g2=()=>{if(typeof process>"u"||typeof qv>"u")return;const i=qv.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},p2=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Bb(i[1]);return e&&JSON.parse(e)},Vh=()=>{try{return c2()||m2()||g2()||p2()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Hb=i=>{var e,n;return(n=(e=Vh())==null?void 0:e.emulatorHosts)==null?void 0:n[i]},y2=i=>{const e=Hb(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Gb=()=>{var i;return(i=Vh())==null?void 0:i.config},qb=i=>{var e;return(e=Vh())==null?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yo(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Fb(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[hh(JSON.stringify(n)),hh(JSON.stringify(h)),""].join(".")}const Bl={};function b2(){const i={prod:[],emulator:[]};for(const e of Object.keys(Bl))Bl[e]?i.emulator.push(e):i.prod.push(e);return i}function x2(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let Fv=!1;function Kb(i,e){if(typeof window>"u"||typeof document>"u"||!yo(window.location.host)||Bl[i]===e||Bl[i]||Fv)return;Bl[i]=e;function n(A){return`__firebase__banner__${A}`}const r="__firebase__banner",c=b2().prod.length>0;function h(){const A=document.getElementById(r);A&&A.remove()}function g(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function v(A,V){A.setAttribute("width","24"),A.setAttribute("id",V),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function p(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Fv=!0,h()},A}function x(A,V){A.setAttribute("id",V),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function E(){const A=x2(r),V=n("text"),G=document.getElementById(V)||document.createElement("span"),ne=n("learnmore"),B=document.getElementById(ne)||document.createElement("a"),X=n("preprendIcon"),J=document.getElementById(X)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const ue=A.element;g(ue),x(B,ne);const U=p();v(J,X),ue.append(J,G,B,U),document.body.appendChild(ue)}c?(G.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,G.innerText="Preview backend running in this workspace."),G.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function T2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function E2(){var e;const i=(e=Vh())==null?void 0:e.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function w2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $b(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function S2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function A2(){const i=Zt();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function N2(){return!E2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Yb(){try{return typeof indexedDB=="object"}catch{return!1}}function Qb(){return new Promise((i,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)==null?void 0:c.message)||"")}}catch(n){e(n)}})}function C2(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2="FirebaseError";class rs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=I2,Object.setPrototypeOf(this,rs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ta.prototype.create)}}class ta{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],h=c?R2(c,r):"Error",g=`${this.serviceName}: ${h} (${o}).`;return new rs(o,g,r)}}function R2(i,e){return i.replace(k2,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const k2=/\{\$([^}]+)}/g;function j2(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function ir(i,e){if(i===e)return!0;const n=Object.keys(i),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const c=i[o],h=e[o];if(Kv(c)&&Kv(h)){if(!ir(c,h))return!1}else if(c!==h)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function Kv(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(i){const e=[];for(const[n,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ol(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,c]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function Dl(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function O2(i,e){const n=new D2(i,e);return n.subscribe.bind(n)}class D2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");M2(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=om),o.error===void 0&&(o.error=om),o.complete===void 0&&(o.complete=om);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function M2(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function om(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=1e3,L2=2,P2=14400*1e3,U2=.5;function $v(i,e=V2,n=L2){const r=e*Math.pow(n,i),o=Math.round(U2*r*(Math.random()-.5)*2);return Math.min(P2,r+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(i){return i&&i._delegate?i._delegate:i}class ss{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new v2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(H2(e))try{this.getOrInitializeService({instanceIdentifier:Hr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(e=Hr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hr){return this.instances.has(e)}getOptions(e=Hr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,h]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);r===g&&h.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const c=this.instances.get(r);return c&&e(c,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:B2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Hr){return this.component?this.component.multipleInstances?e:Hr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function B2(i){return i===Hr?void 0:i}function H2(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new z2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Pe||(Pe={}));const q2={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},F2=Pe.INFO,K2={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},$2=(i,e,...n)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=K2[e];if(o)console[o](`[${r}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Lh{constructor(e){this.name=e,this._logLevel=F2,this._logHandler=$2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?q2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const Y2=(i,e)=>e.some(n=>i instanceof n);let Yv,Qv;function Q2(){return Yv||(Yv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function X2(){return Qv||(Qv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Xb=new WeakMap,Im=new WeakMap,Jb=new WeakMap,lm=new WeakMap,sg=new WeakMap;function J2(i){const e=new Promise((n,r)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",h)},c=()=>{n(er(i.result)),o()},h=()=>{r(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&Xb.set(n,i)}).catch(()=>{}),sg.set(e,i),e}function W2(i){if(Im.has(i))return;const e=new Promise((n,r)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",h),i.removeEventListener("abort",h)},c=()=>{n(),o()},h=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",h),i.addEventListener("abort",h)});Im.set(i,e)}let Rm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Im.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Jb.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return er(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Z2(i){Rm=i(Rm)}function eS(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=i.call(cm(this),e,...n);return Jb.set(r,e.sort?e.sort():[e]),er(r)}:X2().includes(i)?function(...e){return i.apply(cm(this),e),er(Xb.get(this))}:function(...e){return er(i.apply(cm(this),e))}}function tS(i){return typeof i=="function"?eS(i):(i instanceof IDBTransaction&&W2(i),Y2(i,Q2())?new Proxy(i,Rm):i)}function er(i){if(i instanceof IDBRequest)return J2(i);if(lm.has(i))return lm.get(i);const e=tS(i);return e!==i&&(lm.set(i,e),sg.set(e,i)),e}const cm=i=>sg.get(i);function Wb(i,e,{blocked:n,upgrade:r,blocking:o,terminated:c}={}){const h=indexedDB.open(i,e),g=er(h);return r&&h.addEventListener("upgradeneeded",v=>{r(er(h.result),v.oldVersion,v.newVersion,er(h.transaction),v)}),n&&h.addEventListener("blocked",v=>n(v.oldVersion,v.newVersion,v)),g.then(v=>{c&&v.addEventListener("close",()=>c()),o&&v.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),g}const nS=["get","getKey","getAll","getAllKeys","count"],sS=["put","add","delete","clear"],um=new Map;function Xv(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(um.get(e))return um.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=sS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||nS.includes(n)))return;const c=async function(h,...g){const v=this.transaction(h,o?"readwrite":"readonly");let p=v.store;return r&&(p=p.index(g.shift())),(await Promise.all([p[n](...g),o&&v.done]))[0]};return um.set(e,c),c}Z2(i=>({...i,get:(e,n,r)=>Xv(e,n)||i.get(e,n,r),has:(e,n)=>!!Xv(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function rS(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const km="@firebase/app",Jv="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li=new Lh("@firebase/app"),aS="@firebase/app-compat",oS="@firebase/analytics-compat",lS="@firebase/analytics",cS="@firebase/app-check-compat",uS="@firebase/app-check",hS="@firebase/auth",dS="@firebase/auth-compat",fS="@firebase/database",mS="@firebase/data-connect",gS="@firebase/database-compat",pS="@firebase/functions",yS="@firebase/functions-compat",vS="@firebase/installations",_S="@firebase/installations-compat",bS="@firebase/messaging",xS="@firebase/messaging-compat",TS="@firebase/performance",ES="@firebase/performance-compat",wS="@firebase/remote-config",SS="@firebase/remote-config-compat",AS="@firebase/storage",NS="@firebase/storage-compat",CS="@firebase/firestore",IS="@firebase/ai",RS="@firebase/firestore-compat",kS="firebase",jS="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="[DEFAULT]",OS={[km]:"fire-core",[aS]:"fire-core-compat",[lS]:"fire-analytics",[oS]:"fire-analytics-compat",[uS]:"fire-app-check",[cS]:"fire-app-check-compat",[hS]:"fire-auth",[dS]:"fire-auth-compat",[fS]:"fire-rtdb",[mS]:"fire-data-connect",[gS]:"fire-rtdb-compat",[pS]:"fire-fn",[yS]:"fire-fn-compat",[vS]:"fire-iid",[_S]:"fire-iid-compat",[bS]:"fire-fcm",[xS]:"fire-fcm-compat",[TS]:"fire-perf",[ES]:"fire-perf-compat",[wS]:"fire-rc",[SS]:"fire-rc-compat",[AS]:"fire-gcs",[NS]:"fire-gcs-compat",[CS]:"fire-fst",[RS]:"fire-fst-compat",[IS]:"fire-vertex","fire-js":"fire-js",[kS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh=new Map,DS=new Map,Om=new Map;function Wv(i,e){try{i.container.addComponent(e)}catch(n){li.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Ms(i){const e=i.name;if(Om.has(e))return li.debug(`There were multiple attempts to register component ${e}.`),!1;Om.set(e,i);for(const n of dh.values())Wv(n,i);for(const n of DS.values())Wv(n,i);return!0}function na(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Pn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},tr=new ta("app","Firebase",MS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=jS;function Zb(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const r={name:jm,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw tr.create("bad-app-name",{appName:String(o)});if(n||(n=Gb()),!n)throw tr.create("no-options");const c=dh.get(o);if(c){if(ir(n,c.options)&&ir(r,c.config))return c;throw tr.create("duplicate-app",{appName:o})}const h=new G2(o);for(const v of Om.values())h.addComponent(v);const g=new VS(n,r,h);return dh.set(o,g),g}function ig(i=jm){const e=dh.get(i);if(!e&&i===jm&&Gb())return Zb();if(!e)throw tr.create("no-app",{appName:i});return e}function Bn(i,e,n){let r=OS[i]??i;n&&(r+=`-${n}`);const o=r.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const h=[`Unable to register library "${r}" with version "${e}":`];o&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),li.warn(h.join(" "));return}Ms(new ss(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="firebase-heartbeat-database",PS=1,Xl="firebase-heartbeat-store";let hm=null;function ex(){return hm||(hm=Wb(LS,PS,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Xl)}catch(n){console.warn(n)}}}}).catch(i=>{throw tr.create("idb-open",{originalErrorMessage:i.message})})),hm}async function US(i){try{const n=(await ex()).transaction(Xl),r=await n.objectStore(Xl).get(tx(i));return await n.done,r}catch(e){if(e instanceof rs)li.warn(e.message);else{const n=tr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});li.warn(n.message)}}}async function Zv(i,e){try{const r=(await ex()).transaction(Xl,"readwrite");await r.objectStore(Xl).put(e,tx(i)),await r.done}catch(n){if(n instanceof rs)li.warn(n.message);else{const r=tr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});li.warn(r.message)}}}function tx(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS=1024,BS=30;class HS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=e_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(h=>h.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>BS){const h=FS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){li.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=e_(),{heartbeatsToSend:r,unsentEntries:o}=GS(this._heartbeatsCache.heartbeats),c=hh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return li.warn(n),""}}}function e_(){return new Date().toISOString().substring(0,10)}function GS(i,e=zS){const n=[];let r=i.slice();for(const o of i){const c=n.find(h=>h.agent===o.agent);if(c){if(c.dates.push(o.date),t_(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),t_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class qS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Yb()?Qb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await US(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Zv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Zv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function t_(i){return hh(JSON.stringify({version:2,heartbeats:i})).length}function FS(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let r=1;r<i.length;r++)i[r].date<n&&(n=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(i){Ms(new ss("platform-logger",e=>new iS(e),"PRIVATE")),Ms(new ss("heartbeat",e=>new HS(e),"PRIVATE")),Bn(km,Jv,i),Bn(km,Jv,"esm2020"),Bn("fire-js","")}KS("");function nx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $S=nx,sx=new ta("auth","Firebase",nx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh=new Lh("@firebase/auth");function YS(i,...e){fh.logLevel<=Pe.WARN&&fh.warn(`Auth (${vo}): ${i}`,...e)}function th(i,...e){fh.logLevel<=Pe.ERROR&&fh.error(`Auth (${vo}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(i,...e){throw rg(i,...e)}function Rs(i,...e){return rg(i,...e)}function ix(i,e,n){const r={...$S(),[e]:n};return new ta("auth","Firebase",r).create(e,{appName:i.name})}function ai(i){return ix(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rg(i,...e){if(typeof i!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(n,...r)}return sx.create(i,...e)}function Ee(i,e,...n){if(!i)throw rg(e,...n)}function ii(i){const e="INTERNAL ASSERTION FAILED: "+i;throw th(e),new Error(e)}function ci(i,e){i||ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.href)||""}function QS(){return n_()==="http:"||n_()==="https:"}function n_(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QS()||$b()||"connection"in navigator)?navigator.onLine:!0}function JS(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,n){this.shortDelay=e,this.longDelay=n,ci(n>e,"Short delay should be less than long delay!"),this.isMobile=T2()||S2()}get(){return XS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(i,e){ci(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],eA=new lc(3e4,6e4);function di(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Ps(i,e,n,r,o={}){return ax(i,o,async()=>{let c={},h={};r&&(e==="GET"?h=r:c={body:JSON.stringify(r)});const g=oc({key:i.config.apiKey,...h}).slice(1),v=await i._getAdditionalHeaders();v["Content-Type"]="application/json",i.languageCode&&(v["X-Firebase-Locale"]=i.languageCode);const p={method:e,headers:v,...c};return w2()||(p.referrerPolicy="no-referrer"),i.emulatorConfig&&yo(i.emulatorConfig.host)&&(p.credentials="include"),rx.fetch()(await ox(i,i.config.apiHost,n,g),p)})}async function ax(i,e,n){i._canInitEmulator=!1;const r={...WS,...e};try{const o=new nA(i),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await c.json();if("needConfirmation"in h)throw $u(i,"account-exists-with-different-credential",h);if(c.ok&&!("errorMessage"in h))return h;{const g=c.ok?h.errorMessage:h.error.message,[v,p]=g.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw $u(i,"credential-already-in-use",h);if(v==="EMAIL_EXISTS")throw $u(i,"email-already-in-use",h);if(v==="USER_DISABLED")throw $u(i,"user-disabled",h);const x=r[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw ix(i,x,p);is(i,x)}}catch(o){if(o instanceof rs)throw o;is(i,"network-request-failed",{message:String(o)})}}async function cc(i,e,n,r,o={}){const c=await Ps(i,e,n,r,o);return"mfaPendingCredential"in c&&is(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function ox(i,e,n,r){const o=`${e}${n}?${r}`,c=i,h=c.config.emulator?ag(i.config,o):`${i.config.apiScheme}://${o}`;return ZS.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(h).toString():h}function tA(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Rs(this.auth,"network-request-failed")),eA.get())})}}function $u(i,e,n){const r={appName:i.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=Rs(i,e,r);return o.customData._tokenResponse=n,o}function s_(i){return i!==void 0&&i.enterprise!==void 0}class sA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return tA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function iA(i,e){return Ps(i,"GET","/v2/recaptchaConfig",di(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rA(i,e){return Ps(i,"POST","/v1/accounts:delete",e)}async function mh(i,e){return Ps(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function aA(i,e=!1){const n=Kt(i),r=await n.getIdToken(e),o=og(r);Ee(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,h=c==null?void 0:c.sign_in_provider;return{claims:o,token:r,authTime:Hl(dm(o.auth_time)),issuedAtTime:Hl(dm(o.iat)),expirationTime:Hl(dm(o.exp)),signInProvider:h||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function dm(i){return Number(i)*1e3}function og(i){const[e,n,r]=i.split(".");if(e===void 0||n===void 0||r===void 0)return th("JWT malformed, contained fewer than 3 sections"),null;try{const o=Bb(n);return o?JSON.parse(o):(th("Failed to decode base64 JWT payload"),null)}catch(o){return th("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function i_(i){const e=og(i);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function co(i,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof rs&&oA(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function oA({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hl(this.lastLoginAt),this.creationTime=Hl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gh(i){var E;const e=i.auth,n=await i.getIdToken(),r=await co(i,mh(e,{idToken:n}));Ee(r==null?void 0:r.users.length,e,"internal-error");const o=r.users[0];i._notifyReloadListener(o);const c=(E=o.providerUserInfo)!=null&&E.length?lx(o.providerUserInfo):[],h=uA(i.providerData,c),g=i.isAnonymous,v=!(i.email&&o.passwordHash)&&!(h!=null&&h.length),p=g?v:!1,x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Mm(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(i,x)}async function cA(i){const e=Kt(i);await gh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uA(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function lx(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hA(i,e){const n=await ax(i,{},async()=>{const r=oc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,h=await ox(i,o,"/v1/token",`key=${c}`),g=await i._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const v={method:"POST",headers:g,body:r};return i.emulatorConfig&&yo(i.emulatorConfig.host)&&(v.credentials="include"),rx.fetch()(h,v)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function dA(i,e){return Ps(i,"POST","/v2/accounts:revokeToken",di(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):i_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const n=i_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:c}=await hA(e,n);this.updateTokensAndExpiration(r,o,Number(c))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:c}=n,h=new so;return r&&(Ee(typeof r=="string","internal-error",{appName:e}),h.refreshToken=r),o&&(Ee(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),c&&(Ee(typeof c=="number","internal-error",{appName:e}),h.expirationTime=c),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new so,this.toJSON())}_performRefresh(){return ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(i,e){Ee(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class es{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new lA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Mm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await co(this,this.stsTokenManager.getToken(this.auth,e));return Ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return aA(this,e)}reload(){return cA(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new es({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await gh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pn(this.auth.app))return Promise.reject(ai(this.auth));const e=await this.getIdToken();return await co(this,rA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,h=n.photoURL??void 0,g=n.tenantId??void 0,v=n._redirectEventId??void 0,p=n.createdAt??void 0,x=n.lastLoginAt??void 0,{uid:E,emailVerified:A,isAnonymous:V,providerData:G,stsTokenManager:ne}=n;Ee(E&&ne,e,"internal-error");const B=so.fromJSON(this.name,ne);Ee(typeof E=="string",e,"internal-error"),Ki(r,e.name),Ki(o,e.name),Ee(typeof A=="boolean",e,"internal-error"),Ee(typeof V=="boolean",e,"internal-error"),Ki(c,e.name),Ki(h,e.name),Ki(g,e.name),Ki(v,e.name),Ki(p,e.name),Ki(x,e.name);const X=new es({uid:E,auth:e,email:o,emailVerified:A,displayName:r,isAnonymous:V,photoURL:h,phoneNumber:c,tenantId:g,stsTokenManager:B,createdAt:p,lastLoginAt:x});return G&&Array.isArray(G)&&(X.providerData=G.map(J=>({...J}))),v&&(X._redirectEventId=v),X}static async _fromIdTokenResponse(e,n,r=!1){const o=new so;o.updateFromServerResponse(n);const c=new es({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await gh(c),c}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];Ee(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?lx(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),g=new so;g.updateFromIdToken(r);const v=new es({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:h}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Mm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(v,p),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_=new Map;function ri(i){ci(i instanceof Function,"Expected a class definition");let e=r_.get(i);return e?(ci(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,r_.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}cx.type="NONE";const a_=cx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(i,e,n){return`firebase:${i}:${e}:${n}`}class io{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:c}=this.auth;this.fullUserKey=nh(this.userKey,o.apiKey,c),this.fullPersistenceKey=nh("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await mh(this.auth,{idToken:e}).catch(()=>{});return n?es._fromGetAccountInfoResponse(this.auth,n,e):null}return es._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new io(ri(a_),e,r);const o=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let c=o[0]||ri(a_);const h=nh(r,e.config.apiKey,e.name);let g=null;for(const p of n)try{const x=await p._get(h);if(x){let E;if(typeof x=="string"){const A=await mh(e,{idToken:x}).catch(()=>{});if(!A)break;E=await es._fromGetAccountInfoResponse(e,A,x)}else E=es._fromJSON(e,x);p!==c&&(g=E),c=p;break}}catch{}const v=o.filter(p=>p._shouldAllowMigration);return!c._shouldAllowMigration||!v.length?new io(c,e,r):(c=v[0],g&&await c._set(h,g.toJSON()),await Promise.all(n.map(async p=>{if(p!==c)try{await p._remove(h)}catch{}})),new io(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ux(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gx(e))return"Blackberry";if(px(e))return"Webos";if(hx(e))return"Safari";if((e.includes("chrome/")||dx(e))&&!e.includes("edge/"))return"Chrome";if(mx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ux(i=Zt()){return/firefox\//i.test(i)}function hx(i=Zt()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dx(i=Zt()){return/crios\//i.test(i)}function fx(i=Zt()){return/iemobile/i.test(i)}function mx(i=Zt()){return/android/i.test(i)}function gx(i=Zt()){return/blackberry/i.test(i)}function px(i=Zt()){return/webos/i.test(i)}function lg(i=Zt()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function fA(i=Zt()){var e;return lg(i)&&!!((e=window.navigator)!=null&&e.standalone)}function mA(){return A2()&&document.documentMode===10}function yx(i=Zt()){return lg(i)||mx(i)||px(i)||gx(i)||/windows phone/i.test(i)||fx(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(i,e=[]){let n;switch(i){case"Browser":n=o_(Zt());break;case"Worker":n=`${o_(Zt())}-${i}`;break;default:n=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${vo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=c=>new Promise((h,g)=>{try{const v=e(c);h(v)}catch(v){g(v)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pA(i,e={}){return Ps(i,"GET","/v2/passwordPolicy",di(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=6;class vA{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??yA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new l_(this),this.idTokenSubscription=new l_(this),this.beforeStateQueue=new gA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ri(n)),this._initializationPromise=this.queue(async()=>{var r,o,c;if(!this._deleted&&(this.persistenceManager=await io.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await mh(this,{idToken:e}),r=await es._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(Pn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(g,g))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(c=this.redirectUser)==null?void 0:c._redirectEventId,g=r==null?void 0:r._redirectEventId,v=await this.tryRedirectSignIn(e);(!h||h===g)&&(v!=null&&v.user)&&(r=v.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(h){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await gh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=JS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pn(this.app))return Promise.reject(ai(this));const n=e?Kt(e):null;return n&&Ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pn(this.app)?Promise.reject(ai(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pn(this.app)?Promise.reject(ai(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ri(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pA(this),n=new vA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ta("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await dA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ri(e)||this._popupRedirectResolver;Ee(n,this,"argument-error"),this.redirectPersistenceManager=await io.create(this,[ri(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let h=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(g,this,"internal-error"),g.then(()=>{h||c(this.currentUser)}),typeof n=="function"){const v=e.addObserver(n,r,o);return()=>{h=!0,v()}}else{const v=e.addObserver(n);return()=>{h=!0,v()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&YS(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function hr(i){return Kt(i)}class l_{constructor(e){this.auth=e,this.observer=null,this.addObserver=O2(n=>this.observer=n)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ph={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bA(i){Ph=i}function _x(i){return Ph.loadJS(i)}function xA(){return Ph.recaptchaEnterpriseScript}function TA(){return Ph.gapiScript}function EA(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class wA{constructor(){this.enterprise=new SA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class SA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const AA="recaptcha-enterprise",bx="NO_RECAPTCHA";class NA{constructor(e){this.type=AA,this.auth=hr(e)}async verify(e="verify",n=!1){async function r(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(h,g)=>{iA(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(v=>{if(v.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const p=new sA(v);return c.tenantId==null?c._agentRecaptchaConfig=p:c._tenantRecaptchaConfigs[c.tenantId]=p,h(p.siteKey)}}).catch(v=>{g(v)})})}function o(c,h,g){const v=window.grecaptcha;s_(v)?v.enterprise.ready(()=>{v.enterprise.execute(c,{action:e}).then(p=>{h(p)}).catch(()=>{h(bx)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new wA().execute("siteKey",{action:"verify"}):new Promise((c,h)=>{r(this.auth).then(g=>{if(!n&&s_(window.grecaptcha))o(g,c,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let v=xA();v.length!==0&&(v+=g),_x(v).then(()=>{o(g,c,h)}).catch(p=>{h(p)})}}).catch(g=>{h(g)})})}}async function c_(i,e,n,r=!1,o=!1){const c=new NA(i);let h;if(o)h=bx;else try{h=await c.verify(n)}catch{h=await c.verify(n,!0)}const g={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const v=g.phoneEnrollmentInfo.phoneNumber,p=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:v,recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const v=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:v,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return r?Object.assign(g,{captchaResp:h}):Object.assign(g,{captchaResponse:h}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function ph(i,e,n,r,o){var c;if((c=i._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await c_(i,e,n,n==="getOobCode");return r(i,h)}else return r(i,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await c_(i,e,n,n==="getOobCode");return r(i,g)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(i,e){const n=na(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(ir(c,e??{}))return o;is(o,"already-initialized")}return n.initialize({options:e})}function IA(i,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ri);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function RA(i,e,n){const r=hr(i);Ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,c=xx(e),{host:h,port:g}=kA(e),v=g===null?"":`:${g}`,p={url:`${c}//${h}${v}/`},x=Object.freeze({host:h,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ee(ir(p,r.config.emulator)&&ir(x,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=x,r.settings.appVerificationDisabledForTesting=!0,yo(h)?(Fb(`${c}//${h}${v}`),Kb("Auth",!0)):jA()}function xx(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function kA(i){const e=xx(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const c=o[1];return{host:c,port:u_(r.substr(c.length+1))}}else{const[c,h]=r.split(":");return{host:c,port:u_(h)}}}function u_(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function jA(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ii("not implemented")}_getIdTokenResponse(e){return ii("not implemented")}_linkToIdToken(e,n){return ii("not implemented")}_getReauthenticationResolver(e){return ii("not implemented")}}async function OA(i,e){return Ps(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA(i,e){return cc(i,"POST","/v1/accounts:signInWithPassword",di(i,e))}async function MA(i,e){return Ps(i,"POST","/v1/accounts:sendOobCode",di(i,e))}async function VA(i,e){return MA(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LA(i,e){return cc(i,"POST","/v1/accounts:signInWithEmailLink",di(i,e))}async function PA(i,e){return cc(i,"POST","/v1/accounts:signInWithEmailLink",di(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl extends cg{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Jl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Jl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ph(e,n,"signInWithPassword",DA);case"emailLink":return LA(e,{email:this._email,oobCode:this._password});default:is(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ph(e,r,"signUpPassword",OA);case"emailLink":return PA(e,{idToken:n,email:this._email,oobCode:this._password});default:is(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ro(i,e){return cc(i,"POST","/v1/accounts:signInWithIdp",di(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="http://localhost";class Yr extends cg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Yr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):is("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...c}=n;if(!r||!o)return null;const h=new Yr(r,o);return h.idToken=c.idToken||void 0,h.accessToken=c.accessToken||void 0,h.secret=c.secret,h.nonce=c.nonce,h.pendingToken=c.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return ro(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ro(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ro(e,n)}buildRequest(){const e={requestUri:UA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=oc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function BA(i){const e=Ol(Dl(i)).link,n=e?Ol(Dl(e)).deep_link_id:null,r=Ol(Dl(i)).deep_link_id;return(r?Ol(Dl(r)).link:null)||r||n||e||i}class ug{constructor(e){const n=Ol(Dl(e)),r=n.apiKey??null,o=n.oobCode??null,c=zA(n.mode??null);Ee(r&&o&&c,"argument-error"),this.apiKey=r,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=BA(e);try{return new ug(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(){this.providerId=_o.PROVIDER_ID}static credential(e,n){return Jl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ug.parseLink(n);return Ee(r,"argument-error"),Jl._fromEmailAndCode(e,r.code,r.tenantId)}}_o.PROVIDER_ID="password";_o.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_o.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc extends Tx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends uc{constructor(){super("facebook.com")}static credential(e){return Yr._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yi.credential(e.oauthAccessToken)}catch{return null}}}Yi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends uc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Yr._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Qi.credential(n,r)}catch{return null}}}Qi.GOOGLE_SIGN_IN_METHOD="google.com";Qi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends uc{constructor(){super("github.com")}static credential(e){return Yr._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xi.credential(e.oauthAccessToken)}catch{return null}}}Xi.GITHUB_SIGN_IN_METHOD="github.com";Xi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends uc{constructor(){super("twitter.com")}static credential(e,n){return Yr._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ji.credential(n,r)}catch{return null}}}Ji.TWITTER_SIGN_IN_METHOD="twitter.com";Ji.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HA(i,e){return cc(i,"POST","/v1/accounts:signUp",di(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const c=await es._fromIdTokenResponse(e,r,o),h=h_(r);return new Qr({user:c,providerId:h,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=h_(r);return new Qr({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function h_(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh extends rs{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,yh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new yh(e,n,r,o)}}function Ex(i,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?yh._fromErrorAndOperation(i,c,e,r):c})}async function GA(i,e,n=!1){const r=await co(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return Qr._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qA(i,e,n=!1){const{auth:r}=i;if(Pn(r.app))return Promise.reject(ai(r));const o="reauthenticate";try{const c=await co(i,Ex(r,o,e,i),n);Ee(c.idToken,r,"internal-error");const h=og(c.idToken);Ee(h,r,"internal-error");const{sub:g}=h;return Ee(i.uid===g,r,"user-mismatch"),Qr._forOperation(i,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&is(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wx(i,e,n=!1){if(Pn(i.app))return Promise.reject(ai(i));const r="signIn",o=await Ex(i,r,e),c=await Qr._fromIdTokenResponse(i,r,o);return n||await i._updateCurrentUser(c.user),c}async function FA(i,e){return wx(hr(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sx(i){const e=hr(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function KA(i,e,n){const r=hr(i);await ph(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",VA)}async function $A(i,e,n){if(Pn(i.app))return Promise.reject(ai(i));const r=hr(i),h=await ph(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",HA).catch(v=>{throw v.code==="auth/password-does-not-meet-requirements"&&Sx(i),v}),g=await Qr._fromIdTokenResponse(r,"signIn",h);return await r._updateCurrentUser(g.user),g}function YA(i,e,n){return Pn(i.app)?Promise.reject(ai(i)):FA(Kt(i),_o.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Sx(i),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QA(i,e){return Ps(i,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XA(i,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Kt(i),c={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},h=await co(r,QA(r.auth,c));r.displayName=h.displayName||null,r.photoURL=h.photoUrl||null;const g=r.providerData.find(({providerId:v})=>v==="password");g&&(g.displayName=r.displayName,g.photoURL=r.photoURL),await r._updateTokensIfNecessary(h)}function JA(i,e,n,r){return Kt(i).onIdTokenChanged(e,n,r)}function WA(i,e,n){return Kt(i).beforeAuthStateChanged(e,n)}function ZA(i,e,n,r){return Kt(i).onAuthStateChanged(e,n,r)}function eN(i){return Kt(i).signOut()}const vh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(vh,"1"),this.storage.removeItem(vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=1e3,nN=10;class Nx extends Ax{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,g,v)=>{this.notifyListeners(h,v)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(r);!n&&this.localCache[r]===h||this.notifyListeners(r,h)},c=this.storage.getItem(r);mA()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,nN):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},tN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Nx.type="LOCAL";const sN=Nx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx extends Ax{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Cx.type="SESSION";const Ix=Cx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new Uh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:c}=n.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const g=Array.from(h).map(async p=>p(n.origin,c)),v=await iN(g);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:v})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Uh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(i="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,h;return new Promise((g,v)=>{const p=hg("",20);o.port1.start();const x=setTimeout(()=>{v(new Error("unsupported_event"))},r);h={messageChannel:o,onMessage(E){const A=E;if(A.data.eventId===p)switch(A.data.status){case"ack":clearTimeout(x),c=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(A.data.response);break;default:clearTimeout(x),clearTimeout(c),v(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(){return window}function aN(i){ks().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(){return typeof ks().WorkerGlobalScope<"u"&&typeof ks().importScripts=="function"}async function oN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function lN(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)==null?void 0:i.controller)||null}function cN(){return Rx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx="firebaseLocalStorageDb",uN=1,_h="firebaseLocalStorage",jx="fbase_key";class hc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function zh(i,e){return i.transaction([_h],e?"readwrite":"readonly").objectStore(_h)}function hN(){const i=indexedDB.deleteDatabase(kx);return new hc(i).toPromise()}function Vm(){const i=indexedDB.open(kx,uN);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(_h,{keyPath:jx})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(_h)?e(r):(r.close(),await hN(),e(await Vm()))})})}async function d_(i,e,n){const r=zh(i,!0).put({[jx]:e,value:n});return new hc(r).toPromise()}async function dN(i,e){const n=zh(i,!1).get(e),r=await new hc(n).toPromise();return r===void 0?null:r.value}function f_(i,e){const n=zh(i,!0).delete(e);return new hc(n).toPromise()}const fN=800,mN=3;class Ox{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>mN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Rx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Uh._getInstance(cN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await oN(),!this.activeServiceWorker)return;this.sender=new rN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||lN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vm();return await d_(e,vh,"1"),await f_(e,vh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>d_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>dN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>f_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=zh(o,!1).getAll();return new hc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),fN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ox.type="LOCAL";const gN=Ox;new lc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(i,e){return e?ri(e):(Ee(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg extends cg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ro(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ro(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ro(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function yN(i){return wx(i.auth,new dg(i),i.bypassAuthState)}function vN(i){const{auth:e,user:n}=i;return Ee(n,e,"internal-error"),qA(n,new dg(i),i.bypassAuthState)}async function _N(i){const{auth:e,user:n}=i;return Ee(n,e,"internal-error"),GA(n,new dg(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e,n,r,o,c=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:c,error:h,type:g}=e;if(h){this.reject(h);return}const v={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(v))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yN;case"linkViaPopup":case"linkViaRedirect":return _N;case"reauthViaPopup":case"reauthViaRedirect":return vN;default:is(this.auth,"internal-error")}}resolve(e){ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN=new lc(2e3,1e4);class no extends Dx{constructor(e,n,r,o,c){super(e,n,o,c),this.provider=r,this.authWindow=null,this.pollId=null,no.currentPopupAction&&no.currentPopupAction.cancel(),no.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){ci(this.filter.length===1,"Popup operations only handle one event");const e=hg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Rs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Rs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,no.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bN.get())};e()}}no.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN="pendingRedirect",sh=new Map;class TN extends Dx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=sh.get(this.auth._key());if(!e){try{const r=await EN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}sh.set(this.auth._key(),e)}return this.bypassAuthState||sh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function EN(i,e){const n=AN(e),r=SN(i);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function wN(i,e){sh.set(i._key(),e)}function SN(i){return ri(i._redirectPersistence)}function AN(i){return nh(xN,i.config.apiKey,i.name)}async function NN(i,e,n=!1){if(Pn(i.app))return Promise.reject(ai(i));const r=hr(i),o=pN(r,e),h=await new TN(r,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await r._persistUserIfCurrent(h.user),await r._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=600*1e3;class IN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!RN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Mx(e)){const o=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Rs(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=CN&&this.cachedEventUids.clear(),this.cachedEventUids.has(m_(e))}saveEventToCache(e){this.cachedEventUids.add(m_(e)),this.lastProcessedEventTime=Date.now()}}function m_(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Mx({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function RN(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mx(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(i,e={}){return Ps(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ON=/^https?/;async function DN(i){if(i.config.emulator)return;const{authorizedDomains:e}=await kN(i);for(const n of e)try{if(MN(n))return}catch{}is(i,"unauthorized-domain")}function MN(i){const e=Dm(),{protocol:n,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const h=new URL(i);return h.hostname===""&&r===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===r}if(!ON.test(n))return!1;if(jN.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=new lc(3e4,6e4);function g_(){const i=ks().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function LN(i){return new Promise((e,n)=>{var o,c,h;function r(){g_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{g_(),n(Rs(i,"network-request-failed"))},timeout:VN.get()})}if((c=(o=ks().gapi)==null?void 0:o.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((h=ks().gapi)!=null&&h.load)r();else{const g=EA("iframefcb");return ks()[g]=()=>{gapi.load?r():n(Rs(i,"network-request-failed"))},_x(`${TA()}?onload=${g}`).catch(v=>n(v))}}).catch(e=>{throw ih=null,e})}let ih=null;function PN(i){return ih=ih||LN(i),ih}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=new lc(5e3,15e3),zN="__/auth/iframe",BN="emulator/auth/iframe",HN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qN(i){const e=i.config;Ee(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?ag(e,BN):`https://${i.config.authDomain}/${zN}`,r={apiKey:e.apiKey,appName:i.name,v:vo},o=GN.get(i.config.apiHost);o&&(r.eid=o);const c=i._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${oc(r).slice(1)}`}async function FN(i){const e=await PN(i),n=ks().gapi;return Ee(n,i,"internal-error"),e.open({where:document.body,url:qN(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HN,dontclear:!0},r=>new Promise(async(o,c)=>{await r.restyle({setHideOnLeave:!1});const h=Rs(i,"network-request-failed"),g=ks().setTimeout(()=>{c(h)},UN.get());function v(){ks().clearTimeout(g),o(r)}r.ping(v).then(v,()=>{c(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$N=500,YN=600,QN="_blank",XN="http://localhost";class p_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function JN(i,e,n,r=$N,o=YN){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-r)/2,0).toString();let g="";const v={...KN,width:r.toString(),height:o.toString(),top:c,left:h},p=Zt().toLowerCase();n&&(g=dx(p)?QN:n),ux(p)&&(e=e||XN,v.scrollbars="yes");const x=Object.entries(v).reduce((A,[V,G])=>`${A}${V}=${G},`,"");if(fA(p)&&g!=="_self")return WN(e||"",g),new p_(null);const E=window.open(e||"",g,x);Ee(E,i,"popup-blocked");try{E.focus()}catch{}return new p_(E)}function WN(i,e){const n=document.createElement("a");n.href=i,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN="__/auth/handler",eC="emulator/auth/handler",tC=encodeURIComponent("fac");async function y_(i,e,n,r,o,c){Ee(i.config.authDomain,i,"auth-domain-config-required"),Ee(i.config.apiKey,i,"invalid-api-key");const h={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:r,v:vo,eventId:o};if(e instanceof Tx){e.setDefaultLanguage(i.languageCode),h.providerId=e.providerId||"",j2(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,E]of Object.entries({}))h[x]=E}if(e instanceof uc){const x=e.getScopes().filter(E=>E!=="");x.length>0&&(h.scopes=x.join(","))}i.tenantId&&(h.tid=i.tenantId);const g=h;for(const x of Object.keys(g))g[x]===void 0&&delete g[x];const v=await i._getAppCheckToken(),p=v?`#${tC}=${encodeURIComponent(v)}`:"";return`${nC(i)}?${oc(g).slice(1)}${p}`}function nC({config:i}){return i.emulator?ag(i,eC):`https://${i.authDomain}/${ZN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm="webStorageSupport";class sC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ix,this._completeRedirectFn=NN,this._overrideRedirectResult=wN}async _openPopup(e,n,r,o){var h;ci((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const c=await y_(e,n,r,Dm(),o);return JN(e,c,hg())}async _openRedirect(e,n,r,o){await this._originValidation(e);const c=await y_(e,n,r,Dm(),o);return aN(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(ci(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await FN(e),r=new IN(e);return n.register("authEvent",o=>(Ee(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(fm,{type:fm},o=>{var h;const c=(h=o==null?void 0:o[0])==null?void 0:h[fm];c!==void 0&&n(!!c),is(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=DN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return yx()||hx()||lg()}}const iC=sC;var v_="@firebase/auth",__="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oC(i){Ms(new ss("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:h,authDomain:g}=r.options;Ee(h&&!h.includes(":"),"invalid-api-key",{appName:r.name});const v={apiKey:h,authDomain:g,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vx(i)},p=new _A(r,o,c,v);return IA(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ms(new ss("auth-internal",e=>{const n=hr(e.getProvider("auth").getImmediate());return(r=>new rC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bn(v_,__,aC(i)),Bn(v_,__,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=300,cC=qb("authIdTokenMaxAge")||lC;let b_=null;const uC=i=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>cC)return;const o=n==null?void 0:n.token;b_!==o&&(b_=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function hC(i=ig()){const e=na(i,"auth");if(e.isInitialized())return e.getImmediate();const n=CA(i,{popupRedirectResolver:iC,persistence:[gN,sN,Ix]}),r=qb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const h=uC(c.toString());WA(n,h,()=>h(n.currentUser)),JA(n,g=>h(g))}}const o=Hb("auth");return o&&RA(n,`http://${o}`),n}function dC(){var i;return((i=document.getElementsByTagName("head"))==null?void 0:i[0])??document}bA({loadJS(i){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const c=Rs("internal-error");c.customData=o,n(c)},r.type="text/javascript",r.charset="UTF-8",dC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oC("Browser");var x_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nr,Vx;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,S){function R(){}R.prototype=S.prototype,C.F=S.prototype,C.prototype=new R,C.prototype.constructor=C,C.D=function(j,O,I){for(var N=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)N[Q-2]=arguments[Q];return S.prototype[O].apply(j,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,S,R){R||(R=0);const j=Array(16);if(typeof S=="string")for(var O=0;O<16;++O)j[O]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(O=0;O<16;++O)j[O]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=C.g[0],R=C.g[1],O=C.g[2];let I=C.g[3],N;N=S+(I^R&(O^I))+j[0]+3614090360&4294967295,S=R+(N<<7&4294967295|N>>>25),N=I+(O^S&(R^O))+j[1]+3905402710&4294967295,I=S+(N<<12&4294967295|N>>>20),N=O+(R^I&(S^R))+j[2]+606105819&4294967295,O=I+(N<<17&4294967295|N>>>15),N=R+(S^O&(I^S))+j[3]+3250441966&4294967295,R=O+(N<<22&4294967295|N>>>10),N=S+(I^R&(O^I))+j[4]+4118548399&4294967295,S=R+(N<<7&4294967295|N>>>25),N=I+(O^S&(R^O))+j[5]+1200080426&4294967295,I=S+(N<<12&4294967295|N>>>20),N=O+(R^I&(S^R))+j[6]+2821735955&4294967295,O=I+(N<<17&4294967295|N>>>15),N=R+(S^O&(I^S))+j[7]+4249261313&4294967295,R=O+(N<<22&4294967295|N>>>10),N=S+(I^R&(O^I))+j[8]+1770035416&4294967295,S=R+(N<<7&4294967295|N>>>25),N=I+(O^S&(R^O))+j[9]+2336552879&4294967295,I=S+(N<<12&4294967295|N>>>20),N=O+(R^I&(S^R))+j[10]+4294925233&4294967295,O=I+(N<<17&4294967295|N>>>15),N=R+(S^O&(I^S))+j[11]+2304563134&4294967295,R=O+(N<<22&4294967295|N>>>10),N=S+(I^R&(O^I))+j[12]+1804603682&4294967295,S=R+(N<<7&4294967295|N>>>25),N=I+(O^S&(R^O))+j[13]+4254626195&4294967295,I=S+(N<<12&4294967295|N>>>20),N=O+(R^I&(S^R))+j[14]+2792965006&4294967295,O=I+(N<<17&4294967295|N>>>15),N=R+(S^O&(I^S))+j[15]+1236535329&4294967295,R=O+(N<<22&4294967295|N>>>10),N=S+(O^I&(R^O))+j[1]+4129170786&4294967295,S=R+(N<<5&4294967295|N>>>27),N=I+(R^O&(S^R))+j[6]+3225465664&4294967295,I=S+(N<<9&4294967295|N>>>23),N=O+(S^R&(I^S))+j[11]+643717713&4294967295,O=I+(N<<14&4294967295|N>>>18),N=R+(I^S&(O^I))+j[0]+3921069994&4294967295,R=O+(N<<20&4294967295|N>>>12),N=S+(O^I&(R^O))+j[5]+3593408605&4294967295,S=R+(N<<5&4294967295|N>>>27),N=I+(R^O&(S^R))+j[10]+38016083&4294967295,I=S+(N<<9&4294967295|N>>>23),N=O+(S^R&(I^S))+j[15]+3634488961&4294967295,O=I+(N<<14&4294967295|N>>>18),N=R+(I^S&(O^I))+j[4]+3889429448&4294967295,R=O+(N<<20&4294967295|N>>>12),N=S+(O^I&(R^O))+j[9]+568446438&4294967295,S=R+(N<<5&4294967295|N>>>27),N=I+(R^O&(S^R))+j[14]+3275163606&4294967295,I=S+(N<<9&4294967295|N>>>23),N=O+(S^R&(I^S))+j[3]+4107603335&4294967295,O=I+(N<<14&4294967295|N>>>18),N=R+(I^S&(O^I))+j[8]+1163531501&4294967295,R=O+(N<<20&4294967295|N>>>12),N=S+(O^I&(R^O))+j[13]+2850285829&4294967295,S=R+(N<<5&4294967295|N>>>27),N=I+(R^O&(S^R))+j[2]+4243563512&4294967295,I=S+(N<<9&4294967295|N>>>23),N=O+(S^R&(I^S))+j[7]+1735328473&4294967295,O=I+(N<<14&4294967295|N>>>18),N=R+(I^S&(O^I))+j[12]+2368359562&4294967295,R=O+(N<<20&4294967295|N>>>12),N=S+(R^O^I)+j[5]+4294588738&4294967295,S=R+(N<<4&4294967295|N>>>28),N=I+(S^R^O)+j[8]+2272392833&4294967295,I=S+(N<<11&4294967295|N>>>21),N=O+(I^S^R)+j[11]+1839030562&4294967295,O=I+(N<<16&4294967295|N>>>16),N=R+(O^I^S)+j[14]+4259657740&4294967295,R=O+(N<<23&4294967295|N>>>9),N=S+(R^O^I)+j[1]+2763975236&4294967295,S=R+(N<<4&4294967295|N>>>28),N=I+(S^R^O)+j[4]+1272893353&4294967295,I=S+(N<<11&4294967295|N>>>21),N=O+(I^S^R)+j[7]+4139469664&4294967295,O=I+(N<<16&4294967295|N>>>16),N=R+(O^I^S)+j[10]+3200236656&4294967295,R=O+(N<<23&4294967295|N>>>9),N=S+(R^O^I)+j[13]+681279174&4294967295,S=R+(N<<4&4294967295|N>>>28),N=I+(S^R^O)+j[0]+3936430074&4294967295,I=S+(N<<11&4294967295|N>>>21),N=O+(I^S^R)+j[3]+3572445317&4294967295,O=I+(N<<16&4294967295|N>>>16),N=R+(O^I^S)+j[6]+76029189&4294967295,R=O+(N<<23&4294967295|N>>>9),N=S+(R^O^I)+j[9]+3654602809&4294967295,S=R+(N<<4&4294967295|N>>>28),N=I+(S^R^O)+j[12]+3873151461&4294967295,I=S+(N<<11&4294967295|N>>>21),N=O+(I^S^R)+j[15]+530742520&4294967295,O=I+(N<<16&4294967295|N>>>16),N=R+(O^I^S)+j[2]+3299628645&4294967295,R=O+(N<<23&4294967295|N>>>9),N=S+(O^(R|~I))+j[0]+4096336452&4294967295,S=R+(N<<6&4294967295|N>>>26),N=I+(R^(S|~O))+j[7]+1126891415&4294967295,I=S+(N<<10&4294967295|N>>>22),N=O+(S^(I|~R))+j[14]+2878612391&4294967295,O=I+(N<<15&4294967295|N>>>17),N=R+(I^(O|~S))+j[5]+4237533241&4294967295,R=O+(N<<21&4294967295|N>>>11),N=S+(O^(R|~I))+j[12]+1700485571&4294967295,S=R+(N<<6&4294967295|N>>>26),N=I+(R^(S|~O))+j[3]+2399980690&4294967295,I=S+(N<<10&4294967295|N>>>22),N=O+(S^(I|~R))+j[10]+4293915773&4294967295,O=I+(N<<15&4294967295|N>>>17),N=R+(I^(O|~S))+j[1]+2240044497&4294967295,R=O+(N<<21&4294967295|N>>>11),N=S+(O^(R|~I))+j[8]+1873313359&4294967295,S=R+(N<<6&4294967295|N>>>26),N=I+(R^(S|~O))+j[15]+4264355552&4294967295,I=S+(N<<10&4294967295|N>>>22),N=O+(S^(I|~R))+j[6]+2734768916&4294967295,O=I+(N<<15&4294967295|N>>>17),N=R+(I^(O|~S))+j[13]+1309151649&4294967295,R=O+(N<<21&4294967295|N>>>11),N=S+(O^(R|~I))+j[4]+4149444226&4294967295,S=R+(N<<6&4294967295|N>>>26),N=I+(R^(S|~O))+j[11]+3174756917&4294967295,I=S+(N<<10&4294967295|N>>>22),N=O+(S^(I|~R))+j[2]+718787259&4294967295,O=I+(N<<15&4294967295|N>>>17),N=R+(I^(O|~S))+j[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(O+(N<<21&4294967295|N>>>11))&4294967295,C.g[2]=C.g[2]+O&4294967295,C.g[3]=C.g[3]+I&4294967295}r.prototype.v=function(C,S){S===void 0&&(S=C.length);const R=S-this.blockSize,j=this.C;let O=this.h,I=0;for(;I<S;){if(O==0)for(;I<=R;)o(this,C,I),I+=this.blockSize;if(typeof C=="string"){for(;I<S;)if(j[O++]=C.charCodeAt(I++),O==this.blockSize){o(this,j),O=0;break}}else for(;I<S;)if(j[O++]=C[I++],O==this.blockSize){o(this,j),O=0;break}}this.h=O,this.o+=S},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;S=this.o*8;for(var R=C.length-8;R<C.length;++R)C[R]=S&255,S/=256;for(this.v(C),C=Array(16),S=0,R=0;R<4;++R)for(let j=0;j<32;j+=8)C[S++]=this.g[R]>>>j&255;return C};function c(C,S){var R=g;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=S(C)}function h(C,S){this.h=S;const R=[];let j=!0;for(let O=C.length-1;O>=0;O--){const I=C[O]|0;j&&I==S||(R[O]=I,j=!1)}this.g=R}var g={};function v(C){return-128<=C&&C<128?c(C,function(S){return new h([S|0],S<0?-1:0)}):new h([C|0],C<0?-1:0)}function p(C){if(isNaN(C)||!isFinite(C))return E;if(C<0)return B(p(-C));const S=[];let R=1;for(let j=0;C>=R;j++)S[j]=C/R|0,R*=4294967296;return new h(S,0)}function x(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return B(x(C.substring(1),S));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=p(Math.pow(S,8));let j=E;for(let I=0;I<C.length;I+=8){var O=Math.min(8,C.length-I);const N=parseInt(C.substring(I,I+O),S);O<8?(O=p(Math.pow(S,O)),j=j.j(O).add(p(N))):(j=j.j(R),j=j.add(p(N)))}return j}var E=v(0),A=v(1),V=v(16777216);i=h.prototype,i.m=function(){if(ne(this))return-B(this).m();let C=0,S=1;for(let R=0;R<this.g.length;R++){const j=this.i(R);C+=(j>=0?j:4294967296+j)*S,S*=4294967296}return C},i.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(G(this))return"0";if(ne(this))return"-"+B(this).toString(C);const S=p(Math.pow(C,6));var R=this;let j="";for(;;){const O=U(R,S).g;R=X(R,O.j(S));let I=((R.g.length>0?R.g[0]:R.h)>>>0).toString(C);if(R=O,G(R))return I+j;for(;I.length<6;)I="0"+I;j=I+j}},i.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function G(C){if(C.h!=0)return!1;for(let S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function ne(C){return C.h==-1}i.l=function(C){return C=X(this,C),ne(C)?-1:G(C)?0:1};function B(C){const S=C.g.length,R=[];for(let j=0;j<S;j++)R[j]=~C.g[j];return new h(R,~C.h).add(A)}i.abs=function(){return ne(this)?B(this):this},i.add=function(C){const S=Math.max(this.g.length,C.g.length),R=[];let j=0;for(let O=0;O<=S;O++){let I=j+(this.i(O)&65535)+(C.i(O)&65535),N=(I>>>16)+(this.i(O)>>>16)+(C.i(O)>>>16);j=N>>>16,I&=65535,N&=65535,R[O]=N<<16|I}return new h(R,R[R.length-1]&-2147483648?-1:0)};function X(C,S){return C.add(B(S))}i.j=function(C){if(G(this)||G(C))return E;if(ne(this))return ne(C)?B(this).j(B(C)):B(B(this).j(C));if(ne(C))return B(this.j(B(C)));if(this.l(V)<0&&C.l(V)<0)return p(this.m()*C.m());const S=this.g.length+C.g.length,R=[];for(var j=0;j<2*S;j++)R[j]=0;for(j=0;j<this.g.length;j++)for(let O=0;O<C.g.length;O++){const I=this.i(j)>>>16,N=this.i(j)&65535,Q=C.i(O)>>>16,ae=C.i(O)&65535;R[2*j+2*O]+=N*ae,J(R,2*j+2*O),R[2*j+2*O+1]+=I*ae,J(R,2*j+2*O+1),R[2*j+2*O+1]+=N*Q,J(R,2*j+2*O+1),R[2*j+2*O+2]+=I*Q,J(R,2*j+2*O+2)}for(C=0;C<S;C++)R[C]=R[2*C+1]<<16|R[2*C];for(C=S;C<2*S;C++)R[C]=0;return new h(R,0)};function J(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function ue(C,S){this.g=C,this.h=S}function U(C,S){if(G(S))throw Error("division by zero");if(G(C))return new ue(E,E);if(ne(C))return S=U(B(C),S),new ue(B(S.g),B(S.h));if(ne(S))return S=U(C,B(S)),new ue(B(S.g),S.h);if(C.g.length>30){if(ne(C)||ne(S))throw Error("slowDivide_ only works with positive integers.");for(var R=A,j=S;j.l(C)<=0;)R=K(R),j=K(j);var O=se(R,1),I=se(j,1);for(j=se(j,2),R=se(R,2);!G(j);){var N=I.add(j);N.l(C)<=0&&(O=O.add(R),I=N),j=se(j,1),R=se(R,1)}return S=X(C,O.j(S)),new ue(O,S)}for(O=E;C.l(S)>=0;){for(R=Math.max(1,Math.floor(C.m()/S.m())),j=Math.ceil(Math.log(R)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),I=p(R),N=I.j(S);ne(N)||N.l(C)>0;)R-=j,I=p(R),N=I.j(S);G(I)&&(I=A),O=O.add(I),C=X(C,N)}return new ue(O,C)}i.B=function(C){return U(this,C).h},i.and=function(C){const S=Math.max(this.g.length,C.g.length),R=[];for(let j=0;j<S;j++)R[j]=this.i(j)&C.i(j);return new h(R,this.h&C.h)},i.or=function(C){const S=Math.max(this.g.length,C.g.length),R=[];for(let j=0;j<S;j++)R[j]=this.i(j)|C.i(j);return new h(R,this.h|C.h)},i.xor=function(C){const S=Math.max(this.g.length,C.g.length),R=[];for(let j=0;j<S;j++)R[j]=this.i(j)^C.i(j);return new h(R,this.h^C.h)};function K(C){const S=C.g.length+1,R=[];for(let j=0;j<S;j++)R[j]=C.i(j)<<1|C.i(j-1)>>>31;return new h(R,C.h)}function se(C,S){const R=S>>5;S%=32;const j=C.g.length-R,O=[];for(let I=0;I<j;I++)O[I]=S>0?C.i(I+R)>>>S|C.i(I+R+1)<<32-S:C.i(I+R);return new h(O,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Vx=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=p,h.fromString=x,nr=h}).apply(typeof x_<"u"?x_:typeof self<"u"?self:typeof window<"u"?window:{});var Yu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lx,Ml,Px,rh,Lm,Ux,zx,Bx;(function(){var i,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yu=="object"&&Yu];for(var y=0;y<u.length;++y){var b=u[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function o(u,y){if(y)e:{var b=r;u=u.split(".");for(var w=0;w<u.length-1;w++){var z=u[w];if(!(z in b))break e;b=b[z]}u=u[u.length-1],w=b[u],y=y(w),y!=w&&y!=null&&e(b,u,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(y){var b=[],w;for(w in y)Object.prototype.hasOwnProperty.call(y,w)&&b.push([w,y[w]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function g(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function v(u,y,b){return u.call.apply(u.bind,arguments)}function p(u,y,b){return p=v,p.apply(null,arguments)}function x(u,y){var b=Array.prototype.slice.call(arguments,1);return function(){var w=b.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function E(u,y){function b(){}b.prototype=y.prototype,u.Z=y.prototype,u.prototype=new b,u.prototype.constructor=u,u.Ob=function(w,z,$){for(var he=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)he[Ie-2]=arguments[Ie];return y.prototype[z].apply(w,he)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function V(u){const y=u.length;if(y>0){const b=Array(y);for(let w=0;w<y;w++)b[w]=u[w];return b}return[]}function G(u,y){for(let w=1;w<arguments.length;w++){const z=arguments[w];var b=typeof z;if(b=b!="object"?b:z?Array.isArray(z)?"array":b:"null",b=="array"||b=="object"&&typeof z.length=="number"){b=u.length||0;const $=z.length||0;u.length=b+$;for(let he=0;he<$;he++)u[b+he]=z[he]}else u.push(z)}}class ne{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function B(u){h.setTimeout(()=>{throw u},0)}function X(){var u=C;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class J{constructor(){this.h=this.g=null}add(y,b){const w=ue.get();w.set(y,b),this.h?this.h.next=w:this.g=w,this.h=w}}var ue=new ne(()=>new U,u=>u.reset());class U{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let K,se=!1,C=new J,S=()=>{const u=Promise.resolve(void 0);K=()=>{u.then(R)}};function R(){for(var u;u=X();){try{u.h.call(u.g)}catch(b){B(b)}var y=ue;y.j(u),y.h<100&&(y.h++,u.next=y.g,y.g=u)}se=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var I=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const b=()=>{};h.addEventListener("test",b,y),h.removeEventListener("test",b,y)}catch{}return u})();function N(u){return/^[\s\xa0]*$/.test(u)}function Q(u,y){O.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,y)}E(Q,O),Q.prototype.init=function(u,y){const b=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget,y||(b=="mouseover"?y=u.fromElement:b=="mouseout"&&(y=u.toElement)),this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Q.Z.h.call(this)},Q.prototype.h=function(){Q.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ae="closure_listenable_"+(Math.random()*1e6|0),D=0;function ee(u,y,b,w,z){this.listener=u,this.proxy=null,this.src=y,this.type=b,this.capture=!!w,this.ha=z,this.key=++D,this.da=this.fa=!1}function de(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function pe(u,y,b){for(const w in u)y.call(b,u[w],w,u)}function je(u,y){for(const b in u)y.call(void 0,u[b],b,u)}function M(u){const y={};for(const b in u)y[b]=u[b];return y}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(u,y){let b,w;for(let z=1;z<arguments.length;z++){w=arguments[z];for(b in w)u[b]=w[b];for(let $=0;$<W.length;$++)b=W[$],Object.prototype.hasOwnProperty.call(w,b)&&(u[b]=w[b])}}function fe(u){this.src=u,this.g={},this.h=0}fe.prototype.add=function(u,y,b,w,z){const $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);const he=Se(u,y,w,z);return he>-1?(y=u[he],b||(y.fa=!1)):(y=new ee(y,this.src,$,!!w,z),y.fa=b,u.push(y)),y};function Te(u,y){const b=y.type;if(b in u.g){var w=u.g[b],z=Array.prototype.indexOf.call(w,y,void 0),$;($=z>=0)&&Array.prototype.splice.call(w,z,1),$&&(de(y),u.g[b].length==0&&(delete u.g[b],u.h--))}}function Se(u,y,b,w){for(let z=0;z<u.length;++z){const $=u[z];if(!$.da&&$.listener==y&&$.capture==!!b&&$.ha==w)return z}return-1}var Oe="closure_lm_"+(Math.random()*1e6|0),yt={};function nt(u,y,b,w,z){if(Array.isArray(y)){for(let $=0;$<y.length;$++)nt(u,y[$],b,w,z);return null}return b=No(b),u&&u[ae]?u.J(y,b,g(w)?!!w.capture:!1,z):wn(u,y,b,!1,w,z)}function wn(u,y,b,w,z,$){if(!y)throw Error("Invalid event type");const he=g(z)?!!z.capture:!!z;let Ie=dr(u);if(Ie||(u[Oe]=Ie=new fe(u)),b=Ie.add(y,b,w,he,$),b.proxy)return b;if(w=oa(),b.proxy=w,w.src=u,w.listener=b,u.addEventListener)I||(z=he),z===void 0&&(z=!1),u.addEventListener(y.toString(),w,z);else if(u.attachEvent)u.attachEvent(as(y.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return b}function oa(){function u(b){return y.call(u.src,u.listener,b)}const y=So;return u}function la(u,y,b,w,z){if(Array.isArray(y))for(var $=0;$<y.length;$++)la(u,y[$],b,w,z);else w=g(w)?!!w.capture:!!w,b=No(b),u&&u[ae]?(u=u.i,$=String(y).toString(),$ in u.g&&(y=u.g[$],b=Se(y,b,w,z),b>-1&&(de(y[b]),Array.prototype.splice.call(y,b,1),y.length==0&&(delete u.g[$],u.h--)))):u&&(u=dr(u))&&(y=u.g[y.toString()],u=-1,y&&(u=Se(y,b,w,z)),(b=u>-1?y[u]:null)&&ca(b))}function ca(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[ae])Te(y.i,u);else{var b=u.type,w=u.proxy;y.removeEventListener?y.removeEventListener(b,w,u.capture):y.detachEvent?y.detachEvent(as(b),w):y.addListener&&y.removeListener&&y.removeListener(w),(b=dr(y))?(Te(b,u),b.h==0&&(b.src=null,y[Oe]=null)):de(u)}}}function as(u){return u in yt?yt[u]:yt[u]="on"+u}function So(u,y){if(u.da)u=!0;else{y=new Q(y,this);const b=u.listener,w=u.ha||u.src;u.fa&&ca(u),u=b.call(w,y)}return u}function dr(u){return u=u[Oe],u instanceof fe?u:null}var Ao="__closure_events_fn_"+(Math.random()*1e9>>>0);function No(u){return typeof u=="function"?u:(u[Ao]||(u[Ao]=function(y){return u.handleEvent(y)}),u[Ao])}function vt(){j.call(this),this.i=new fe(this),this.M=this,this.G=null}E(vt,j),vt.prototype[ae]=!0,vt.prototype.removeEventListener=function(u,y,b,w){la(this,u,y,b,w)};function It(u,y){var b,w=u.G;if(w)for(b=[];w;w=w.G)b.push(w);if(u=u.M,w=y.type||y,typeof y=="string")y=new O(y,u);else if(y instanceof O)y.target=y.target||u;else{var z=y;y=new O(w,u),le(y,z)}z=!0;let $,he;if(b)for(he=b.length-1;he>=0;he--)$=y.g=b[he],z=fi($,w,!0,y)&&z;if($=y.g=u,z=fi($,w,!0,y)&&z,z=fi($,w,!1,y)&&z,b)for(he=0;he<b.length;he++)$=y.g=b[he],z=fi($,w,!1,y)&&z}vt.prototype.N=function(){if(vt.Z.N.call(this),this.i){var u=this.i;for(const y in u.g){const b=u.g[y];for(let w=0;w<b.length;w++)de(b[w]);delete u.g[y],u.h--}}this.G=null},vt.prototype.J=function(u,y,b,w){return this.i.add(String(u),y,!1,b,w)},vt.prototype.K=function(u,y,b,w){return this.i.add(String(u),y,!0,b,w)};function fi(u,y,b,w){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();let z=!0;for(let $=0;$<y.length;++$){const he=y[$];if(he&&!he.da&&he.capture==b){const Ie=he.listener,ft=he.ha||he.src;he.fa&&Te(u.i,he),z=Ie.call(ft,w)!==!1&&z}}return z&&!w.defaultPrevented}function td(u,y){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:h.setTimeout(u,y||0)}function vc(u){u.g=td(()=>{u.g=null,u.i&&(u.i=!1,vc(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class en extends j{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:vc(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fr(u){j.call(this),this.h=u,this.g={}}E(fr,j);var Co=[];function Io(u){pe(u.g,function(y,b){this.g.hasOwnProperty(b)&&ca(y)},u),u.g={}}fr.prototype.N=function(){fr.Z.N.call(this),Io(this)},fr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mi=h.JSON.stringify,nd=h.JSON.parse,_c=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function bc(){}function xc(){}var Hn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Pt(){O.call(this,"d")}E(Pt,O);function Sn(){O.call(this,"c")}E(Sn,O);var dt={},Tc=null;function ua(){return Tc=Tc||new vt}dt.Ia="serverreachability";function Ec(u){O.call(this,dt.Ia,u)}E(Ec,O);function os(u){const y=ua();It(y,new Ec(y))}dt.STAT_EVENT="statevent";function mr(u,y){O.call(this,dt.STAT_EVENT,u),this.stat=y}E(mr,O);function _t(u){const y=ua();It(y,new mr(y,u))}dt.Ja="timingevent";function ls(u,y){O.call(this,dt.Ja,u),this.size=y}E(ls,O);function cs(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},y)}function Gn(){this.g=!0}Gn.prototype.ua=function(){this.g=!1};function sd(u,y,b,w,z,$){u.info(function(){if(u.g)if($){var he="",Ie=$.split("&");for(let Fe=0;Fe<Ie.length;Fe++){var ft=Ie[Fe].split("=");if(ft.length>1){const at=ft[0];ft=ft[1];const In=at.split("_");he=In.length>=2&&In[1]=="type"?he+(at+"="+ft+"&"):he+(at+"=redacted&")}}}else he=null;else he=$;return"XMLHTTP REQ ("+w+") [attempt "+z+"]: "+y+`
`+b+`
`+he})}function wc(u,y,b,w,z,$,he){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+z+"]: "+y+`
`+b+`
`+$+" "+he})}function us(u,y,b,w){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+id(u,b)+(w?" "+w:"")})}function gr(u,y){u.info(function(){return"TIMEOUT: "+y})}Gn.prototype.info=function(){};function id(u,y){if(!u.g)return y;if(!y)return null;try{const $=JSON.parse(y);if($){for(u=0;u<$.length;u++)if(Array.isArray($[u])){var b=$[u];if(!(b.length<2)){var w=b[1];if(Array.isArray(w)&&!(w.length<1)){var z=w[0];if(z!="noop"&&z!="stop"&&z!="close")for(let he=1;he<w.length;he++)w[he]=""}}}}return mi($)}catch{return y}}var pr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ro={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ko;function yr(){}E(yr,bc),yr.prototype.g=function(){return new XMLHttpRequest},ko=new yr;function Us(u){return encodeURIComponent(String(u))}function Sc(u){var y=1;u=u.split(":");const b=[];for(;y>0&&u.length;)b.push(u.shift()),y--;return u.length&&b.push(u.join(":")),b}function qn(u,y,b,w){this.j=u,this.i=y,this.l=b,this.S=w||1,this.V=new fr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Fn}function Fn(){this.i=null,this.g="",this.h=!1}var bt={},Ot={};function hs(u,y,b){u.M=1,u.A=vr(Tt(y)),u.u=b,u.R=!0,ha(u,null)}function ha(u,y){u.F=Date.now(),ds(u),u.B=Tt(u.A);var b=u.B,w=u.S;Array.isArray(w)||(w=[String(w)]),ga(b.i,"t",w),u.C=0,b=u.j.L,u.h=new Fn,u.g=zc(u.j,b?y:null,!u.u),u.P>0&&(u.O=new en(p(u.Y,u,u.g),u.P)),y=u.V,b=u.g,w=u.ba;var z="readystatechange";Array.isArray(z)||(z&&(Co[0]=z.toString()),z=Co);for(let $=0;$<z.length;$++){const he=nt(b,z[$],w||y.handleEvent,!1,y.h||y);if(!he)break;y.g[he.key]=he}y=u.J?M(u.J):{},u.u?(u.v||(u.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,y)):(u.v="GET",u.g.ea(u.B,u.v,null,y)),os(),sd(u.i,u.v,u.B,u.l,u.S,u.u)}qn.prototype.ba=function(u){u=u.target;const y=this.O;y&&Yn(u)==3?y.j():this.Y(u)},qn.prototype.Y=function(u){try{if(u==this.g)e:{const Ie=Yn(this.g),ft=this.g.ya(),Fe=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||Ut(this.g)))){this.K||Ie!=4||ft==7||(ft==8||Fe<=0?os(3):os(2)),fs(this);var y=this.g.ca();this.X=y;var b=rd(this);if(this.o=y==200,wc(this.i,this.v,this.B,this.l,this.S,Ie,y),this.o){if(this.U&&!this.L){t:{if(this.g){var w,z=this.g;if((w=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(w)){var $=w;break t}}$=null}if(u=$)us(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ms(this,u);else{this.o=!1,this.m=3,_t(12),mn(this),An(this);break e}}if(this.R){u=!0;let at;for(;!this.K&&this.C<b.length;)if(at=Nc(this,b),at==Ot){Ie==4&&(this.m=4,_t(14),u=!1),us(this.i,this.l,null,"[Incomplete Response]");break}else if(at==bt){this.m=4,_t(15),us(this.i,this.l,b,"[Invalid Chunk]"),u=!1;break}else us(this.i,this.l,at,null),ms(this,at);if(Ac(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||b.length!=0||this.h.h||(this.m=1,_t(16),u=!1),this.o=this.o&&u,!u)us(this.i,this.l,b,"[Invalid Chunked Response]"),mn(this),An(this);else if(b.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Ko(he),he.P=!0,_t(11))}}else us(this.i,this.l,b,null),ms(this,b);Ie==4&&mn(this),this.o&&!this.K&&(Ie==4?Vc(this.j,this):(this.o=!1,ds(this)))}else Bs(this.g),y==400&&b.indexOf("Unknown SID")>0?(this.m=3,_t(12)):(this.m=0,_t(13)),mn(this),An(this)}}}catch{}finally{}};function rd(u){if(!Ac(u))return u.g.la();const y=Ut(u.g);if(y==="")return"";let b="";const w=y.length,z=Yn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return mn(u),An(u),"";u.h.i=new h.TextDecoder}for(let $=0;$<w;$++)u.h.h=!0,b+=u.h.i.decode(y[$],{stream:!(z&&$==w-1)});return y.length=0,u.h.g+=b,u.C=0,u.h.g}function Ac(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Nc(u,y){var b=u.C,w=y.indexOf(`
`,b);return w==-1?Ot:(b=Number(y.substring(b,w)),isNaN(b)?bt:(w+=1,w+b>y.length?Ot:(y=y.slice(w,w+b),u.C=w+b,y)))}qn.prototype.cancel=function(){this.K=!0,mn(this)};function ds(u){u.T=Date.now()+u.H,da(u,u.H)}function da(u,y){if(u.D!=null)throw Error("WatchDog timer not null");u.D=cs(p(u.aa,u),y)}function fs(u){u.D&&(h.clearTimeout(u.D),u.D=null)}qn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(gr(this.i,this.B),this.M!=2&&(os(),_t(17)),mn(this),this.m=2,An(this)):da(this,this.T-u)};function An(u){u.j.I==0||u.K||Vc(u.j,u)}function mn(u){fs(u);var y=u.O;y&&typeof y.dispose=="function"&&y.dispose(),u.O=null,Io(u.V),u.g&&(y=u.g,u.g=null,y.abort(),y.dispose())}function ms(u,y){try{var b=u.j;if(b.I!=0&&(b.g==u||ps(b.h,u))){if(!u.L&&ps(b.h,u)&&b.I==3){try{var w=b.Ba.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var z=w;if(z[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<u.F)ba(b),Ti(b);else break e;Sr(b),_t(18)}}else b.xa=z[1],0<b.xa-b.K&&z[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=cs(p(b.Va,b),6e3));gs(b.h)<=1&&b.ta&&(b.ta=void 0)}else Ts(b,11)}else if((u.L||b.g==u)&&ba(b),!N(y))for(z=b.Ba.g.parse(y),y=0;y<z.length;y++){let Fe=z[y];const at=Fe[0];if(!(at<=b.K))if(b.K=at,Fe=Fe[1],b.I==2)if(Fe[0]=="c"){b.M=Fe[1],b.ba=Fe[2];const In=Fe[3];In!=null&&(b.ka=In,b.j.info("VER="+b.ka));const Es=Fe[4];Es!=null&&(b.za=Es,b.j.info("SVER="+b.za));const Qn=Fe[5];Qn!=null&&typeof Qn=="number"&&Qn>0&&(w=1.5*Qn,b.O=w,b.j.info("backChannelRequestTimeoutMs_="+w)),w=b;const Xn=u.g;if(Xn){const Ar=Xn.g?Xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ar){var $=w.h;$.g||Ar.indexOf("spdy")==-1&&Ar.indexOf("quic")==-1&&Ar.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Do($,$.h),$.h=null))}if(w.G){const xa=Xn.g?Xn.g.getResponseHeader("X-HTTP-Session-Id"):null;xa&&(w.wa=xa,Ye(w.J,w.G,xa))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-u.F,b.j.info("Handshake RTT: "+b.T+"ms")),w=b;var he=u;if(w.na=Uc(w,w.L?w.ba:null,w.W),he.L){Mo(w.h,he);var Ie=he,ft=w.O;ft&&(Ie.H=ft),Ie.D&&(fs(Ie),ds(Ie)),w.g=he}else Dc(w);b.i.length>0&&xs(b)}else Fe[0]!="stop"&&Fe[0]!="close"||Ts(b,7);else b.I==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?Ts(b,7):qo(b):Fe[0]!="noop"&&b.l&&b.l.qa(Fe),b.A=0)}}os(4)}catch{}}var xt=class{constructor(u,y){this.g=u,this.map=y}};function jo(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Oo(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function gs(u){return u.h?1:u.g?u.g.size:0}function ps(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function Do(u,y){u.g?u.g.add(y):u.h=y}function Mo(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}jo.prototype.cancel=function(){if(this.i=Vo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Vo(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const b of u.g.values())y=y.concat(b.G);return y}return V(u.i)}var Cc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fa(u,y){if(u){u=u.split("&");for(let b=0;b<u.length;b++){const w=u[b].indexOf("=");let z,$=null;w>=0?(z=u[b].substring(0,w),$=u[b].substring(w+1)):z=u[b],y(z,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function gn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;u instanceof gn?(this.l=u.l,Dt(this,u.j),this.o=u.o,this.g=u.g,gi(this,u.u),this.h=u.h,Lo(this,jc(u.i)),this.m=u.m):u&&(y=String(u).match(Cc))?(this.l=!1,Dt(this,y[1]||"",!0),this.o=ys(y[2]||""),this.g=ys(y[3]||"",!0),gi(this,y[4]),this.h=ys(y[5]||"",!0),Lo(this,y[6]||"",!0),this.m=ys(y[7]||"")):(this.l=!1,this.i=new yi(null,this.l))}gn.prototype.toString=function(){const u=[];var y=this.j;y&&u.push(_r(y,ma,!0),":");var b=this.g;return(b||y=="file")&&(u.push("//"),(y=this.o)&&u.push(_r(y,ma,!0),"@"),u.push(Us(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&u.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&u.push("/"),u.push(_r(b,b.charAt(0)=="/"?Po:Ic,!0))),(b=this.i.toString())&&u.push("?",b),(b=this.m)&&u.push("#",_r(b,Rc)),u.join("")},gn.prototype.resolve=function(u){const y=Tt(this);let b=!!u.j;b?Dt(y,u.j):b=!!u.o,b?y.o=u.o:b=!!u.g,b?y.g=u.g:b=u.u!=null;var w=u.h;if(b)gi(y,u.u);else if(b=!!u.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var z=y.h.lastIndexOf("/");z!=-1&&(w=y.h.slice(0,z+1)+w)}if(z=w,z==".."||z==".")w="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){w=z.lastIndexOf("/",0)==0,z=z.split("/");const $=[];for(let he=0;he<z.length;){const Ie=z[he++];Ie=="."?w&&he==z.length&&$.push(""):Ie==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),w&&he==z.length&&$.push("")):($.push(Ie),w=!0)}w=$.join("/")}else w=z}return b?y.h=w:b=u.i.toString()!=="",b?Lo(y,jc(u.i)):b=!!u.m,b&&(y.m=u.m),y};function Tt(u){return new gn(u)}function Dt(u,y,b){u.j=b?ys(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function gi(u,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);u.u=y}else u.u=null}function Lo(u,y,b){y instanceof yi?(u.i=y,pa(u.i,u.l)):(b||(y=_r(y,pi)),u.i=new yi(y,u.l))}function Ye(u,y,b){u.i.set(y,b)}function vr(u){return Ye(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ys(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function _r(u,y,b){return typeof u=="string"?(u=encodeURI(u).replace(y,rn),b&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function rn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ma=/[#\/\?@]/g,Ic=/[#\?:]/g,Po=/[#\?]/g,pi=/[#\?@]/g,Rc=/#/g;function yi(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function an(u){u.g||(u.g=new Map,u.h=0,u.i&&fa(u.i,function(y,b){u.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}i=yi.prototype,i.add=function(u,y){an(this),this.i=null,u=vi(this,u);let b=this.g.get(u);return b||this.g.set(u,b=[]),b.push(y),this.h+=1,this};function kc(u,y){an(u),y=vi(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function Uo(u,y){return an(u),y=vi(u,y),u.g.has(y)}i.forEach=function(u,y){an(this),this.g.forEach(function(b,w){b.forEach(function(z){u.call(y,z,w,this)},this)},this)};function zo(u,y){an(u);let b=[];if(typeof y=="string")Uo(u,y)&&(b=b.concat(u.g.get(vi(u,y))));else for(u=Array.from(u.g.values()),y=0;y<u.length;y++)b=b.concat(u[y]);return b}i.set=function(u,y){return an(this),this.i=null,u=vi(this,u),Uo(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},i.get=function(u,y){return u?(u=zo(this,u),u.length>0?String(u[0]):y):y};function ga(u,y,b){kc(u,y),b.length>0&&(u.i=null,u.g.set(vi(u,y),V(b)),u.h+=b.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(let w=0;w<y.length;w++){var b=y[w];const z=Us(b);b=zo(this,b);for(let $=0;$<b.length;$++){let he=z;b[$]!==""&&(he+="="+Us(b[$])),u.push(he)}}return this.i=u.join("&")};function jc(u){const y=new yi;return y.i=u.i,u.g&&(y.g=new Map(u.g),y.h=u.h),y}function vi(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function pa(u,y){y&&!u.j&&(an(u),u.i=null,u.g.forEach(function(b,w){const z=w.toLowerCase();w!=z&&(kc(this,w),ga(this,z,b))},u)),u.j=y}function Kn(u,y){const b=new Gn;if(h.Image){const w=new Image;w.onload=x(Nn,b,"TestLoadImage: loaded",!0,y,w),w.onerror=x(Nn,b,"TestLoadImage: error",!1,y,w),w.onabort=x(Nn,b,"TestLoadImage: abort",!1,y,w),w.ontimeout=x(Nn,b,"TestLoadImage: timeout",!1,y,w),h.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else y(!1)}function Bo(u,y){const b=new Gn,w=new AbortController,z=setTimeout(()=>{w.abort(),Nn(b,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:w.signal}).then($=>{clearTimeout(z),$.ok?Nn(b,"TestPingServer: ok",!0,y):Nn(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(z),Nn(b,"TestPingServer: error",!1,y)})}function Nn(u,y,b,w,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),w(b)}catch{}}function _i(){this.g=new _c}function vs(u){this.i=u.Sb||null,this.h=u.ab||!1}E(vs,bc),vs.prototype.g=function(){return new br(this.i,this.h)};function br(u,y){vt.call(this),this.H=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(br,vt),i=br.prototype,i.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=y,this.readyState=1,$n(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(y.body=u),(this.H||h).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,bi(this)),this.readyState=0},i.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,$n(this)),this.g&&(this.readyState=3,$n(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ya(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function ya(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}i.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?bi(this):$n(this),this.readyState==3&&ya(this)}},i.Oa=function(u){this.g&&(this.response=this.responseText=u,bi(this))},i.Na=function(u){this.g&&(this.response=u,bi(this))},i.ga=function(){this.g&&bi(this)};function bi(u){u.readyState=4,u.l=null,u.j=null,u.B=null,$n(u)}i.setRequestHeader=function(u,y){this.A.append(u,y)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,u.push(b[0]+": "+b[1]),b=y.next();return u.join(`\r
`)};function $n(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(br.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Cn(u){let y="";return pe(u,function(b,w){y+=w,y+=":",y+=b,y+=`\r
`}),y}function xr(u,y,b){e:{for(w in b){var w=!1;break e}w=!0}w||(b=Cn(b),typeof u=="string"?b!=null&&Us(b):Ye(u,y,b))}function Je(u){vt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Je,vt);var _s=/^https?$/i,Ho=["POST","PUT"];i=Je.prototype,i.Fa=function(u){this.H=u},i.ea=function(u,y,b,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ko.g(),this.g.onreadystatechange=A(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch($){Tr(this,$);return}if(u=b||"",b=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var z in w)b.set(z,w[z]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const $ of w.keys())b.set($,w.get($));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(b.keys()).find($=>$.toLowerCase()=="content-type"),z=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(Ho,y,void 0)>=0)||w||z||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,he]of b)this.g.setRequestHeader($,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch($){Tr(this,$)}};function Tr(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.o=5,Go(u),zs(u)}function Go(u){u.A||(u.A=!0,It(u,"complete"),It(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,It(this,"complete"),It(this,"abort"),zs(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zs(this,!0)),Je.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Er(this):this.Xa())},i.Xa=function(){Er(this)};function Er(u){if(u.h&&typeof c<"u"){if(u.v&&Yn(u)==4)setTimeout(u.Ca.bind(u),0);else if(It(u,"readystatechange"),Yn(u)==4){u.h=!1;try{const $=u.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var b;if(!(b=y)){var w;if(w=$===0){let he=String(u.D).match(Cc)[1]||null;!he&&h.self&&h.self.location&&(he=h.self.location.protocol.slice(0,-1)),w=!_s.test(he?he.toLowerCase():"")}b=w}if(b)It(u,"complete"),It(u,"success");else{u.o=6;try{var z=Yn(u)>2?u.g.statusText:""}catch{z=""}u.l=z+" ["+u.ca()+"]",Go(u)}}finally{zs(u)}}}}function zs(u,y){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const b=u.g;u.g=null,y||It(u,"ready");try{b.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Yn(u){return u.g?u.g.readyState:0}i.ca=function(){try{return Yn(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),nd(y)}};function Ut(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Bs(u){const y={};u=(u.g&&Yn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(N(u[w]))continue;var b=Sc(u[w]);const z=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const $=y[z]||[];y[z]=$,$.push(b)}je(y,function(w){return w.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function bs(u,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[u]||y}function xi(u){this.za=0,this.i=[],this.j=new Gn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=bs("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=bs("baseRetryDelayMs",5e3,u),this.Za=bs("retryDelaySeedMs",1e4,u),this.Ta=bs("forwardChannelMaxRetries",2,u),this.va=bs("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new jo(u&&u.concurrentRequestLimit),this.Ba=new _i,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=xi.prototype,i.ka=8,i.I=1,i.connect=function(u,y,b,w){_t(0),this.W=u,this.H=y||{},b&&w!==void 0&&(this.H.OSID=b,this.H.OAID=w),this.F=this.X,this.J=Uc(this,null,this.W),xs(this)};function qo(u){if(va(u),u.I==3){var y=u.V++,b=Tt(u.J);if(Ye(b,"SID",u.M),Ye(b,"RID",y),Ye(b,"TYPE","terminate"),wr(u,b),y=new qn(u,u.j,y),y.M=2,y.A=vr(Tt(b)),b=!1,h.navigator&&h.navigator.sendBeacon)try{b=h.navigator.sendBeacon(y.A.toString(),"")}catch{}!b&&h.Image&&(new Image().src=y.A,b=!0),b||(y.g=zc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),ds(y)}Pc(u)}function Ti(u){u.g&&(Ko(u),u.g.cancel(),u.g=null)}function va(u){Ti(u),u.v&&(h.clearTimeout(u.v),u.v=null),ba(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function xs(u){if(!Oo(u.h)&&!u.m){u.m=!0;var y=u.Ea;K||S(),se||(K(),se=!0),C.add(y,u),u.D=0}}function _a(u,y){return gs(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=y.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=cs(p(u.Ea,u,y),Lc(u,u.D)),u.D++,!0)}i.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const z=new qn(this,this.j,u);let $=this.o;if(this.U&&($?($=M($),le($,this.U)):$=this.U),this.u!==null||this.R||(z.J=$,$=null),this.S)e:{for(var y=0,b=0;b<this.i.length;b++){t:{var w=this.i[b];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,y>4096){y=b;break e}if(y===4096||b===this.i.length-1){y=b+1;break e}}y=1e3}else y=1e3;y=Oc(this,z,y),b=Tt(this.J),Ye(b,"RID",u),Ye(b,"CVER",22),this.G&&Ye(b,"X-HTTP-Session-Id",this.G),wr(this,b),$&&(this.R?y="headers="+Us(Cn($))+"&"+y:this.u&&xr(b,this.u,$)),Do(this.h,z),this.Ra&&Ye(b,"TYPE","init"),this.S?(Ye(b,"$req",y),Ye(b,"SID","null"),z.U=!0,hs(z,b,null)):hs(z,b,y),this.I=2}}else this.I==3&&(u?Fo(this,u):this.i.length==0||Oo(this.h)||Fo(this))};function Fo(u,y){var b;y?b=y.l:b=u.V++;const w=Tt(u.J);Ye(w,"SID",u.M),Ye(w,"RID",b),Ye(w,"AID",u.K),wr(u,w),u.u&&u.o&&xr(w,u.u,u.o),b=new qn(u,u.j,b,u.D+1),u.u===null&&(b.J=u.o),y&&(u.i=y.G.concat(u.i)),y=Oc(u,b,1e3),b.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Do(u.h,b),hs(b,w,y)}function wr(u,y){u.H&&pe(u.H,function(b,w){Ye(y,w,b)}),u.l&&pe({},function(b,w){Ye(y,w,b)})}function Oc(u,y,b){b=Math.min(u.i.length,b);const w=u.l?p(u.l.Ka,u.l,u):null;e:{var z=u.i;let Ie=-1;for(;;){const ft=["count="+b];Ie==-1?b>0?(Ie=z[0].g,ft.push("ofs="+Ie)):Ie=0:ft.push("ofs="+Ie);let Fe=!0;for(let at=0;at<b;at++){var $=z[at].g;const In=z[at].map;if($-=Ie,$<0)Ie=Math.max(0,z[at].g-100),Fe=!1;else try{$="req"+$+"_"||"";try{var he=In instanceof Map?In:Object.entries(In);for(const[Es,Qn]of he){let Xn=Qn;g(Qn)&&(Xn=mi(Qn)),ft.push($+Es+"="+encodeURIComponent(Xn))}}catch(Es){throw ft.push($+"type="+encodeURIComponent("_badmap")),Es}}catch{w&&w(In)}}if(Fe){he=ft.join("&");break e}}he=void 0}return u=u.i.splice(0,b),y.G=u,he}function Dc(u){if(!u.g&&!u.v){u.Y=1;var y=u.Da;K||S(),se||(K(),se=!0),C.add(y,u),u.A=0}}function Sr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=cs(p(u.Da,u),Lc(u,u.A)),u.A++,!0)}i.Da=function(){if(this.v=null,Mc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=cs(p(this.Wa,this),u)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_t(10),Ti(this),Mc(this))};function Ko(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function Mc(u){u.g=new qn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var y=Tt(u.na);Ye(y,"RID","rpc"),Ye(y,"SID",u.M),Ye(y,"AID",u.K),Ye(y,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ye(y,"TO",u.ia),Ye(y,"TYPE","xmlhttp"),wr(u,y),u.u&&u.o&&xr(y,u.u,u.o),u.O&&(u.g.H=u.O);var b=u.g;u=u.ba,b.M=1,b.A=vr(Tt(y)),b.u=null,b.R=!0,ha(b,u)}i.Va=function(){this.C!=null&&(this.C=null,Ti(this),Sr(this),_t(19))};function ba(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Vc(u,y){var b=null;if(u.g==y){ba(u),Ko(u),u.g=null;var w=2}else if(ps(u.h,y))b=y.G,Mo(u.h,y),w=1;else return;if(u.I!=0){if(y.o)if(w==1){b=y.u?y.u.length:0,y=Date.now()-y.F;var z=u.D;w=ua(),It(w,new ls(w,b)),xs(u)}else Dc(u);else if(z=y.m,z==3||z==0&&y.X>0||!(w==1&&_a(u,y)||w==2&&Sr(u)))switch(b&&b.length>0&&(y=u.h,y.i=y.i.concat(b)),z){case 1:Ts(u,5);break;case 4:Ts(u,10);break;case 3:Ts(u,6);break;default:Ts(u,2)}}}function Lc(u,y){let b=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(b*=2),b*y}function Ts(u,y){if(u.j.info("Error code "+y),y==2){var b=p(u.bb,u),w=u.Ua;const z=!w;w=new gn(w||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Dt(w,"https"),vr(w),z?Kn(w.toString(),b):Bo(w.toString(),b)}else _t(2);u.I=0,u.l&&u.l.pa(y),Pc(u),va(u)}i.bb=function(u){u?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function Pc(u){if(u.I=0,u.ja=[],u.l){const y=Vo(u.h);(y.length!=0||u.i.length!=0)&&(G(u.ja,y),G(u.ja,u.i),u.h.i.length=0,V(u.i),u.i.length=0),u.l.oa()}}function Uc(u,y,b){var w=b instanceof gn?Tt(b):new gn(b);if(w.g!="")y&&(w.g=y+"."+w.g),gi(w,w.u);else{var z=h.location;w=z.protocol,y=y?y+"."+z.hostname:z.hostname,z=+z.port;const $=new gn(null);w&&Dt($,w),y&&($.g=y),z&&gi($,z),b&&($.h=b),w=$}return b=u.G,y=u.wa,b&&y&&Ye(w,b,y),Ye(w,"VER",u.ka),wr(u,w),w}function zc(u,y,b){if(y&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Aa&&!u.ma?new Je(new vs({ab:b})):new Je(u.ma),y.Fa(u.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bc(){}i=Bc.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Ei(){}Ei.prototype.g=function(u,y){return new tn(u,y)};function tn(u,y){vt.call(this),this.g=new xi(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(u?u["X-WebChannel-Client-Profile"]=y.sa:u={"X-WebChannel-Client-Profile":y.sa}),this.g.U=u,(u=y&&y.Qb)&&!N(u)&&(this.g.u=u),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!N(y)&&(this.g.G=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new Hs(this)}E(tn,vt),tn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){qo(this.g)},tn.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var b={};b.__data__=u,u=b}else this.v&&(b={},b.__data__=mi(u),u=b);y.i.push(new xt(y.Ya++,u)),y.I==3&&xs(y)},tn.prototype.N=function(){this.g.l=null,delete this.j,qo(this.g),delete this.g,tn.Z.N.call(this)};function Hc(u){Pt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const b in y){u=b;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}E(Hc,Pt);function Gc(){Sn.call(this),this.status=1}E(Gc,Sn);function Hs(u){this.g=u}E(Hs,Bc),Hs.prototype.ra=function(){It(this.g,"a")},Hs.prototype.qa=function(u){It(this.g,new Hc(u))},Hs.prototype.pa=function(u){It(this.g,new Gc)},Hs.prototype.oa=function(){It(this.g,"b")},Ei.prototype.createWebChannel=Ei.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,Bx=function(){return new Ei},zx=function(){return ua()},Ux=dt,Lm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},pr.NO_ERROR=0,pr.TIMEOUT=8,pr.HTTP_ERROR=6,rh=pr,Ro.COMPLETE="complete",Px=Ro,xc.EventType=Hn,Hn.OPEN="a",Hn.CLOSE="b",Hn.ERROR="c",Hn.MESSAGE="d",vt.prototype.listen=vt.prototype.J,Ml=xc,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,Lx=Je}).apply(typeof Yu<"u"?Yu:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xt.UNAUTHENTICATED=new Xt(null),Xt.GOOGLE_CREDENTIALS=new Xt("google-credentials-uid"),Xt.FIRST_PARTY=new Xt("first-party-uid"),Xt.MOCK_USER=new Xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bo="12.8.0";function fC(i){bo=i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr=new Lh("@firebase/firestore");function Wa(){return Xr.logLevel}function me(i,...e){if(Xr.logLevel<=Pe.DEBUG){const n=e.map(fg);Xr.debug(`Firestore (${bo}): ${i}`,...n)}}function ui(i,...e){if(Xr.logLevel<=Pe.ERROR){const n=e.map(fg);Xr.error(`Firestore (${bo}): ${i}`,...n)}}function uo(i,...e){if(Xr.logLevel<=Pe.WARN){const n=e.map(fg);Xr.warn(`Firestore (${bo}): ${i}`,...n)}}function fg(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(i,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Hx(i,r,n)}function Hx(i,e,n){let r=`FIRESTORE (${bo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ui(r),new Error(r)}function $e(i,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,i||Hx(e,o,r)}function Ce(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends rs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Xt.UNAUTHENTICATED)))}shutdown(){}}class gC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class pC{constructor(e){this.t=e,this.currentUser=Xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){$e(this.o===void 0,42304);let r=this.i;const o=v=>this.i!==r?(r=this.i,n(v)):Promise.resolve();let c=new sr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new sr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const v=c;e.enqueueRetryable((async()=>{await v.promise,await o(this.currentUser)}))},g=v=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((v=>g(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new sr)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e(typeof r.accessToken=="string",31837,{l:r}),new Gx(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new Xt(e)}}class yC{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Xt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class vC{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new yC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Xt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class T_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _C{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){$e(this.o===void 0,3512);const r=c=>{c.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.m;return this.m=c.token,me("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const o=c=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new T_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?($e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new T_(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<i;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=bC(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<n&&(r+=e.charAt(o[c]%62))}return r}}function Ue(i,e){return i<e?-1:i>e?1:0}function Pm(i,e){const n=Math.min(i.length,e.length);for(let r=0;r<n;r++){const o=i.charAt(r),c=e.charAt(r);if(o!==c)return mm(o)===mm(c)?Ue(o,c):mm(o)?1:-1}return Ue(i.length,e.length)}const xC=55296,TC=57343;function mm(i){const e=i.charCodeAt(0);return e>=xC&&e<=TC}function ho(i,e,n){return i.length===e.length&&i.every(((r,o)=>n(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="__name__";class Is{constructor(e,n,r){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&we(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Is.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Is?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const c=Is.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Ue(e.length,n.length)}static compareSegments(e,n){const r=Is.isNumericId(e),o=Is.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?Is.extractNumericId(e).compare(Is.extractNumericId(n)):Pm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return nr.fromString(e.substring(4,e.length-2))}}class lt extends Is{construct(e,n,r){return new lt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ve(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new lt(n)}static emptyPath(){return new lt([])}}const EC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends Is{construct(e,n,r){return new Ft(e,n,r)}static isValidIdentifier(e){return EC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===E_}static keyField(){return new Ft([E_])}static fromServerFormat(e){const n=[];let r="",o=0;const c=()=>{if(r.length===0)throw new ve(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let h=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new ve(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new ve(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,o+=2}else g==="`"?(h=!h,o++):g!=="."||h?(r+=g,o++):(c(),o++)}if(c(),h)throw new ve(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(n)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(lt.fromString(e))}static fromName(e){return new be(lt.fromString(e).popFirst(5))}static empty(){return new be(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(i,e,n){if(!n)throw new ve(oe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function SC(i,e,n,r){if(e===!0&&r===!0)throw new ve(oe.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function w_(i){if(!be.isDocumentKey(i))throw new ve(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function qx(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function gg(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":we(12329,{type:typeof i})}function Wl(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ve(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gg(i);throw new ve(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(i,e){const n={typeString:i};return e&&(n.value=e),n}function dc(i,e){if(!qx(i))throw new ve(oe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){n=`JSON missing required field: '${r}'`;break}const h=i[r];if(o&&typeof h!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(c!==void 0&&h!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new ve(oe.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=-62135596800,A_=1e6;class rt{static now(){return rt.fromMillis(Date.now())}static fromDate(e){return rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*A_);return new rt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ve(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ve(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<S_)throw new ve(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/A_}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(dc(e,rt._jsonSchema))return new rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-S_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}rt._jsonSchemaVersion="firestore/timestamp/1.0",rt._jsonSchema={type:Ct("string",rt._jsonSchemaVersion),seconds:Ct("number"),nanoseconds:Ct("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new rt(0,0))}static max(){return new Ae(new rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zl=-1;function AC(i,e){const n=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(r===1e9?new rt(n+1,0):new rt(n,r));return new rr(o,be.empty(),e)}function NC(i){return new rr(i.readTime,i.key,Zl)}class rr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new rr(Ae.min(),be.empty(),Zl)}static max(){return new rr(Ae.max(),be.empty(),Zl)}}function CC(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(i.documentKey,e.documentKey),n!==0?n:Ue(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xo(i){if(i.code!==oe.FAILED_PRECONDITION||i.message!==IC)throw i;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new re(((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof re?n:re.resolve(n)}catch(n){return re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):re.reject(n)}static resolve(e){return new re(((n,r)=>{n(e)}))}static reject(e){return new re(((n,r)=>{r(e)}))}static waitFor(e){return new re(((n,r)=>{let o=0,c=0,h=!1;e.forEach((g=>{++o,g.next((()=>{++c,h&&c===o&&n()}),(v=>r(v)))})),h=!0,c===o&&n()}))}static or(e){let n=re.resolve(!1);for(const r of e)n=n.next((o=>o?re.resolve(o):r()));return n}static forEach(e,n){const r=[];return e.forEach(((o,c)=>{r.push(n.call(this,o,c))})),this.waitFor(r)}static mapArray(e,n){return new re(((r,o)=>{const c=e.length,h=new Array(c);let g=0;for(let v=0;v<c;v++){const p=v;n(e[p]).next((x=>{h[p]=x,++g,g===c&&r(h)}),(x=>o(x)))}}))}static doWhile(e,n){return new re(((r,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):r()};c()}))}}function kC(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function To(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Bh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg=-1;function Hh(i){return i==null}function bh(i){return i===0&&1/i==-1/0}function jC(i){return typeof i=="number"&&Number.isInteger(i)&&!bh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx="";function OC(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=N_(e)),e=DC(i.get(n),e);return N_(e)}function DC(i,e){let n=e;const r=i.length;for(let o=0;o<r;o++){const c=i.charAt(o);switch(c){case"\0":n+="";break;case Fx:n+="";break;default:n+=c}}return n}function N_(i){return i+Fx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function sa(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Kx(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n){this.comparator=e,this.root=n||qt.EMPTY}insert(e,n){return new ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qu(this.root,e,this.comparator,!0)}}class Qu{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qt{constructor(e,n,r,o,c){this.key=e,this.value=n,this.color=r??qt.RED,this.left=o??qt.EMPTY,this.right=c??qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,c){return new qt(e??this.key,n??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,r),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return qt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,r,o,c){return this}insert(e,n,r){return new qt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new I_(this.data.getIterator())}getIteratorFrom(e){return new I_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new jt(this.comparator);return n.data=e,n}}class I_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new ts([])}unionWith(e){let n=new jt(Ft.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ts(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ho(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new $x("Invalid base64 string: "+c):c}})(e);return new $t(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let h=0;h<o.length;++h)c+=String.fromCharCode(o[h]);return c})(e);return new $t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$t.EMPTY_BYTE_STRING=new $t("");const MC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(i){if($e(!!i,39018),typeof i=="string"){let e=0;const n=MC.exec(i);if($e(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(i.seconds),nanos:pt(i.nanos)}}function pt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function or(i){return typeof i=="string"?$t.fromBase64String(i):$t.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="server_timestamp",Qx="__type__",Xx="__previous_value__",Jx="__local_write_time__";function yg(i){var n,r;return((r=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[Qx])==null?void 0:r.stringValue)===Yx}function Gh(i){const e=i.mapValue.fields[Xx];return yg(e)?Gh(e):e}function ec(i){const e=ar(i.mapValue.fields[Jx].timestampValue);return new rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,n,r,o,c,h,g,v,p,x,E){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.longPollingOptions=v,this.useFetchStreams=p,this.isUsingEmulator=x,this.apiKey=E}}const xh="(default)";class tc{constructor(e,n){this.projectId=e,this.database=n||xh}static empty(){return new tc("","")}get isDefaultDatabase(){return this.database===xh}isEqual(e){return e instanceof tc&&e.projectId===this.projectId&&e.database===this.database}}function LC(i,e){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new ve(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tc(i.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx="__type__",PC="__max__",Xu={mapValue:{}},Zx="__vector__",Th="value";function lr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?yg(i)?4:zC(i)?9007199254740991:UC(i)?10:11:we(28295,{value:i})}function Vs(i,e){if(i===e)return!0;const n=lr(i);if(n!==lr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return ec(i).isEqual(ec(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const h=ar(o.timestampValue),g=ar(c.timestampValue);return h.seconds===g.seconds&&h.nanos===g.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,c){return or(o.bytesValue).isEqual(or(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,c){return pt(o.geoPointValue.latitude)===pt(c.geoPointValue.latitude)&&pt(o.geoPointValue.longitude)===pt(c.geoPointValue.longitude)})(i,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return pt(o.integerValue)===pt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const h=pt(o.doubleValue),g=pt(c.doubleValue);return h===g?bh(h)===bh(g):isNaN(h)&&isNaN(g)}return!1})(i,e);case 9:return ho(i.arrayValue.values||[],e.arrayValue.values||[],Vs);case 10:case 11:return(function(o,c){const h=o.mapValue.fields||{},g=c.mapValue.fields||{};if(C_(h)!==C_(g))return!1;for(const v in h)if(h.hasOwnProperty(v)&&(g[v]===void 0||!Vs(h[v],g[v])))return!1;return!0})(i,e);default:return we(52216,{left:i})}}function nc(i,e){return(i.values||[]).find((n=>Vs(n,e)))!==void 0}function fo(i,e){if(i===e)return 0;const n=lr(i),r=lr(e);if(n!==r)return Ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ue(i.booleanValue,e.booleanValue);case 2:return(function(c,h){const g=pt(c.integerValue||c.doubleValue),v=pt(h.integerValue||h.doubleValue);return g<v?-1:g>v?1:g===v?0:isNaN(g)?isNaN(v)?0:-1:1})(i,e);case 3:return R_(i.timestampValue,e.timestampValue);case 4:return R_(ec(i),ec(e));case 5:return Pm(i.stringValue,e.stringValue);case 6:return(function(c,h){const g=or(c),v=or(h);return g.compareTo(v)})(i.bytesValue,e.bytesValue);case 7:return(function(c,h){const g=c.split("/"),v=h.split("/");for(let p=0;p<g.length&&p<v.length;p++){const x=Ue(g[p],v[p]);if(x!==0)return x}return Ue(g.length,v.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,h){const g=Ue(pt(c.latitude),pt(h.latitude));return g!==0?g:Ue(pt(c.longitude),pt(h.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return k_(i.arrayValue,e.arrayValue);case 10:return(function(c,h){var A,V,G,ne;const g=c.fields||{},v=h.fields||{},p=(A=g[Th])==null?void 0:A.arrayValue,x=(V=v[Th])==null?void 0:V.arrayValue,E=Ue(((G=p==null?void 0:p.values)==null?void 0:G.length)||0,((ne=x==null?void 0:x.values)==null?void 0:ne.length)||0);return E!==0?E:k_(p,x)})(i.mapValue,e.mapValue);case 11:return(function(c,h){if(c===Xu.mapValue&&h===Xu.mapValue)return 0;if(c===Xu.mapValue)return 1;if(h===Xu.mapValue)return-1;const g=c.fields||{},v=Object.keys(g),p=h.fields||{},x=Object.keys(p);v.sort(),x.sort();for(let E=0;E<v.length&&E<x.length;++E){const A=Pm(v[E],x[E]);if(A!==0)return A;const V=fo(g[v[E]],p[x[E]]);if(V!==0)return V}return Ue(v.length,x.length)})(i.mapValue,e.mapValue);default:throw we(23264,{he:n})}}function R_(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ue(i,e);const n=ar(i),r=ar(e),o=Ue(n.seconds,r.seconds);return o!==0?o:Ue(n.nanos,r.nanos)}function k_(i,e){const n=i.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const c=fo(n[o],r[o]);if(c)return c}return Ue(n.length,r.length)}function mo(i){return Um(i)}function Um(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const r=ar(n);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return or(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return be.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let r="[",o=!0;for(const c of n.values||[])o?o=!1:r+=",",r+=Um(c);return r+"]"})(i.arrayValue):"mapValue"in i?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const h of r)c?c=!1:o+=",",o+=`${h}:${Um(n.fields[h])}`;return o+"}"})(i.mapValue):we(61005,{value:i})}function ah(i){switch(lr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gh(i);return e?16+ah(e):16;case 5:return 2*i.stringValue.length;case 6:return or(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,c)=>o+ah(c)),0)})(i.arrayValue);case 10:case 11:return(function(r){let o=0;return sa(r.fields,((c,h)=>{o+=c.length+ah(h)})),o})(i.mapValue);default:throw we(13486,{value:i})}}function zm(i){return!!i&&"integerValue"in i}function vg(i){return!!i&&"arrayValue"in i}function j_(i){return!!i&&"nullValue"in i}function O_(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function oh(i){return!!i&&"mapValue"in i}function UC(i){var n,r;return((r=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[Wx])==null?void 0:r.stringValue)===Zx}function Gl(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return sa(i.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Gl(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Gl(i.arrayValue.values[n]);return e}return{...i}}function zC(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===PC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!oh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gl(n)}setAll(e){let n=Ft.emptyPath(),r={},o=[];e.forEach(((h,g)=>{if(!n.isImmediateParentOf(g)){const v=this.getFieldsMap(n);this.applyChanges(v,r,o),r={},o=[],n=g.popLast()}h?r[g.lastSegment()]=Gl(h):o.push(g.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,r,o)}delete(e){const n=this.field(e.popLast());oh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];oh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){sa(n,((o,c)=>e[o]=c));for(const o of r)delete e[o]}clone(){return new Un(Gl(this.value))}}function e1(i){const e=[];return sa(i.fields,((n,r)=>{const o=new Ft([n]);if(oh(r)){const c=e1(r.mapValue).fields;if(c.length===0)e.push(o);else for(const h of c)e.push(o.child(h))}else e.push(o)})),new ts(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n,r,o,c,h,g){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=c,this.data=h,this.documentState=g}static newInvalidDocument(e){return new Jt(e,0,Ae.min(),Ae.min(),Ae.min(),Un.empty(),0)}static newFoundDocument(e,n,r,o){return new Jt(e,1,n,Ae.min(),r,o,0)}static newNoDocument(e,n){return new Jt(e,2,n,Ae.min(),Ae.min(),Un.empty(),0)}static newUnknownDocument(e,n){return new Jt(e,3,n,Ae.min(),Ae.min(),Un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n){this.position=e,this.inclusive=n}}function D_(i,e,n){let r=0;for(let o=0;o<i.position.length;o++){const c=e[o],h=i.position[o];if(c.field.isKeyField()?r=be.comparator(be.fromName(h.referenceValue),n.key):r=fo(h,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function M_(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Vs(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,n="asc"){this.field=e,this.dir=n}}function BC(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{}class kt extends t1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new GC(e,n,r):n==="array-contains"?new KC(e,r):n==="in"?new $C(e,r):n==="not-in"?new YC(e,r):n==="array-contains-any"?new QC(e,r):new kt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new qC(e,r):new FC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(fo(n,this.value)):n!==null&&lr(this.value)===lr(n)&&this.matchesComparison(fo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ls extends t1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ls(e,n)}matches(e){return n1(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function n1(i){return i.op==="and"}function s1(i){return HC(i)&&n1(i)}function HC(i){for(const e of i.filters)if(e instanceof Ls)return!1;return!0}function Bm(i){if(i instanceof kt)return i.field.canonicalString()+i.op.toString()+mo(i.value);if(s1(i))return i.filters.map((e=>Bm(e))).join(",");{const e=i.filters.map((n=>Bm(n))).join(",");return`${i.op}(${e})`}}function i1(i,e){return i instanceof kt?(function(r,o){return o instanceof kt&&r.op===o.op&&r.field.isEqual(o.field)&&Vs(r.value,o.value)})(i,e):i instanceof Ls?(function(r,o){return o instanceof Ls&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((c,h,g)=>c&&i1(h,o.filters[g])),!0):!1})(i,e):void we(19439)}function r1(i){return i instanceof kt?(function(n){return`${n.field.canonicalString()} ${n.op} ${mo(n.value)}`})(i):i instanceof Ls?(function(n){return n.op.toString()+" {"+n.getFilters().map(r1).join(" ,")+"}"})(i):"Filter"}class GC extends kt{constructor(e,n,r){super(e,n,r),this.key=be.fromName(r.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class qC extends kt{constructor(e,n){super(e,"in",n),this.keys=a1("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class FC extends kt{constructor(e,n){super(e,"not-in",n),this.keys=a1("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function a1(i,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>be.fromName(r.referenceValue)))}class KC extends kt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return vg(n)&&nc(n.arrayValue,this.value)}}class $C extends kt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&nc(this.value.arrayValue,n)}}class YC extends kt{constructor(e,n){super(e,"not-in",n)}matches(e){if(nc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!nc(this.value.arrayValue,n)}}class QC extends kt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!vg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>nc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,n=null,r=[],o=[],c=null,h=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=h,this.endAt=g,this.Te=null}}function V_(i,e=null,n=[],r=[],o=null,c=null,h=null){return new XC(i,e,n,r,o,c,h)}function _g(i){const e=Ce(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Bm(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),Hh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>mo(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>mo(r))).join(",")),e.Te=n}return e.Te}function bg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!BC(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!i1(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!M_(i.startAt,e.startAt)&&M_(i.endAt,e.endAt)}function Hm(i){return be.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n=null,r=[],o=[],c=null,h="F",g=null,v=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=h,this.startAt=g,this.endAt=v,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function JC(i,e,n,r,o,c,h,g){return new qh(i,e,n,r,o,c,h,g)}function xg(i){return new qh(i)}function L_(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function WC(i){return be.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function ZC(i){return i.collectionGroup!==null}function ql(i){const e=Ce(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let g=new jt(Ft.comparator);return h.filters.forEach((v=>{v.getFlattenedFilters().forEach((p=>{p.isInequality()&&(g=g.add(p.field))}))})),g})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new wh(c,r))})),n.has(Ft.keyField().canonicalString())||e.Ie.push(new wh(Ft.keyField(),r))}return e.Ie}function js(i){const e=Ce(i);return e.Ee||(e.Ee=eI(e,ql(i))),e.Ee}function eI(i,e){if(i.limitType==="F")return V_(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new wh(o.field,c)}));const n=i.endAt?new Eh(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Eh(i.startAt.position,i.startAt.inclusive):null;return V_(i.path,i.collectionGroup,e,i.filters,i.limit,n,r)}}function Gm(i,e,n){return new qh(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Fh(i,e){return bg(js(i),js(e))&&i.limitType===e.limitType}function o1(i){return`${_g(js(i))}|lt:${i.limitType}`}function Za(i){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>r1(o))).join(", ")}]`),Hh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>mo(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>mo(o))).join(",")),`Target(${r})`})(js(i))}; limitType=${i.limitType})`}function Kh(i,e){return e.isFoundDocument()&&(function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):be.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(i,e)&&(function(r,o){for(const c of ql(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0})(i,e)&&(function(r,o){return!(r.startAt&&!(function(h,g,v){const p=D_(h,g,v);return h.inclusive?p<=0:p<0})(r.startAt,ql(r),o)||r.endAt&&!(function(h,g,v){const p=D_(h,g,v);return h.inclusive?p>=0:p>0})(r.endAt,ql(r),o))})(i,e)}function tI(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function l1(i){return(e,n)=>{let r=!1;for(const o of ql(i)){const c=nI(o,e,n);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function nI(i,e,n){const r=i.field.isKeyField()?be.comparator(e.key,n.key):(function(c,h,g){const v=h.data.field(c),p=g.data.field(c);return v!==null&&p!==null?fo(v,p):we(42886)})(i.field,e,n);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return we(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){sa(this.inner,((n,r)=>{for(const[o,c]of r)e(o,c)}))}isEmpty(){return Kx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=new ct(be.comparator);function hi(){return sI}const c1=new ct(be.comparator);function Vl(...i){let e=c1;for(const n of i)e=e.insert(n.key,n);return e}function u1(i){let e=c1;return i.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Gr(){return Fl()}function h1(){return Fl()}function Fl(){return new ia((i=>i.toString()),((i,e)=>i.isEqual(e)))}const iI=new ct(be.comparator),rI=new jt(be.comparator);function ze(...i){let e=rI;for(const n of i)e=e.add(n);return e}const aI=new jt(Ue);function oI(){return aI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bh(e)?"-0":e}}function d1(i){return{integerValue:""+i}}function lI(i,e){return jC(e)?d1(e):Tg(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(){this._=void 0}}function cI(i,e,n){return i instanceof Sh?(function(o,c){const h={fields:{[Qx]:{stringValue:Yx},[Jx]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&yg(c)&&(c=Gh(c)),c&&(h.fields[Xx]=c),{mapValue:h}})(n,e):i instanceof sc?m1(i,e):i instanceof ic?g1(i,e):(function(o,c){const h=f1(o,c),g=P_(h)+P_(o.Ae);return zm(h)&&zm(o.Ae)?d1(g):Tg(o.serializer,g)})(i,e)}function uI(i,e,n){return i instanceof sc?m1(i,e):i instanceof ic?g1(i,e):n}function f1(i,e){return i instanceof Ah?(function(r){return zm(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class Sh extends $h{}class sc extends $h{constructor(e){super(),this.elements=e}}function m1(i,e){const n=p1(e);for(const r of i.elements)n.some((o=>Vs(o,r)))||n.push(r);return{arrayValue:{values:n}}}class ic extends $h{constructor(e){super(),this.elements=e}}function g1(i,e){let n=p1(e);for(const r of i.elements)n=n.filter((o=>!Vs(o,r)));return{arrayValue:{values:n}}}class Ah extends $h{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function P_(i){return pt(i.integerValue||i.doubleValue)}function p1(i){return vg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function hI(i,e){return i.field.isEqual(e.field)&&(function(r,o){return r instanceof sc&&o instanceof sc||r instanceof ic&&o instanceof ic?ho(r.elements,o.elements,Vs):r instanceof Ah&&o instanceof Ah?Vs(r.Ae,o.Ae):r instanceof Sh&&o instanceof Sh})(i.transform,e.transform)}class dI{constructor(e,n){this.version=e,this.transformResults=n}}class oi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new oi}static exists(e){return new oi(void 0,e)}static updateTime(e){return new oi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Yh{}function y1(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new _1(i.key,oi.none()):new fc(i.key,i.data,oi.none());{const n=i.data,r=Un.empty();let o=new jt(Ft.comparator);for(let c of e.fields)if(!o.has(c)){let h=n.field(c);h===null&&c.length>1&&(c=c.popLast(),h=n.field(c)),h===null?r.delete(c):r.set(c,h),o=o.add(c)}return new ra(i.key,r,new ts(o.toArray()),oi.none())}}function fI(i,e,n){i instanceof fc?(function(o,c,h){const g=o.value.clone(),v=z_(o.fieldTransforms,c,h.transformResults);g.setAll(v),c.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(i,e,n):i instanceof ra?(function(o,c,h){if(!lh(o.precondition,c))return void c.convertToUnknownDocument(h.version);const g=z_(o.fieldTransforms,c,h.transformResults),v=c.data;v.setAll(v1(o)),v.setAll(g),c.convertToFoundDocument(h.version,v).setHasCommittedMutations()})(i,e,n):(function(o,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function Kl(i,e,n,r){return i instanceof fc?(function(c,h,g,v){if(!lh(c.precondition,h))return g;const p=c.value.clone(),x=B_(c.fieldTransforms,v,h);return p.setAll(x),h.convertToFoundDocument(h.version,p).setHasLocalMutations(),null})(i,e,n,r):i instanceof ra?(function(c,h,g,v){if(!lh(c.precondition,h))return g;const p=B_(c.fieldTransforms,v,h),x=h.data;return x.setAll(v1(c)),x.setAll(p),h.convertToFoundDocument(h.version,x).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((E=>E.field)))})(i,e,n,r):(function(c,h,g){return lh(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):g})(i,e,n)}function mI(i,e){let n=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),c=f1(r.transform,o||null);c!=null&&(n===null&&(n=Un.empty()),n.set(r.field,c))}return n||null}function U_(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&ho(r,o,((c,h)=>hI(c,h)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class fc extends Yh{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ra extends Yh{constructor(e,n,r,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function v1(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=i.data.field(n);e.set(n,r)}})),e}function z_(i,e,n){const r=new Map;$e(i.length===n.length,32656,{Ve:n.length,de:i.length});for(let o=0;o<n.length;o++){const c=i[o],h=c.transform,g=e.data.field(c.field);r.set(c.field,uI(h,g,n[o]))}return r}function B_(i,e,n){const r=new Map;for(const o of i){const c=o.transform,h=n.data.field(o.field);r.set(o.field,cI(c,h,e))}return r}class _1 extends Yh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gI extends Yh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&fI(c,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Kl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Kl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=h1();return this.mutations.forEach((o=>{const c=e.get(o.key),h=c.overlayedDocument;let g=this.applyToLocalView(h,c.mutatedFields);g=n.has(o.key)?null:g;const v=y1(h,g);v!==null&&r.set(o.key,v),h.isValidDocument()||h.convertToNoDocument(Ae.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ze())}isEqual(e){return this.batchId===e.batchId&&ho(this.mutations,e.mutations,((n,r)=>U_(n,r)))&&ho(this.baseMutations,e.baseMutations,((n,r)=>U_(n,r)))}}class Eg{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){$e(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return iI})();const c=e.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,r[h].version);return new Eg(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,He;function _I(i){switch(i){case oe.OK:return we(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return we(15467,{code:i})}}function b1(i){if(i===void 0)return ui("GRPC error has no .code"),oe.UNKNOWN;switch(i){case Nt.OK:return oe.OK;case Nt.CANCELLED:return oe.CANCELLED;case Nt.UNKNOWN:return oe.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return oe.INTERNAL;case Nt.UNAVAILABLE:return oe.UNAVAILABLE;case Nt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Nt.NOT_FOUND:return oe.NOT_FOUND;case Nt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Nt.ABORTED:return oe.ABORTED;case Nt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Nt.DATA_LOSS:return oe.DATA_LOSS;default:return we(39323,{code:i})}}(He=Nt||(Nt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=new nr([4294967295,4294967295],0);function H_(i){const e=bI().encode(i),n=new Vx;return n.update(e),new Uint8Array(n.digest())}function G_(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new nr([n,r],0),new nr([o,c],0)]}class wg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ll(`Invalid padding: ${n}`);if(r<0)throw new Ll(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ll(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ll(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=nr.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(nr.fromNumber(r)));return o.compare(xI)===1&&(o=new nr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=H_(e),[r,o]=G_(n);for(let c=0;c<this.hashCount;c++){const h=this.ye(r,o,c);if(!this.we(h))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new wg(c,o,n);return r.forEach((g=>h.insert(g))),h}insert(e){if(this.ge===0)return;const n=H_(e),[r,o]=G_(n);for(let c=0;c<this.hashCount;c++){const h=this.ye(r,o,c);this.be(h)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ll extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n,r,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,mc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Qh(Ae.min(),o,new ct(Ue),hi(),ze())}}class mc{constructor(e,n,r,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new mc(r,n,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,n,r,o){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=o}}class x1{constructor(e,n){this.targetId=e,this.Ce=n}}class T1{constructor(e,n,r=$t.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class q_{constructor(){this.ve=0,this.Fe=F_(),this.Me=$t.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),n=ze(),r=ze();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:we(38017,{changeType:c})}})),new mc(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=F_()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,$e(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class TI{constructor(e){this.Ge=e,this.ze=new Map,this.je=hi(),this.He=Ju(),this.Je=Ju(),this.Ze=new ct(Ue)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(Hm(c))if(r===0){const h=new be(c.path);this.et(n,h,Jt.newNoDocument(h,Ae.min()))}else $e(r===1,20013,{expectedCount:r});else{const h=this._t(n);if(h!==r){const g=this.ut(e),v=g?this.ct(g,e,h):1;if(v!==0){this.it(n);const p=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=n;let h,g;try{h=or(r).toUint8Array()}catch(v){if(v instanceof $x)return uo("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{g=new wg(h,o,c)}catch(v){return uo(v instanceof Ll?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return g.ge===0?null:g}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((c=>{const h=this.Ge.ht(),g=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,h)=>{const g=this.ot(h);if(g){if(c.current&&Hm(g.target)){const v=new be(g.target.path);this.It(v).has(h)||this.Et(h,v)||this.et(h,v,Jt.newNoDocument(v,e))}c.Be&&(n.set(h,c.ke()),c.Ke())}}));let r=ze();this.Je.forEach(((c,h)=>{let g=!0;h.forEachWhile((v=>{const p=this.ot(v);return!p||p.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(r=r.add(c))})),this.je.forEach(((c,h)=>h.setReadTime(e)));const o=new Qh(e,n,this.Ze,this.je,r);return this.je=hi(),this.He=Ju(),this.Je=Ju(),this.Ze=new ct(Ue),o}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new q_,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new jt(Ue),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new jt(Ue),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new q_),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ju(){return new ct(be.comparator)}function F_(){return new ct(be.comparator)}const EI={asc:"ASCENDING",desc:"DESCENDING"},wI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SI={and:"AND",or:"OR"};class AI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function qm(i,e){return i.useProto3Json||Hh(e)?e:{value:e}}function Nh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function E1(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function NI(i,e){return Nh(i,e.toTimestamp())}function Os(i){return $e(!!i,49232),Ae.fromTimestamp((function(n){const r=ar(n);return new rt(r.seconds,r.nanos)})(i))}function Sg(i,e){return Fm(i,e).canonicalString()}function Fm(i,e){const n=(function(o){return new lt(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function w1(i){const e=lt.fromString(i);return $e(I1(e),10190,{key:e.toString()}),e}function Km(i,e){return Sg(i.databaseId,e.path)}function gm(i,e){const n=w1(e);if(n.get(1)!==i.databaseId.projectId)throw new ve(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ve(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new be(A1(n))}function S1(i,e){return Sg(i.databaseId,e)}function CI(i){const e=w1(i);return e.length===4?lt.emptyPath():A1(e)}function $m(i){return new lt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function A1(i){return $e(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function K_(i,e,n){return{name:Km(i,e),fields:n.value.mapValue.fields}}function II(i,e){let n;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:we(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(p,x){return p.useProto3Json?($e(x===void 0||typeof x=="string",58123),$t.fromBase64String(x||"")):($e(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),$t.fromUint8Array(x||new Uint8Array))})(i,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&(function(p){const x=p.code===void 0?oe.UNKNOWN:b1(p.code);return new ve(x,p.message||"")})(h);n=new T1(r,o,c,g||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=gm(i,r.document.name),c=Os(r.document.updateTime),h=r.document.createTime?Os(r.document.createTime):Ae.min(),g=new Un({mapValue:{fields:r.document.fields}}),v=Jt.newFoundDocument(o,c,h,g),p=r.targetIds||[],x=r.removedTargetIds||[];n=new ch(p,x,v.key,v)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=gm(i,r.document),c=r.readTime?Os(r.readTime):Ae.min(),h=Jt.newNoDocument(o,c),g=r.removedTargetIds||[];n=new ch([],g,h.key,h)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=gm(i,r.document),c=r.removedTargetIds||[];n=new ch([],c,o,null)}else{if(!("filter"in e))return we(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,h=new vI(o,c),g=r.targetId;n=new x1(g,h)}}return n}function RI(i,e){let n;if(e instanceof fc)n={update:K_(i,e.key,e.value)};else if(e instanceof _1)n={delete:Km(i,e.key)};else if(e instanceof ra)n={update:K_(i,e.key,e.data),updateMask:UI(e.fieldMask)};else{if(!(e instanceof gI))return we(16599,{dt:e.type});n={verify:Km(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(c,h){const g=h.transform;if(g instanceof Sh)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof sc)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof ic)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Ah)return{fieldPath:h.field.canonicalString(),increment:g.Ae};throw we(20930,{transform:h.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:NI(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:we(27497)})(i,e.precondition)),n}function kI(i,e){return i&&i.length>0?($e(e!==void 0,14353),i.map((n=>(function(o,c){let h=o.updateTime?Os(o.updateTime):Os(c);return h.isEqual(Ae.min())&&(h=Os(c)),new dI(h,o.transformResults||[])})(n,e)))):[]}function jI(i,e){return{documents:[S1(i,e.path)]}}function OI(i,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=S1(i,o);const c=(function(p){if(p.length!==0)return C1(Ls.create(p,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const h=(function(p){if(p.length!==0)return p.map((x=>(function(A){return{field:eo(A.field),direction:VI(A.dir)}})(x)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const g=qm(i,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:n,parent:o}}function DI(i){let e=CI(i.parent);const n=i.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){$e(r===1,65062);const x=n.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let c=[];n.where&&(c=(function(E){const A=N1(E);return A instanceof Ls&&s1(A)?A.getFilters():[A]})(n.where));let h=[];n.orderBy&&(h=(function(E){return E.map((A=>(function(G){return new wh(to(G.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(G.direction))})(A)))})(n.orderBy));let g=null;n.limit&&(g=(function(E){let A;return A=typeof E=="object"?E.value:E,Hh(A)?null:A})(n.limit));let v=null;n.startAt&&(v=(function(E){const A=!!E.before,V=E.values||[];return new Eh(V,A)})(n.startAt));let p=null;return n.endAt&&(p=(function(E){const A=!E.before,V=E.values||[];return new Eh(V,A)})(n.endAt)),JC(e,o,h,c,g,"F",v,p)}function MI(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function N1(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=to(n.unaryFilter.field);return kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=to(n.unaryFilter.field);return kt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=to(n.unaryFilter.field);return kt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=to(n.unaryFilter.field);return kt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(i):i.fieldFilter!==void 0?(function(n){return kt.create(to(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Ls.create(n.compositeFilter.filters.map((r=>N1(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(n.compositeFilter.op))})(i):we(30097,{filter:i})}function VI(i){return EI[i]}function LI(i){return wI[i]}function PI(i){return SI[i]}function eo(i){return{fieldPath:i.canonicalString()}}function to(i){return Ft.fromServerFormat(i.fieldPath)}function C1(i){return i instanceof kt?(function(n){if(n.op==="=="){if(O_(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NAN"}};if(j_(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(O_(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NOT_NAN"}};if(j_(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eo(n.field),op:LI(n.op),value:n.value}}})(i):i instanceof Ls?(function(n){const r=n.getFilters().map((o=>C1(o)));return r.length===1?r[0]:{compositeFilter:{op:PI(n.op),filters:r}}})(i):we(54877,{filter:i})}function UI(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function I1(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function R1(i){return!!i&&typeof i._toProto=="function"&&i._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n,r,o,c=Ae.min(),h=Ae.min(),g=$t.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g,this.expectedCount=v}withSequenceNumber(e){return new Wi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e){this.yt=e}}function BI(i){const e=DI({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Gm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(){this.Sn=new GI}addToCollectionParentIndex(e,n){return this.Sn.add(n),re.resolve()}getCollectionParents(e,n){return re.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return re.resolve()}deleteFieldIndex(e,n){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,n){return re.resolve()}getDocumentsMatchingTarget(e,n){return re.resolve(null)}getIndexType(e,n){return re.resolve(0)}getFieldIndexes(e,n){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,n){return re.resolve(rr.min())}getMinOffsetFromCollectionGroup(e,n){return re.resolve(rr.min())}updateCollectionGroup(e,n,r){return re.resolve()}updateIndexEntries(e,n){return re.resolve()}}class GI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new jt(lt.comparator),c=!o.has(r);return this.index[n]=o.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new jt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},k1=41943040;class dn{static withCacheSize(e){return new dn(e,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(k1,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new go(0)}static ar(){return new go(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="LruGarbageCollector",qI=1048576;function Q_([i,e],[n,r]){const o=Ue(i,n);return o===0?Ue(e,r):o}class FI{constructor(e){this.Pr=e,this.buffer=new jt(Q_),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Q_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class KI{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){me(Y_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){To(n)?me(Y_,"Ignoring IndexedDB error during garbage collection: ",n):await xo(n)}await this.Ar(3e5)}))}}class $I{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return re.resolve(Bh.ce);const r=new FI(n);return this.Vr.forEachTarget(e,(o=>r.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>r.Er(o))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve($_)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$_):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,o,c,h,g,v,p;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,h=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(r=E,g=Date.now(),this.removeTargets(e,r,n)))).next((E=>(c=E,v=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(p=Date.now(),Wa()<=Pe.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-x}ms
	Determined least recently used ${o} in `+(g-h)+`ms
	Removed ${c} targets in `+(v-g)+`ms
	Removed ${E} documents in `+(p-v)+`ms
Total Duration: ${p-x}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:E}))))}}function YI(i,e){return new $I(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(){this.changes=new ia((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?re.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(r!==null&&Kl(r.mutation,o,ts.empty(),rt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,ze()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=ze()){const o=Gr();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,r).next((c=>{let h=Vl();return c.forEach(((g,v)=>{h=h.insert(g,v.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const r=Gr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,ze())))}populateOverlays(e,n,r){const o=[];return r.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((h,g)=>{n.set(h,g)}))}))}computeViews(e,n,r,o){let c=hi();const h=Fl(),g=(function(){return Fl()})();return n.forEach(((v,p)=>{const x=r.get(p.key);o.has(p.key)&&(x===void 0||x.mutation instanceof ra)?c=c.insert(p.key,p):x!==void 0?(h.set(p.key,x.mutation.getFieldMask()),Kl(x.mutation,p,x.mutation.getFieldMask(),rt.now())):h.set(p.key,ts.empty())})),this.recalculateAndSaveOverlays(e,c).next((v=>(v.forEach(((p,x)=>h.set(p,x))),n.forEach(((p,x)=>g.set(p,new XI(x,h.get(p)??null)))),g)))}recalculateAndSaveOverlays(e,n){const r=Fl();let o=new ct(((h,g)=>h-g)),c=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const g of h)g.keys().forEach((v=>{const p=n.get(v);if(p===null)return;let x=r.get(v)||ts.empty();x=g.applyToLocalView(p,x),r.set(v,x);const E=(o.get(g.batchId)||ze()).add(v);o=o.insert(g.batchId,E)}))})).next((()=>{const h=[],g=o.getReverseIterator();for(;g.hasNext();){const v=g.getNext(),p=v.key,x=v.value,E=h1();x.forEach((A=>{if(!c.has(A)){const V=y1(n.get(A),r.get(A));V!==null&&E.set(A,V),c=c.add(A)}})),h.push(this.documentOverlayCache.saveOverlays(e,p,E))}return re.waitFor(h)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,o){return WC(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ZC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next((c=>{const h=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-c.size):re.resolve(Gr());let g=Zl,v=c;return h.next((p=>re.forEach(p,((x,E)=>(g<E.largestBatchId&&(g=E.largestBatchId),c.get(x)?re.resolve():this.remoteDocumentCache.getEntry(e,x).next((A=>{v=v.insert(x,A)}))))).next((()=>this.populateOverlays(e,p,c))).next((()=>this.computeViews(e,v,p,ze()))).next((x=>({batchId:g,changes:u1(x)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next((r=>{let o=Vl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const c=n.collectionGroup;let h=Vl();return this.indexManager.getCollectionParents(e,c).next((g=>re.forEach(g,(v=>{const p=(function(E,A){return new qh(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,v.child(c));return this.getDocumentsMatchingCollectionQuery(e,p,r,o).next((x=>{x.forEach(((E,A)=>{h=h.insert(E,A)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,c,o)))).next((h=>{c.forEach(((v,p)=>{const x=p.getKey();h.get(x)===null&&(h=h.insert(x,Jt.newInvalidDocument(x)))}));let g=Vl();return h.forEach(((v,p)=>{const x=c.get(v);x!==void 0&&Kl(x.mutation,p,ts.empty(),rt.now()),Kh(n,p)&&(g=g.insert(v,p))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return re.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Os(o.createTime)}})(n)),re.resolve()}getNamedQuery(e,n){return re.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:BI(o.bundledQuery),readTime:Os(o.readTime)}})(n)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this.overlays=new ct(be.comparator),this.Lr=new Map}getOverlay(e,n){return re.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Gr();return re.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&r.set(o,c)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((o,c)=>{this.bt(e,n,c)})),re.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.Lr.get(r);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(r)),re.resolve()}getOverlaysForCollection(e,n,r){const o=Gr(),c=n.length+1,h=new be(n.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const v=g.getNext().value,p=v.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===c&&v.largestBatchId>r&&o.set(v.getKey(),v)}return re.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let c=new ct(((p,x)=>p-x));const h=this.overlays.getIterator();for(;h.hasNext();){const p=h.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let x=c.get(p.largestBatchId);x===null&&(x=Gr(),c=c.insert(p.largestBatchId,x)),x.set(p.getKey(),p)}}const g=Gr(),v=c.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((p,x)=>g.set(p,x))),!(g.size()>=o)););return re.resolve(g)}bt(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const h=this.Lr.get(o.largestBatchId).delete(r.key);this.Lr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new yI(n,r));let c=this.Lr.get(n);c===void 0&&(c=ze(),this.Lr.set(n,c)),this.Lr.set(n,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(){this.sessionToken=$t.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(){this.kr=new jt(Vt.Kr),this.qr=new jt(Vt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Vt(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new Vt(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new be(new lt([])),r=new Vt(n,e),o=new Vt(n,e+1),c=[];return this.qr.forEachInRange([r,o],(h=>{this.Wr(h),c.push(h.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new be(new lt([])),r=new Vt(n,e),o=new Vt(n,e+1);let c=ze();return this.qr.forEachInRange([r,o],(h=>{c=c.add(h.key)})),c}containsKey(e){const n=new Vt(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Vt{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return be.comparator(e.key,n.key)||Ue(e.Hr,n.Hr)}static Ur(e,n){return Ue(e.Hr,n.Hr)||be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new jt(Vt.Kr)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new pI(c,n,r,o);this.mutationQueue.push(h);for(const g of o)this.Jr=this.Jr.add(new Vt(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return re.resolve(h)}lookupMutationBatch(e,n){return re.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.Xr(r),c=o<0?0:o;return re.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?pg:this.Yn-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Vt(n,0),o=new Vt(n,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([r,o],(h=>{const g=this.Zr(h.Hr);c.push(g)})),re.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new jt(Ue);return n.forEach((o=>{const c=new Vt(o,0),h=new Vt(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,h],(g=>{r=r.add(g.Hr)}))})),re.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let c=r;be.isDocumentKey(c)||(c=c.child(""));const h=new Vt(new be(c),0);let g=new jt(Ue);return this.Jr.forEachWhile((v=>{const p=v.key.path;return!!r.isPrefixOf(p)&&(p.length===o&&(g=g.add(v.Hr)),!0)}),h),re.resolve(this.Yr(g))}Yr(e){const n=[];return e.forEach((r=>{const o=this.Zr(r);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){$e(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return re.forEach(n.mutations,(o=>{const c=new Vt(o.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new Vt(n,0),o=this.Jr.firstAfterOrEqual(r);return re.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e){this.ti=e,this.docs=(function(){return new ct(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),c=o?o.size:0,h=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return re.resolve(r?r.document.mutableCopy():Jt.newInvalidDocument(n))}getEntries(e,n){let r=hi();return n.forEach((o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():Jt.newInvalidDocument(o))})),re.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let c=hi();const h=n.path,g=new be(h.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(g);for(;v.hasNext();){const{key:p,value:{document:x}}=v.getNext();if(!h.isPrefixOf(p.path))break;p.path.length>h.length+1||CC(NC(x),r)<=0||(o.has(x.key)||Kh(n,x))&&(c=c.insert(x.key,x.mutableCopy()))}return re.resolve(c)}getAllFromCollectionGroup(e,n,r,o){we(9500)}ni(e,n){return re.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new sR(this)}getSize(e){return re.resolve(this.size)}}class sR extends QI{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(r)})),re.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.persistence=e,this.ri=new ia((n=>_g(n)),bg),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.ii=0,this.si=new Ag,this.targetCount=0,this.oi=go._r()}forEachTarget(e,n){return this.ri.forEach(((r,o)=>n(o))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),re.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new go(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,re.resolve()}updateTargetData(e,n){return this.lr(n),re.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,n,r){let o=0;const c=[];return this.ri.forEach(((h,g)=>{g.sequenceNumber<=n&&r.get(g.targetId)===null&&(this.ri.delete(h),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),re.waitFor(c).next((()=>o))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return re.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),re.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((h=>{c.push(o.markPotentiallyOrphaned(e,h))})),re.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),re.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return re.resolve(r)}containsKey(e,n){return re.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,n){this._i={},this.overlays={},this.ai=new Bh(0),this.ui=!1,this.ui=!0,this.ci=new eR,this.referenceDelegate=e(this),this.li=new iR(this),this.indexManager=new HI,this.remoteDocumentCache=(function(o){return new nR(o)})((r=>this.referenceDelegate.hi(r))),this.serializer=new zI(n),this.Pi=new WI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ZI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new tR(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){me("MemoryPersistence","Starting transaction:",e);const o=new rR(this.ai.next());return this.referenceDelegate.Ti(),r(o).next((c=>this.referenceDelegate.Ii(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ei(e,n){return re.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class rR extends RC{constructor(e){super(),this.currentSequenceNumber=e}}class Ng{constructor(e){this.persistence=e,this.Ri=new Ag,this.Ai=null}static Vi(e){return new Ng(e)}get di(){if(this.Ai)return this.Ai;throw we(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),re.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),re.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.di.add(c.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.di,(r=>{const o=be.fromPath(r);return this.mi(e,o).next((c=>{c||n.removeEntry(o,Ae.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return re.or([()=>re.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Ch{constructor(e,n){this.persistence=e,this.fi=new ia((r=>OC(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=YI(this,n)}static Vi(e,n){return new Ch(e,n)}Ti(){}Ii(e){return re.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((o=>r+o))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return re.forEach(this.fi,((r,o)=>this.wr(e,r,o).next((c=>c?re.resolve():n(o)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ni(e,(h=>this.wr(e,h,n).next((g=>{g||(r++,c.removeEntry(h,Ae.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),re.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),re.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),re.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ah(e.data.value)),n}wr(e,n,r){return re.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return re.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=o}static Es(e,n){let r=ze(),o=ze();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Cg(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return N2()?8:kC(Zt())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const c={result:null};return this.gs(e,n).next((h=>{c.result=h})).next((()=>{if(!c.result)return this.ps(e,n,o,r).next((h=>{c.result=h}))})).next((()=>{if(c.result)return;const h=new aR;return this.ys(e,n,h).next((g=>{if(c.result=g,this.As)return this.ws(e,n,h,g.size)}))})).next((()=>c.result))}ws(e,n,r,o){return r.documentReadCount<this.Vs?(Wa()<=Pe.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Za(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),re.resolve()):(Wa()<=Pe.DEBUG&&me("QueryEngine","Query:",Za(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ds*o?(Wa()<=Pe.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Za(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,js(n))):re.resolve())}gs(e,n){if(L_(n))return re.resolve(null);let r=js(n);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Gm(n,null,"F"),r=js(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const h=ze(...c);return this.fs.getDocuments(e,h).next((g=>this.indexManager.getMinOffset(e,r).next((v=>{const p=this.bs(n,g);return this.Ss(n,p,h,v.readTime)?this.gs(e,Gm(n,null,"F")):this.Ds(e,p,n,v)}))))})))))}ps(e,n,r,o){return L_(n)||o.isEqual(Ae.min())?re.resolve(null):this.fs.getDocuments(e,r).next((c=>{const h=this.bs(n,c);return this.Ss(n,h,r,o)?re.resolve(null):(Wa()<=Pe.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Za(n)),this.Ds(e,h,n,AC(o,Zl)).next((g=>g)))}))}bs(e,n){let r=new jt(l1(e));return n.forEach(((o,c)=>{Kh(e,c)&&(r=r.add(c))})),r}Ss(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}ys(e,n,r){return Wa()<=Pe.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Za(n)),this.fs.getDocumentsMatchingQuery(e,n,rr.min(),r)}Ds(e,n,r,o){return this.fs.getDocumentsMatchingQuery(e,r,o).next((c=>(n.forEach((h=>{c=c.insert(h.key,h)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="LocalStore",lR=3e8;class cR{constructor(e,n,r,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new ct(Ue),this.Fs=new ia((c=>_g(c)),bg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function uR(i,e,n,r){return new cR(i,e,n,r)}async function O1(i,e){const n=Ce(i);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((c=>(o=c,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((c=>{const h=[],g=[];let v=ze();for(const p of o){h.push(p.batchId);for(const x of p.mutations)v=v.add(x.key)}for(const p of c){g.push(p.batchId);for(const x of p.mutations)v=v.add(x.key)}return n.localDocuments.getDocuments(r,v).next((p=>({Ns:p,removedBatchIds:h,addedBatchIds:g})))}))}))}function hR(i,e){const n=Ce(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),c=n.xs.newChangeBuffer({trackRemovals:!0});return(function(g,v,p,x){const E=p.batch,A=E.keys();let V=re.resolve();return A.forEach((G=>{V=V.next((()=>x.getEntry(v,G))).next((ne=>{const B=p.docVersions.get(G);$e(B!==null,48541),ne.version.compareTo(B)<0&&(E.applyToRemoteDocument(ne,p),ne.isValidDocument()&&(ne.setReadTime(p.commitVersion),x.addEntry(ne)))}))})),V.next((()=>g.mutationQueue.removeMutationBatch(v,E)))})(n,r,e,c).next((()=>c.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(g){let v=ze();for(let p=0;p<g.mutationResults.length;++p)g.mutationResults[p].transformResults.length>0&&(v=v.add(g.batch.mutations[p].key));return v})(e)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function D1(i){const e=Ce(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function dR(i,e){const n=Ce(i),r=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const h=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const g=[];e.targetChanges.forEach(((x,E)=>{const A=o.get(E);if(!A)return;g.push(n.li.removeMatchingKeys(c,x.removedDocuments,E).next((()=>n.li.addMatchingKeys(c,x.addedDocuments,E))));let V=A.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(E)!==null?V=V.withResumeToken($t.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):x.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(x.resumeToken,r)),o=o.insert(E,V),(function(ne,B,X){return ne.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-ne.snapshotVersion.toMicroseconds()>=lR?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0})(A,V,x)&&g.push(n.li.updateTargetData(c,V))}));let v=hi(),p=ze();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,x))})),g.push(fR(c,h,e.documentUpdates).next((x=>{v=x.Bs,p=x.Ls}))),!r.isEqual(Ae.min())){const x=n.li.getLastRemoteSnapshotVersion(c).next((E=>n.li.setTargetsMetadata(c,c.currentSequenceNumber,r)));g.push(x)}return re.waitFor(g).next((()=>h.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,v,p))).next((()=>v))})).then((c=>(n.vs=o,c)))}function fR(i,e,n){let r=ze(),o=ze();return n.forEach((c=>r=r.add(c))),e.getEntries(i,r).next((c=>{let h=hi();return n.forEach(((g,v)=>{const p=c.get(g);v.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(g)),v.isNoDocument()&&v.version.isEqual(Ae.min())?(e.removeEntry(g,v.readTime),h=h.insert(g,v)):!p.isValidDocument()||v.version.compareTo(p.version)>0||v.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(v),h=h.insert(g,v)):me(Ig,"Ignoring outdated watch update for ",g,". Current version:",p.version," Watch version:",v.version)})),{Bs:h,Ls:o}}))}function mR(i,e){const n=Ce(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=pg),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function gR(i,e){const n=Ce(i);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.li.getTargetData(r,e).next((c=>c?(o=c,re.resolve(o)):n.li.allocateTargetId(r).next((h=>(o=new Wi(e,h,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.vs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function Ym(i,e,n){const r=Ce(i),o=r.vs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,(h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!To(h))throw h;me(Ig,`Failed to update sequence numbers for target ${e}: ${h}`)}r.vs=r.vs.remove(e),r.Fs.delete(o.target)}function X_(i,e,n){const r=Ce(i);let o=Ae.min(),c=ze();return r.persistence.runTransaction("Execute query","readwrite",(h=>(function(v,p,x){const E=Ce(v),A=E.Fs.get(x);return A!==void 0?re.resolve(E.vs.get(A)):E.li.getTargetData(p,x)})(r,h,js(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(h,g.targetId).next((v=>{c=v}))})).next((()=>r.Cs.getDocumentsMatchingQuery(h,e,n?o:Ae.min(),n?c:ze()))).next((g=>(pR(r,tI(e),g),{documents:g,ks:c})))))}function pR(i,e,n){let r=i.Ms.get(e)||Ae.min();n.forEach(((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),i.Ms.set(e,r)}class J_{constructor(){this.activeTargetIds=oI()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yR{constructor(){this.vo=new J_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new J_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="ConnectivityMonitor";class Z_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){me(W_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){me(W_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wu=null;function Qm(){return Wu===null?Wu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Wu++,"0x"+Wu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="RestConnection",_R={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class bR{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${o}`,this.$o=this.databaseId.database===xh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Wo(e,n,r,o,c){const h=Qm(),g=this.Qo(e,n.toUriEncodedString());me(pm,`Sending RPC '${e}' ${h}:`,g,r);const v={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(v,o,c);const{host:p}=new URL(g),x=yo(p);return this.zo(e,g,v,r,x).then((E=>(me(pm,`Received RPC '${e}' ${h}: `,E),E)),(E=>{throw uo(pm,`RPC '${e}' ${h} failed with error: `,E,"url: ",g,"request:",r),E}))}jo(e,n,r,o,c,h){return this.Wo(e,n,r,o,c)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+bo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),r&&r.headers.forEach(((o,c)=>e[c]=o))}Qo(e,n){const r=_R[e];let o=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt="WebChannelConnection",kl=(i,e,n)=>{i.listen(e,(r=>{try{n(r)}catch(o){setTimeout((()=>{throw o}),0)}}))};class ao extends bR{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ao.c_){const e=zx();kl(e,Ux.STAT_EVENT,(n=>{n.stat===Lm.PROXY?me(Qt,"STAT_EVENT: detected buffering proxy"):n.stat===Lm.NOPROXY&&me(Qt,"STAT_EVENT: detected no buffering proxy")})),ao.c_=!0}}zo(e,n,r,o,c){const h=Qm();return new Promise(((g,v)=>{const p=new Lx;p.setWithCredentials(!0),p.listenOnce(Px.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case rh.NO_ERROR:const E=p.getResponseJson();me(Qt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(E)),g(E);break;case rh.TIMEOUT:me(Qt,`RPC '${e}' ${h} timed out`),v(new ve(oe.DEADLINE_EXCEEDED,"Request time out"));break;case rh.HTTP_ERROR:const A=p.getStatus();if(me(Qt,`RPC '${e}' ${h} failed with status:`,A,"response text:",p.getResponseText()),A>0){let V=p.getResponseJson();Array.isArray(V)&&(V=V[0]);const G=V==null?void 0:V.error;if(G&&G.status&&G.message){const ne=(function(X){const J=X.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(J)>=0?J:oe.UNKNOWN})(G.status);v(new ve(ne,G.message))}else v(new ve(oe.UNKNOWN,"Server responded with status "+p.getStatus()))}else v(new ve(oe.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:h,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{me(Qt,`RPC '${e}' ${h} completed.`)}}));const x=JSON.stringify(o);me(Qt,`RPC '${e}' ${h} sending request:`,o),p.send(n,"POST",x,r,15)}))}T_(e,n,r){const o=Qm(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Go(g.initMessageHeaders,n,r),g.encodeInitMessageHeaders=!0;const p=c.join("");me(Qt,`Creating RPC '${e}' stream ${o}: ${p}`,g);const x=h.createWebChannel(p,g);this.I_(x);let E=!1,A=!1;const V=new xR({Ho:G=>{A?me(Qt,`Not sending because RPC '${e}' stream ${o} is closed:`,G):(E||(me(Qt,`Opening RPC '${e}' stream ${o} transport.`),x.open(),E=!0),me(Qt,`RPC '${e}' stream ${o} sending:`,G),x.send(G))},Jo:()=>x.close()});return kl(x,Ml.EventType.OPEN,(()=>{A||(me(Qt,`RPC '${e}' stream ${o} transport opened.`),V.i_())})),kl(x,Ml.EventType.CLOSE,(()=>{A||(A=!0,me(Qt,`RPC '${e}' stream ${o} transport closed`),V.o_(),this.E_(x))})),kl(x,Ml.EventType.ERROR,(G=>{A||(A=!0,uo(Qt,`RPC '${e}' stream ${o} transport errored. Name:`,G.name,"Message:",G.message),V.o_(new ve(oe.UNAVAILABLE,"The operation could not be completed")))})),kl(x,Ml.EventType.MESSAGE,(G=>{var ne;if(!A){const B=G.data[0];$e(!!B,16349);const X=B,J=(X==null?void 0:X.error)||((ne=X[0])==null?void 0:ne.error);if(J){me(Qt,`RPC '${e}' stream ${o} received error:`,J);const ue=J.status;let U=(function(C){const S=Nt[C];if(S!==void 0)return b1(S)})(ue),K=J.message;U===void 0&&(U=oe.INTERNAL,K="Unknown error status: "+ue+" with message "+J.message),A=!0,V.o_(new ve(U,K)),x.close()}else me(Qt,`RPC '${e}' stream ${o} received:`,B),V.__(B)}})),ao.u_(),setTimeout((()=>{V.s_()}),0),V}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Bx()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(i){return new ao(i)}function ym(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(i){return new AI(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ao.c_=!1;class M1{constructor(e,n,r=1e3,o=1.5,c=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=o,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="PersistentStream";class V1{constructor(e,n,r,o,c,h,g,v){this.Ci=e,this.b_=r,this.S_=o,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new M1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===oe.RESOURCE_EXHAUSTED?(ui(n.toString()),ui("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{e((()=>{const o=new ve(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(eb,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(me(eb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ER extends V1{constructor(e,n,r,o,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,h),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=II(this.serializer,e),r=(function(c){if(!("targetChange"in c))return Ae.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?Ae.min():h.readTime?Os(h.readTime):Ae.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=$m(this.serializer),n.addTarget=(function(c,h){let g;const v=h.target;if(g=Hm(v)?{documents:jI(c,v)}:{query:OI(c,v).ft},g.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){g.resumeToken=E1(c,h.resumeToken);const p=qm(c,h.expectedCount);p!==null&&(g.expectedCount=p)}else if(h.snapshotVersion.compareTo(Ae.min())>0){g.readTime=Nh(c,h.snapshotVersion.toTimestamp());const p=qm(c,h.expectedCount);p!==null&&(g.expectedCount=p)}return g})(this.serializer,e);const r=MI(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=$m(this.serializer),n.removeTarget=e,this.K_(n)}}class wR extends V1{constructor(e,n,r,o,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,h),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=kI(e.writeResults,e.commitTime),r=Os(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=$m(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>RI(this.serializer,r)))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{}class AR extends SR{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ve(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Wo(e,Fm(n,r),o,c,h))).catch((c=>{throw c.name==="FirebaseError"?(c.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ve(oe.UNKNOWN,c.toString())}))}jo(e,n,r,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,g])=>this.connection.jo(e,Fm(n,r),o,h,g,c))).catch((h=>{throw h.name==="FirebaseError"?(h.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ve(oe.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function NR(i,e,n,r){return new AR(i,e,n,r)}class CR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ui(n),this.aa=!1):me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="RemoteStore";class IR{constructor(e,n,r,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((h=>{r.enqueueAndForget((async()=>{aa(this)&&(me(Jr,"Restarting streams for network reachability change."),await(async function(v){const p=Ce(v);p.Ea.add(4),await gc(p),p.Va.set("Unknown"),p.Ea.delete(4),await Jh(p)})(this))}))})),this.Va=new CR(r,o)}}async function Jh(i){if(aa(i))for(const e of i.Ra)await e(!0)}async function gc(i){for(const e of i.Ra)await e(!1)}function L1(i,e){const n=Ce(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Og(n)?jg(n):Eo(n).O_()&&kg(n,e))}function Rg(i,e){const n=Ce(i),r=Eo(n);n.Ia.delete(e),r.O_()&&P1(n,e),n.Ia.size===0&&(r.O_()?r.L_():aa(n)&&n.Va.set("Unknown"))}function kg(i,e){if(i.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Eo(i).Z_(e)}function P1(i,e){i.da.$e(e),Eo(i).X_(e)}function jg(i){i.da=new TI({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Eo(i).start(),i.Va.ua()}function Og(i){return aa(i)&&!Eo(i).x_()&&i.Ia.size>0}function aa(i){return Ce(i).Ea.size===0}function U1(i){i.da=void 0}async function RR(i){i.Va.set("Online")}async function kR(i){i.Ia.forEach(((e,n)=>{kg(i,e)}))}async function jR(i,e){U1(i),Og(i)?(i.Va.ha(e),jg(i)):i.Va.set("Unknown")}async function OR(i,e,n){if(i.Va.set("Online"),e instanceof T1&&e.state===2&&e.cause)try{await(async function(o,c){const h=c.cause;for(const g of c.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,h),o.Ia.delete(g),o.da.removeTarget(g))})(i,e)}catch(r){me(Jr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ih(i,r)}else if(e instanceof ch?i.da.Xe(e):e instanceof x1?i.da.st(e):i.da.tt(e),!n.isEqual(Ae.min()))try{const r=await D1(i.localStore);n.compareTo(r)>=0&&await(function(c,h){const g=c.da.Tt(h);return g.targetChanges.forEach(((v,p)=>{if(v.resumeToken.approximateByteSize()>0){const x=c.Ia.get(p);x&&c.Ia.set(p,x.withResumeToken(v.resumeToken,h))}})),g.targetMismatches.forEach(((v,p)=>{const x=c.Ia.get(v);if(!x)return;c.Ia.set(v,x.withResumeToken($t.EMPTY_BYTE_STRING,x.snapshotVersion)),P1(c,v);const E=new Wi(x.target,v,p,x.sequenceNumber);kg(c,E)})),c.remoteSyncer.applyRemoteEvent(g)})(i,n)}catch(r){me(Jr,"Failed to raise snapshot:",r),await Ih(i,r)}}async function Ih(i,e,n){if(!To(e))throw e;i.Ea.add(1),await gc(i),i.Va.set("Offline"),n||(n=()=>D1(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{me(Jr,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await Jh(i)}))}function z1(i,e){return e().catch((n=>Ih(i,n,e)))}async function Wh(i){const e=Ce(i),n=cr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:pg;for(;DR(e);)try{const o=await mR(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,MR(e,o)}catch(o){await Ih(e,o)}B1(e)&&H1(e)}function DR(i){return aa(i)&&i.Ta.length<10}function MR(i,e){i.Ta.push(e);const n=cr(i);n.O_()&&n.Y_&&n.ea(e.mutations)}function B1(i){return aa(i)&&!cr(i).x_()&&i.Ta.length>0}function H1(i){cr(i).start()}async function VR(i){cr(i).ra()}async function LR(i){const e=cr(i);for(const n of i.Ta)e.ea(n.mutations)}async function PR(i,e,n){const r=i.Ta.shift(),o=Eg.from(r,e,n);await z1(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Wh(i)}async function UR(i,e){e&&cr(i).Y_&&await(async function(r,o){if((function(h){return _I(h)&&h!==oe.ABORTED})(o.code)){const c=r.Ta.shift();cr(r).B_(),await z1(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Wh(r)}})(i,e),B1(i)&&H1(i)}async function tb(i,e){const n=Ce(i);n.asyncQueue.verifyOperationInProgress(),me(Jr,"RemoteStore received new credentials");const r=aa(n);n.Ea.add(3),await gc(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Jh(n)}async function zR(i,e){const n=Ce(i);e?(n.Ea.delete(2),await Jh(n)):e||(n.Ea.add(2),await gc(n),n.Va.set("Unknown"))}function Eo(i){return i.ma||(i.ma=(function(n,r,o){const c=Ce(n);return c.sa(),new ER(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Zo:RR.bind(null,i),Yo:kR.bind(null,i),t_:jR.bind(null,i),J_:OR.bind(null,i)}),i.Ra.push((async e=>{e?(i.ma.B_(),Og(i)?jg(i):i.Va.set("Unknown")):(await i.ma.stop(),U1(i))}))),i.ma}function cr(i){return i.fa||(i.fa=(function(n,r,o){const c=Ce(n);return c.sa(),new wR(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),Yo:VR.bind(null,i),t_:UR.bind(null,i),ta:LR.bind(null,i),na:PR.bind(null,i)}),i.Ra.push((async e=>{e?(i.fa.B_(),await Wh(i)):(await i.fa.stop(),i.Ta.length>0&&(me(Jr,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,n,r,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,c){const h=Date.now()+r,g=new Dg(e,n,h,o,c);return g.start(r),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mg(i,e){if(ui("AsyncQueue",`${e}: ${i}`),To(i))return new ve(oe.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{static emptySet(e){return new oo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||be.comparator(n.key,r.key):(n,r)=>be.comparator(n.key,r.key),this.keyedMap=Vl(),this.sortedSet=new ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof oo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new oo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(){this.ga=new ct(be.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):we(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class po{constructor(e,n,r,o,c,h,g,v,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=v,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,o,c){const h=[];return n.forEach((g=>{h.push({type:0,doc:g})})),new po(e,n,oo.emptySet(n),h,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class HR{constructor(){this.queries=sb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=Ce(n),c=o.queries;o.queries=sb(),c.forEach(((h,g)=>{for(const v of g.ba)v.onError(r)}))})(this,new ve(oe.ABORTED,"Firestore shutting down"))}}function sb(){return new ia((i=>o1(i)),Fh)}async function GR(i,e){const n=Ce(i);let r=3;const o=e.query;let c=n.queries.get(o);c?!c.Sa()&&e.Da()&&(r=2):(c=new BR,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const g=Mg(h,`Initialization of query '${Za(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,c),c.ba.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&Vg(n)}async function qR(i,e){const n=Ce(i),r=e.query;let o=3;const c=n.queries.get(r);if(c){const h=c.ba.indexOf(e);h>=0&&(c.ba.splice(h,1),c.ba.length===0?o=e.Da()?0:1:!c.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function FR(i,e){const n=Ce(i);let r=!1;for(const o of e){const c=o.query,h=n.queries.get(c);if(h){for(const g of h.ba)g.Fa(o)&&(r=!0);h.wa=o}}r&&Vg(n)}function KR(i,e,n){const r=Ce(i),o=r.queries.get(e);if(o)for(const c of o.ba)c.onError(n);r.queries.delete(e)}function Vg(i){i.Ca.forEach((e=>{e.next()}))}var Xm,ib;(ib=Xm||(Xm={})).Ma="default",ib.Cache="cache";class $R{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new po(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=po.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Xm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e){this.key=e}}class q1{constructor(e){this.key=e}}class YR{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ze(),this.mutatedKeys=ze(),this.eu=l1(e),this.tu=new oo(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new nb,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,h=o,g=!1;const v=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((x,E)=>{const A=o.get(x),V=Kh(this.query,E)?E:null,G=!!A&&this.mutatedKeys.has(A.key),ne=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let B=!1;A&&V?A.data.isEqual(V.data)?G!==ne&&(r.track({type:3,doc:V}),B=!0):this.su(A,V)||(r.track({type:2,doc:V}),B=!0,(v&&this.eu(V,v)>0||p&&this.eu(V,p)<0)&&(g=!0)):!A&&V?(r.track({type:0,doc:V}),B=!0):A&&!V&&(r.track({type:1,doc:A}),B=!0,(v||p)&&(g=!0)),B&&(V?(h=h.add(V),c=ne?c.add(x):c.delete(x)):(h=h.delete(x),c=c.delete(x)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const x=this.query.limitType==="F"?h.last():h.first();h=h.delete(x.key),c=c.delete(x.key),r.track({type:1,doc:x})}return{tu:h,iu:r,Ss:g,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((x,E)=>(function(V,G){const ne=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Vt:B})}};return ne(V)-ne(G)})(x.type,E.type)||this.eu(x.doc,E.doc))),this.ou(r),o=o??!1;const g=n&&!o?this._u():[],v=this.Ya.size===0&&this.current&&!o?1:0,p=v!==this.Xa;return this.Xa=v,h.length!==0||p?{snapshot:new po(this.query,e.tu,c,h,e.mutatedKeys,v===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new nb,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ze(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new q1(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new G1(r))})),n}cu(e){this.Za=e.ks,this.Ya=ze();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return po.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Lg="SyncEngine";class QR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class XR{constructor(e){this.key=e,this.hu=!1}}class JR{constructor(e,n,r,o,c,h){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new ia((g=>o1(g)),Fh),this.Iu=new Map,this.Eu=new Set,this.Ru=new ct(be.comparator),this.Au=new Map,this.Vu=new Ag,this.du={},this.mu=new Map,this.fu=go.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function WR(i,e,n=!0){const r=X1(i);let o;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await F1(r,e,n,!0),o}async function ZR(i,e){const n=X1(i);await F1(n,e,!0,!1)}async function F1(i,e,n,r){const o=await gR(i.localStore,js(e)),c=o.targetId,h=i.sharedClientState.addLocalQueryTarget(c,n);let g;return r&&(g=await e4(i,e,c,h==="current",o.resumeToken)),i.isPrimaryClient&&n&&L1(i.remoteStore,o),g}async function e4(i,e,n,r,o){i.pu=(E,A,V)=>(async function(ne,B,X,J){let ue=B.view.ru(X);ue.Ss&&(ue=await X_(ne.localStore,B.query,!1).then((({documents:C})=>B.view.ru(C,ue))));const U=J&&J.targetChanges.get(B.targetId),K=J&&J.targetMismatches.get(B.targetId)!=null,se=B.view.applyChanges(ue,ne.isPrimaryClient,U,K);return ab(ne,B.targetId,se.au),se.snapshot})(i,E,A,V);const c=await X_(i.localStore,e,!0),h=new YR(e,c.ks),g=h.ru(c.documents),v=mc.createSynthesizedTargetChangeForCurrentChange(n,r&&i.onlineState!=="Offline",o),p=h.applyChanges(g,i.isPrimaryClient,v);ab(i,n,p.au);const x=new QR(e,n,h);return i.Tu.set(e,x),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),p.snapshot}async function t4(i,e,n){const r=Ce(i),o=r.Tu.get(e),c=r.Iu.get(o.targetId);if(c.length>1)return r.Iu.set(o.targetId,c.filter((h=>!Fh(h,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Ym(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Rg(r.remoteStore,o.targetId),Jm(r,o.targetId)})).catch(xo)):(Jm(r,o.targetId),await Ym(r.localStore,o.targetId,!0))}async function n4(i,e){const n=Ce(i),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Rg(n.remoteStore,r.targetId))}async function s4(i,e,n){const r=u4(i);try{const o=await(function(h,g){const v=Ce(h),p=rt.now(),x=g.reduce(((V,G)=>V.add(G.key)),ze());let E,A;return v.persistence.runTransaction("Locally write mutations","readwrite",(V=>{let G=hi(),ne=ze();return v.xs.getEntries(V,x).next((B=>{G=B,G.forEach(((X,J)=>{J.isValidDocument()||(ne=ne.add(X))}))})).next((()=>v.localDocuments.getOverlayedDocuments(V,G))).next((B=>{E=B;const X=[];for(const J of g){const ue=mI(J,E.get(J.key).overlayedDocument);ue!=null&&X.push(new ra(J.key,ue,e1(ue.value.mapValue),oi.exists(!0)))}return v.mutationQueue.addMutationBatch(V,p,X,g)})).next((B=>{A=B;const X=B.applyToLocalDocumentSet(E,ne);return v.documentOverlayCache.saveOverlays(V,B.batchId,X)}))})).then((()=>({batchId:A.batchId,changes:u1(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(h,g,v){let p=h.du[h.currentUser.toKey()];p||(p=new ct(Ue)),p=p.insert(g,v),h.du[h.currentUser.toKey()]=p})(r,o.batchId,n),await pc(r,o.changes),await Wh(r.remoteStore)}catch(o){const c=Mg(o,"Failed to persist write");n.reject(c)}}async function K1(i,e){const n=Ce(i);try{const r=await dR(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const h=n.Au.get(c);h&&($e(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?$e(h.hu,14607):o.removedDocuments.size>0&&($e(h.hu,42227),h.hu=!1))})),await pc(n,r,e)}catch(r){await xo(r)}}function rb(i,e,n){const r=Ce(i);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((c,h)=>{const g=h.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(h,g){const v=Ce(h);v.onlineState=g;let p=!1;v.queries.forEach(((x,E)=>{for(const A of E.ba)A.va(g)&&(p=!0)})),p&&Vg(v)})(r.eventManager,e),o.length&&r.Pu.J_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function i4(i,e,n){const r=Ce(i);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),c=o&&o.key;if(c){let h=new ct(be.comparator);h=h.insert(c,Jt.newNoDocument(c,Ae.min()));const g=ze().add(c),v=new Qh(Ae.min(),new Map,new ct(Ue),h,g);await K1(r,v),r.Ru=r.Ru.remove(c),r.Au.delete(e),Pg(r)}else await Ym(r.localStore,e,!1).then((()=>Jm(r,e,n))).catch(xo)}async function r4(i,e){const n=Ce(i),r=e.batch.batchId;try{const o=await hR(n.localStore,e);Y1(n,r,null),$1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await pc(n,o)}catch(o){await xo(o)}}async function a4(i,e,n){const r=Ce(i);try{const o=await(function(h,g){const v=Ce(h);return v.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let x;return v.mutationQueue.lookupMutationBatch(p,g).next((E=>($e(E!==null,37113),x=E.keys(),v.mutationQueue.removeMutationBatch(p,E)))).next((()=>v.mutationQueue.performConsistencyCheck(p))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(p,x,g))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,x))).next((()=>v.localDocuments.getDocuments(p,x)))}))})(r.localStore,e);Y1(r,e,n),$1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await pc(r,o)}catch(o){await xo(o)}}function $1(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function Y1(i,e,n){const r=Ce(i);let o=r.du[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),r.du[r.currentUser.toKey()]=o}}function Jm(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),n&&i.Pu.yu(r,n);i.Iu.delete(e),i.isPrimaryClient&&i.Vu.Gr(e).forEach((r=>{i.Vu.containsKey(r)||Q1(i,r)}))}function Q1(i,e){i.Eu.delete(e.path.canonicalString());const n=i.Ru.get(e);n!==null&&(Rg(i.remoteStore,n),i.Ru=i.Ru.remove(e),i.Au.delete(n),Pg(i))}function ab(i,e,n){for(const r of n)r instanceof G1?(i.Vu.addReference(r.key,e),o4(i,r)):r instanceof q1?(me(Lg,"Document no longer in limbo: "+r.key),i.Vu.removeReference(r.key,e),i.Vu.containsKey(r.key)||Q1(i,r.key)):we(19791,{wu:r})}function o4(i,e){const n=e.key,r=n.path.canonicalString();i.Ru.get(n)||i.Eu.has(r)||(me(Lg,"New document in limbo: "+n),i.Eu.add(r),Pg(i))}function Pg(i){for(;i.Eu.size>0&&i.Ru.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new be(lt.fromString(e)),r=i.fu.next();i.Au.set(r,new XR(n)),i.Ru=i.Ru.insert(n,r),L1(i.remoteStore,new Wi(js(xg(n.path)),r,"TargetPurposeLimboResolution",Bh.ce))}}async function pc(i,e,n){const r=Ce(i),o=[],c=[],h=[];r.Tu.isEmpty()||(r.Tu.forEach(((g,v)=>{h.push(r.pu(v,e,n).then((p=>{var x;if((p||n)&&r.isPrimaryClient){const E=p?!p.fromCache:(x=n==null?void 0:n.targetChanges.get(v.targetId))==null?void 0:x.current;r.sharedClientState.updateQueryState(v.targetId,E?"current":"not-current")}if(p){o.push(p);const E=Cg.Es(v.targetId,p);c.push(E)}})))})),await Promise.all(h),r.Pu.J_(o),await(async function(v,p){const x=Ce(v);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>re.forEach(p,(A=>re.forEach(A.Ts,(V=>x.persistence.referenceDelegate.addReference(E,A.targetId,V))).next((()=>re.forEach(A.Is,(V=>x.persistence.referenceDelegate.removeReference(E,A.targetId,V)))))))))}catch(E){if(!To(E))throw E;me(Ig,"Failed to update sequence numbers: "+E)}for(const E of p){const A=E.targetId;if(!E.fromCache){const V=x.vs.get(A),G=V.snapshotVersion,ne=V.withLastLimboFreeSnapshotVersion(G);x.vs=x.vs.insert(A,ne)}}})(r.localStore,c))}async function l4(i,e){const n=Ce(i);if(!n.currentUser.isEqual(e)){me(Lg,"User change. New user:",e.toKey());const r=await O1(n.localStore,e);n.currentUser=e,(function(c,h){c.mu.forEach((g=>{g.forEach((v=>{v.reject(new ve(oe.CANCELLED,h))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await pc(n,r.Ns)}}function c4(i,e){const n=Ce(i),r=n.Au.get(e);if(r&&r.hu)return ze().add(r.key);{let o=ze();const c=n.Iu.get(e);if(!c)return o;for(const h of c){const g=n.Tu.get(h);o=o.unionWith(g.view.nu)}return o}}function X1(i){const e=Ce(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=K1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=c4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=i4.bind(null,e),e.Pu.J_=FR.bind(null,e.eventManager),e.Pu.yu=KR.bind(null,e.eventManager),e}function u4(i){const e=Ce(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=r4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=a4.bind(null,e),e}class Rh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return uR(this.persistence,new oR,e.initialUser,this.serializer)}Cu(e){return new j1(Ng.Vi,this.serializer)}Du(e){return new yR}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rh.provider={build:()=>new Rh};class h4 extends Rh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){$e(this.persistence.referenceDelegate instanceof Ch,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new KI(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new j1((r=>Ch.Vi(r,n)),this.serializer)}}class Wm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>rb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=l4.bind(null,this.syncEngine),await zR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new HR})()}createDatastore(e){const n=Xh(e.databaseInfo.databaseId),r=TR(e.databaseInfo);return NR(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,o,c,h,g){return new IR(r,o,c,h,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>rb(this.syncEngine,n,0)),(function(){return Z_.v()?new Z_:new vR})())}createSyncEngine(e,n){return(function(o,c,h,g,v,p,x){const E=new JR(o,c,h,g,v,p);return x&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const c=Ce(o);me(Jr,"RemoteStore shutting down."),c.Ea.add(5),await gc(c),c.Aa.shutdown(),c.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Wm.provider={build:()=>new Wm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ui("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur="FirestoreClient";class f4{constructor(e,n,r,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=o,this.user=Xt.UNAUTHENTICATED,this.clientId=mg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async h=>{me(ur,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(r,(h=>(me(ur,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Mg(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function vm(i,e){i.asyncQueue.verifyOperationInProgress(),me(ur,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let r=n.initialUser;i.setCredentialChangeListener((async o=>{r.isEqual(o)||(await O1(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function ob(i,e){i.asyncQueue.verifyOperationInProgress();const n=await m4(i);me(ur,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((r=>tb(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,o)=>tb(e.remoteStore,o))),i._onlineComponents=e}async function m4(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){me(ur,"Using user provided OfflineComponentProvider");try{await vm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===oe.FAILED_PRECONDITION||o.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;uo("Error using user provided cache. Falling back to memory cache: "+n),await vm(i,new Rh)}}else me(ur,"Using default OfflineComponentProvider"),await vm(i,new h4(void 0));return i._offlineComponents}async function J1(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(me(ur,"Using user provided OnlineComponentProvider"),await ob(i,i._uninitializedComponentsProvider._online)):(me(ur,"Using default OnlineComponentProvider"),await ob(i,new Wm))),i._onlineComponents}function g4(i){return J1(i).then((e=>e.syncEngine))}async function p4(i){const e=await J1(i),n=e.eventManager;return n.onListen=WR.bind(null,e.syncEngine),n.onUnlisten=t4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ZR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=n4.bind(null,e.syncEngine),n}function y4(i,e,n={}){const r=new sr;return i.asyncQueue.enqueueAndForget((async()=>(function(c,h,g,v,p){const x=new d4({next:A=>{x.Nu(),h.enqueueAndForget((()=>qR(c,E)));const V=A.docs.has(g);!V&&A.fromCache?p.reject(new ve(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&A.fromCache&&v&&v.source==="server"?p.reject(new ve(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(A)},error:A=>p.reject(A)}),E=new $R(xg(g.path),x,{includeMetadataChanges:!0,Ka:!0});return GR(c,E)})(await p4(i),i.asyncQueue,e,n,r))),r.promise}function v4(i,e){const n=new sr;return i.asyncQueue.enqueueAndForget((async()=>s4(await g4(i),e,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4="ComponentProvider",lb=new Map;function b4(i,e,n,r,o){return new VC(i,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,W1(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="firestore.googleapis.com",cb=!0;class ub{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Z1,this.ssl=cb}else this.host=e.host,this.ssl=e.ssl??cb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=k1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qI)throw new ve(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=W1(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ve(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ve(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ve(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ug{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ub({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ub(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new mC;switch(r.type){case"firstParty":return new vC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ve(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=lb.get(n);r&&(me(_4,"Removing Datastore"),lb.delete(n),r.terminate())})(this),Promise.resolve()}}function x4(i,e,n,r={}){var p;i=Wl(i,Ug);const o=yo(e),c=i._getSettings(),h={...c,emulatorOptions:i._getEmulatorOptions()},g=`${e}:${n}`;o&&(Fb(`https://${g}`),Kb("Firestore",!0)),c.host!==Z1&&c.host!==g&&uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...c,host:g,ssl:o,emulatorOptions:r};if(!ir(v,h)&&(i._setSettings(v),r.mockUserToken)){let x,E;if(typeof r.mockUserToken=="string")x=r.mockUserToken,E=Xt.MOCK_USER;else{x=_2(r.mockUserToken,(p=i._app)==null?void 0:p.options.projectId);const A=r.mockUserToken.sub||r.mockUserToken.user_id;if(!A)throw new ve(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Xt(A)}i._authCredentials=new gC(new Gx(x,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zg(this.firestore,e,this._query)}}class Lt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lt(this.firestore,e,this._key)}toJSON(){return{type:Lt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(dc(n,Lt._jsonSchema))return new Lt(e,r||null,new be(lt.fromString(n.referencePath)))}}Lt._jsonSchemaVersion="firestore/documentReference/1.0",Lt._jsonSchema={type:Ct("string",Lt._jsonSchemaVersion),referencePath:Ct("string")};class rc extends zg{constructor(e,n,r){super(e,n,xg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Lt(this.firestore,null,new be(e))}withConverter(e){return new rc(this.firestore,e,this._path)}}function _m(i,e,...n){if(i=Kt(i),arguments.length===1&&(e=mg.newId()),wC("doc","path",e),i instanceof Ug){const r=lt.fromString(e,...n);return w_(r),new Lt(i,null,new be(r))}{if(!(i instanceof Lt||i instanceof rc))throw new ve(oe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(lt.fromString(e,...n));return w_(r),new Lt(i.firestore,i instanceof rc?i.converter:null,new be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb="AsyncQueue";class db{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new M1(this,"async_queue_retry"),this._c=()=>{const r=ym();r&&me(hb,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=ym();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ym();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new sr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!To(e))throw e;me(hb,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ui("INTERNAL UNHANDLED ERROR: ",fb(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Dg.createAndSchedule(this,e,n,r,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&we(47125,{Pc:fb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function fb(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Bg extends Ug{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new db,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new db(e),this._firestoreClient=void 0,await e}}}function T4(i,e){const n=typeof i=="object"?i:ig(),r=typeof i=="string"?i:xh,o=na(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=y2("firestore");c&&x4(o,...c)}return o}function eT(i){if(i._terminated)throw new ve(oe.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||E4(i),i._firestoreClient}function E4(i){var r,o,c,h;const e=i._freezeSettings(),n=b4(i._databaseId,((r=i._app)==null?void 0:r.options.appId)||"",i._persistenceKey,(o=i._app)==null?void 0:o.options.apiKey,e);i._componentsProvider||(c=e.localCache)!=null&&c._offlineComponentProvider&&((h=e.localCache)!=null&&h._onlineComponentProvider)&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new f4(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(v){const p=v==null?void 0:v._online.build();return{_offline:v==null?void 0:v._offline.build(p),_online:p}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zn($t.fromBase64String(e))}catch(n){throw new ve(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zn($t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(dc(e,zn._jsonSchema))return zn.fromBase64String(e.bytes)}}zn._jsonSchemaVersion="firestore/bytes/1.0",zn._jsonSchema={type:Ct("string",zn._jsonSchemaVersion),bytes:Ct("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ve(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ve(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ve(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ds._jsonSchemaVersion}}static fromJSON(e){if(dc(e,Ds._jsonSchema))return new Ds(e.latitude,e.longitude)}}Ds._jsonSchemaVersion="firestore/geoPoint/1.0",Ds._jsonSchema={type:Ct("string",Ds._jsonSchemaVersion),latitude:Ct("number"),longitude:Ct("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ns._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(dc(e,ns._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ns(e.vectorValues);throw new ve(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ns._jsonSchemaVersion="firestore/vectorValue/1.0",ns._jsonSchema={type:Ct("string",ns._jsonSchemaVersion),vectorValues:Ct("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=/^__.*__$/;class S4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ra(e,this.data,this.fieldMask,n,this.fieldTransforms):new fc(e,this.data,n,this.fieldTransforms)}}function sT(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{dataSource:i})}}class Hg{constructor(e,n,r,o,c,h){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Hg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return kh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(sT(this.dataSource)&&w4.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class A4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Xh(e)}createContext(e,n,r,o=!1){return new Hg({dataSource:e,methodName:n,targetDoc:r,path:Ft.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function N4(i){const e=i._freezeSettings(),n=Xh(i._databaseId);return new A4(i._databaseId,!!e.ignoreUndefinedProperties,n)}function C4(i,e,n,r,o,c={}){const h=i.createContext(c.merge||c.mergeFields?2:0,e,n,o);oT("Data must be an object, but it was:",h,r);const g=rT(r,h);let v,p;if(c.merge)v=new ts(h.fieldMask),p=h.fieldTransforms;else if(c.mergeFields){const x=[];for(const E of c.mergeFields){const A=Gg(e,E,n);if(!h.contains(A))throw new ve(oe.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);k4(x,A)||x.push(A)}v=new ts(x),p=h.fieldTransforms.filter((E=>v.covers(E.field)))}else v=null,p=h.fieldTransforms;return new S4(new Un(g),v,p)}function iT(i,e){if(aT(i=Kt(i)))return oT("Unsupported field value:",e,i),rT(i,e);if(i instanceof nT)return(function(r,o){if(!sT(o.dataSource))throw o.createError(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,o){const c=[];let h=0;for(const g of r){let v=iT(g,o.childContextForArray(h));v==null&&(v={nullValue:"NULL_VALUE"}),c.push(v),h++}return{arrayValue:{values:c}}})(i,e)}return(function(r,o){if((r=Kt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return lI(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=rt.fromDate(r);return{timestampValue:Nh(o.serializer,c)}}if(r instanceof rt){const c=new rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nh(o.serializer,c)}}if(r instanceof Ds)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zn)return{bytesValue:E1(o.serializer,r._byteString)};if(r instanceof Lt){const c=o.databaseId,h=r.firestore._databaseId;if(!h.isEqual(c))throw o.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Sg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof ns)return(function(h,g){const v=h instanceof ns?h.toArray():h;return{mapValue:{fields:{[Wx]:{stringValue:Zx},[Th]:{arrayValue:{values:v.map((x=>{if(typeof x!="number")throw g.createError("VectorValues must only contain numeric values.");return Tg(g.serializer,x)}))}}}}}})(r,o);if(R1(r))return r._toProto(o.serializer);throw o.createError(`Unsupported field value: ${gg(r)}`)})(i,e)}function rT(i,e){const n={};return Kx(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sa(i,((r,o)=>{const c=iT(o,e.childContextForField(r));c!=null&&(n[r]=c)})),{mapValue:{fields:n}}}function aT(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof rt||i instanceof Ds||i instanceof zn||i instanceof Lt||i instanceof nT||i instanceof ns||R1(i))}function oT(i,e,n){if(!aT(n)||!qx(n)){const r=gg(n);throw r==="an object"?e.createError(i+" a custom object"):e.createError(i+" "+r)}}function Gg(i,e,n){if((e=Kt(e))instanceof tT)return e._internalPath;if(typeof e=="string")return R4(i,e);throw kh("Field path arguments must be of type string or ",i,!1,void 0,n)}const I4=new RegExp("[~\\*/\\[\\]]");function R4(i,e,n){if(e.search(I4)>=0)throw kh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new tT(...e.split("."))._internalPath}catch{throw kh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function kh(i,e,n,r,o){const c=r&&!r.isEmpty(),h=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(c||h)&&(v+=" (found",c&&(v+=` in field ${r}`),h&&(v+=` in document ${o}`),v+=")"),new ve(oe.INVALID_ARGUMENT,g+i+v)}function k4(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{convertValue(e,n="none"){switch(lr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return sa(e,((o,c)=>{r[o]=this.convertValue(c,n)})),r}convertVectorValue(e){var r,o,c;const n=(c=(o=(r=e.fields)==null?void 0:r[Th].arrayValue)==null?void 0:o.values)==null?void 0:c.map((h=>pt(h.doubleValue)));return new ns(n)}convertGeoPoint(e){return new Ds(pt(e.latitude),pt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Gh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ec(e));default:return null}}convertTimestamp(e){const n=ar(e);return new rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=lt.fromString(e);$e(I1(r),9688,{name:e});const o=new tc(r.get(1),r.get(3)),c=new be(r.popFirst(5));return o.isEqual(n)||ui(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4 extends j4{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Lt(this.firestore,null,n)}}const mb="@firebase/firestore",gb="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,n,r,o,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new D4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Gg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class D4 extends lT{data(){return super.data()}}function M4(i,e,n){let r;return r=i?i.toFirestore(e):e,r}class Pl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Kr extends lT{constructor(e,n,r,o,c,h){super(e,n,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new uh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Gg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Kr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Kr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Kr._jsonSchema={type:Ct("string",Kr._jsonSchemaVersion),bundleSource:Ct("string","DocumentSnapshot"),bundleName:Ct("string"),bundle:Ct("string")};class uh extends Kr{data(e={}){return super.data(e)}}class $l{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Pl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new uh(this._firestore,this._userDataWriter,r.key,r,new Pl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ve(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((g=>{const v=new uh(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Pl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:v,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const v=new uh(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Pl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,x=-1;return g.type!==0&&(p=h.indexOf(g.doc.key),h=h.delete(g.doc.key)),g.type!==1&&(h=h.add(g.doc),x=h.indexOf(g.doc.key)),{type:V4(g.type),doc:v,oldIndex:p,newIndex:x}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$l._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=mg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function V4(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:i})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$l._jsonSchemaVersion="firestore/querySnapshot/1.0",$l._jsonSchema={type:Ct("string",$l._jsonSchemaVersion),bundleSource:Ct("string","QuerySnapshot"),bundleName:Ct("string"),bundle:Ct("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(i){i=Wl(i,Lt);const e=Wl(i.firestore,Bg),n=eT(e);return y4(n,i._key).then((r=>U4(e,i,r)))}function L4(i,e,n){i=Wl(i,Lt);const r=Wl(i.firestore,Bg),o=M4(i.converter,e),c=N4(r);return P4(r,[C4(c,"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,oi.none())])}function P4(i,e){const n=eT(i);return v4(n,e)}function U4(i,e,n){const r=n.docs.get(e._key),o=new O4(i);return new Kr(i,o,e._key,r,new Pl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){fC(vo),Ms(new ss("firestore",((r,{instanceIdentifier:o,options:c})=>{const h=r.getProvider("app").getImmediate(),g=new Bg(new pC(r.getProvider("auth-internal")),new _C(h,r.getProvider("app-check-internal")),LC(h,o),h);return c={useFetchStreams:n,...c},g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),Bn(mb,gb,e),Bn(mb,gb,"esm2020")})();var z4="firebase",B4="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn(z4,B4,"app");const cT="@firebase/installations",qg="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=1e4,hT=`w:${qg}`,dT="FIS_v2",H4="https://firebaseinstallations.googleapis.com/v1",G4=3600*1e3,q4="installations",F4="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Wr=new ta(q4,F4,K4);function fT(i){return i instanceof rs&&i.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT({projectId:i}){return`${H4}/projects/${i}/installations`}function gT(i){return{token:i.token,requestStatus:2,expiresIn:Y4(i.expiresIn),creationTime:Date.now()}}async function pT(i,e){const r=(await e.json()).error;return Wr.create("request-failed",{requestName:i,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function yT({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function $4(i,{refreshToken:e}){const n=yT(i);return n.append("Authorization",Q4(e)),n}async function vT(i){const e=await i();return e.status>=500&&e.status<600?i():e}function Y4(i){return Number(i.replace("s","000"))}function Q4(i){return`${dT} ${i}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X4({appConfig:i,heartbeatServiceProvider:e},{fid:n}){const r=mT(i),o=yT(i),c=e.getImmediate({optional:!0});if(c){const p=await c.getHeartbeatsHeader();p&&o.append("x-firebase-client",p)}const h={fid:n,authVersion:dT,appId:i.appId,sdkVersion:hT},g={method:"POST",headers:o,body:JSON.stringify(h)},v=await vT(()=>fetch(r,g));if(v.ok){const p=await v.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:gT(p.authToken)}}else throw await pT("Create Installation",v)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(i){return new Promise(e=>{setTimeout(e,i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J4(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4=/^[cdef][\w-]{21}$/,Zm="";function Z4(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const n=ek(i);return W4.test(n)?n:Zm}catch{return Zm}}function ek(i){return J4(i).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(i){return`${i.appName}!${i.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT=new Map;function xT(i,e){const n=Zh(i);TT(n,e),tk(n,e)}function TT(i,e){const n=bT.get(i);if(n)for(const r of n)r(e)}function tk(i,e){const n=nk();n&&n.postMessage({key:i,fid:e}),sk()}let qr=null;function nk(){return!qr&&"BroadcastChannel"in self&&(qr=new BroadcastChannel("[Firebase] FID Change"),qr.onmessage=i=>{TT(i.data.key,i.data.fid)}),qr}function sk(){bT.size===0&&qr&&(qr.close(),qr=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik="firebase-installations-database",rk=1,Zr="firebase-installations-store";let bm=null;function Fg(){return bm||(bm=Wb(ik,rk,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(Zr)}}})),bm}async function jh(i,e){const n=Zh(i),o=(await Fg()).transaction(Zr,"readwrite"),c=o.objectStore(Zr),h=await c.get(n);return await c.put(e,n),await o.done,(!h||h.fid!==e.fid)&&xT(i,e.fid),e}async function ET(i){const e=Zh(i),r=(await Fg()).transaction(Zr,"readwrite");await r.objectStore(Zr).delete(e),await r.done}async function ed(i,e){const n=Zh(i),o=(await Fg()).transaction(Zr,"readwrite"),c=o.objectStore(Zr),h=await c.get(n),g=e(h);return g===void 0?await c.delete(n):await c.put(g,n),await o.done,g&&(!h||h.fid!==g.fid)&&xT(i,g.fid),g}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kg(i){let e;const n=await ed(i.appConfig,r=>{const o=ak(r),c=ok(i,o);return e=c.registrationPromise,c.installationEntry});return n.fid===Zm?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function ak(i){const e=i||{fid:Z4(),registrationStatus:0};return wT(e)}function ok(i,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(Wr.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=lk(i,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:ck(i)}:{installationEntry:e}}async function lk(i,e){try{const n=await X4(i,e);return jh(i.appConfig,n)}catch(n){throw fT(n)&&n.customData.serverCode===409?await ET(i.appConfig):await jh(i.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function ck(i){let e=await yb(i.appConfig);for(;e.registrationStatus===1;)await _T(100),e=await yb(i.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Kg(i);return r||n}return e}function yb(i){return ed(i,e=>{if(!e)throw Wr.create("installation-not-found");return wT(e)})}function wT(i){return uk(i)?{fid:i.fid,registrationStatus:0}:i}function uk(i){return i.registrationStatus===1&&i.registrationTime+uT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hk({appConfig:i,heartbeatServiceProvider:e},n){const r=dk(i,n),o=$4(i,n),c=e.getImmediate({optional:!0});if(c){const p=await c.getHeartbeatsHeader();p&&o.append("x-firebase-client",p)}const h={installation:{sdkVersion:hT,appId:i.appId}},g={method:"POST",headers:o,body:JSON.stringify(h)},v=await vT(()=>fetch(r,g));if(v.ok){const p=await v.json();return gT(p)}else throw await pT("Generate Auth Token",v)}function dk(i,{fid:e}){return`${mT(i)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $g(i,e=!1){let n;const r=await ed(i.appConfig,c=>{if(!ST(c))throw Wr.create("not-registered");const h=c.authToken;if(!e&&gk(h))return c;if(h.requestStatus===1)return n=fk(i,e),c;{if(!navigator.onLine)throw Wr.create("app-offline");const g=yk(c);return n=mk(i,g),g}});return n?await n:r.authToken}async function fk(i,e){let n=await vb(i.appConfig);for(;n.authToken.requestStatus===1;)await _T(100),n=await vb(i.appConfig);const r=n.authToken;return r.requestStatus===0?$g(i,e):r}function vb(i){return ed(i,e=>{if(!ST(e))throw Wr.create("not-registered");const n=e.authToken;return vk(n)?{...e,authToken:{requestStatus:0}}:e})}async function mk(i,e){try{const n=await hk(i,e),r={...e,authToken:n};return await jh(i.appConfig,r),n}catch(n){if(fT(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await ET(i.appConfig);else{const r={...e,authToken:{requestStatus:0}};await jh(i.appConfig,r)}throw n}}function ST(i){return i!==void 0&&i.registrationStatus===2}function gk(i){return i.requestStatus===2&&!pk(i)}function pk(i){const e=Date.now();return e<i.creationTime||i.creationTime+i.expiresIn<e+G4}function yk(i){const e={requestStatus:1,requestTime:Date.now()};return{...i,authToken:e}}function vk(i){return i.requestStatus===1&&i.requestTime+uT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _k(i){const e=i,{installationEntry:n,registrationPromise:r}=await Kg(e);return r?r.catch(console.error):$g(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bk(i,e=!1){const n=i;return await xk(n),(await $g(n,e)).token}async function xk(i){const{registrationPromise:e}=await Kg(i);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(i){if(!i||!i.options)throw xm("App Configuration");if(!i.name)throw xm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!i.options[n])throw xm(n);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function xm(i){return Wr.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="installations",Ek="installations-internal",wk=i=>{const e=i.getProvider("app").getImmediate(),n=Tk(e),r=na(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Sk=i=>{const e=i.getProvider("app").getImmediate(),n=na(e,AT).getImmediate();return{getId:()=>_k(n),getToken:o=>bk(n,o)}};function Ak(){Ms(new ss(AT,wk,"PUBLIC")),Ms(new ss(Ek,Sk,"PRIVATE"))}Ak();Bn(cT,qg);Bn(cT,qg,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh="analytics",Nk="firebase_id",Ck="origin",Ik=60*1e3,Rk="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Yg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn=new Lh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},En=new ta("analytics","Analytics",kk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(i){if(!i.startsWith(Yg)){const e=En.create("invalid-gtag-resource",{gtagURL:i});return sn.warn(e.message),""}return i}function NT(i){return Promise.all(i.map(e=>e.catch(n=>n)))}function Ok(i,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(i,e)),n}function Dk(i,e){const n=Ok("firebase-js-sdk-policy",{createScriptURL:jk}),r=document.createElement("script"),o=`${Yg}?l=${i}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function Mk(i){let e=[];return Array.isArray(window[i])?e=window[i]:window[i]=e,e}async function Vk(i,e,n,r,o,c){const h=r[o];try{if(h)await e[h];else{const v=(await NT(n)).find(p=>p.measurementId===o);v&&await e[v.appId]}}catch(g){sn.error(g)}i("config",o,c)}async function Lk(i,e,n,r,o){try{let c=[];if(o&&o.send_to){let h=o.send_to;Array.isArray(h)||(h=[h]);const g=await NT(n);for(const v of h){const p=g.find(E=>E.measurementId===v),x=p&&e[p.appId];if(x)c.push(x);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),i("event",r,o||{})}catch(c){sn.error(c)}}function Pk(i,e,n,r){async function o(c,...h){try{if(c==="event"){const[g,v]=h;await Lk(i,e,n,g,v)}else if(c==="config"){const[g,v]=h;await Vk(i,e,n,r,g,v)}else if(c==="consent"){const[g,v]=h;i("consent",g,v)}else if(c==="get"){const[g,v,p]=h;i("get",g,v,p)}else if(c==="set"){const[g]=h;i("set",g)}else i(c,...h)}catch(g){sn.error(g)}}return o}function Uk(i,e,n,r,o){let c=function(...h){window[r].push(arguments)};return window[o]&&typeof window[o]=="function"&&(c=window[o]),window[o]=Pk(c,i,e,n),{gtagCore:c,wrappedGtag:window[o]}}function zk(i){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Yg)&&n.src.includes(i))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk=30,Hk=1e3;class Gk{constructor(e={},n=Hk){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const CT=new Gk;function qk(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}async function Fk(i){var h;const{appId:e,apiKey:n}=i,r={method:"GET",headers:qk(n)},o=Rk.replace("{app-id}",e),c=await fetch(o,r);if(c.status!==200&&c.status!==304){let g="";try{const v=await c.json();(h=v.error)!=null&&h.message&&(g=v.error.message)}catch{}throw En.create("config-fetch-failed",{httpStatus:c.status,responseMessage:g})}return c.json()}async function Kk(i,e=CT,n){const{appId:r,apiKey:o,measurementId:c}=i.options;if(!r)throw En.create("no-app-id");if(!o){if(c)return{measurementId:c,appId:r};throw En.create("no-api-key")}const h=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},g=new Qk;return setTimeout(async()=>{g.abort()},Ik),IT({appId:r,apiKey:o,measurementId:c},h,g,e)}async function IT(i,{throttleEndTimeMillis:e,backoffCount:n},r,o=CT){var g;const{appId:c,measurementId:h}=i;try{await $k(r,e)}catch(v){if(h)return sn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${v==null?void 0:v.message}]`),{appId:c,measurementId:h};throw v}try{const v=await Fk(i);return o.deleteThrottleMetadata(c),v}catch(v){const p=v;if(!Yk(p)){if(o.deleteThrottleMetadata(c),h)return sn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:c,measurementId:h};throw v}const x=Number((g=p==null?void 0:p.customData)==null?void 0:g.httpStatus)===503?$v(n,o.intervalMillis,Bk):$v(n,o.intervalMillis),E={throttleEndTimeMillis:Date.now()+x,backoffCount:n+1};return o.setThrottleMetadata(c,E),sn.debug(`Calling attemptFetch again in ${x} millis`),IT(i,E,r,o)}}function $k(i,e){return new Promise((n,r)=>{const o=Math.max(e-Date.now(),0),c=setTimeout(n,o);i.addEventListener(()=>{clearTimeout(c),r(En.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Yk(i){if(!(i instanceof rs)||!i.customData)return!1;const e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}class Qk{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Xk(i,e,n,r,o){if(o&&o.global){i("event",n,r);return}else{const c=await e,h={...r,send_to:c};i("event",n,h)}}async function Jk(i,e,n,r){if(r&&r.global){const o={};for(const c of Object.keys(n))o[`user_properties.${c}`]=n[c];return i("set",o),Promise.resolve()}else{const o=await e;i("config",o,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wk(){if(Yb())try{await Qb()}catch(i){return sn.warn(En.create("indexeddb-unavailable",{errorInfo:i==null?void 0:i.toString()}).message),!1}else return sn.warn(En.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Zk(i,e,n,r,o,c,h){const g=Kk(i);g.then(A=>{n[A.measurementId]=A.appId,i.options.measurementId&&A.measurementId!==i.options.measurementId&&sn.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${A.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(A=>sn.error(A)),e.push(g);const v=Wk().then(A=>{if(A)return r.getId()}),[p,x]=await Promise.all([g,v]);zk(c)||Dk(c,p.measurementId),o("js",new Date);const E=(h==null?void 0:h.config)??{};return E[Ck]="firebase",E.update=!0,x!=null&&(E[Nk]=x),o("config",p.measurementId,E),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e){this.app=e}_delete(){return delete lo[this.app.options.appId],Promise.resolve()}}let lo={},_b=[];const bb={};let Tm="dataLayer",tj="gtag",xb,Qg,Tb=!1;function nj(){const i=[];if($b()&&i.push("This is a browser extension environment."),C2()||i.push("Cookies are not available."),i.length>0){const e=i.map((r,o)=>`(${o+1}) ${r}`).join(" "),n=En.create("invalid-analytics-context",{errorInfo:e});sn.warn(n.message)}}function sj(i,e,n){nj();const r=i.options.appId;if(!r)throw En.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)sn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw En.create("no-api-key");if(lo[r]!=null)throw En.create("already-exists",{id:r});if(!Tb){Mk(Tm);const{wrappedGtag:c,gtagCore:h}=Uk(lo,_b,bb,Tm,tj);Qg=c,xb=h,Tb=!0}return lo[r]=Zk(i,_b,bb,e,xb,Tm,n),new ej(i)}function ij(i=ig()){i=Kt(i);const e=na(i,Oh);return e.isInitialized()?e.getImmediate():rj(i)}function rj(i,e={}){const n=na(i,Oh);if(n.isInitialized()){const o=n.getImmediate();if(ir(e,n.getOptions()))return o;throw En.create("already-initialized")}return n.initialize({options:e})}function aj(i,e,n){i=Kt(i),Jk(Qg,lo[i.app.options.appId],e,n).catch(r=>sn.error(r))}function oj(i,e,n,r){i=Kt(i),Xk(Qg,lo[i.app.options.appId],e,n,r).catch(o=>sn.error(o))}const Eb="@firebase/analytics",wb="0.10.19";function lj(){Ms(new ss(Oh,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return sj(r,o,n)},"PUBLIC")),Ms(new ss("analytics-internal",i,"PRIVATE")),Bn(Eb,wb),Bn(Eb,wb,"esm2020");function i(e){try{const n=e.getProvider(Oh).getImmediate();return{logEvent:(r,o,c)=>oj(n,r,o,c),setUserProperties:(r,o)=>aj(n,r,o)}}catch(n){throw En.create("interop-component-reg-failed",{reason:n})}}}lj();const cj={apiKey:"AIzaSyAGphhC3qC1qLA_ErvpWk9QAaHc0N3ovQM",authDomain:"appaistudio-55b77.firebaseapp.com",projectId:"appaistudio-55b77",storageBucket:"appaistudio-55b77.firebasestorage.app",messagingSenderId:"98616437820",appId:"1:98616437820:web:10b78e2f4718d35b3ee739",measurementId:"G-Q8Q00T026N"},Xg=Zb(cj);ij(Xg);const Ul=hC(Xg),Em=T4(Xg),Dh={registerUser:async(i,e,n,r,o="user")=>{try{const h=(await $A(Ul,i,e)).user;await XA(h,{displayName:n});const g={id:h.uid,username:n,email:i,phone:r,role:o,allowedApps:[],createdAt:Date.now()};return n==="huytamky"&&(g.role="admin",g.allowedApps=["video-viral","image-script","zenshot-ai","translation","new-tool"]),await L4(_m(Em,"users",h.uid),g),g}catch(c){throw c}},loginUser:async(i,e)=>{try{const r=(await YA(Ul,i,e)).user,o=await pb(_m(Em,"users",r.uid));return o.exists()?o.data():{id:r.uid,username:r.displayName||i.split("@")[0],email:i,role:"user",createdAt:Date.now()}}catch(n){throw n}},getUserProfile:async i=>{try{const e=await pb(_m(Em,"users",i));return e.exists()?e.data():null}catch(e){return console.error("Error fetching user profile:",e),null}},logoutUser:async()=>eN(Ul),resetPassword:async i=>KA(Ul,i)},uj=({onLogin:i})=>{const[e,n]=ce.useState(!1),[r,o]=ce.useState(""),[c,h]=ce.useState(""),[g,v]=ce.useState(""),[p,x]=ce.useState(""),[E,A]=ce.useState(""),[V,G]=ce.useState(""),[ne,B]=ce.useState(!1),X=async()=>{if(G(""),B(!0),!p||!c){G("Vui lng nhp Email v Mt khu"),B(!1);return}try{let J;if(e){if(!r||!E){G("Vui lng nhp y  Tn v ST"),B(!1);return}if(c!==g){G("Mt khu nhp li khng khp"),B(!1);return}J=await Dh.registerUser(p,c,r,E)}else J=await Dh.loginUser(p,c);i(J)}catch(J){console.error(J),J.code==="auth/email-already-in-use"?G("Email ny  c s dng."):J.code==="auth/invalid-email"?G("a ch Email khng hp l (V d: ten@gmail.com)."):J.code==="auth/invalid-credential"?G("Email hoc mt khu khng ng."):J.code==="auth/weak-password"?G("Mt khu qu yu (cn t nht 6 k t)."):G(" c li xy ra: "+J.message)}finally{B(!1)}};return f.jsx("div",{className:"min-h-screen bg-[#020617] flex items-center justify-center p-4",children:f.jsxs("div",{className:"bg-[#1e293b] p-8 rounded-2xl shadow-xl w-full max-w-md border border-white/10",children:[f.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:e?"ng K Ti Khon":"ng Nhp"}),f.jsxs("div",{className:"space-y-4",children:[e&&f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-2",children:"Tn hin th"}),f.jsx("input",{type:"text",value:r,onChange:J=>o(J.target.value),className:"w-full bg-[#0f172a] border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 outline-none"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-2",children:"Email"}),f.jsx("input",{type:"email",value:p,onChange:J=>x(J.target.value),className:"w-full bg-[#0f172a] border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 outline-none"})]}),e&&f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-2",children:"S in thoi"}),f.jsx("input",{type:"tel",value:E,onChange:J=>A(J.target.value),className:"w-full bg-[#0f172a] border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 outline-none"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-2",children:"Mt khu"}),f.jsx("input",{type:"password",value:c,onChange:J=>h(J.target.value),className:"w-full bg-[#0f172a] border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 outline-none"})]}),e&&f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-2",children:"Nhp li mt khu"}),f.jsx("input",{type:"password",value:g,onChange:J=>v(J.target.value),className:"w-full bg-[#0f172a] border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 outline-none"})]}),V&&f.jsx("p",{className:"text-red-400 text-sm text-center",children:V}),f.jsx("button",{onClick:X,disabled:ne,className:`w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg transition-colors mt-4 ${ne?"opacity-50 cursor-not-allowed":""}`,children:ne?"ang x l...":e?"ng K":"ng Nhp"}),f.jsx("p",{className:"text-center text-slate-400 text-sm mt-4 cursor-pointer hover:text-white",onClick:()=>n(!e),children:e?" c ti khon? ng nhp ngay":"Cha c ti khon? ng k mi"})]})]})})},Zu=[{id:"Cinematic Realistic",label:"Cinematic High-End Realistic (in nh thc t cao cp)"},{id:"3D Pixar Animation",label:"3D Pixar/Disney Style Animation (Hot hnh 3D Pixar/Disney)"},{id:"Japanese Anime 90s",label:"Classic 90s Japanese Anime (Hot hnh Nht Bn thp nin 90)"},{id:"Modern Makoto Shinkai",label:"Makoto Shinkai Cinematic Style (Phong cch Makoto Shinkai hin i)"},{id:"Studio Ghibli Aesthetic",label:"Studio Ghibli Hand-painted Aesthetic (Phong cch v tay Ghibli)"},{id:"Cyberpunk Neon 2077",label:"Cyberpunk Neon / Sci-Fi Futurism (Tng lai vin tng Neon)"},{id:"Hyper-realistic 8K Photo",label:"Hyper-realistic 8K RAW Photography (Nhip nh siu thc 8K)"},{id:"Spider-Verse Vibrant Comic",label:"Into the Spider-Verse Vibrant Comic (Truyn tranh phong cch Spider-Verse)"},{id:"Vintage 16mm Film",label:"Vintage 16mm Grainy Film Style (Phim nha 16mm c in)"},{id:"Noir Black and White",label:"Classic Film Noir / Moody Black & White (Phim en trng Noir su lng)"},{id:"Oil Painting Impressionism",label:"Classic Oil Painting / Impressionist Art (Tranh sn du n tng)"},{id:"Lo-fi Aesthetic Retro",label:"Lo-fi / Vaporwave Retro Aesthetic (Phong cch Lo-fi c in)"},{id:"Claymation Stop Motion",label:"Claymation Claymation Style (Hot hnh t st)"},{id:"Minimalist Vector Art",label:"Clean Minimalist Vector Illustration (Minh ha Vector ti gin)"},{id:"Dark Fantasy Gothic",label:"Dark Fantasy / Gothic Horror Style (Gi tng en ti / Gothic)"},{id:"Ukiyo-e Woodblock",label:"Traditional Japanese Ukiyo-e Woodblock (Tranh khc g Nht Bn)"},{id:"Surrealist Dreamscape",label:"Surrealist / Dreamlike Visual Art (Ngh thut siu thc o mng)"},{id:"Paper Cutout Collage",label:"Hand-crafted Paper Cutout Collage (Ct dn giy th cng)"},{id:"Sketch Graphite Art",label:"Detailed Graphite Pencil Sketch (Phc tho bt ch chi tit)"},{id:"Glitch Art Digital",label:"Experimental Glitch Art / Digital Distortion (Ngh thut li k thut s)"}];let hj=class extends ce.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught error:",e,n)}render(){var e;return this.state.hasError?f.jsxs("div",{className:"p-8 m-8 bg-slate-900 border border-slate-700 rounded-3xl space-y-4 text-center text-white",children:[f.jsx("h2",{className:"text-xl font-bold text-rose-500",children:" xy ra li hin th"}),f.jsx("p",{className:"text-slate-300",children:(e=this.state.error)==null?void 0:e.message}),f.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"px-6 py-3 bg-white text-slate-900 font-bold rounded-xl hover:bg-slate-200 transition-all",children:"Th li"}),f.jsx("p",{className:"text-xs text-slate-500",children:"D liu vn c lu trong b nh tm."})]}):this.props.children}};const dj=({userId:i})=>{const[e,n]=ce.useState({opponentScript:"",skeleton:null,ideas:[],selectedIdeaIndex:null,outlines:{},finalScripts:{},selectedStyle:Zu[0].id,characters:[],tags:{},showCharacterSection:!1,loading:{analysis:!1,ideas:!1,outline:!1,script:!1,characters:!1}}),[r,o]=ce.useState("");ce.useEffect(()=>{if(!i)return;const U=`app_api_keys_${i}`,K=localStorage.getItem(U);if(K)try{const se=JSON.parse(K),S=atob(se.gemini||"").split(`
`).map(R=>R.trim()).filter(R=>R);S.length>0&&(o(S.join(`
`)),Cm(S))}catch(se){console.error("Failed to load Gemini keys",se)}},[i]);const[c,h]=ce.useState(null),g=(U,K="info")=>{h({message:U,type:K}),setTimeout(()=>h(null),5e3)},v=ce.useRef(null),p=U=>/[\u3040-\u30ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff\uff66-\uff9f\uac00-\ud7af]/.test(U)?U.replace(/\s/g,"").length:U.trim().split(/\s+/).filter(Boolean).length,x=async()=>{if(e.opponentScript.trim()){n(U=>({...U,loading:{...U.loading,analysis:!0}}));try{const U=await t2(e.opponentScript,r),K=p(e.opponentScript),se=U.split(/PHONG CCH I TH/i),C=se.length>1?se[1].trim():"T nhin, viral";n(S=>({...S,skeleton:{content:U,wordCount:K,style:C},loading:{...S.loading,analysis:!1}}))}catch(U){console.error(U),g("Li Phn tch: "+(U instanceof Error?U.message:String(U)),"error"),n(K=>({...K,loading:{...K.loading,analysis:!1}}))}}},E=async()=>{if(e.skeleton){n(U=>({...U,loading:{...U.loading,ideas:!0}}));try{const U=await n2(e.skeleton.content,r);n(K=>({...K,ideas:U,loading:{...K.loading,ideas:!1}}))}catch(U){console.error(U),g("Li Sinh  tng: "+(U instanceof Error?U.message:String(U)),"error"),n(K=>({...K,loading:{...K.loading,ideas:!1}}))}}},A=async U=>{if(!(!e.skeleton||!e.ideas[U])){n(K=>({...K,selectedIdeaIndex:U,loading:{...K.loading,outline:!0}}));try{const K=await s2(e.skeleton.content,e.ideas[U],e.skeleton.wordCount,r);n(se=>({...se,outlines:{...se.outlines,[U]:K},loading:{...se.loading,outline:!1}}))}catch(K){console.error(K),g("Li Lp dn : "+(K instanceof Error?K.message:String(K)),"error"),n(se=>({...se,loading:{...se.loading,outline:!1}}))}}},V=async U=>{if(!(!e.outlines[U]||!e.skeleton)){n(K=>({...K,loading:{...K.loading,script:!0}}));try{const K=await i2(e.outlines[U],e.skeleton.style,r);n(se=>({...se,finalScripts:{...se.finalScripts,[U]:K},loading:{...se.loading,script:!1}}))}catch(K){console.error(K),g("Li Vit kch bn: "+(K instanceof Error?K.message:String(K)),"error"),n(se=>({...se,loading:{...se.loading,script:!1}}))}}},G=async()=>{const U=e.selectedIdeaIndex,K=U!==null?e.finalScripts[U]:null;if(n(se=>({...se,showCharacterSection:!0})),setTimeout(()=>{var se;(se=v.current)==null||se.scrollIntoView({behavior:"smooth",block:"start"})},100),K)try{const se=await r2(K,Zu.map(S=>S.id),r),C=Zu.find(S=>S.id===se||se.includes(S.id));C&&n(S=>({...S,selectedStyle:C.id}))}catch(se){console.error("Style recommendation failed",se)}},ne=async()=>{const U=e.selectedIdeaIndex;if(!(U===null||!e.finalScripts[U])){n(K=>({...K,loading:{...K.loading,characters:!0}}));try{const K=await a2(e.finalScripts[U],e.selectedStyle,r);n(se=>({...se,characters:K,loading:{...se.loading,characters:!1}}))}catch(K){console.error(K),g("Li Thit k NV: "+(K instanceof Error?K.message:String(K)),"error"),n(se=>({...se,loading:{...se.loading,characters:!1}}))}}},B=U=>{const K=e.finalScripts[U];if(!K)return;const se=2e3;let C=[];if(K.length<=se)C=[K];else{let R=K;for(;R.length>0;){let j=R.lastIndexOf(`
`,se);(j===-1||j<500)&&(j=se),C.push(R.substring(0,j).trim()),R=R.substring(j).trim()}}const S=C.map(R=>({content:R,actions:[],isAnalyzing:!1}));n(R=>({...R,tags:{...R.tags,[U]:S}}))},X=async(U,K)=>{var C;const se=(C=e.tags[U])==null?void 0:C[K];if(!se||!e.characters.length){g("Vui lng thc hin bc 'Thit k Nhn Vt' trc khi phn tch hnh ng.","info");return}n(S=>{const R={...S.tags},j=[...R[U]||[]];return j[K]&&(j[K]={...j[K],isAnalyzing:!0}),R[U]=j,{...S,tags:R}});try{const S=await o2(se.content,e.selectedStyle,e.characters,r);n(R=>{const j={...R.tags},O=[...j[U]||[]];return O[K]&&(O[K]={...O[K],actions:S,isAnalyzing:!1}),j[U]=O,{...R,tags:j}})}catch(S){console.error(S),g("Li Phn tch Tag: "+(S instanceof Error?S.message:String(S)),"error"),n(R=>{const j={...R.tags},O=[...j[U]||[]];return O[K]&&(O[K]={...O[K],isAnalyzing:!1}),j[U]=O,{...R,tags:j}})}},J=U=>{navigator.clipboard.writeText(U),g(" sao chp prompt!","success")},ue=(U,K)=>{const se=U.map(C=>K==="image"?C.imagePrompt:C.motionPrompt).join(`
`);navigator.clipboard.writeText(se),g(` sao chp tt c prompt ${K==="image"?"hnh nh":"video"}!`,"success")};return f.jsx(hj,{children:f.jsxs(tg.Fragment,{children:[c&&f.jsx("div",{className:"fixed top-4 right-4 z-50 animate-in slide-in-from-right fade-in duration-300",children:f.jsxs("div",{className:`px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-3 font-bold text-sm ${c.type==="error"?"bg-rose-50 text-rose-600 border border-rose-100":c.type==="success"?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-white text-slate-700 border border-slate-100"}`,children:[c.type==="success"&&f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),c.type==="error"&&f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.message]})}),f.jsxs("main",{className:"w-full grid grid-cols-1 md:grid-cols-10 gap-8 p-4 md:p-10",children:[f.jsxs("div",{className:"md:col-span-3 space-y-10",children:[f.jsxs("section",{className:"bg-white rounded-3xl shadow-xl shadow-slate-200/50 border border-slate-100 p-8 group transition-all",children:[f.jsxs("h2",{className:"text-xl font-black text-slate-800 uppercase tracking-tighter mb-6 flex items-center gap-3",children:[f.jsx("span",{className:"w-2 h-6 bg-indigo-600 rounded-full"}),"Kch bn i th"]}),f.jsx("textarea",{className:"w-full h-80 p-6 bg-slate-50 border border-slate-100 rounded-2xl focus:ring-8 focus:ring-indigo-600/5 focus:border-indigo-600/20 focus:bg-white outline-none transition-all text-sm leading-relaxed placeholder:text-slate-300 font-medium custom-scrollbar mb-6",placeholder:"Dn kch bn i th vo y...",value:e.opponentScript,onChange:U=>n(K=>({...K,opponentScript:U.target.value}))}),f.jsx("button",{onClick:x,disabled:e.loading.analysis||!e.opponentScript,className:"w-full bg-[#020617] hover:bg-indigo-700 disabled:bg-slate-100 disabled:text-slate-300 text-white font-black py-6 rounded-2xl transition-all shadow-2xl hover:scale-[1.02] active:scale-95 flex justify-center items-center gap-4 text-sm uppercase tracking-widest",children:e.loading.analysis?"ang x l...":"Phn tch Cu trc & Phong cch"})]}),e.skeleton&&f.jsxs("div",{className:"space-y-8 animate-in slide-in-from-left-8 duration-700",children:[f.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 to-indigo-800 rounded-3xl p-8 text-white shadow-2xl relative overflow-hidden",children:[f.jsx("h3",{className:"text-[10px] font-black uppercase opacity-60 mb-2 tracking-[0.3em]",children:"Quantitative Data"}),f.jsxs("div",{className:"text-5xl font-black italic tracking-tighter",children:[e.skeleton.wordCount," ",f.jsx("span",{className:"text-xs font-bold uppercase opacity-60",children:"Units"})]})]}),f.jsxs("section",{className:"bg-white rounded-3xl shadow-xl border border-slate-100 p-8",children:[f.jsx("h2",{className:"text-lg font-black text-slate-800 uppercase tracking-tighter mb-6",children:"Khung xng Logic"}),f.jsx("div",{className:"max-h-96 overflow-y-auto pr-4 text-sm text-slate-600 leading-relaxed whitespace-pre-wrap font-medium custom-scrollbar",children:e.skeleton.content}),f.jsx("button",{onClick:E,disabled:e.loading.ideas,className:"w-full mt-8 bg-rose-500 hover:bg-rose-600 disabled:bg-slate-100 text-white font-black py-6 rounded-2xl transition-all shadow-xl hover:scale-[1.02] active:scale-95 uppercase tracking-widest text-xs",children:"SINH 5  TNG LIN QUAN"})]})]}),e.showCharacterSection&&f.jsxs("div",{ref:v,className:"animate-in fade-in slide-in-from-bottom-12 duration-1000 space-y-8",children:[f.jsxs("section",{className:"bg-white rounded-3xl shadow-xl border border-slate-100 p-8",children:[f.jsx("h2",{className:"text-lg font-black text-slate-800 uppercase tracking-tighter mb-6",children:"B lc Phong cch"}),f.jsxs("div",{className:"space-y-6 mb-8",children:[f.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest px-1",children:"Visual Architecture"}),f.jsx("select",{value:e.selectedStyle,onChange:U=>n(K=>({...K,selectedStyle:U.target.value})),className:"w-full p-5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-4 focus:ring-amber-500/10 outline-none text-sm font-bold text-slate-800 transition-all cursor-pointer",children:Zu.map(U=>f.jsx("option",{value:U.id,children:U.label},U.id))})]}),f.jsx("button",{onClick:ne,disabled:e.loading.characters,className:"w-full bg-amber-500 hover:bg-amber-600 disabled:bg-slate-100 text-white font-black py-6 rounded-2xl shadow-xl transition-all hover:scale-[1.02] active:scale-95 uppercase tracking-widest text-xs",children:"Thit k Nhn Vt"})]}),e.characters.length>0&&f.jsx("div",{className:"space-y-6",children:e.characters.map((U,K)=>f.jsxs("div",{className:"bg-[#020617] text-white p-8 rounded-[2rem] border-l-[10px] border-amber-500 shadow-3xl",children:[f.jsx("input",{className:"bg-transparent border-none text-2xl font-black text-white tracking-tighter mb-1 w-full focus:ring-0 placeholder-white/30",value:U.name,onChange:se=>{const C=[...e.characters];C[K].name=se.target.value,n(S=>({...S,characters:C}))},placeholder:"Tn nhn vt"}),f.jsx("div",{className:"text-[10px] font-bold text-amber-500/60 uppercase tracking-widest mb-4",children:"Neural Casting Profile"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4 text-[11px] mb-4",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"opacity-40 uppercase whitespace-nowrap",children:"G.Tnh:"}),f.jsx("input",{className:"bg-white/10 rounded px-2 py-1 w-full border-none focus:ring-1 focus:ring-amber-500 text-white",value:U.gender,onChange:se=>{const C=[...e.characters];C[K].gender=se.target.value,n(S=>({...S,characters:C}))}})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"opacity-40 uppercase whitespace-nowrap",children:"Tui:"}),f.jsx("input",{className:"bg-white/10 rounded px-2 py-1 w-full border-none focus:ring-1 focus:ring-amber-500 text-white",value:U.age,onChange:se=>{const C=[...e.characters];C[K].age=se.target.value,n(S=>({...S,characters:C}))}})]}),f.jsxs("div",{className:"flex items-center gap-2 col-span-2",children:[f.jsx("span",{className:"opacity-40 uppercase whitespace-nowrap",children:"Quc tch:"}),f.jsx("input",{className:"bg-white/10 rounded px-2 py-1 w-full border-none focus:ring-1 focus:ring-amber-500 text-white",value:U.country,onChange:se=>{const C=[...e.characters];C[K].country=se.target.value,n(S=>({...S,characters:C}))}})]}),f.jsxs("div",{className:"flex items-center gap-2 col-span-2",children:[f.jsx("span",{className:"opacity-40 uppercase whitespace-nowrap",children:"Dng ngi:"}),f.jsx("input",{className:"bg-white/10 rounded px-2 py-1 w-full border-none focus:ring-1 focus:ring-amber-500 text-white",value:U.bodyType,onChange:se=>{const C=[...e.characters];C[K].bodyType=se.target.value,n(S=>({...S,characters:C}))}})]})]}),f.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10",children:[f.jsx("label",{className:"text-[10px] text-slate-400 uppercase tracking-widest block mb-1",children:"c im khun mt (Trung tnh)"}),f.jsx("textarea",{className:"w-full bg-white/5 rounded-xl p-3 text-xs text-slate-300 italic leading-relaxed border border-white/10 focus:ring-1 focus:ring-amber-500 outline-none resize-none h-24",value:U.facialDetails,onChange:se=>{const C=[...e.characters];C[K].facialDetails=se.target.value,n(S=>({...S,characters:C}))}})]})]},K))})]})]}),f.jsx("div",{className:"md:col-span-7 space-y-12",children:e.ideas.length>0?f.jsxs("div",{className:"space-y-16 animate-in fade-in zoom-in-95 duration-1000",children:[f.jsx("div",{className:"flex items-center justify-between border-b-4 border-slate-100 pb-8",children:f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsx("div",{className:"bg-[#020617] text-white w-14 h-14 rounded-2xl flex items-center justify-center text-3xl font-black shadow-2xl",children:"#"}),f.jsx("h2",{className:"text-4xl font-black text-slate-900 tracking-tighter uppercase",children:"Production Suite"})]})}),e.ideas.map((U,K)=>f.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl border border-slate-100 p-10 md:p-16 space-y-12 transition-all hover:border-indigo-200",children:[f.jsxs("div",{className:"space-y-8",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("span",{className:"bg-indigo-600 text-white text-[11px] font-black px-6 py-2 rounded-full uppercase",children:["Module ",K+1]}),f.jsx("span",{className:"text-rose-500 text-xs font-black uppercase tracking-widest",children:U.highlightValue})]}),f.jsx("h3",{className:"text-5xl font-black text-slate-900 tracking-tighter leading-none",children:U.title}),f.jsx("p",{className:"text-xl text-slate-500 leading-relaxed font-medium",children:U.description}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 pt-4",children:[f.jsxs("div",{className:"bg-slate-50 p-8 rounded-3xl border border-slate-100",children:[f.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase mb-2 tracking-widest",children:"Environment Context"}),f.jsx("p",{className:"font-bold text-slate-700",children:U.charactersContext})]}),f.jsxs("div",{className:"bg-slate-50 p-8 rounded-3xl border border-slate-100",children:[f.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase mb-2 tracking-widest",children:"Growth Potential"}),f.jsx("p",{className:"font-bold text-slate-700",children:U.viralPotential})]})]})]}),f.jsx("div",{className:"pt-12 border-t-2 border-slate-50 space-y-12",children:e.outlines[K]?f.jsxs("div",{className:"space-y-16",children:[f.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-[2.5rem] p-12 shadow-inner",children:[f.jsxs("h4",{className:"text-slate-900 font-black mb-8 uppercase tracking-[0.4em] text-[10px] flex items-center gap-3",children:[f.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-ping"})," Structural Protocol"]}),f.jsx("div",{className:"whitespace-pre-wrap text-base text-slate-600 leading-[2] font-medium opacity-80 max-h-[500px] overflow-y-auto pr-8 custom-scrollbar",children:e.outlines[K]}),!e.finalScripts[K]&&f.jsx("button",{onClick:()=>V(K),disabled:e.loading.script,className:`mt-12 bg-emerald-600 hover:bg-emerald-700 text-white font-black px-12 py-8 rounded-2xl shadow-2xl transition-all uppercase tracking-widest text-xs ${e.loading.script?"opacity-30 cursor-not-allowed":"hover:scale-[1.02] active:scale-95"}`,children:e.loading.script?"ang vit...":"Vit kch bn hon chnh"})]}),e.finalScripts[K]&&f.jsxs("div",{className:"space-y-12 animate-in zoom-in-95 duration-[1200ms]",children:[f.jsxs("div",{className:"bg-[#020617] text-white rounded-[3.5rem] p-16 lg:p-24 shadow-[0_50px_100px_-20px_rgba(0,0,0,0.5)]",children:[f.jsx("h4",{className:"text-indigo-400 font-black uppercase text-xs tracking-[0.5em] border-b border-white/5 pb-8 mb-12",children:"Final Master Copy"}),f.jsx("div",{className:"whitespace-pre-wrap text-lg lg:text-xl font-bold tracking-tight leading-relaxed text-slate-100",children:e.finalScripts[K]})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8",children:[f.jsxs("button",{onClick:G,className:"bg-amber-500 hover:bg-amber-600 text-white font-black px-12 py-10 rounded-3xl shadow-2xl transition-all hover:scale-[1.03] active:scale-95 flex flex-col items-center gap-4 text-center group",children:[f.jsx("svg",{className:"w-8 h-8 group-hover:rotate-45 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xl",children:"Thit lp Styles & NV"}),f.jsx("div",{className:"text-[10px] opacity-60 mt-2 uppercase tracking-widest",children:"Tip tc thit k hnh nh"})]})]}),f.jsxs("button",{onClick:()=>B(K),className:"bg-indigo-600 hover:bg-indigo-700 text-white font-black px-12 py-10 rounded-3xl shadow-2xl transition-all hover:scale-[1.03] active:scale-95 flex flex-col items-center gap-4 text-center group",children:[f.jsx("svg",{className:"w-8 h-8 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xl",children:"Bt u Chia TAGS"}),f.jsx("div",{className:"text-[10px] opacity-60 mt-2 uppercase tracking-widest",children:"Shot Decomposition"})]})]})]}),e.tags[K]&&f.jsxs("div",{className:"space-y-16 pt-24 border-t-8 border-slate-100",children:[f.jsx("h3",{className:"text-5xl font-black text-slate-900 tracking-tighter italic",children:"Alpha Production Tags"}),e.tags[K].map((se,C)=>f.jsxs("div",{className:"bg-white border-4 border-slate-50 rounded-[4rem] p-12 md:p-16 space-y-12 shadow-sm transition-all animate-in slide-in-from-bottom-16 duration-700",children:[f.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-8",children:[f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsxs("div",{className:"bg-[#020617] text-white px-6 py-2 rounded-xl text-xs font-black uppercase tracking-widest",children:["TAG #",C+1]}),f.jsxs("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:[p(se.content)," units identified"]})]}),f.jsxs("div",{className:"flex gap-4",children:[f.jsx("button",{onClick:()=>ue(se.actions,"image"),disabled:se.actions.length===0,className:"bg-rose-50 hover:bg-rose-100 text-rose-600 px-6 py-3 rounded-xl text-xs font-black uppercase tracking-widest transition-all shadow-sm border border-rose-100 disabled:opacity-30",children:"Copy All nh"}),f.jsx("button",{onClick:()=>ue(se.actions,"video"),disabled:se.actions.length===0,className:"bg-indigo-50 hover:bg-indigo-100 text-indigo-600 px-6 py-3 rounded-xl text-xs font-black uppercase tracking-widest transition-all shadow-sm border border-indigo-100 disabled:opacity-30",children:"Copy All Video"}),f.jsx("button",{onClick:()=>X(K,C),disabled:se.isAnalyzing,className:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-100 text-white font-black px-10 py-4 rounded-xl text-xs transition-all shadow-xl uppercase tracking-widest",children:se.isAnalyzing?"Processing...":"To Motion Prompts"})]})]}),f.jsx("div",{className:"p-10 bg-slate-50 rounded-[2.5rem] text-slate-500 text-lg italic font-medium leading-relaxed border-2 border-slate-100",children:se.content}),se.actions.length>0&&f.jsx("div",{className:"grid grid-cols-1 gap-12 mt-12",children:se.actions.map((S,R)=>f.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom-12 duration-1000",children:[f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsx("div",{className:"w-10 h-10 bg-slate-900 text-white rounded-lg flex items-center justify-center font-black text-sm",children:R+1}),f.jsx("div",{className:"h-px flex-1 bg-slate-100"})]}),f.jsxs("div",{className:"grid grid-cols-1 gap-8",children:[f.jsxs("div",{className:"bg-[#020617] text-white p-10 rounded-[2.5rem] shadow-3xl",children:[f.jsx("div",{className:"text-[10px] font-black uppercase text-indigo-400 mb-4 tracking-widest",children:"Shot Execution"}),f.jsx("div",{className:"text-xl font-bold leading-relaxed",children:S.action})]}),f.jsxs("div",{className:"bg-indigo-50 border-l-[10px] border-indigo-400 p-10 rounded-[2.5rem] shadow-inner",children:[f.jsx("div",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-4",children:"Master Transcript"}),f.jsx("div",{className:"text-xl font-bold text-indigo-900 italic font-serif",children:S.voiceText?`"${S.voiceText}"`:"--- Instrumental Segment ---"})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[f.jsxs("div",{className:"bg-[#FFF1F2] border-l-[10px] border-rose-400 p-10 rounded-[2.5rem] relative group shadow-lg",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("div",{className:"text-[10px] font-black text-rose-400 uppercase tracking-[0.3em]",children:"Video Motion AI Prompt"}),f.jsx("button",{onClick:()=>J(S.motionPrompt),className:"bg-white/80 hover:bg-white p-2 rounded-lg text-rose-500 shadow-sm transition-all active:scale-90",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})})]}),f.jsx("div",{className:"text-sm font-bold text-rose-950 leading-relaxed italic bg-white/40 p-6 rounded-2xl border border-rose-200",children:S.motionPrompt})]}),f.jsxs("div",{className:"bg-emerald-50 border-l-[10px] border-emerald-400 p-10 rounded-[2.5rem] relative group shadow-lg",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("div",{className:"text-[10px] font-black text-emerald-600 uppercase tracking-[0.3em]",children:"Stable Image AI Prompt"}),f.jsx("button",{onClick:()=>J(S.imagePrompt),className:"bg-white/80 hover:bg-white p-2 rounded-lg text-emerald-500 shadow-sm transition-all active:scale-90",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})})]}),f.jsx("div",{className:"text-sm font-bold text-emerald-950 leading-relaxed italic bg-white/40 p-6 rounded-2xl border border-emerald-200",children:S.imagePrompt})]})]})]})]},R))})]},C))]})]})]}):f.jsx("button",{onClick:()=>A(K),disabled:e.loading.outline,className:"bg-[#020617] text-white px-12 py-8 rounded-2xl font-black shadow-2xl hover:bg-indigo-700 hover:scale-[1.02] active:scale-95 transition-all text-sm uppercase tracking-widest",children:e.loading.outline&&e.selectedIdeaIndex===K?"Kin trc...":"Chn & Lp dn "})})]},K))]}):f.jsxs("div",{className:"h-full min-h-[900px] flex flex-col items-center justify-center text-slate-200 space-y-16 border-8 border-dashed border-slate-100 rounded-[6rem] bg-white/50 backdrop-blur-3xl group hover:border-indigo-100 transition-all duration-[2000ms]",children:[f.jsx("div",{className:"relative",children:f.jsx("div",{className:"w-56 h-56 bg-white rounded-[4.5rem] flex items-center justify-center shadow-3xl group-hover:rotate-12 transition-all",children:f.jsx("svg",{className:"w-24 h-24 text-slate-100",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})})}),f.jsxs("div",{className:"text-center space-y-6",children:[f.jsx("h3",{className:"text-4xl font-black italic uppercase tracking-[0.5em] text-slate-300",children:"Quang Huy Production"}),f.jsx("p",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest opacity-40 italic",children:"Waiting for initial data analysis to start production sequence..."})]})]})})]}),f.jsxs("footer",{className:"w-full p-20 text-center border-t border-slate-100 bg-white mt-40",children:[f.jsxs("h4",{className:"text-2xl font-black tracking-tighter uppercase text-[#020617]",children:["QUANG HUY ",f.jsx("span",{className:"text-indigo-600",children:"VIDEO"})]}),f.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.5em] text-slate-400 mt-4",children:"AI Viral Content Engine  2024"})]})]})})},wm={},fj=i=>{let e=[];if(i&&(e=i.split(`
`).map(n=>n.trim()).filter(n=>n)),e.length===0){const n=wm==null?void 0:wm.VITE_GEMINI_API_KEY;n&&e.push(n)}return e},mj=["gemini-2.0-flash-lite-preview-02-05","gemini-2.5-flash","gemini-2.0-flash-lite-001","gemini-2.0-flash-exp","gemini-2.0-flash-001","gemini-2.0-flash","gemini-2.5-pro","gemini-flash-latest"],yc=async(i,e)=>{const n=fj(i);if(n.length===0)throw new Error("No API Keys provided.");let r;for(const o of n){const c=new Mh(o);for(const h of mj)try{const g=c.getGenerativeModel({model:h});return await e(g)}catch(g){console.warn(`Failed: Key(...${o.slice(-4)}) Model(${h}) error: ${g.message}`),r=g}}throw r||new Error("All keys and models failed to generate content.")},gj=async(i,e)=>yc(e,async n=>(await n.generateContent([{inlineData:{mimeType:"image/jpeg",data:i}},{text:"Hy phn tch chi tit phong cch hnh nh trong bc nh ny: nh sng, mu sc, gc my, cht liu ngh thut (medium), tm trng v cc c im hnh nh c trng khc. Tr v m t ngn gn nhng sc tch bng ting Vit."}])).response.text()||"Khng th phn tch phong cch."),pj=async(i,e)=>yc(e,async n=>{const r=`Nhim v: c kch bn di y v chia tch thnh cc phn cnh hnh nh tiu biu (Scene Breakdown). Mi phn on phi i din cho mt thng ip hoc giai on cm xc. Sau  hy m tng s phn on.
      
      Kch bn: "${i}"
      
      Tr v JSON: { "breakdown": string, "count": number }`,o={responseMimeType:"application/json"},c=await n.generateContent({contents:[{role:"user",parts:[{text:r}]}],generationConfig:o}),h=JSON.parse(c.response.text()||"{}");let g=h.breakdown||"";return typeof g!="string"&&(g=JSON.stringify(g)),{breakdown:g,count:Number(h.count)||0}}),yj=async(i,e,n,r)=>yc(r,async o=>{const c=`Da vo phn tch phn cnh: "${e}" v s lng ${n} phn on. Hy chia ni dung kch bn gc di y thnh ng ${n} hng tng ng vi cc phn on.
        
        QUY TC CC K QUAN TRNG:
        - KHNG C XO B BT C K T NO ca kch bn gc.
        - Ch c thm xung dng  phn tch cc on.
        - Tr v danh sch cc chui tng ng vi mi phn cnh.
        
        Kch bn gc: "${i}"`,h=await o.generateContent({contents:[{role:"user",parts:[{text:c}]}],generationConfig:{responseMimeType:"application/json"}}),g=JSON.parse(h.response.text()||"[]");return Array.isArray(g)?g.map(v=>typeof v=="string"?v:typeof v=="object"&&v!==null?v.content||v.text||v.description||v.script_content||v.row||JSON.stringify(v):String(v)):[]}),vj=async(i,e,n)=>yc(n,async r=>{const o=`Hy to ra Image Prompts cho Midjourney/Stable Diffusion da trn cc on kch bn sau v phong cch hnh nh c cung cp.
        
        Phong cch (Style): ${e}
        
        Cu trc Prompt (Ting Anh): [Subject], [Action], [Environment], [Lighting/Atmosphere], [Camera Angle/Lens], [Style].
        
        Cc on kch bn cn to prompt:
        ${i.map((h,g)=>`${g+1}. ${h}`).join(`
`)}
        
        Tr v mng JSON cha cc prompt tng ng theo th t (mng string).`,c=await r.generateContent({contents:[{role:"user",parts:[{text:o}]}],generationConfig:{responseMimeType:"application/json"}});return JSON.parse(c.response.text()||"[]")}),_j=async(i,e,n)=>yc(n,async r=>{const o=`Da vo ni dung kch bn v cc prompt nh  c, hy to ra cc "Video Motion Prompts" (Prompt chuyn ng cho video) tng ng.
        
        Yu cu:
        - Mi prompt video phi m t chuyn ng ca ch th v my nh (Camera motion, subject action, dynamic transitions).
        - Ngn ng: Ting Anh.
        - Kt qu phi l mt mng chui, mi chui tng ng vi mt hng kch bn.
        
        Kch bn & Prompt nh:
        ${i.map((h,g)=>`Hng ${g+1}: [Kch bn: ${h}] [Prompt nh: ${e[g]||"N/A"}]`).join(`
`)}
        
        Tr v mng JSON (mng string).`,c=await r.generateContent({contents:[{role:"user",parts:[{text:o}]}],generationConfig:{responseMimeType:"application/json"}});return JSON.parse(c.response.text()||"[]")});let bj=class extends tg.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught error:",e,n)}render(){var e;return this.state.hasError?f.jsxs("div",{className:"p-8 m-8 bg-red-50 border border-red-200 rounded-xl space-y-4 text-center",children:[f.jsx("h2",{className:"text-xl font-bold text-red-700",children:" xy ra li hin th"}),f.jsx("p",{className:"text-red-600",children:(e=this.state.error)==null?void 0:e.message}),f.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"px-4 py-2 bg-white border border-red-200 text-red-600 rounded-lg hover:bg-red-50",children:"Th li"}),f.jsx("p",{className:"text-xs text-red-400",children:"D liu ca bn vn an ton trong b nh (tr khi ti li trang)."})]}):this.props.children}};const xj=ce.forwardRef(({tag:i,style:e,index:n,apiKey:r,onNotify:o},c)=>{const[h,g]=ce.useState(i),v=ce.useRef(h);ce.useEffect(()=>{v.current=h},[h]);const[p,x]=ce.useState({}),E=X=>new Promise(J=>setTimeout(J,X)),A=async()=>{x(X=>({...X,analyze:!0}));try{const X=await pj(h.content,r);return g(J=>({...J,analysis:X.breakdown,sceneCount:X.count})),X}catch(X){throw console.error(X),o("Li khi phn tch phn cnh","error"),X}finally{x(X=>({...X,analyze:!1}))}},V=async(X,J)=>{const ue=X||h.analysis,U=J||h.sceneCount;if(!ue||!U){o("Cn phn tch phn cnh trc","info");return}x(K=>({...K,split:!0}));try{const K=await yj(h.content,ue,U,r);return g(se=>({...se,rows:K})),K}catch(K){throw console.error(K),o("Li khi chia hng","error"),K}finally{x(K=>({...K,split:!1}))}},G=async X=>{const J=X||h.rows;if(!J||J.length===0){o("Cn chia hng trc","info");return}x(ue=>({...ue,prompt:!0}));try{const ue=await vj(J,e,r);return g(U=>({...U,prompts:ue})),ue}catch(ue){throw console.error(ue),o("Li khi to prompt","error"),ue}finally{x(ue=>({...ue,prompt:!1}))}},ne=async()=>{if(!h.rows||h.rows.length===0){o("Cn chia hng trc","info");return}x(X=>({...X,videoPrompt:!0}));try{const X=await _j(h.rows,h.prompts||[],r);g(J=>({...J,videoPrompts:X}))}catch(X){console.error(X),o("Li khi to prompt video","error")}finally{x(X=>({...X,videoPrompt:!1}))}},B=X=>{if(!X||X.length===0)return;const J=X.map(ue=>ue.trim()).filter(ue=>ue.length>0).map(ue=>ue.replace(/\r?\n|\r/g," ")).map(ue=>ue.replace(/^["']+|["']+$/g,"")).join(`
`);navigator.clipboard.writeText(J),o(" sao chp ni dung chnh xc theo tng hng!","success")};return ce.useImperativeHandle(c,()=>({runAutoSequence:async()=>{const X=await A();await E(5e3);const J=await V(X.breakdown,X.count);await E(5e3),await G(J)},getRows:()=>v.current.rows||[],getPrompts:()=>v.current.prompts||[]}),[]),f.jsxs("div",{className:`bg-white rounded-2xl shadow-sm border p-6 space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500 transition-colors ${Object.values(p).some(X=>X)?"border-indigo-300 ring-1 ring-indigo-100":"border-gray-100"}`,children:[f.jsxs("div",{className:"flex items-center justify-between border-b border-gray-50 pb-4",children:[f.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[f.jsxs("span",{className:"w-10 h-10 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center text-xs font-bold",children:["TAG ",n+1]}),"Phn kch bn"]}),h.sceneCount!==void 0&&f.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold",children:[h.sceneCount," Phn on"]})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"space-y-1",children:[f.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Ni dung kch bn"}),f.jsx("div",{className:"p-4 bg-gray-50 rounded-xl border border-gray-100 text-sm text-gray-700 max-h-48 overflow-y-auto whitespace-pre-wrap leading-relaxed",children:h.content})]}),f.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[f.jsx("button",{onClick:()=>A(),disabled:p.analyze,className:`py-2.5 px-3 rounded-xl text-xs font-semibold transition-all flex items-center justify-center gap-2 ${p.analyze?"bg-gray-100 text-gray-400":"bg-blue-50 text-blue-700 hover:bg-blue-100 active:scale-95"}`,children:p.analyze?"...":"Phn Tch"}),f.jsx("button",{onClick:()=>V(),disabled:p.split||!h.analysis,className:`py-2.5 px-3 rounded-xl text-xs font-semibold transition-all flex items-center justify-center gap-2 ${p.split||!h.analysis?"bg-gray-100 text-gray-400":"bg-teal-50 text-teal-700 hover:bg-teal-100 active:scale-95"}`,children:p.split?"...":"Chia hng"}),f.jsx("button",{onClick:()=>G(),disabled:p.prompt||!h.rows,className:`py-2.5 px-3 rounded-xl text-xs font-semibold transition-all flex items-center justify-center gap-2 ${p.prompt||!h.rows?"bg-gray-100 text-gray-400":"bg-purple-50 text-purple-700 hover:bg-purple-100 active:scale-95"}`,children:p.prompt?"...":"Prompt nh"}),f.jsx("button",{onClick:()=>ne(),disabled:p.videoPrompt||!h.rows,className:`py-2.5 px-3 rounded-xl text-xs font-semibold transition-all flex items-center justify-center gap-2 ${p.videoPrompt||!h.rows?"bg-gray-100 text-gray-400":"bg-rose-50 text-rose-700 hover:bg-rose-100 active:scale-95"}`,children:p.videoPrompt?"...":"Prompt Video"})]}),h.analysis&&f.jsxs("div",{className:"p-4 bg-indigo-50 border border-indigo-100 rounded-xl space-y-2",children:[f.jsx("h4",{className:"text-xs font-bold text-indigo-700 uppercase",children:"Phn tch phn cnh"}),f.jsx("p",{className:"text-sm text-indigo-900 leading-relaxed whitespace-pre-wrap",children:h.analysis})]}),h.rows&&h.rows.length>0&&f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:["Kch bn  chia hng (",h.rows.length,")"]}),f.jsx("button",{onClick:()=>B(h.rows||[]),className:"text-[10px] font-bold text-indigo-500 hover:text-indigo-700 uppercase flex items-center gap-1",children:"Copy All"})]}),f.jsx("div",{className:"space-y-2",children:h.rows.map((X,J)=>f.jsxs("div",{className:"p-3 bg-white border border-gray-100 rounded-lg text-sm flex gap-3",children:[f.jsx("span",{className:"text-indigo-300 font-mono text-xs",children:J+1}),f.jsxs("span",{className:"text-gray-700 italic",children:['"',X,'"']})]},J))})]}),h.prompts&&h.prompts.length>0&&f.jsxs("div",{className:"space-y-3 pt-4 border-t border-gray-50",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h4",{className:"text-xs font-bold text-purple-700 uppercase tracking-wider",children:"Image Prompts"}),f.jsx("button",{onClick:()=>B(h.prompts||[]),className:"text-[10px] font-bold text-purple-500 hover:text-purple-700 uppercase flex items-center gap-1",children:"Copy All"})]}),f.jsx("div",{className:"space-y-3",children:h.prompts.map((X,J)=>f.jsxs("div",{className:"p-4 bg-purple-50 border border-purple-100 rounded-xl text-sm font-mono text-purple-900 leading-relaxed",children:[f.jsxs("div",{className:"text-[10px] font-bold text-purple-400 mb-1",children:["PROMPT #",J+1]}),X]},J))})]})]})]})}),Tj=({onStyleChange:i,onSplitScript:e,apiKey:n})=>{const[r,o]=ce.useState(null),[c,h]=ce.useState(""),[g,v]=ce.useState(""),[p,x]=ce.useState(!1),E=async V=>{var B;const G=(B=V.target.files)==null?void 0:B[0];if(!G)return;const ne=new FileReader;ne.onloadend=async()=>{const X=ne.result.split(",")[1];o(ne.result),x(!0);try{const J=await gj(X,n);h(J),i(J)}catch(J){console.error(J),alert("Li khi phn tch nh: "+(J instanceof Error?J.message:String(J)))}finally{x(!1)}},ne.readAsDataURL(G)},A=()=>{g.trim()&&e(g)};return f.jsxs("div",{className:"flex flex-col h-full space-y-6 p-6 border-r border-gray-200 bg-white",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("h2",{className:"text-xl font-bold text-indigo-700",children:"HOT AI Visual Director"}),f.jsx("p",{className:"text-xs text-gray-500 italic",children:"Professional image direction & analysis"})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Ti nh phong cch"}),f.jsxs("div",{className:"relative group",children:[f.jsxs("div",{className:`border-2 border-dashed rounded-xl p-4 transition-all duration-300 flex flex-col items-center justify-center cursor-pointer ${r?"border-indigo-400 bg-indigo-50":"border-gray-300 hover:border-indigo-500 hover:bg-gray-50"}`,children:[f.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:E,accept:"image/*"}),r?f.jsx("img",{src:r,alt:"Reference",className:"w-full h-32 object-cover rounded-lg shadow-sm"}):f.jsxs("div",{className:"text-center",children:[f.jsx("svg",{className:"mx-auto h-10 w-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),f.jsx("span",{className:"mt-2 block text-xs font-medium text-gray-600",children:"Click hoc ko th nh vo y"})]})]}),p&&f.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-70 flex items-center justify-center rounded-xl",children:f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Phong cch phn tch"}),f.jsx("textarea",{value:c,onChange:V=>{h(V.target.value),i(V.target.value)},className:"w-full h-32 p-3 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none bg-gray-50",placeholder:"c im phong cch s hin  y..."})]}),f.jsxs("div",{className:"flex-grow flex flex-col space-y-2",children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nhp kch bn"}),f.jsx("textarea",{value:g,onChange:V=>v(V.target.value),className:"flex-grow w-full p-3 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",placeholder:"Dn kch bn ca bn vo y..."})]}),f.jsx("button",{onClick:A,className:"w-full py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl shadow-lg transform transition-all active:scale-95 focus:outline-none focus:ring-4 focus:ring-indigo-200",children:"Chia Kch Bn"}),f.jsx("div",{className:"text-[10px] text-gray-400 text-center uppercase tracking-widest",children:" 2024 HOT AI Studio"})]})},Ej=({tags:i,style:e,apiKey:n,onNotify:r})=>{const o=ce.useRef([]),[c,h]=ce.useState(!1),[g,v]=ce.useState(""),p=async()=>{if(i.length!==0){h(!0),v("ang x l...");try{for(let A=0;A<o.current.length;A++){const V=o.current[A];V&&(v(`ang x l Tag ${A+1}/${i.length}...`),console.log(`Auto processing tag ${A+1}/${i.length}...`),await V.runAutoSequence())}v("Hon tt!")}catch(A){console.error(A),v("C li xy ra!"),r("Qu trnh t ng b gin on do li.","error")}finally{h(!1),setTimeout(()=>v(""),5e3)}}},x=()=>{const A=[];if(o.current.forEach(V=>{if(V){const ne=V.getRows().map(B=>B.trim()).filter(B=>B.length>0).map(B=>B.replace(/\r?\n|\r/g," ")).map(B=>B.replace(/^["']+|["']+$/g,""));A.push(...ne)}}),A.length===0){r("Khng c kch bn  chia hng  copy!","info");return}navigator.clipboard.writeText(A.join(`
`)),r(` copy chnh xc ${A.length} hng kch bn!`,"success")},E=()=>{const A=[];if(o.current.forEach(V=>{if(V){const ne=V.getPrompts().map(B=>B.trim()).filter(B=>B.length>0).map(B=>B.replace(/\r?\n|\r/g," ")).map(B=>B.replace(/^["']+|["']+$/g,""));A.push(...ne)}}),A.length===0){r("Khng c prompt  copy!","info");return}navigator.clipboard.writeText(A.join(`
`)),r(` copy chnh xc ${A.length} prompt!`,"success")};return i.length===0?f.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 space-y-4 p-12 bg-white rounded-3xl border border-gray-100 border-dashed",children:[f.jsx("svg",{className:"w-16 h-16 opacity-20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),f.jsx("p",{className:"text-lg font-medium",children:"Cha c kch bn c chia"}),f.jsx("p",{className:"text-sm",children:'Vui lng nhp kch bn v nhn "Chia Kch Bn"  ct tri'})]}):(o.current.length!==i.length&&(o.current=new Array(i.length).fill(null)),f.jsxs("div",{className:"space-y-8 pb-12",children:[f.jsxs("div",{className:"flex flex-wrap items-center gap-3 p-4 bg-gray-100 rounded-2xl sticky top-4 z-10 shadow-sm border border-gray-200",children:[f.jsx("button",{onClick:p,disabled:c,className:`px-6 py-2.5 rounded-xl font-bold text-sm transition-all flex items-center gap-2 ${c?"bg-gray-400 text-white cursor-not-allowed":"bg-gradient-to-r from-indigo-600 to-blue-600 hover:from-indigo-700 hover:to-blue-700 text-white shadow-md active:scale-95"}`,children:c?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"ang T ng..."]}):f.jsxs(f.Fragment,{children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"T ng Hon Ton"]})}),f.jsxs("button",{onClick:x,className:"px-5 py-2.5 bg-white border border-gray-200 text-gray-700 rounded-xl font-bold text-sm hover:bg-gray-50 transition-all shadow-sm active:scale-95 flex items-center gap-2",children:[f.jsx("svg",{className:"w-4 h-4 text-teal-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Copy All Kch Bn"]}),f.jsxs("button",{onClick:E,className:"px-5 py-2.5 bg-white border border-gray-200 text-gray-700 rounded-xl font-bold text-sm hover:bg-gray-50 transition-all shadow-sm active:scale-95 flex items-center gap-2",children:[f.jsx("svg",{className:"w-4 h-4 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Copy All Prompt Anh"]})]}),g&&f.jsxs("div",{className:`mx-4 mt-2 p-3 rounded-xl text-sm font-bold flex items-center gap-2 ${g==="C li xy ra!"?"bg-red-50 text-red-600":"bg-green-50 text-green-700 border border-green-200"}`,children:[g==="Hon tt!"?f.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}):f.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-current border-t-transparent animate-spin"}),g]}),f.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[f.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Bng iu Khin Tags"}),f.jsx("div",{className:"h-px flex-grow bg-gray-100"}),f.jsxs("span",{className:"text-sm font-medium text-gray-400",children:[i.length," TAGS SN SNG"]})]}),f.jsx("div",{className:"space-y-8",children:i.map((A,V)=>f.jsx(xj,{tag:A,style:e,index:V,apiKey:n,ref:G=>o.current[V]=G,onNotify:r},A.id))})]}))},wj=({userId:i})=>{const[e,n]=ce.useState(""),[r,o]=ce.useState([]),[c,h]=ce.useState(""),[g,v]=ce.useState(null),p=(A,V="info")=>{v({message:A,type:V}),setTimeout(()=>v(null),5e3)};ce.useEffect(()=>{if(i)try{const A=`app_api_keys_${i}`,V=localStorage.getItem(A);if(V){const G=JSON.parse(V),B=atob(G.gemini||"").split(`
`).map(X=>X.trim()).filter(X=>X);h(B.join(`
`))}}catch(A){console.error("Failed to load API key",A)}},[i]);const x=ce.useCallback(A=>{const V=/[\u3040-\u30ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff\uff66-\uff9f]/.test(A);let G=[];if(V)for(let B=0;B<A.length;B+=2e3)G.push(A.substring(B,B+2e3));else{const B=A.split(/\s+/),X=1400;for(let J=0;J<B.length;J+=X)G.push(B.slice(J,J+X).join(" "))}const ne=G.map((B,X)=>({id:crypto.randomUUID(),content:B}));o(ne)},[]),E=A=>{n(A)};return f.jsxs("div",{className:"flex h-screen w-full overflow-hidden bg-gray-50",children:[f.jsx("aside",{className:"w-[30%] min-w-[320px] max-w-[450px] flex-shrink-0 h-full",children:f.jsx(Tj,{onStyleChange:E,onSplitScript:x,apiKey:c})}),f.jsx("main",{className:"flex-grow h-full overflow-y-auto p-8 lg:p-12 scroll-smooth",children:f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsxs("header",{className:"mb-12",children:[f.jsxs("h1",{className:"text-4xl font-extrabold text-gray-900 tracking-tight",children:["HOT ",f.jsx("span",{className:"text-indigo-600",children:"AI"})]}),f.jsx("p",{className:"mt-2 text-gray-500 font-medium",children:"H thng sn xut Visual Prompts chuyn nghip"})]}),f.jsx(bj,{children:f.jsxs("div",{className:"relative",children:[g&&f.jsx("div",{className:"fixed top-4 right-4 z-50 animate-in slide-in-from-right fade-in duration-300",children:f.jsxs("div",{className:`px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-3 font-bold text-sm ${g.type==="error"?"bg-rose-50 text-rose-600 border border-rose-100":g.type==="success"?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-white text-slate-700 border border-slate-100"}`,children:[g.type==="success"&&f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),g.type==="error"&&f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),g.message]})}),f.jsx(Ej,{tags:r,style:e,apiKey:c,onNotify:p})]})})]})})]})};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Aj=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Sb=i=>{const e=Aj(i);return e.charAt(0).toUpperCase()+e.slice(1)},RT=(...i)=>i.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),Nj=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Cj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=ce.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:c,iconNode:h,...g},v)=>ce.createElement("svg",{ref:v,...Cj,width:e,height:e,stroke:i,strokeWidth:r?Number(n)*24/Number(e):n,className:RT("lucide",o),...!c&&!Nj(g)&&{"aria-hidden":"true"},...g},[...h.map(([p,x])=>ce.createElement(p,x)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=(i,e)=>{const n=ce.forwardRef(({className:r,...o},c)=>ce.createElement(Ij,{ref:c,iconNode:e,className:RT(`lucide-${Sj(Sb(i))}`,`lucide-${i}`,r),...o}));return n.displayName=Sb(i),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],kj=fn("activity",Rj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Oj=fn("camera",jj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],kT=fn("circle-check",Dj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Vj=fn("clipboard-list",Mj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],jT=fn("copy",Lj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Ab=fn("image",Pj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],zj=fn("layers",Uj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Fr=fn("loader-circle",Bj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],OT=fn("play",Hj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],DT=fn("scissors",Gj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],MT=fn("trash-2",qj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Nb=fn("upload",Fj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],$j=fn("video",Kj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Cb=fn("zap",Yj),Sm={},Qj=i=>{let e=[];if(i&&(e=i.split(`
`).map(n=>n.trim()).filter(n=>n)),e.length===0){const n=Sm==null?void 0:Sm.VITE_GEMINI_API_KEY;n&&e.push(n)}return e},Xj=["gemini-2.0-flash-lite-preview-02-05","gemini-2.5-flash","gemini-2.0-flash-lite-001","gemini-2.0-flash-exp","gemini-2.0-flash-001","gemini-2.0-flash","gemini-2.5-pro","gemini-flash-latest"],wo=async(i,e)=>{const n=Qj(i);if(n.length===0)throw new Error("No API Keys provided.");let r;for(const o of n){const c=new Mh(o);for(const h of Xj)try{const g=c.getGenerativeModel({model:h});return await e(g)}catch(g){console.warn(`Failed: Key(...${o.slice(-4)}) Model(${h}) error: ${g.message}`),r=g}}throw r||new Error("All keys and models failed to generate content.")},Jj=async(i,e)=>wo(e,async n=>(await n.generateContent([{inlineData:{mimeType:"image/jpeg",data:i}},{text:"Analyze this image and describe its visual style in detail (lighting, color palette, texture, composition, atmosphere). Provide a concise but comprehensive paragraph suitable for an image generation prompt style reference."}])).response.text()||"No analysis found."),Wj=async(i,e)=>wo(e,async n=>{const r={type:Cs.ARRAY,items:{type:Cs.OBJECT,properties:{name:{type:Cs.STRING},gender:{type:Cs.STRING},country:{type:Cs.STRING},age:{type:Cs.STRING},physique:{type:Cs.STRING},features:{type:Cs.STRING}},required:["name","gender","country","age","physique","features"]}},o=`Analyze the following script and extract/create characters. For each character, provide: Name, Gender, Country, Age, Physique, and Detailed Facial Features. 
        
        CRITICAL RULES:
        1. If details are missing in the script (Gender, Country, Age, Physique, or Face), you MUST creatively generate them to make the character visually distinct.
        2. Focus HEAVILY on specific facial features: eye shape/color, nose shape, skin texture, wrinkles, hair style/texture/color, and any unique facial markings.
        3. ABSOLUTELY NO clothing, NO personality traits, and NO equipment.
        4. Format the 'features' field as descriptive sentences about the face and hair only.
        
        Example structure: "Mi tc en bng mt vi nhng si bc thanh lch c bi cht thnh kiu tc truyn thng gn gng. Ln da mn mng. i mt nu sm hnh qu hnh m p, np nhn nh quanh khe mt, chic mi nh nhn, thanh t."
        
        Output in JSON format as an array of objects. Script: ${i}`,c=await n.generateContent({contents:[{role:"user",parts:[{text:o}]}],generationConfig:{responseMimeType:"application/json",responseSchema:r}});return JSON.parse(c.response.text()||"[]")}),Zj=async(i,e)=>wo(e,async n=>{var h;const r=`Bn l chuyn gia phn tch kch bn. Hy m s lng "hnh ng th gic" (visual actions) chnh trong kch bn di y.
        
        QUY TC:
        1. Ch m cc hnh ng c th c th dng thnh hnh nh (v d: "chy", "cm bento", "nhn xa xm").
        2. B qua cc li dn truyn (narration) mang tnh suy tng v cc suy ngh ni tm khng th hin qua hnh ng/biu cm.
        3. Tr v DUY NHT mt con s.
        
        KCH BN:
        ${i}`,o=await n.generateContent(r),c=parseInt(((h=o.response.text())==null?void 0:h.trim())||"0");return isNaN(c)?0:c}),eO=async(i,e,n)=>wo(n,async r=>{const o=`Bn l mt cng c chia kch bn chuyn nghip. Hy chia kch bn di y thnh ng ${e} hng.
        
        CC QUY TC TI THNG:
        1. CH TR V CC HNG KCH BN. Khng c bt k cu dn nhp no.
        2. GI NGUYN 100% VN BN GC. Tuyt i khng xa b, khng chnh sa, khng thm bt bt k k t no.
        3. Tr v ng ${e} dng, mi dng l mt phn on logic.
        
        KCH BN:
        ${i}`;return((await r.generateContent(o)).response.text()||"").trim().split(`
`).filter(g=>g.trim().length>0)}),tO=async(i,e,n,r,o)=>wo(o,async c=>{const g=`Bn l ZenShot AI - Mt Visual Director k lut st . Nhim v ca bn l chuyn i kch bn thnh Image Prompts cho Midjourney.
    
    QUY TC CT LI (BT BUC TUN TH 100%):
    1. NH DNG: Mi prompt phi nm trn MT HNG DUY NHT (Single line). Khng xung dng bn trong mt prompt.
    2. KHNG TM TT: Copy-paste NGUYN VN m t nhn vt t d liu bn di.
    3. B NH TRNG THI:
       - Nu c thng tin cnh trc (Previous Context), hy k tha trang phc v bi cnh t  tr khi kch bn thay i.
       - Lun duy tr tnh nht qun v qun o v bi cnh cho cc phn on lin tip.
    4. CU TRC PROMPT (Vit lin thnh 1 on vn): 
       [Phong cch/Gc my] + [Hnh ng/Biu cm] + [Tn nhn vt: M t chi tit nguyn vn] + [Trang phc hin ti] + [Bi cnh chi tit] + --ar 16:9
    
    D LIU NHN VT:
    ${n.map(x=>`${x.name}: ${x.gender}, ${x.country}, ${x.age}, ${x.physique}. ${x.features}`).join(`
`)}
    
    PHONG CCH VISUAL:
    ${e}
    
    BI CNH/TRANG PHC CA CC TAG TRC (NU C):
    ${r||"Khng c cnh trc."}
    
    HY TO PROMPT CHO CC PHN ON SAU (Mi prompt 1 hng):
    ${i.map((x,E)=>`Row ${E+1}: ${x}`).join(`
`)}
    
    Ch tr v danh sch cc prompt. Mi prompt l 1 hng.`;return{prompts:((await c.generateContent(g)).response.text()||"").split(`
`).filter(x=>x.trim().length>0)}}),nO=async(i,e,n,r,o)=>wo(o,async c=>{const g=`Bn l o din hnh nh (Visual Director) chuyn v Video/Cinematic. Nhim v ca bn l phn tch ni dung on "Hook" v to Video Prompts (din t chuyn ng).
    
    YU CU CHI TIT:
    1. PHN TCH HNH NG: Mi hnh ng c th trong on Hook phi c mt prompt ring bit.
    2. NG B NHN VT: Copy-paste NGUYN VN m t nhn vt t d liu bn di khi nhn vt  xut hin trong hnh ng.
    3. CHUYN NG (MOTION): M t r loi chuyn ng (v d: "Slo-mo walking", "Cinematic drone shot following", "Close-up of facial expression change").
    4. BI CNH/TRANG PHC: K tha t thng tin bi cnh  cung cp.
    5. NH DNG: Mi prompt l 1 hng duy nht.
    
    CU TRC PROMPT:
    [Loi chuyn ng/Gc my] + [Hnh ng nhn vt] + [M t nhn vt chi tit] + [Trang phc & Bi cnh]
    
    D LIU NHN VT:
    ${n.map(p=>`${p.name}: ${p.gender}, ${p.country}, ${p.age}, ${p.physique}. ${p.features}`).join(`
`)}
    
    PHONG CCH VISUAL:
    ${e}
    
    BI CNH/TRANG PHC K THA:
    ${r||"T do sng to da trn khng kh chung."}
    
    NI DUNG ON HOOK CN X L:
    ${i}
    
    Ch tr v danh sch cc prompt video, mi prompt mt hng.`;return((await c.generateContent(g)).response.text()||"").split(`
`).filter(p=>p.trim().length>0)});let sO=class extends ce.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught error:",e,n)}render(){var e;return this.state.hasError?f.jsxs("div",{className:"p-8 m-8 bg-slate-900 border border-slate-700 rounded-3xl space-y-4 text-center text-white",children:[f.jsx("h2",{className:"text-xl font-bold text-rose-500",children:" xy ra li hin th"}),f.jsx("p",{className:"text-slate-300",children:(e=this.state.error)==null?void 0:e.message}),f.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"px-6 py-3 bg-white text-slate-900 font-bold rounded-xl hover:bg-slate-200 transition-all",children:"Th li"}),f.jsx("p",{className:"text-xs text-slate-500",children:"D liu vn c lu trong b nh tm."})]}):this.props.children}};const iO=({userId:i})=>{const[e,n]=ce.useState({visualStyle:"",script:"",characters:[],tags:[],hook:"",hookPrompts:[],isAnalyzing:!1,isProcessingScript:!1,isGeneratingHook:!1}),[r,o]=ce.useState(!1),[c,h]=ce.useState(!1),[g,v]=ce.useState(""),[p,x]=ce.useState(null),[E,A]=ce.useState(null),V=(Q,ae="info")=>{A({message:Q,type:ae}),setTimeout(()=>A(null),5e3)};ce.useEffect(()=>{if(i)try{const Q=`app_api_keys_${i}`,ae=localStorage.getItem(Q);if(ae){const D=JSON.parse(ae),de=atob(D.gemini||"").split(`
`).map(pe=>pe.trim()).filter(pe=>pe);v(de.join(`
`))}}catch(Q){console.error("Failed to load API key",Q)}},[i]);const G=ce.useRef(e.tags);ce.useEffect(()=>{G.current=e.tags},[e.tags]);const ne=Q=>new Promise(ae=>setTimeout(ae,Q)),B=async Q=>{var ee;const ae=(ee=Q.target.files)==null?void 0:ee[0];if(!ae)return;o(!0);const D=new FileReader;D.onload=async de=>{var M;const pe=(M=de.target)==null?void 0:M.result;x(pe);const je=pe.split(",")[1];try{const W=await Jj(je,g);n(le=>({...le,visualStyle:W}))}catch(W){V(`Li phn tch style: ${W.message||W}`,"error")}finally{o(!1)}},D.readAsDataURL(ae)},X=async()=>{if(e.script){n(Q=>({...Q,isProcessingScript:!0}));try{const Q=await Wj(e.script,g);n(ae=>({...ae,characters:Q,isProcessingScript:!1}))}catch(Q){V(`Li x l kch bn: ${Q.message||Q}`,"error"),n(ae=>({...ae,isProcessingScript:!1}))}}},J=Q=>{const ae=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf\uac00-\ud7af]/.test(Q),D=[];let ee=Q;const de=ae?1800:1200,pe=ae?2e3:1500,je=ae?[`
`,"","","",".","!","?"]:[`
`,".","!","?"];for(;ee.length>0;)if(ae){if(ee.length<=pe){D.push(ee);break}let M=ee.slice(de,pe),W=-1;for(const le of je){const fe=M.lastIndexOf(le);fe>W&&(W=fe)}if(W!==-1){const le=de+W+1;D.push(ee.slice(0,le)),ee=ee.slice(le)}else D.push(ee.slice(0,pe)),ee=ee.slice(pe)}else{const M=ee.split(/(\s+)/);let W=0,le=0,fe=-1,Te=!1;for(let Se=0;Se<M.length;Se++){const Oe=M[Se];/\S/.test(Oe)&&W++;const nt=le;if(le+=Oe.length,W>=de&&W<=pe&&je.some(wn=>Oe.includes(wn))&&(fe=le),W>pe){const wn=fe!==-1?fe:nt;D.push(ee.slice(0,wn)),ee=ee.slice(wn),Te=!0;break}}if(!Te){D.push(ee);break}}return D},ue=()=>{if(!e.script)return;const ae=J(e.script).map((D,ee)=>({id:`tag-${Date.now()}-${ee}`,originalContent:D,rows:[D],imageCount:10,prompts:[],status:"idle"}));n(D=>({...D,tags:ae}))},U=(Q,ae)=>{n(D=>({...D,tags:D.tags.map(ee=>ee.id===Q?{...ee,...ae}:ee)}))},K=(Q,ae)=>{n(D=>({...D,characters:D.characters.map((ee,de)=>de===Q?{...ee,...ae}:ee)}))},se=async Q=>{const ae=G.current.find(D=>D.id===Q);if(!ae)return!1;U(Q,{status:"splitting"});try{const D=await eO(ae.originalContent,ae.imageCount,g);return U(Q,{rows:D,status:"ready"}),!0}catch(D){return console.error(`Error splitting rows for TAG: ${Q}`,D),V(`Li chia hng: ${D.message||D}`,"error"),U(Q,{status:"idle"}),!1}},C=async Q=>{const ae=G.current,D=ae.findIndex(pe=>pe.id===Q);if(D===-1)return!1;const ee=ae[D];let de="";if(D>0){const pe=ae[D-1];pe&&pe.prompts.length>0&&(de=`y l prompt cui ca Tag trc  bn k tha bi cnh v trang phc: ${pe.prompts[pe.prompts.length-1]}`)}U(Q,{status:"generating"});try{const pe=await tO(ee.rows,e.visualStyle,e.characters,de,g);if(!pe.prompts||pe.prompts.length===0)throw new Error("Empty prompts generated");return U(Q,{prompts:pe.prompts,status:"ready"}),!0}catch(pe){return console.error(`Error generating prompts for TAG: ${Q}`,pe),U(Q,{status:"ready"}),!1}},S=async()=>{if(!e.hook||e.characters.length===0){V("Vui lng nhp ni dung Hook v m bo  phn tch nhn vt.","info");return}n(D=>({...D,isGeneratingHook:!0}));let Q="";const ae=e.tags[e.tags.length-1];ae&&ae.prompts.length>0&&(Q=`K tha bi cnh t prompt ny: ${ae.prompts[ae.prompts.length-1]}`);try{const D=await nO(e.hook,e.visualStyle,e.characters,Q,g);n(ee=>({...ee,hookPrompts:D,isGeneratingHook:!1}))}catch(D){V(`Li to Prompt Video Hook: ${D.message||D}`,"error"),n(ee=>({...ee,isGeneratingHook:!1}))}},R=async Q=>{const ae=e.tags.find(D=>D.id===Q);if(ae){U(Q,{status:"analyzing"});try{const D=await Zj(ae.originalContent,g);U(Q,{actionCount:D,status:"idle"})}catch(D){V(`Li phn tch hnh ng: ${D.message||D}`,"error"),U(Q,{status:"idle"})}}},j=async()=>{if(e.tags.length===0)return;h(!0);const Q=e.tags.map(ae=>ae.id);for(const ae of Q){if(!await se(ae)&&!await se(ae))break;await ne(15e3);let ee=await C(ae);if(ee||(await ne(15e3),ee=await C(ae)),!ee&&!confirm(`TAG ${ae} khng th to prompt sau 2 ln th. Bn c mun tip tc cc TAG sau khng?`))break;await ne(15e3)}h(!1),V("Hon thnh quy trnh t ng cho tt c cc TAG!","success")},O=()=>{const ae=e.tags.flatMap(D=>(D.status==="ready"||D.status==="generating"?D.rows.join(`
`):D.originalContent).split(`
`).map(de=>de.trim()).filter(de=>de.length>0)).join(`
`);navigator.clipboard.writeText(ae),V(" copy ton b kch bn ca tt c cc TAG!","success")},I=()=>{const Q=e.tags.flatMap(ae=>ae.prompts).map(ae=>ae.trim()).filter(ae=>ae.length>0).join(`
`);navigator.clipboard.writeText(Q),V(" copy ton b Prompt ca tt c cc TAG!","success")},N=()=>{const Q=e.hookPrompts.join(`
`);navigator.clipboard.writeText(Q),V(" copy Prompt Video cho Hook!","success")};return f.jsx(sO,{children:f.jsxs("div",{className:"flex h-screen bg-slate-50 overflow-hidden text-slate-900 w-full relative",children:[E&&f.jsx("div",{className:"absolute top-4 right-4 z-50 animate-in slide-in-from-right fade-in duration-300",children:f.jsxs("div",{className:`px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-3 font-bold text-sm ${E.type==="error"?"bg-rose-50 text-rose-600 border border-rose-100":E.type==="success"?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-white text-slate-700 border border-slate-100"}`,children:[E.type==="success"&&f.jsx(kT,{className:"w-5 h-5"}),E.type==="error"&&f.jsx(MT,{className:"w-5 h-5"}),E.message]})}),f.jsxs("aside",{className:"w-[30%] bg-white border-r border-slate-200 overflow-y-auto p-6 space-y-8 flex flex-col shrink-0",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg",children:f.jsx(Oj,{className:"text-white w-6 h-6"})}),f.jsx("h1",{className:"text-xl font-black text-slate-800 tracking-tight uppercase",children:"ZenShot AI"})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-slate-500 uppercase tracking-widest",children:[f.jsx(Ab,{className:"w-3.5 h-3.5"})," Phong cch hnh nh"]}),f.jsxs("div",{className:`border-2 border-dashed border-slate-200 rounded-xl p-4 transition hover:border-indigo-400 bg-slate-50/50 relative group overflow-hidden ${p?"border-none p-0":""}`,children:[f.jsx("input",{type:"file",accept:"image/*",onChange:B,className:"hidden",id:"image-upload"}),f.jsx("label",{htmlFor:"image-upload",className:`cursor-pointer flex flex-col items-center justify-center gap-2 py-2 w-full h-full ${p?"p-0":""}`,children:r?f.jsxs("div",{className:"py-8 flex flex-col items-center",children:[f.jsx(Fr,{className:"animate-spin text-indigo-500 w-8 h-8"}),f.jsx("span",{className:"text-[10px] text-indigo-500 font-bold mt-2 uppercase tracking-wider",children:"ang phn tch..."})]}):p?f.jsxs("div",{className:"relative w-full h-48",children:[f.jsx("img",{src:p,alt:"Style Reference",className:"w-full h-full object-cover rounded-lg shadow-sm"}),f.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-lg",children:f.jsxs("div",{className:"flex items-center gap-2 text-white text-xs font-bold uppercase tracking-widest bg-black/50 px-3 py-2 rounded-full backdrop-blur-sm border border-white/20",children:[f.jsx(Nb,{className:"w-3 h-3"})," Thay i nh"]})})]}):f.jsxs(f.Fragment,{children:[f.jsx(Nb,{className:"text-slate-400 w-6 h-6"}),f.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-tighter",children:"Phn tch phong cch qua nh"})]})})]}),f.jsx("textarea",{className:"w-full h-24 p-3 text-sm bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none transition placeholder:italic",placeholder:"Phong cch chi tit s hin  y...",value:e.visualStyle,onChange:Q=>n(ae=>({...ae,visualStyle:Q.target.value}))})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("label",{className:"flex items-center gap-2 text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Nhp kch bn chnh"}),f.jsx("textarea",{className:"w-full h-40 p-3 text-sm border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none transition leading-relaxed",placeholder:"Dn kch bn ca bn vo y...",value:e.script,onChange:Q=>n(ae=>({...ae,script:Q.target.value}))}),f.jsxs("button",{onClick:X,disabled:e.isProcessingScript||!e.script,className:"w-full flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-300 text-white font-bold py-3.5 px-4 rounded-xl transition shadow-lg shadow-indigo-100 uppercase text-xs tracking-widest",children:[e.isProcessingScript?f.jsx(Fr,{className:"animate-spin w-4 h-4"}):f.jsx(OT,{className:"w-4 h-4 fill-current"}),"Bt u phn tch kch bn"]})]}),e.characters.length>0&&f.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-100",children:[f.jsx("label",{className:"flex items-center gap-2 text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Thng tin nhn vt (C th chnh sa)"}),f.jsx("div",{className:"space-y-4 max-h-[500px] overflow-y-auto pr-1",children:e.characters.map((Q,ae)=>f.jsxs("div",{className:"p-4 bg-white rounded-xl border border-slate-200 shadow-sm relative overflow-hidden transition hover:border-indigo-300 group",children:[f.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-indigo-500"}),f.jsxs("div",{className:"flex flex-col gap-2",children:[f.jsx("input",{className:"font-black text-slate-800 text-[11px] uppercase bg-transparent border-none p-0 focus:ring-0",value:Q.name,onChange:D=>K(ae,{name:D.target.value})}),f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[f.jsx("input",{className:"text-[10px] bg-slate-50 border border-slate-100 rounded px-2 py-1 focus:ring-1 focus:ring-indigo-400",value:Q.gender,placeholder:"Gender",onChange:D=>K(ae,{gender:D.target.value})}),f.jsx("input",{className:"text-[10px] bg-slate-50 border border-slate-100 rounded px-2 py-1 focus:ring-1 focus:ring-indigo-400",value:Q.age,placeholder:"Age",onChange:D=>K(ae,{age:D.target.value})})]}),f.jsx("textarea",{className:"text-[10px] text-slate-700 leading-relaxed font-medium bg-slate-50 border border-slate-100 rounded p-2 focus:ring-1 focus:ring-indigo-400 resize-none h-20",value:Q.features,onChange:D=>K(ae,{features:D.target.value})})]})]},ae))})]}),f.jsx("div",{className:"mt-auto pt-6",children:f.jsxs("button",{onClick:ue,disabled:!e.script,className:"w-full flex items-center justify-center gap-2 bg-slate-800 hover:bg-slate-900 text-white font-bold py-3.5 px-4 rounded-xl transition uppercase text-xs tracking-widest",children:[f.jsx(DT,{className:"w-4 h-4"}),"Chia kch bn sang TAG"]})})]}),f.jsxs("main",{className:"flex-1 overflow-y-auto bg-slate-50 scroll-smooth flex flex-col",children:[e.tags.length>0&&f.jsxs("div",{className:"sticky top-0 z-10 bg-white/80 backdrop-blur-md border-b border-slate-200 px-8 py-4 flex items-center justify-between shadow-sm",children:[f.jsx("div",{className:"flex items-center gap-3",children:f.jsxs("button",{onClick:j,disabled:c,className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-300 text-white px-5 py-2.5 rounded-xl font-black text-[11px] uppercase tracking-widest shadow-lg shadow-indigo-100 transition-all active:scale-95",children:[c?f.jsx(Fr,{className:"animate-spin w-4 h-4"}):f.jsx(Cb,{className:"w-4 h-4 fill-amber-400 text-amber-400"}),"T ng Hon Ton"]})}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("button",{onClick:O,className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-900 text-white px-5 py-2.5 rounded-xl font-black text-[11px] uppercase tracking-widest transition-all active:scale-95",children:[f.jsx(Vj,{className:"w-4 h-4"}),"Copy All Kch Bn"]}),f.jsxs("button",{onClick:I,className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-900 text-white px-5 py-2.5 rounded-xl font-black text-[11px] uppercase tracking-widest transition-all active:scale-95",children:[f.jsx(zj,{className:"w-4 h-4"}),"Copy All Prompt nh"]})]})]}),f.jsx("div",{className:"max-w-4xl mx-auto space-y-8 p-8 w-full",children:e.tags.length===0?f.jsxs("div",{className:"h-[70vh] flex flex-col items-center justify-center text-slate-300 space-y-6",children:[f.jsx("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center shadow-sm border border-slate-100",children:f.jsx(Ab,{className:"w-10 h-10 opacity-40"})}),f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-xl font-bold text-slate-400",children:"ZenShot Visual Director"}),f.jsx("p",{className:"text-sm text-slate-400 mt-1 uppercase tracking-widest font-bold opacity-60",children:"Split script and start generating prompts"})]})]}):f.jsxs(f.Fragment,{children:[e.tags.map((Q,ae)=>f.jsx(rO,{tag:Q,index:ae,onSplit:()=>se(Q.id),onAnalyze:()=>R(Q.id),onGenerate:()=>C(Q.id),onUpdateCount:D=>U(Q.id,{imageCount:D}),onCopy:()=>{const D=Q.prompts.map(ee=>ee.trim()).join(`
`);navigator.clipboard.writeText(D),V("Copied prompts for this TAG!","success")},onUpdateContent:D=>U(Q.id,{originalContent:D}),onDelete:()=>n(D=>({...D,tags:D.tags.filter(ee=>ee.id!==Q.id)}))},Q.id)),f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden transition hover:shadow-lg mt-12 mb-20 p-8 space-y-6",children:[f.jsxs("div",{className:"flex items-center justify-between border-b border-slate-50 pb-4",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("span",{className:"bg-amber-500 text-white text-[10px] font-black px-3 py-1 rounded-full uppercase tracking-widest",children:"VIDEO HOOK"}),f.jsx("h2",{className:"text-sm font-black text-slate-800 uppercase tracking-widest",children:"Phn tch chuyn ng"})]}),f.jsx($j,{className:"w-5 h-5 text-slate-300"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Ni dung on Hook"}),f.jsx("textarea",{className:"w-full h-40 p-4 text-sm bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:outline-none resize-none leading-relaxed transition font-medium",placeholder:"Nhp ni dung on Hook kch bn ti y...",value:e.hook,onChange:Q=>n(ae=>({...ae,hook:Q.target.value}))})]}),e.hookPrompts.length>0&&f.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Prompts Video Chuyn ng"}),f.jsxs("button",{onClick:N,className:"flex items-center gap-1.5 text-amber-600 hover:text-amber-700 text-[10px] font-black px-4 py-2 bg-amber-50 rounded-xl transition uppercase tracking-widest shadow-sm shadow-amber-50",children:[f.jsx(jT,{className:"w-3.5 h-3.5"})," Copy Hook Prompts"]})]}),f.jsx("div",{className:"space-y-4",children:e.hookPrompts.map((Q,ae)=>f.jsxs("div",{className:"p-4 bg-slate-900 rounded-xl border border-slate-800 relative group transition hover:border-amber-500 shadow-lg",children:[f.jsx("div",{className:"absolute -left-3 top-4 w-7 h-7 bg-amber-500 text-white flex items-center justify-center text-[10px] font-black rounded-full border-2 border-slate-50 shadow-md",children:ae+1}),f.jsx("p",{className:"text-slate-300 text-[11px] font-mono break-words leading-relaxed pl-4",children:Q})]},ae))})]}),f.jsxs("button",{onClick:S,disabled:e.isGeneratingHook||!e.hook,className:"w-full flex items-center justify-center gap-2 bg-slate-800 hover:bg-slate-900 disabled:bg-slate-300 text-white font-black py-4.5 rounded-2xl transition shadow-xl shadow-slate-200 uppercase text-xs tracking-[0.2em]",children:[e.isGeneratingHook?f.jsx(Fr,{className:"animate-spin w-5 h-5"}):f.jsx(Cb,{className:"w-5 h-5 fill-amber-400 text-amber-400"}),"To Prompt Video"]})]})]})})]})]})})},rO=({tag:i,index:e,onSplit:n,onAnalyze:r,onGenerate:o,onUpdateCount:c,onCopy:h,onUpdateContent:g,onDelete:v})=>f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden transition hover:shadow-lg",children:[f.jsxs("div",{className:"px-6 py-4 bg-slate-50/80 border-b border-slate-100 flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("span",{className:"bg-slate-800 text-white text-[10px] font-black px-3 py-1 rounded-full uppercase tracking-widest",children:["TAG ",e+1]}),f.jsxs("span",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:[i.originalContent.length," k t"]})]}),f.jsx("button",{onClick:v,className:"text-slate-300 hover:text-red-500 transition p-1",children:f.jsx(MT,{className:"w-4 h-4"})})]}),f.jsxs("div",{className:"p-6 space-y-6",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Kch bn phn on"}),f.jsxs("div",{className:"relative group",children:[f.jsx("textarea",{className:"w-full h-40 p-4 text-sm bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:outline-none resize-none leading-relaxed transition font-medium",value:i.status==="ready"||i.status==="generating"?i.rows.join(`
`):i.originalContent,readOnly:i.status==="ready"||i.status==="generating",onChange:p=>g(p.target.value)}),(i.status==="ready"||i.status==="generating")&&i.rows.length>1&&f.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-1.5 bg-white text-emerald-600 px-3 py-1.5 rounded-lg text-[10px] font-black border border-emerald-100 shadow-sm uppercase",children:[f.jsx(kT,{className:"w-3 h-3"})," Chia hng xong"]})]})]}),f.jsxs("div",{className:"flex flex-wrap gap-6 items-end border-y border-slate-50 py-4",children:[f.jsxs("div",{className:"flex-1 space-y-2",children:[f.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[f.jsx(kj,{className:"w-3 h-3"})," Phn tch hnh ng"]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("button",{onClick:r,disabled:i.status==="analyzing",className:"flex items-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-800 text-[10px] font-black rounded-lg transition uppercase tracking-widest",children:i.status==="analyzing"?f.jsx(Fr,{className:"animate-spin w-3 h-3"}):"Phn tch"}),i.actionCount!==void 0&&f.jsxs("div",{className:"flex items-center gap-1.5 text-indigo-600 font-black text-sm",children:[f.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:"S hnh ng:"})," ",i.actionCount]})]})]}),f.jsxs("div",{className:"w-40 space-y-2",children:[f.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"S lng nh"}),f.jsxs("div",{className:"relative flex items-center",children:[f.jsx("button",{onClick:()=>c(Math.max(1,i.imageCount-1)),className:"absolute left-1 w-7 h-7 flex items-center justify-center bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-lg font-bold",children:"-"}),f.jsx("input",{type:"number",min:"1",max:"100",className:"w-full h-10 px-8 text-center border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:outline-none font-bold text-slate-700",value:i.imageCount,onChange:p=>c(parseInt(p.target.value)||1)}),f.jsx("button",{onClick:()=>c(i.imageCount+1),className:"absolute right-1 w-7 h-7 flex items-center justify-center bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-lg font-bold",children:"+"})]})]}),f.jsxs("button",{onClick:n,disabled:i.status==="splitting",className:"h-10 px-6 flex items-center justify-center gap-2 bg-slate-800 hover:bg-slate-900 text-white font-bold rounded-xl transition uppercase text-[10px] tracking-widest shadow-sm",children:[i.status==="splitting"?f.jsx(Fr,{className:"animate-spin w-3 h-3"}):f.jsx(DT,{className:"w-3 h-3"}),"Chia hng"]})]}),i.prompts.length>0&&f.jsxs("div",{className:"space-y-4 pt-6",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Prompts Midjourney"}),f.jsxs("button",{onClick:h,className:"flex items-center gap-1.5 text-indigo-600 hover:text-indigo-700 text-[10px] font-black px-4 py-2 bg-indigo-50 rounded-xl transition uppercase tracking-widest shadow-sm shadow-indigo-50",children:[f.jsx(jT,{className:"w-3.5 h-3.5"})," Sao chp Tag ny"]})]}),f.jsx("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar",children:i.prompts.map((p,x)=>f.jsxs("div",{className:"p-4 bg-slate-900 rounded-xl border border-slate-800 relative group transition hover:border-indigo-500 shadow-lg",children:[f.jsx("div",{className:"absolute -left-3 top-4 w-7 h-7 bg-indigo-600 text-white flex items-center justify-center text-[10px] font-black rounded-full border-2 border-slate-50 shadow-md",children:x+1}),f.jsx("p",{className:"text-slate-300 text-[11px] font-mono break-words leading-relaxed pl-4",children:p})]},x))})]}),f.jsxs("button",{onClick:o,disabled:i.status==="generating",className:"w-full flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-300 text-white font-black py-4.5 rounded-2xl transition shadow-xl shadow-indigo-200 uppercase text-xs tracking-[0.2em]",children:[i.status==="generating"?f.jsx(Fr,{className:"animate-spin w-5 h-5"}):f.jsx(OT,{className:"w-5 h-5 fill-current"}),"To Prompt nh"]})]})]}),aO=({value:i,onChange:e,className:n=""})=>{const r=ce.useRef(null);ce.useEffect(()=>{r.current&&r.current.innerHTML!==i&&(r.current.innerHTML=i)},[]);const o=(h,g=void 0)=>{document.execCommand(h,!1,g),c()},c=()=>{r.current&&e(r.current.innerHTML)};return f.jsxs("div",{className:`border border-slate-700 rounded-lg overflow-hidden flex flex-col ${n}`,children:[f.jsxs("div",{className:"bg-slate-800 border-b border-slate-700 p-2 flex gap-1 flex-wrap",children:[f.jsx("button",{onClick:()=>o("bold"),className:"p-1 px-2 text-slate-300 hover:bg-white/10 rounded font-bold",type:"button",title:"Bold",children:"B"}),f.jsx("button",{onClick:()=>o("italic"),className:"p-1 px-2 text-slate-300 hover:bg-white/10 rounded italic",type:"button",title:"Italic",children:"I"}),f.jsx("button",{onClick:()=>o("underline"),className:"p-1 px-2 text-slate-300 hover:bg-white/10 rounded underline",type:"button",title:"Underline",children:"U"}),f.jsx("div",{className:"w-px h-6 bg-slate-600 mx-1 self-center"}),f.jsx("button",{onClick:()=>o("justifyLeft"),className:"p-1 px-2 text-slate-300 hover:bg-white/10 rounded",type:"button",title:"Align Left",children:""}),f.jsx("button",{onClick:()=>o("justifyCenter"),className:"p-1 px-2 text-slate-300 hover:bg-white/10 rounded",type:"button",title:"Align Center",children:""}),f.jsx("button",{onClick:()=>o("justifyRight"),className:"p-1 px-2 text-slate-300 hover:bg-white/10 rounded",type:"button",title:"Align Right",children:""}),f.jsx("div",{className:"w-px h-6 bg-slate-600 mx-1 self-center"}),f.jsx("button",{onClick:()=>{const h=prompt("Nhp ng dn URL:");h&&o("createLink",h)},className:"p-1 px-2 text-slate-300 hover:bg-white/10 rounded text-blue-400",type:"button",title:"Link",children:"Link"}),f.jsxs("select",{onChange:h=>o("formatBlock",h.target.value),className:"bg-slate-700 text-white text-xs rounded px-2 py-1 outline-none border border-slate-600",children:[f.jsx("option",{value:"p",children:"Normal"}),f.jsx("option",{value:"h3",children:"Heading 1"}),f.jsx("option",{value:"h4",children:"Heading 2"}),f.jsx("option",{value:"blockquote",children:"Quote"})]})]}),f.jsx("div",{ref:r,contentEditable:!0,onInput:c,className:"flex-grow bg-slate-900 text-white p-4 outline-none min-h-[150px] overflow-auto prose prose-invert prose-sm max-w-none"})]})},oO=({user:i,onNavigate:e})=>{var O;const[n,r]=ce.useState({layout:"modern",news:[],welcomeTitle:"",welcomeMessage:"",statusTitle:"",statusMessage:""}),[o,c]=ce.useState(!1),[h,g]=ce.useState({}),[v,p]=ce.useState(!1),[x,E]=ce.useState(null);ce.useEffect(()=>{const I=localStorage.getItem("app_settings");if(I)r(JSON.parse(I));else{const N=[{id:"1",title:"Cho mng n vi Quang Huy Studio",content:"<p>H thng <b>Multi-App Engine</b>  chnh thc vn hnh. Hy chn ng dng  bt u!</p>",date:Date.now(),author:"System"}];r({layout:"modern",news:N,welcomeTitle:"Cho mng, {username}!",welcomeMessage:"H thng AI Studio cung cp cc cng c ti tn nht  t ng ha quy trnh sng to ni dung ca bn.",statusTitle:"Stable",statusMessage:"Tt c dch v API ang hot ng bnh thng.",zaloPhone:"0987654321",sidebarWidgets:[{id:"w1",type:"status",title:"Trng thi",order:0},{id:"w2",type:"shortcuts",title:"Li tt",order:1}]})}},[]),ce.useEffect(()=>{o&&E(n)},[o,n]);const A=I=>{r(I),localStorage.setItem("app_settings",JSON.stringify(I))},V=()=>{x&&(A(x),alert(" lu cu hnh thnh cng!"))},G=(I,N)=>{x&&E({...x,[I]:N})},ne=()=>{if(!h.title||!h.content)return;const I={id:h.id||crypto.randomUUID(),title:h.title,content:h.content,date:h.date||Date.now(),author:i.username};let N=[...n.news];h.id?N=N.map(Q=>Q.id===h.id?I:Q):N=[I,...N],A({...n,news:N}),p(!1),g({})},B=I=>{if(confirm("Bn c chc mun xa tin tc ny?")){const N=n.news.filter(Q=>Q.id!==I);A({...n,news:N})}},X=I=>new Date(I).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric"}),J=I=>I?I.replace("{username}",i.username||"User"):"",ue=(I,N)=>{if(!x)return;const Q=[...x.sidebarWidgets||[]];N==="up"&&I>0?[Q[I],Q[I-1]]=[Q[I-1],Q[I]]:N==="down"&&I<Q.length-1&&([Q[I],Q[I+1]]=[Q[I+1],Q[I]]),G("sidebarWidgets",Q)},U=()=>{var N;if(!x)return;const I={id:crypto.randomUUID(),type:"custom",title:"Tiu  mi",content:"<p>Ni dung ty chnh...</p>",order:((N=x.sidebarWidgets)==null?void 0:N.length)||0};G("sidebarWidgets",[...x.sidebarWidgets||[],I])},K=I=>{var N;if(x&&confirm("Xa widget ny?")){const Q=((N=x.sidebarWidgets)==null?void 0:N.filter(ae=>ae.id!==I))||[];G("sidebarWidgets",Q)}},se=(I,N,Q)=>{var D;if(!x)return;const ae=((D=x.sidebarWidgets)==null?void 0:D.map(ee=>ee.id===I?{...ee,[N]:Q}:ee))||[];G("sidebarWidgets",ae)},C=(I,N)=>{const Q=[...n.news];N==="up"&&I>0?[Q[I],Q[I-1]]=[Q[I-1],Q[I]]:N==="down"&&I<Q.length-1&&([Q[I],Q[I+1]]=[Q[I+1],Q[I]]),A({...n,news:Q})},S=({news:I,formatDate:N})=>{const[Q,ae]=ce.useState(!1),de=(je=>{const M=document.createElement("DIV");return M.innerHTML=je,M.textContent||M.innerText||""})(I.content).split(/\s+/).filter(je=>je.length>0),pe=de.length>50;return f.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:[f.jsx("h3",{className:"text-xl font-bold text-indigo-700 mb-2",children:I.title}),f.jsxs("div",{className:"text-xs text-gray-400 mb-4",children:[N(I.date)," | Bi ",I.author]}),f.jsx("div",{className:`prose prose-slate max-w-none ${!Q&&pe?"line-clamp-3":""}`,children:Q||!pe?f.jsx("div",{dangerouslySetInnerHTML:{__html:I.content}}):f.jsx("div",{children:f.jsxs("p",{children:[de.slice(0,50).join(" "),"..."]})})}),pe&&f.jsx("button",{onClick:()=>ae(!Q),className:"mt-3 text-sm font-bold text-indigo-600 hover:text-indigo-800 underline decoration-2 underline-offset-4",children:Q?"Thu gn":"Xem thm"})]})},R=()=>f.jsxs("div",{className:"flex flex-col h-full overflow-y-auto",children:[n.zaloPhone&&f.jsxs("a",{href:`https://zalo.me/${n.zaloPhone}`,target:"_blank",rel:"noreferrer",className:"fixed bottom-24 right-6 z-40 bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full shadow-lg flex items-center gap-2 animate-bounce transition-transform hover:scale-110",title:"Chat Zalo",children:[f.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"currentColor",children:f.jsx("path",{d:"M12 2C6.48 2 2 5.92 2 10.5c0 2.37 1.17 4.54 3.12 6.13-.15.86-.54 1.95-1.42 2.62-.23.18-.08.57.21.57 2.39 0 4.19-1.29 4.88-1.93.7.13 1.43.21 2.21.21 5.52 0 10-3.92 10-8.5S17.52 2 12 2zm0 15c-.71 0-1.39-.07-2.04-.2-.27-.05-.54.04-.73.23-.74.72-2.12 1.58-3.73 1.66.44-.8 1.05-2.22 1.05-2.22.06-.16.03-.35-.09-.48C4.94 14.54 4 12.63 4 10.5 4 7.02 7.7 4 12 4s8 3.02 8 6.5-3.7 6.5-8 6.5z"})}),f.jsx("span",{className:"font-bold text-xs",children:n.zaloPhone})]}),f.jsxs("div",{className:"relative py-24 px-6 md:px-12 text-center overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-900 via-[#0f172a] to-slate-900 z-0"}),f.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 z-0"}),f.jsxs("div",{className:"relative z-10 space-y-6 max-w-4xl mx-auto",children:[f.jsx("span",{className:"inline-block py-1 px-3 rounded-full bg-indigo-500/20 border border-indigo-400/30 text-indigo-300 text-xs font-bold uppercase tracking-widest animate-in fade-in slide-in-from-bottom-4",children:"H thng iu hnh AI tp trung"}),f.jsx("h1",{className:"text-5xl md:text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-indigo-200 to-indigo-400 leading-tight drop-shadow-2xl animate-in zoom-in-95 duration-700",children:n.welcomeTitle?J(n.welcomeTitle):"QUANG HUY AI STUDIO"}),f.jsx("p",{className:"text-lg md:text-xl text-slate-400 font-light max-w-2xl mx-auto leading-relaxed animate-in fade-in slide-in-from-bottom-6 delay-200",children:n.welcomeMessage||"Nn tng tch hp a cng c mnh m, gip bn ti u ha quy trnh sng to Video v Hnh nh Viral ch vi mt c click."}),f.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 pt-8 animate-in fade-in slide-in-from-bottom-8 delay-300",children:[f.jsxs("button",{onClick:()=>e("video-viral"),className:"group relative px-8 py-4 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-2xl shadow-xl shadow-indigo-600/20 transition-all hover:-translate-y-1 active:scale-95 overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300 transform skew-y-12"}),"VIDEO VIRAL ENGINE"]}),f.jsx("button",{onClick:()=>e("image-script"),className:"px-8 py-4 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-white font-bold rounded-2xl shadow-xl transition-all hover:-translate-y-1 active:scale-95",children:"VISUAL SCRIPT ENGINE"})]})]})]}),f.jsxs("div",{className:"max-w-5xl mx-auto w-full px-6 py-16 space-y-12",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("h2",{className:"text-2xl font-bold text-gray-800 border-l-4 border-indigo-600 pl-4 uppercase tracking-wider",children:"Tin Tc Mi Nht"}),f.jsx("div",{className:"h-px bg-gray-200 flex-grow"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[n.news.map(I=>f.jsxs("div",{className:"group bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-2xl hover:border-indigo-100 transition-all",children:[f.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400 mb-4 font-bold uppercase tracking-wider",children:[f.jsx("span",{children:X(I.date)}),f.jsx("span",{className:"text-indigo-500",children:I.author})]}),f.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3 group-hover:text-indigo-600 transition-colors line-clamp-2",children:I.title}),f.jsx("div",{className:"prose prose-sm text-gray-500 line-clamp-4",dangerouslySetInnerHTML:{__html:I.content}}),f.jsxs("button",{className:"mt-6 text-sm font-bold text-indigo-600 hover:text-indigo-800 flex items-center gap-2 group/btn",children:["Xem chi tit",f.jsx("svg",{className:"w-4 h-4 group-hover/btn:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})]},I.id)),n.news.length===0&&f.jsx("p",{className:"text-gray-400 italic",children:"Cha c tin tc no."})]})]})]}),j=()=>{var I;return f.jsxs("div",{className:"h-full overflow-y-auto bg-gray-50",children:[n.zaloPhone&&f.jsxs("a",{href:`https://zalo.me/${n.zaloPhone}`,target:"_blank",rel:"noreferrer",className:"fixed bottom-24 right-6 z-40 bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-full shadow-lg flex items-center gap-2 animate-bounce transition-transform hover:scale-110",title:"Chat Zalo",children:[f.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"currentColor",children:f.jsx("path",{d:"M12 2C6.48 2 2 5.92 2 10.5c0 2.37 1.17 4.54 3.12 6.13-.15.86-.54 1.95-1.42 2.62-.23.18-.08.57.21.57 2.39 0 4.19-1.29 4.88-1.93.7.13 1.43.21 2.21.21 5.52 0 10-3.92 10-8.5S17.52 2 12 2zm0 15c-.71 0-1.39-.07-2.04-.2-.27-.05-.54.04-.73.23-.74.72-2.12 1.58-3.73 1.66.44-.8 1.05-2.22 1.05-2.22.06-.16.03-.35-.09-.48C4.94 14.54 4 12.63 4 10.5 4 7.02 7.7 4 12 4s8 3.02 8 6.5-3.7 6.5-8 6.5z"})}),f.jsxs("span",{className:"font-bold text-sm",children:["H tr: ",n.zaloPhone]})]}),f.jsx("div",{className:"max-w-6xl mx-auto px-6 py-12",children:f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[f.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[f.jsxs("div",{className:"bg-white rounded-3xl p-10 shadow-xl border border-gray-100 relative overflow-hidden",children:[f.jsx("div",{className:"absolute top-0 right-0 p-8 w-64 opacity-10",children:f.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zm0 9l2.5-1.25L12 8.5l-2.5 1.25L12 11zm0 2.5l-5-2.5-5 2.5L12 22l10-8.5-5-2.5-5 2.5z"})})}),f.jsx("h1",{className:"text-4xl font-black text-gray-900 mb-6",children:J(n.welcomeTitle)||`Cho mng, ${i.username}!`}),f.jsx("p",{className:"text-lg text-gray-600 mb-8 leading-relaxed",children:n.welcomeMessage||"H thng AI Studio cung cp cc cng c ti tn nht  t ng ha quy trnh sng to ni dung ca bn."}),f.jsx("div",{className:"flex flex-wrap gap-4"})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Cp nht h thng"}),n.news.map(N=>f.jsx(S,{news:N,formatDate:X},N.id))]})]}),f.jsx("div",{className:"space-y-6",children:(I=n.sidebarWidgets)==null?void 0:I.map(N=>f.jsxs("div",{className:`${N.type==="status"?"bg-gradient-to-br from-indigo-500 to-purple-600 text-white":"bg-white text-gray-800 border-gray-100"} rounded-3xl p-8 shadow-xl border`,children:[f.jsx("h3",{className:"text-lg font-bold uppercase tracking-widest mb-4 opacity-80",children:N.title}),N.type==="status"&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"text-4xl font-black mb-4",children:n.statusTitle||"Stable"}),f.jsx("p",{className:"text-sm opacity-90",children:n.statusMessage||"Tt c dch v API ang hot ng bnh thng."})]}),N.type==="shortcuts"&&f.jsxs("ul",{className:"space-y-3 text-sm text-gray-600",children:[f.jsxs("li",{className:"flex items-center gap-2 cursor-pointer hover:text-indigo-600",children:[f.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})," User Guide"]}),f.jsxs("li",{className:"flex items-center gap-2 cursor-pointer hover:text-indigo-600",children:[f.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"})," API Docs"]}),f.jsxs("li",{className:"flex items-center gap-2 cursor-pointer hover:text-indigo-600",children:[f.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-500"})," Support"]})]}),N.type==="custom"&&N.content&&f.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:N.content}})]},N.id))})]})})]})};return f.jsxs("div",{className:"relative h-full w-full bg-slate-50",children:[n.layout==="modern"&&f.jsx(R,{}),n.layout==="classic"&&f.jsx(j,{}),n.layout==="news-focus"&&f.jsx(j,{})," ",i.role==="admin"&&f.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:f.jsx("button",{onClick:()=>c(!0),className:"w-14 h-14 bg-red-600 hover:bg-red-700 text-white rounded-full shadow-2xl flex items-center justify-center transition-transform hover:scale-110 active:scale-95",title:"Qun tr trang ch",children:f.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),o&&f.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[200] flex items-center justify-center p-6",children:f.jsxs("div",{className:"bg-[#1e293b] w-full max-w-4xl h-[90vh] rounded-2xl border border-white/10 shadow-2xl flex flex-col animate-in zoom-in-95",children:[f.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-white/10",children:[f.jsx("h2",{className:"text-xl font-bold text-white uppercase tracking-widest",children:"Cu hnh Trang Ch"}),f.jsx("button",{onClick:()=>c(!1),className:"text-slate-400 hover:text-white",children:f.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"flex-grow flex overflow-hidden",children:[f.jsxs("div",{className:"w-1/3 bg-black/20 p-6 border-r border-white/5 space-y-8 overflow-y-auto flex flex-col",children:[f.jsxs("div",{className:"flex-grow space-y-8",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-3",children:"Chn B Cc (Layout)"}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{onClick:()=>G("layout","modern"),className:`p-4 rounded-xl border-2 cursor-pointer transition-all ${(x==null?void 0:x.layout)==="modern"?"border-indigo-500 bg-indigo-500/10":"border-slate-700 hover:border-slate-500"}`,children:[f.jsx("div",{className:"font-bold text-white text-sm mb-1",children:"Modern Visual (Default)"}),f.jsx("div",{className:"text-xs text-slate-400",children:"Hero ln, nn ng, card trong sut."})]}),f.jsxs("div",{onClick:()=>G("layout","classic"),className:`p-4 rounded-xl border-2 cursor-pointer transition-all ${(x==null?void 0:x.layout)==="classic"?"border-indigo-500 bg-indigo-500/10":"border-slate-700 hover:border-slate-500"}`,children:[f.jsx("div",{className:"font-bold text-white text-sm mb-1",children:"Classic Dashboard"}),f.jsx("div",{className:"text-xs text-slate-400",children:"Gn gng, tp trung thng tin."})]})]})]}),f.jsx("hr",{className:"border-white/10"}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-3",children:"Thng tin Zalo (0 n)"}),f.jsx("input",{type:"text",value:(x==null?void 0:x.zaloPhone)||"",onChange:I=>G("zaloPhone",I.target.value),placeholder:"ST Zalo (V d: 0987654321)",className:"w-full bg-slate-800 border-slate-700 text-white p-2 rounded text-sm"})]}),f.jsx("hr",{className:"border-white/10"}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-center mb-3",children:[f.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400",children:"Qun l Ct Bn Phi"}),f.jsx("button",{onClick:U,className:"text-xs bg-indigo-600 px-2 py-1 rounded text-white hover:bg-indigo-700",children:"+ Thm Ct"})]}),f.jsx("div",{className:"space-y-3",children:(O=x==null?void 0:x.sidebarWidgets)==null?void 0:O.map((I,N)=>{var Q;return f.jsxs("div",{className:"bg-slate-800 p-3 rounded-lg border border-slate-700",children:[f.jsxs("div",{className:"flex justify-between items-center mb-2",children:[f.jsxs("span",{className:"text-xs font-bold text-slate-300",children:["#",N+1," - ",I.type==="custom"?"Ty chnh":I.title]}),f.jsxs("div",{className:"flex gap-1",children:[f.jsx("button",{onClick:()=>ue(N,"up"),disabled:N===0,className:"p-1 text-slate-400 hover:text-white disabled:opacity-30",children:""}),f.jsx("button",{onClick:()=>ue(N,"down"),disabled:N===(((Q=x.sidebarWidgets)==null?void 0:Q.length)||0)-1,className:"p-1 text-slate-400 hover:text-white disabled:opacity-30",children:""}),f.jsx("button",{onClick:()=>K(I.id),className:"p-1 text-red-400 hover:text-red-300",children:""})]})]}),f.jsx("input",{type:"text",value:I.title,onChange:ae=>se(I.id,"title",ae.target.value),className:"w-full bg-slate-900 border border-slate-700 text-white p-1 rounded text-xs mb-2",placeholder:"Tiu  widget..."}),I.type==="custom"&&f.jsx("textarea",{value:I.content||"",onChange:ae=>se(I.id,"content",ae.target.value),className:"w-full bg-slate-900 border border-slate-700 text-white p-1 rounded text-xs h-16",placeholder:"Ni dung HTML..."})]},I.id)})})]}),f.jsx("hr",{className:"border-white/10"}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-3",children:"Ni dung Cho mng"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsxs("label",{className:"text-xs text-slate-500 block mb-1",children:["Tiu  (dng ","{username}","  chn tn)"]}),f.jsx("input",{type:"text",value:(x==null?void 0:x.welcomeTitle)||"",onChange:I=>G("welcomeTitle",I.target.value),placeholder:"Cho mng, {username}!",className:"w-full bg-slate-800 border-slate-700 text-white p-2 rounded text-sm"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"M t"}),f.jsx("textarea",{value:(x==null?void 0:x.welcomeMessage)||"",onChange:I=>G("welcomeMessage",I.target.value),placeholder:"M t ngn...",className:"w-full bg-slate-800 border-slate-700 text-white p-2 rounded text-sm h-20"})]})]})]})]}),f.jsx("div",{className:"pt-6 border-t border-white/10",children:f.jsx("button",{onClick:V,className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl shadow-lg transition-all",children:"Lu Cu Hnh"})})]}),f.jsxs("div",{className:"w-2/3 p-6 flex flex-col bg-[#0f172a]",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h3",{className:"font-bold text-white",children:"Qun l Tin Tc"}),f.jsx("button",{onClick:()=>{p(!0),g({})},className:"bg-indigo-600 hover:bg-indigo-700 text-white text-xs font-bold px-4 py-2 rounded-lg",children:"+ Thm Tin Mi"})]}),v?f.jsxs("div",{className:"flex-grow flex flex-col space-y-4",children:[f.jsx("input",{type:"text",placeholder:"Tiu  bi vit...",value:h.title||"",onChange:I=>g({...h,title:I.target.value}),className:"bg-slate-800 border-slate-700 text-white p-3 rounded-lg outline-none focus:border-indigo-500"}),f.jsx("div",{className:"flex-grow flex flex-col",children:f.jsx(aO,{value:h.content||"",onChange:I=>g({...h,content:I}),className:"flex-grow h-full"})}),f.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[f.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 text-slate-400 hover:text-white",children:"Hy"}),f.jsx("button",{onClick:ne,className:"px-6 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-bold",children:"Lu Tin"})]})]}):f.jsx("div",{className:"flex-grow overflow-y-auto space-y-3 pr-2",children:n.news.map((I,N)=>f.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl border border-slate-700 flex justify-between items-start group",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-white text-sm",children:I.title}),f.jsxs("div",{className:"text-[10px] text-slate-400 mt-1",children:[X(I.date)," - ",I.author]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("div",{className:"flex flex-col gap-1 mr-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[f.jsx("button",{onClick:()=>C(N,"up"),disabled:N===0,className:"text-slate-500 hover:text-white disabled:opacity-20",children:""}),f.jsx("button",{onClick:()=>C(N,"down"),disabled:N===n.news.length-1,className:"text-slate-500 hover:text-white disabled:opacity-20",children:""})]}),f.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity items-center",children:[f.jsx("button",{onClick:()=>{g(I),p(!0)},className:"p-1 text-blue-400 hover:bg-blue-400/10 rounded",children:"Sa"}),f.jsx("button",{onClick:()=>B(I.id),className:"p-1 text-red-400 hover:bg-red-400/10 rounded",children:"Xa"})]})]})]},I.id))})]})]})]})})]})},Ib=[{id:"CHINESE",name:"Ting Trung",icon:""},{id:"JAPANESE",name:"Ting Nht",icon:""},{id:"KOREAN",name:"Ting Hn",icon:""}],Rb={CHINESE:{batchSize:50,delaySeconds:1,customPrompt:"Dch sang ting Vit phong cch kim hip, xng h huynh-, vn phong c trang, gi nguyn cc danh xng c th.",removeSourceText:!0,autoFixFormat:!0},JAPANESE:{batchSize:40,delaySeconds:1.5,customPrompt:"Dch sang ting Vit phong cch Anime/Manga, gi nguyn cc hu t nh -san, -kun, -sama nu cn thit, dch st ngha nhng t nhin.",removeSourceText:!0,autoFixFormat:!0},KOREAN:{batchSize:45,delaySeconds:1,customPrompt:"Dch sang ting Vit phong cch phim truyn hnh Hn Quc (K-Drama), xng h Oppa/Unnie/Noona ph hp ng cnh, vn phong gn gi.",removeSourceText:!0,autoFixFormat:!0}},lO=i=>(i=i.replace(/\r\n/g,`
`),i.trim().split(/\n\s*\n/).map(n=>{const r=n.split(`
`);if(r.length<3)return{index:"",timecode:"",text:""};const o=r[0].trim(),c=r[1].trim(),h=r.slice(2).join(`
`).trim();return{index:o,timecode:c,text:h}}).filter(n=>n.index!=="")),cO=i=>i.map(e=>`${e.index}
${e.timecode}
${e.text}
`).join(`
`),uO=(i,e)=>{const n=new Uint8Array([239,187,191]),r=new Blob([n,e],{type:"text/srt;charset=utf-8"}),o=URL.createObjectURL(r),c=document.createElement("a");c.href=o,c.download=i.replace(/\.(srt|txt)$/i,"")+"_VIET.srt",document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(o)},hO=(i,e)=>{let n;switch(e){case"CHINESE":n=/[\u4e00-\u9fa5]/g;break;case"JAPANESE":n=/[\u3040-\u30ff\u4e00-\u9faf]/g;break;case"KOREAN":n=/[\uac00-\ud7af]/g;break;default:n=/$/}return i.replace(n,"").trim()},dO=i=>{const e=(i==null?void 0:i.message)||(i==null?void 0:i.toString())||"";throw e.includes("429")||e.includes("Quota")||e.includes("quota")||e.includes("Resource has been exhausted")?e.includes("quota")||e.includes("Exceeded")?new Error("Ht API key, bn hy nhp thm API key  tip tc cng vic"):new Error("Hy thao tc chm li v api key ca bn khng p ng  x l nhanh"):e.includes("Network")||e.includes("fetch")?new Error("Li kt ni mng. Vui lng kim tra ng truyn."):new Error(`Li h thng: ${e}`)};class fO{constructor(e){this.apiKeys=e}getModel(){if(this.apiKeys.length===0)throw new Error("No API Keys provided");const e=this.apiKeys[Math.floor(Math.random()*this.apiKeys.length)];return new Mh(e).getGenerativeModel({model:"gemini-flash-latest"})}async translateBatch(e,n,r,o){const c=`
Bn l mt chuyn gia dch thut phim nh cao cp t ${n==="CHINESE"?"Ting Trung":n==="JAPANESE"?"Ting Nht":"Ting Hn"} sang Ting Vit.
Nhim v: Dch ni dung cc ph  di y sang Ting Vit.

Yu cu c th:
1. ${r}
2. Gi nguyn nh dng ca tng mc (Index, Timecode).
3. CH tr v bn dch Ting Vit cho phn text ca ph . Khng c bao gm ngn ng gc.
4. KHNG gii thch, KHNG thm li dn.
5. m bo cu trc SRT chnh xc:
Index
Timecode
Ni dung dch

D liu u vo:
${e.map(h=>`${h.index}
${h.timecode}
${h.text}`).join(`

`)}
    `;try{const x=((await(await this.getModel().generateContent({contents:[{role:"user",parts:[{text:c}]}],generationConfig:{temperature:.3,topP:.8}})).response).text()||"").trim().split(/\n\s*\n/);return e.map((E,A)=>{const V=x[A];if(!V)return{...E,text:"[Li dch]"};const G=V.split(`
`),ne=G.length>=3?G.slice(2).join(`
`).trim():G.join(`
`).trim();return{...E,text:ne||E.text}})}catch(h){console.error("Translation error:",h),dO(h)}}}const kb=({className:i="w-6 h-6",size:e=24})=>f.jsx("svg",{width:e,height:e,className:i,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),mO=({className:i="w-6 h-6",size:e=24})=>f.jsx("svg",{width:e,height:e,className:i,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),gO=({className:i="w-6 h-6",size:e=24})=>f.jsx("svg",{width:e,height:e,className:i,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),jl=({className:i="w-6 h-6",size:e=24})=>f.jsx("svg",{width:e,height:e,className:i,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),pO=({className:i="w-6 h-6",size:e=24})=>f.jsxs("svg",{width:e,height:e,className:i,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),jb=({className:i="w-6 h-6",size:e=24})=>f.jsx("svg",{width:e,height:e,className:i,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),yO=({className:i="w-6 h-6",size:e=24})=>f.jsx("svg",{width:e,height:e,className:i,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),vO=({className:i="w-6 h-6",size:e=24})=>f.jsx("svg",{width:e,height:e,className:i,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),_O=({className:i="w-6 h-6",size:e=24})=>f.jsxs("svg",{width:e,height:e,className:i,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),bO=({className:i="w-6 h-6",size:e=24})=>f.jsx("svg",{width:e,height:e,className:i,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),Am=({className:i="w-6 h-6",size:e=24})=>f.jsx("svg",{width:e,height:e,className:i,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),xO=({className:i="w-6 h-6",size:e=24})=>f.jsx("svg",{width:e,height:e,className:i,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})});class TO extends ce.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught error:",e,n)}render(){var e;return this.state.hasError?f.jsxs("div",{className:"p-8 m-8 bg-red-50 border border-red-200 rounded-xl space-y-4 text-center",children:[f.jsx("h2",{className:"text-xl font-bold text-red-700",children:" xy ra li hin th"}),f.jsx("p",{className:"text-red-600",children:(e=this.state.error)==null?void 0:e.message}),f.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"px-4 py-2 bg-white border border-red-200 text-red-600 rounded-lg hover:bg-red-50",children:"Th li"})]}):this.props.children}}const EO=({userId:i})=>{var ue;const[e,n]=ce.useState(null),[r,o]=ce.useState(""),[c,h]=ce.useState("CHINESE"),[g,v]=ce.useState(!1),[p,x]=ce.useState(Rb.CHINESE),[E,A]=ce.useState({isProcessing:!1,progress:0,currentBatch:0,totalBatches:0}),[V,G]=ce.useState(""),ne=ce.useRef(null);ce.useEffect(()=>{const U=localStorage.getItem(`app_api_keys_${i}`);if(U)try{const K=JSON.parse(U),C=atob(K.gemini||"").split(`
`).map(S=>S.trim()).filter(S=>S!=="");C.length>0&&G(C[0])}catch(K){console.error("Failed to load keys",K)}},[i]);const B=U=>{var se;const K=(se=U.target.files)==null?void 0:se[0];if(K){n(K);const C=new FileReader;C.onload=S=>{var R;o(((R=S.target)==null?void 0:R.result)||"")},C.readAsText(K),A(S=>({...S,result:void 0,error:void 0}))}},X=()=>{e&&(v(!0),x(Rb[c]))},J=async()=>{if(!r)return;if(!V){A(R=>({...R,isProcessing:!1,error:"Cha c API Key. Vui lng cu hnh  trang ch."}));return}const U=lO(r),K=p.batchSize,se=Math.ceil(U.length/K);A({isProcessing:!0,progress:0,currentBatch:0,totalBatches:se,error:void 0});const C=new fO(V);let S=[];try{for(let j=0;j<se;j++){const O=j*K,I=Math.min(O+K,U.length),N=U.slice(O,I);A(D=>({...D,currentBatch:j+1,progress:Math.round(j/se*100)}));const ae=(await C.translateBatch(N,c,p.customPrompt,p.autoFixFormat)).map(D=>({...D,text:p.removeSourceText?hO(D.text,c):D.text}));S=[...S,...ae],j<se-1&&await new Promise(D=>setTimeout(D,p.delaySeconds*1e3))}const R=cO(S);A(j=>({...j,isProcessing:!1,progress:100,result:R}))}catch(R){A(j=>({...j,isProcessing:!1,error:" xy ra li trong qu trnh dch: "+(R.message||"Unknown error")}))}};return V?f.jsx(TO,{children:f.jsxs("div",{className:"min-h-full p-4 md:p-8 flex flex-col items-center bg-transparent",children:[f.jsxs("header",{className:"w-full max-w-4xl text-center mb-12",children:[f.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-indigo-600 rounded-2xl mb-4 text-white shadow-lg",children:f.jsx(kb,{size:32})}),f.jsx("h1",{className:"text-4xl font-extrabold text-slate-900 mb-2",children:"Dch Thut Chuyn Gia"}),f.jsx("p",{className:"text-slate-500",children:"Nng tm bn dch ph  ca bn vi sc mnh ca AI"})]}),f.jsxs("main",{className:"w-full max-w-4xl bg-white rounded-3xl shadow-xl shadow-slate-200/50 border border-slate-100 overflow-hidden",children:[E.isProcessing&&f.jsx("div",{className:"h-1.5 w-full bg-slate-100 relative",children:f.jsx("div",{className:"absolute top-0 left-0 h-full bg-indigo-600 transition-all duration-500 ease-out",style:{width:`${E.progress}%`}})}),f.jsxs("div",{className:"p-8",children:[!g&&!E.isProcessing&&!E.result&&f.jsxs("div",{className:"space-y-8",children:[f.jsxs("section",{children:[f.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Ti ln file ngun (.srt, .txt)"}),f.jsxs("div",{onClick:()=>{var U;return(U=ne.current)==null?void 0:U.click()},className:`border-2 border-dashed rounded-2xl p-10 flex flex-col items-center justify-center cursor-pointer transition-all ${e?"border-indigo-500 bg-indigo-50/30":"border-slate-200 hover:border-indigo-400 hover:bg-slate-50"}`,children:[f.jsx("input",{type:"file",ref:ne,onChange:B,accept:".srt,.txt",className:"hidden"}),e?f.jsxs(f.Fragment,{children:[f.jsx(gO,{className:"text-indigo-600 mb-4 w-12 h-12",size:48}),f.jsx("p",{className:"text-indigo-900 font-medium",children:e.name}),f.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:[(e.size/1024).toFixed(2)," KB"]})]}):f.jsxs(f.Fragment,{children:[f.jsx(mO,{className:"text-slate-400 mb-4 w-12 h-12",size:48}),f.jsx("p",{className:"text-slate-600 font-medium text-lg",children:"Ko th hoc nhp  chn file"}),f.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Ch h tr nh dng .srt v .txt"})]})]})]}),e&&f.jsxs("section",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[f.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Chn ngn ng ngun"}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Ib.map(U=>f.jsxs("button",{onClick:()=>h(U.id),className:`flex items-center gap-3 p-4 rounded-xl border-2 transition-all ${c===U.id?"border-indigo-600 bg-indigo-50 text-indigo-700":"border-slate-100 hover:border-slate-200"}`,children:[f.jsx("span",{className:"text-2xl",children:U.icon}),f.jsx("span",{className:"font-semibold",children:U.name}),c===U.id&&f.jsx(jl,{size:20,className:"ml-auto"})]},U.id))})]}),e&&f.jsxs("button",{onClick:X,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-lg shadow-lg shadow-indigo-200 transition-all flex items-center justify-center gap-2",children:[f.jsx(pO,{size:20}),"Bt u thit lp"]})]}),g&&!E.isProcessing&&!E.result&&f.jsxs("div",{className:"space-y-8 animate-in zoom-in-95 duration-300",children:[f.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[f.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-slate-100 rounded-lg text-slate-500",children:f.jsx(jb,{size:20})}),f.jsxs("h2",{className:"text-xl font-bold text-slate-800",children:["Cu hnh chuyn gia cho ",(ue=Ib.find(U=>U.id===c))==null?void 0:ue.name]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700",children:[f.jsx(yO,{size:16,className:"text-indigo-500"}),"S ph  mi gi (Batch Size)"]}),f.jsx("input",{type:"number",value:p.batchSize,onChange:U=>x({...p,batchSize:parseInt(U.target.value)||1}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all"}),f.jsx("p",{className:"text-xs text-slate-400",children:"Gom nhiu dng gip AI hiu ng cnh tt hn v trnh b ngt qung."})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700",children:[f.jsx(vO,{size:16,className:"text-indigo-500"}),"Thi gian ngh (s)"]}),f.jsx("input",{type:"number",step:"0.5",value:p.delaySeconds,onChange:U=>x({...p,delaySeconds:parseFloat(U.target.value)||.1}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all"}),f.jsx("p",{className:"text-xs text-slate-400",children:"Thi gian ch gia cc ln gi API  trnh b gii hn bng thng."})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700",children:[f.jsx(_O,{size:16,className:"text-indigo-500"}),"Kim sot cht lng dch (Prompt ty chnh)"]}),f.jsx("textarea",{rows:4,value:p.customPrompt,onChange:U=>x({...p,customPrompt:U.target.value}),className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all resize-none",placeholder:"V d: Dch phong cch kim hip, xng h huynh-..."})]}),f.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl space-y-4",children:[f.jsx("h3",{className:"font-bold text-slate-800 text-sm uppercase tracking-wider",children:"Hu k chuyn su"}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"checkbox",checked:p.removeSourceText,onChange:U=>x({...p,removeSourceText:U.target.checked}),className:"sr-only peer"}),f.jsx("div",{className:"w-10 h-6 bg-slate-200 rounded-full peer peer-checked:bg-indigo-600 transition-all"}),f.jsx("div",{className:"absolute left-1 top-1 w-4 h-4 bg-white rounded-full peer-checked:translate-x-4 transition-all"})]}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Loi b k t tha (Regex)"}),f.jsx("span",{className:"text-xs text-slate-400",children:"T ng xa cc k t tng hnh cn st li sau khi dch."})]})]}),f.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"checkbox",checked:p.autoFixFormat,onChange:U=>x({...p,autoFixFormat:U.target.checked}),className:"sr-only peer"}),f.jsx("div",{className:"w-10 h-6 bg-slate-200 rounded-full peer peer-checked:bg-indigo-600 transition-all"}),f.jsx("div",{className:"absolute left-1 top-1 w-4 h-4 bg-white rounded-full peer-checked:translate-x-4 transition-all"})]}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Kim tra & Sa cha nh dng SRT"}),f.jsx("span",{className:"text-xs text-slate-400",children:"m bo m thi gian v s th t chun xc 100%."})]})]})]})]}),f.jsxs("button",{onClick:J,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-lg shadow-lg shadow-indigo-200 transition-all flex items-center justify-center gap-2",children:[f.jsx(kb,{size:20}),"Tin hnh dch ngay"]})]}),E.isProcessing&&f.jsxs("div",{className:"py-12 flex flex-col items-center justify-center space-y-6",children:[f.jsxs("div",{className:"relative",children:[f.jsx(xO,{size:64,className:"text-indigo-600 animate-spin w-16 h-16"}),f.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:f.jsxs("span",{className:"text-sm font-bold text-indigo-700",children:[E.progress,"%"]})})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"ang x l d liu..."}),f.jsxs("p",{className:"text-slate-500 mt-1",children:["ang dch gi ",E.currentBatch," / ",E.totalBatches]}),f.jsxs("div",{className:"mt-6 p-4 bg-amber-50 rounded-xl border border-amber-100 flex items-center gap-3 text-amber-800 text-sm max-w-md",children:[f.jsx(Am,{size:18}),"Vui lng khng ng trnh duyt cho n khi qu trnh hon tt."]})]})]}),E.result&&f.jsxs("div",{className:"py-8 flex flex-col items-center space-y-6 animate-in fade-in duration-500",children:[f.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center text-green-600 mb-2",children:f.jsx(jl,{size:40,className:"w-10 h-10"})}),f.jsxs("div",{className:"text-center",children:[f.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Dch thnh cng!"}),f.jsx("p",{className:"text-slate-500 mt-2",children:"File ca bn  c ti u ha v sn sng s dng."})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 w-full max-w-lg",children:[f.jsxs("button",{onClick:()=>uO((e==null?void 0:e.name)||"translated.srt",E.result),className:"flex items-center justify-center gap-3 p-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 transition-all",children:[f.jsx(bO,{size:20}),"Ti file (.srt)"]}),f.jsxs("button",{onClick:()=>{n(null),A({isProcessing:!1,progress:0,currentBatch:0,totalBatches:0}),v(!1)},className:"flex items-center justify-center gap-3 p-4 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-bold transition-all",children:[f.jsx(jb,{size:20}),"Dch file khc"]})]}),f.jsxs("div",{className:"w-full mt-6 space-y-2",children:[f.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Xem trc ni dung"}),f.jsx("div",{className:"w-full h-48 bg-slate-950 rounded-2xl p-4 font-mono text-xs text-slate-300 overflow-y-auto border border-slate-800",children:f.jsxs("pre",{className:"whitespace-pre-wrap",children:[E.result.slice(0,1e3),"..."]})})]})]}),E.error&&f.jsxs("div",{className:"mt-8 p-6 bg-rose-50 border border-rose-100 rounded-2xl flex items-start gap-4 text-rose-800",children:[f.jsx(Am,{size:24,className:"flex-shrink-0"}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold",children:"Li x l"}),f.jsx("p",{className:"text-sm mt-1",children:E.error}),f.jsx("button",{onClick:()=>A(U=>({...U,error:void 0})),className:"mt-3 text-sm font-bold underline hover:no-underline",children:"Th li"})]})]})]})]}),f.jsxs("footer",{className:"mt-12 text-slate-400 text-sm flex flex-col items-center gap-4",children:[f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsxs("span",{className:"flex items-center gap-1",children:[f.jsx(jl,{size:14})," UTF-8 with BOM"]}),f.jsxs("span",{className:"flex items-center gap-1",children:[f.jsx(jl,{size:14})," Ti u ng cnh"]}),f.jsxs("span",{className:"flex items-center gap-1",children:[f.jsx(jl,{size:14})," T ng sa li"]})]}),f.jsx("p",{children:" 2024 Dch Thut Chuyn Gia  Bn quyn thuc v AI Studio"})]})]})}):f.jsx("div",{className:"flex flex-col items-center justify-center p-10 h-full",children:f.jsxs("div",{className:"bg-red-50 text-red-600 p-6 rounded-xl border border-red-200 text-center shadow-sm",children:[f.jsx(Am,{className:"w-12 h-12 mx-auto mb-2 text-red-500"}),f.jsx("h3",{className:"font-bold text-lg mb-2",children:"Cha cu hnh API Key"}),f.jsx("p",{children:"Vui lng nhp Gemini API Key  phn qun l Key pha trn trc khi s dng ng dng ny."})]})})},wO=()=>f.jsxs("div",{className:"w-full h-full min-h-[500px] flex flex-col items-center justify-center p-10 bg-white rounded-3xl shadow-xl border border-dashed border-slate-300",children:[f.jsx("div",{className:"w-20 h-20 bg-indigo-50 rounded-full flex items-center justify-center mb-6",children:f.jsx("svg",{className:"w-10 h-10 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),f.jsx("h2",{className:"text-2xl font-black text-slate-800 uppercase tracking-tighter mb-2",children:"New Application"}),f.jsxs("p",{className:"text-slate-500 text-center max-w-md",children:["This is a placeholder for your future application. ",f.jsx("br",{}),"You can start building your new features here within the ",f.jsx("code",{children:"apps/NewToolApp.tsx"})," file."]}),f.jsx("button",{className:"mt-8 px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition-all",children:"Initialize Project"})]}),SO=[{id:"video-viral",label:"Video Viral"},{id:"image-script",label:"Visual Script"},{id:"zenshot-ai",label:"ZenShot AI"},{id:"translation",label:"Translation"},{id:"new-tool",label:"New Tool"}],AO=({onClose:i})=>{const[e,n]=ce.useState({}),[r,o]=ce.useState(""),c=()=>{const p=JSON.parse(localStorage.getItem("app_users")||"{}");n(p)};ce.useEffect(()=>{c()},[]);const h=(p,x)=>{const E={...e},A=E[p];A.allowedApps||(A.allowedApps=[]),A.allowedApps.includes(x)?A.allowedApps=A.allowedApps.filter(V=>V!==x):A.allowedApps.push(x),n(E),localStorage.setItem("app_users",JSON.stringify(E))},g=p=>{const x={...e},E=x[p];E.role=E.role==="admin"?"user":"admin",n(x),localStorage.setItem("app_users",JSON.stringify(x))},v=Object.values(e).filter(p=>p.username.toLowerCase().includes(r.toLowerCase())||p.email&&p.email.toLowerCase().includes(r.toLowerCase()));return f.jsx("div",{className:"fixed inset-0 bg-slate-900/90 backdrop-blur-md flex items-center justify-center z-[400] p-6",children:f.jsxs("div",{className:"bg-white w-full max-w-5xl rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-300",children:[f.jsxs("div",{className:"bg-[#020617] text-white p-8 flex justify-between items-center shrink-0 gap-4",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h2",{className:"text-2xl font-black uppercase tracking-tighter",children:"Admin Control Panel (v1.2)"}),f.jsx("p",{className:"text-xs text-indigo-400 font-bold uppercase tracking-[0.3em] mt-1",children:"User & Access Management"})]}),f.jsxs("button",{onClick:c,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-bold text-xs uppercase tracking-widest shadow-lg transition-all flex items-center gap-2",children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Force Refresh"]}),f.jsx("button",{onClick:i,className:"bg-white/10 hover:bg-white/20 p-3 rounded-xl transition-all",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsx("div",{className:"p-6 border-b border-slate-100 bg-slate-50 flex items-center gap-4 shrink-0 justify-between",children:f.jsx("div",{className:"flex items-center gap-4 flex-1",children:f.jsxs("div",{className:"relative flex-1 max-w-md",children:[f.jsx("svg",{className:"w-5 h-5 absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),f.jsx("input",{type:"text",placeholder:"Search users...",className:"w-full pl-12 pr-4 py-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none font-medium",value:r,onChange:p=>o(p.target.value)})]})})}),f.jsx("div",{className:"overflow-y-auto flex-1 p-6 bg-slate-100",children:f.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:f.jsxs("table",{className:"w-full text-left border-collapse",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200 text-xs font-black text-slate-500 uppercase tracking-wider",children:[f.jsx("th",{className:"p-4 pl-6",children:"User Identity"}),f.jsx("th",{className:"p-4",children:"Role"}),f.jsx("th",{className:"p-4 text-center",children:"Video Viral"}),f.jsx("th",{className:"p-4 text-center",children:"Visual Script"}),f.jsx("th",{className:"p-4 text-center",children:"ZenShot New"}),f.jsx("th",{className:"p-4 text-center",children:"Translation"}),f.jsx("th",{className:"p-4 text-center",children:"New App"})]})}),f.jsx("tbody",{className:"divide-y divide-slate-100",children:v.map(p=>f.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[f.jsxs("td",{className:"p-4 pl-6",children:[f.jsx("div",{className:"font-bold text-slate-800",children:p.username}),f.jsx("div",{className:"text-xs text-slate-400 font-medium",children:p.email||"No email"})]}),f.jsx("td",{className:"p-4",children:f.jsx("button",{onClick:()=>g(p.username),className:`px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${p.role==="admin"?"bg-indigo-100 text-indigo-700 hover:bg-indigo-200":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:p.role})}),SO.map(x=>{var A;const E=(A=p.allowedApps)==null?void 0:A.includes(x.id);return f.jsx("td",{className:"p-4 text-center",children:f.jsxs("label",{className:"inline-flex items-center cursor-pointer relative",children:[f.jsx("input",{type:"checkbox",className:"peer sr-only",checked:E,onChange:()=>h(p.username,x.id)}),f.jsx("div",{className:"w-11 h-6 bg-slate-200 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-500"})]})},x.id)})]},p.id))})]})})}),f.jsxs("div",{className:"p-4 bg-black text-xs font-mono text-green-400 overflow-auto h-32 border-t border-slate-700 shrink-0",children:[f.jsx("p",{className:"font-bold text-white mb-2",children:"DEBUG RAW DATA (Search here for username):"}),f.jsx("pre",{className:"whitespace-pre-wrap",children:JSON.stringify(e,null,2)})]})]})})},NO=({user:i,onUpdateUser:e,onClose:n})=>{const[r,o]=ce.useState(i.email||""),[c,h]=ce.useState(i.phone||""),[g,v]=ce.useState(""),[p,x]=ce.useState(""),[E,A]=ce.useState(!1),V=()=>{const G=JSON.parse(localStorage.getItem("app_users")||"{}"),ne=G[i.username];if(ne){const B={...ne,email:r,phone:c,...g?{password:g}:{}};G[i.username]=B,localStorage.setItem("app_users",JSON.stringify(G));const X={...B};delete X.password,e(X),x("Cp nht thnh cng!"),setTimeout(()=>x(""),3e3)}};return E?f.jsx(AO,{onClose:()=>A(!1)}):f.jsx("div",{className:"fixed inset-0 bg-slate-900/80 backdrop-blur-sm flex items-center justify-center z-[300] p-4",children:f.jsxs("div",{className:"bg-[#1e293b] w-full max-w-lg rounded-2xl border border-white/10 shadow-2xl p-6 md:p-8 animate-in zoom-in-95 duration-200",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-white/5 pb-4",children:[f.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[f.jsx("svg",{className:"w-5 h-5 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Qun l ti khon"]}),f.jsx("button",{onClick:n,className:"text-slate-400 hover:text-white transition-colors",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-xl border border-white/5 flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-[10px] text-slate-400 uppercase font-bold tracking-widest",children:"Tn ng nhp"}),f.jsx("p",{className:"text-lg font-bold text-white",children:i.username})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("p",{className:"text-[10px] text-slate-400 uppercase font-bold tracking-widest",children:"Vai tr"}),f.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold uppercase ${i.role==="admin"?"bg-indigo-500/20 text-indigo-400":"bg-slate-700 text-slate-300"}`,children:i.role})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-2",children:"Email"}),f.jsx("input",{type:"email",value:r,onChange:G=>o(G.target.value),className:"w-full bg-[#0f172a] border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 outline-none text-sm"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-2",children:"S in thoi"}),f.jsx("input",{type:"tel",value:c,onChange:G=>h(G.target.value),className:"w-full bg-[#0f172a] border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 outline-none text-sm"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-2",children:"i mt khu mi (Nu cn)"}),f.jsx("input",{type:"password",value:g,onChange:G=>v(G.target.value),placeholder:" trng nu khng i",className:"w-full bg-[#0f172a] border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 outline-none text-sm placeholder-slate-600"})]}),p&&f.jsx("div",{className:"p-3 bg-emerald-500/10 text-emerald-400 text-sm font-bold rounded-lg text-center animate-in fade-in slide-in-from-top-2",children:p}),f.jsxs("div",{className:"pt-4 border-t border-white/5 flex justify-between gap-3 items-center",children:[i.role==="admin"?f.jsxs("button",{onClick:()=>A(!0),className:"px-4 py-2 rounded-lg text-sm font-bold bg-amber-500/10 text-amber-500 hover:bg-amber-500/20 transition-all uppercase tracking-wider flex items-center gap-2",children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),"Admin Panel"]}):f.jsx("div",{}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx("button",{onClick:n,className:"px-4 py-2 rounded-lg text-sm font-bold text-slate-400 hover:text-white hover:bg-white/5 transition-all",children:"ng"}),f.jsx("button",{onClick:V,className:"px-6 py-2 rounded-lg text-sm font-bold bg-indigo-600 text-white hover:bg-indigo-500 transition-all shadow-lg active:scale-95",children:"Lu Thay i"})]})]})]})]})})},CO=()=>{var E,A,V,G,ne;const[i,e]=ce.useState(null),[n,r]=ce.useState("home"),[o,c]=ce.useState(!1),[h,g]=ce.useState(!0);ce.useEffect(()=>{const B=ZA(Ul,async X=>{var J;if(X){const ue=await Dh.getUserProfile(X.uid);if(ue)e(ue);else{const U={id:X.uid,username:X.displayName||((J=X.email)==null?void 0:J.split("@")[0])||"User",email:X.email||"",role:"user",createdAt:Date.now()};e(U)}}else e(null);g(!1)});return()=>B()},[]);const v=B=>{e(B)},p=B=>{e(B)},x=async()=>{g(!0),await Dh.logoutUser()};return h?f.jsx("div",{className:"min-h-screen bg-[#020617] flex items-center justify-center",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):i?f.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col items-center",children:[f.jsx(l2,{userId:i.id}),f.jsxs("nav",{className:"w-full bg-[#020617] text-white border-b border-white/5 sticky top-0 z-[100] px-6 md:px-12 py-4 backdrop-blur-2xl bg-opacity-95 shadow-2xl flex flex-col md:flex-row items-center justify-between gap-4",children:[f.jsxs("div",{className:"flex items-center gap-6 cursor-pointer",onClick:()=>r("home"),children:[f.jsx("div",{className:"bg-gradient-to-tr from-indigo-500 via-indigo-600 to-violet-600 p-3 rounded-2xl shadow-2xl shadow-indigo-500/30 ring-4 ring-indigo-500/10",children:f.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),f.jsxs("div",{className:"flex flex-col",children:[f.jsxs("h1",{className:"text-2xl font-black tracking-tighter uppercase leading-none",children:["QUANG HUY ",f.jsx("span",{className:"text-indigo-400",children:"STUDIO"})]}),f.jsx("span",{className:"text-[10px] font-black text-indigo-400/70 uppercase tracking-[0.4em] mt-1",children:"Multi-App Engine"})]})]}),f.jsxs("div",{className:"flex items-center bg-white/5 rounded-2xl p-1 border border-white/10",children:[(i.role==="admin"||((E=i.allowedApps)==null?void 0:E.includes("video-viral")))&&f.jsx("button",{onClick:()=>r("video-viral"),className:`px-6 py-2 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${n==="video-viral"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:"Video Viral Engine"}),(i.role==="admin"||((A=i.allowedApps)==null?void 0:A.includes("image-script")))&&f.jsx("button",{onClick:()=>r("image-script"),className:`px-6 py-2 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${n==="image-script"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:"Visual Script Engine"}),(i.role==="admin"||((V=i.allowedApps)==null?void 0:V.includes("zenshot-ai")))&&f.jsx("button",{onClick:()=>r("zenshot-ai"),className:`px-6 py-2 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${n==="zenshot-ai"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:"ZenShot AI (New)"}),(i.role==="admin"||((G=i.allowedApps)==null?void 0:G.includes("translation")))&&f.jsx("button",{onClick:()=>r("translation"),className:`px-6 py-2 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${n==="translation"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:"Translation AI"}),(i.role==="admin"||((ne=i.allowedApps)==null?void 0:ne.includes("new-tool")))&&f.jsx("button",{onClick:()=>r("new-tool"),className:`px-6 py-2 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${n==="new-tool"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:"New Application"})]}),f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsxs("div",{className:"text-right hidden md:block",children:[f.jsxs("div",{className:"text-xs font-black uppercase text-indigo-400",children:["Hello, ",i.username]}),f.jsx("button",{onClick:x,className:"text-[10px] uppercase font-bold text-slate-500 hover:text-white transition-colors",children:"Logout"})]}),f.jsx("div",{className:"w-10 h-10 bg-indigo-600 rounded-full flex items-center justify-center font-black text-sm shadow-lg ring-2 ring-indigo-400/20 cursor-pointer hover:ring-indigo-400 hover:scale-105 transition-all",onClick:()=>c(!0),children:i.username.charAt(0).toUpperCase()})]})]}),f.jsxs("div",{className:"w-full h-[calc(100vh-140px)]",children:[n==="home"&&f.jsx(oO,{user:i,onNavigate:r},i.id),n==="video-viral"&&f.jsx(dj,{},i.id),n==="image-script"&&f.jsx(wj,{userId:i.id},i.id),n==="zenshot-ai"&&f.jsx(iO,{userId:i.id},i.id),n==="translation"&&f.jsx(EO,{userId:i.id},i.id),n==="new-tool"&&f.jsx(wO,{},i.id)]}),o&&f.jsx(NO,{user:i,onUpdateUser:p,onClose:()=>c(!1)})]}):f.jsx(uj,{onLogin:v})},VT=document.getElementById("root");if(!VT)throw new Error("Could not find root element to mount to");const IO=Ew.createRoot(VT);IO.render(f.jsx(tg.StrictMode,{children:f.jsx(CO,{})}));
