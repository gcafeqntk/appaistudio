(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))l(d);new MutationObserver(d=>{for(const h of d)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function r(d){const h={};return d.integrity&&(h.integrity=d.integrity),d.referrerPolicy&&(h.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?h.credentials="include":d.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function l(d){if(d.ep)return;d.ep=!0;const h=r(d);fetch(d.href,h)}})();function yg(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Oc={exports:{}},fi={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g0;function vv(){if(g0)return fi;g0=1;var s=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(l,d,h){var f=null;if(h!==void 0&&(f=""+h),d.key!==void 0&&(f=""+d.key),"key"in d){h={};for(var m in d)m!=="key"&&(h[m]=d[m])}else h=d;return d=h.ref,{$$typeof:s,type:l,key:f,ref:d!==void 0?d:null,props:h}}return fi.Fragment=n,fi.jsx=r,fi.jsxs=r,fi}var m0;function yv(){return m0||(m0=1,Oc.exports=vv()),Oc.exports}var c=yv(),Rc={exports:{}},ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p0;function bv(){if(p0)return ue;p0=1;var s=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),w=Symbol.iterator;function N(T){return T===null||typeof T!="object"?null:(T=w&&T[w]||T["@@iterator"],typeof T=="function"?T:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,A={};function R(T,V,X){this.props=T,this.context=V,this.refs=A,this.updater=X||C}R.prototype.isReactComponent={},R.prototype.setState=function(T,V){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,V,"setState")},R.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function U(){}U.prototype=R.prototype;function q(T,V,X){this.props=T,this.context=V,this.refs=A,this.updater=X||C}var j=q.prototype=new U;j.constructor=q,H(j,R.prototype),j.isPureReactComponent=!0;var M=Array.isArray;function $(){}var J={H:null,A:null,T:null,S:null},Z=Object.prototype.hasOwnProperty;function te(T,V,X){var F=X.ref;return{$$typeof:s,type:T,key:V,ref:F!==void 0?F:null,props:X}}function he(T,V){return te(T.type,V,T.props)}function ke(T){return typeof T=="object"&&T!==null&&T.$$typeof===s}function qe(T){var V={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(X){return V[X]})}var dt=/\/+/g;function k(T,V){return typeof T=="object"&&T!==null&&T.key!=null?qe(""+T.key):V.toString(36)}function B(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then($,$):(T.status="pending",T.then(function(V){T.status==="pending"&&(T.status="fulfilled",T.value=V)},function(V){T.status==="pending"&&(T.status="rejected",T.reason=V)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function _(T,V,X,F,ce){var fe=typeof T;(fe==="undefined"||fe==="boolean")&&(T=null);var xe=!1;if(T===null)xe=!0;else switch(fe){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(T.$$typeof){case s:case n:xe=!0;break;case b:return xe=T._init,_(xe(T._payload),V,X,F,ce)}}if(xe)return ce=ce(T),xe=F===""?"."+k(T,0):F,M(ce)?(X="",xe!=null&&(X=xe.replace(dt,"$&/")+"/"),_(ce,V,X,"",function(Yt){return Yt})):ce!=null&&(ke(ce)&&(ce=he(ce,X+(ce.key==null||T&&T.key===ce.key?"":(""+ce.key).replace(dt,"$&/")+"/")+xe)),V.push(ce)),1;xe=0;var rt=F===""?".":F+":";if(M(T))for(var Le=0;Le<T.length;Le++)F=T[Le],fe=rt+k(F,Le),xe+=_(F,V,X,fe,ce);else if(Le=N(T),typeof Le=="function")for(T=Le.call(T),Le=0;!(F=T.next()).done;)F=F.value,fe=rt+k(F,Le++),xe+=_(F,V,X,fe,ce);else if(fe==="object"){if(typeof T.then=="function")return _(B(T),V,X,F,ce);throw V=String(T),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return xe}function I(T,V,X){if(T==null)return T;var F=[],ce=0;return _(T,F,"","",function(fe){return V.call(X,fe,ce++)}),F}function W(T){if(T._status===-1){var V=T._result;V=V(),V.then(function(X){(T._status===0||T._status===-1)&&(T._status=1,T._result=X)},function(X){(T._status===0||T._status===-1)&&(T._status=2,T._result=X)}),T._status===-1&&(T._status=0,T._result=V)}if(T._status===1)return T._result.default;throw T._result}var ae=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},we={map:I,forEach:function(T,V,X){I(T,function(){V.apply(this,arguments)},X)},count:function(T){var V=0;return I(T,function(){V++}),V},toArray:function(T){return I(T,function(V){return V})||[]},only:function(T){if(!ke(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return ue.Activity=x,ue.Children=we,ue.Component=R,ue.Fragment=r,ue.Profiler=d,ue.PureComponent=q,ue.StrictMode=l,ue.Suspense=v,ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=J,ue.__COMPILER_RUNTIME={__proto__:null,c:function(T){return J.H.useMemoCache(T)}},ue.cache=function(T){return function(){return T.apply(null,arguments)}},ue.cacheSignal=function(){return null},ue.cloneElement=function(T,V,X){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var F=H({},T.props),ce=T.key;if(V!=null)for(fe in V.key!==void 0&&(ce=""+V.key),V)!Z.call(V,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&V.ref===void 0||(F[fe]=V[fe]);var fe=arguments.length-2;if(fe===1)F.children=X;else if(1<fe){for(var xe=Array(fe),rt=0;rt<fe;rt++)xe[rt]=arguments[rt+2];F.children=xe}return te(T.type,ce,F)},ue.createContext=function(T){return T={$$typeof:f,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:h,_context:T},T},ue.createElement=function(T,V,X){var F,ce={},fe=null;if(V!=null)for(F in V.key!==void 0&&(fe=""+V.key),V)Z.call(V,F)&&F!=="key"&&F!=="__self"&&F!=="__source"&&(ce[F]=V[F]);var xe=arguments.length-2;if(xe===1)ce.children=X;else if(1<xe){for(var rt=Array(xe),Le=0;Le<xe;Le++)rt[Le]=arguments[Le+2];ce.children=rt}if(T&&T.defaultProps)for(F in xe=T.defaultProps,xe)ce[F]===void 0&&(ce[F]=xe[F]);return te(T,fe,ce)},ue.createRef=function(){return{current:null}},ue.forwardRef=function(T){return{$$typeof:m,render:T}},ue.isValidElement=ke,ue.lazy=function(T){return{$$typeof:b,_payload:{_status:-1,_result:T},_init:W}},ue.memo=function(T,V){return{$$typeof:p,type:T,compare:V===void 0?null:V}},ue.startTransition=function(T){var V=J.T,X={};J.T=X;try{var F=T(),ce=J.S;ce!==null&&ce(X,F),typeof F=="object"&&F!==null&&typeof F.then=="function"&&F.then($,ae)}catch(fe){ae(fe)}finally{V!==null&&X.types!==null&&(V.types=X.types),J.T=V}},ue.unstable_useCacheRefresh=function(){return J.H.useCacheRefresh()},ue.use=function(T){return J.H.use(T)},ue.useActionState=function(T,V,X){return J.H.useActionState(T,V,X)},ue.useCallback=function(T,V){return J.H.useCallback(T,V)},ue.useContext=function(T){return J.H.useContext(T)},ue.useDebugValue=function(){},ue.useDeferredValue=function(T,V){return J.H.useDeferredValue(T,V)},ue.useEffect=function(T,V){return J.H.useEffect(T,V)},ue.useEffectEvent=function(T){return J.H.useEffectEvent(T)},ue.useId=function(){return J.H.useId()},ue.useImperativeHandle=function(T,V,X){return J.H.useImperativeHandle(T,V,X)},ue.useInsertionEffect=function(T,V){return J.H.useInsertionEffect(T,V)},ue.useLayoutEffect=function(T,V){return J.H.useLayoutEffect(T,V)},ue.useMemo=function(T,V){return J.H.useMemo(T,V)},ue.useOptimistic=function(T,V){return J.H.useOptimistic(T,V)},ue.useReducer=function(T,V,X){return J.H.useReducer(T,V,X)},ue.useRef=function(T){return J.H.useRef(T)},ue.useState=function(T){return J.H.useState(T)},ue.useSyncExternalStore=function(T,V,X){return J.H.useSyncExternalStore(T,V,X)},ue.useTransition=function(){return J.H.useTransition()},ue.version="19.2.3",ue}var v0;function lu(){return v0||(v0=1,Rc.exports=bv()),Rc.exports}var Q=lu();const ou=yg(Q);var Uc={exports:{}},gi={},Mc={exports:{}},Dc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y0;function xv(){return y0||(y0=1,(function(s){function n(_,I){var W=_.length;_.push(I);e:for(;0<W;){var ae=W-1>>>1,we=_[ae];if(0<d(we,I))_[ae]=I,_[W]=we,W=ae;else break e}}function r(_){return _.length===0?null:_[0]}function l(_){if(_.length===0)return null;var I=_[0],W=_.pop();if(W!==I){_[0]=W;e:for(var ae=0,we=_.length,T=we>>>1;ae<T;){var V=2*(ae+1)-1,X=_[V],F=V+1,ce=_[F];if(0>d(X,W))F<we&&0>d(ce,X)?(_[ae]=ce,_[F]=W,ae=F):(_[ae]=X,_[V]=W,ae=V);else if(F<we&&0>d(ce,W))_[ae]=ce,_[F]=W,ae=F;else break e}}return I}function d(_,I){var W=_.sortIndex-I.sortIndex;return W!==0?W:_.id-I.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;s.unstable_now=function(){return h.now()}}else{var f=Date,m=f.now();s.unstable_now=function(){return f.now()-m}}var v=[],p=[],b=1,x=null,w=3,N=!1,C=!1,H=!1,A=!1,R=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function j(_){for(var I=r(p);I!==null;){if(I.callback===null)l(p);else if(I.startTime<=_)l(p),I.sortIndex=I.expirationTime,n(v,I);else break;I=r(p)}}function M(_){if(H=!1,j(_),!C)if(r(v)!==null)C=!0,$||($=!0,qe());else{var I=r(p);I!==null&&B(M,I.startTime-_)}}var $=!1,J=-1,Z=5,te=-1;function he(){return A?!0:!(s.unstable_now()-te<Z)}function ke(){if(A=!1,$){var _=s.unstable_now();te=_;var I=!0;try{e:{C=!1,H&&(H=!1,U(J),J=-1),N=!0;var W=w;try{t:{for(j(_),x=r(v);x!==null&&!(x.expirationTime>_&&he());){var ae=x.callback;if(typeof ae=="function"){x.callback=null,w=x.priorityLevel;var we=ae(x.expirationTime<=_);if(_=s.unstable_now(),typeof we=="function"){x.callback=we,j(_),I=!0;break t}x===r(v)&&l(v),j(_)}else l(v);x=r(v)}if(x!==null)I=!0;else{var T=r(p);T!==null&&B(M,T.startTime-_),I=!1}}break e}finally{x=null,w=W,N=!1}I=void 0}}finally{I?qe():$=!1}}}var qe;if(typeof q=="function")qe=function(){q(ke)};else if(typeof MessageChannel<"u"){var dt=new MessageChannel,k=dt.port2;dt.port1.onmessage=ke,qe=function(){k.postMessage(null)}}else qe=function(){R(ke,0)};function B(_,I){J=R(function(){_(s.unstable_now())},I)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(_){_.callback=null},s.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<_?Math.floor(1e3/_):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_next=function(_){switch(w){case 1:case 2:case 3:var I=3;break;default:I=w}var W=w;w=I;try{return _()}finally{w=W}},s.unstable_requestPaint=function(){A=!0},s.unstable_runWithPriority=function(_,I){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var W=w;w=_;try{return I()}finally{w=W}},s.unstable_scheduleCallback=function(_,I,W){var ae=s.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ae+W:ae):W=ae,_){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=W+we,_={id:b++,callback:I,priorityLevel:_,startTime:W,expirationTime:we,sortIndex:-1},W>ae?(_.sortIndex=W,n(p,_),r(v)===null&&_===r(p)&&(H?(U(J),J=-1):H=!0,B(M,W-ae))):(_.sortIndex=we,n(v,_),C||N||(C=!0,$||($=!0,qe()))),_},s.unstable_shouldYield=he,s.unstable_wrapCallback=function(_){var I=w;return function(){var W=w;w=I;try{return _.apply(this,arguments)}finally{w=W}}}})(Dc)),Dc}var b0;function wv(){return b0||(b0=1,Mc.exports=xv()),Mc.exports}var zc={exports:{}},lt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x0;function _v(){if(x0)return lt;x0=1;var s=lu();function n(v){var p="https://react.dev/errors/"+v;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+v+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var l={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},d=Symbol.for("react.portal");function h(v,p,b){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:x==null?null:""+x,children:v,containerInfo:p,implementation:b}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(v,p){if(v==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return lt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,lt.createPortal=function(v,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(n(299));return h(v,p,null,b)},lt.flushSync=function(v){var p=f.T,b=l.p;try{if(f.T=null,l.p=2,v)return v()}finally{f.T=p,l.p=b,l.d.f()}},lt.preconnect=function(v,p){typeof v=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,l.d.C(v,p))},lt.prefetchDNS=function(v){typeof v=="string"&&l.d.D(v)},lt.preinit=function(v,p){if(typeof v=="string"&&p&&typeof p.as=="string"){var b=p.as,x=m(b,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,N=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?l.d.S(v,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:x,integrity:w,fetchPriority:N}):b==="script"&&l.d.X(v,{crossOrigin:x,integrity:w,fetchPriority:N,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},lt.preinitModule=function(v,p){if(typeof v=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=m(p.as,p.crossOrigin);l.d.M(v,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&l.d.M(v)},lt.preload=function(v,p){if(typeof v=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,x=m(b,p.crossOrigin);l.d.L(v,b,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},lt.preloadModule=function(v,p){if(typeof v=="string")if(p){var b=m(p.as,p.crossOrigin);l.d.m(v,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else l.d.m(v)},lt.requestFormReset=function(v){l.d.r(v)},lt.unstable_batchedUpdates=function(v,p){return v(p)},lt.useFormState=function(v,p,b){return f.H.useFormState(v,p,b)},lt.useFormStatus=function(){return f.H.useHostTransitionStatus()},lt.version="19.2.3",lt}var w0;function Sv(){if(w0)return zc.exports;w0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(n){console.error(n)}}return s(),zc.exports=_v(),zc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _0;function Nv(){if(_0)return gi;_0=1;var s=wv(),n=lu(),r=Sv();function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function v(e){if(h(e)!==e)throw Error(l(188))}function p(e){var t=e.alternate;if(!t){if(t=h(e),t===null)throw Error(l(188));return t!==e?null:e}for(var a=e,i=t;;){var o=a.return;if(o===null)break;var u=o.alternate;if(u===null){if(i=o.return,i!==null){a=i;continue}break}if(o.child===u.child){for(u=o.child;u;){if(u===a)return v(o),e;if(u===i)return v(o),t;u=u.sibling}throw Error(l(188))}if(a.return!==i.return)a=o,i=u;else{for(var g=!1,y=o.child;y;){if(y===a){g=!0,a=o,i=u;break}if(y===i){g=!0,i=o,a=u;break}y=y.sibling}if(!g){for(y=u.child;y;){if(y===a){g=!0,a=u,i=o;break}if(y===i){g=!0,i=u,a=o;break}y=y.sibling}if(!g)throw Error(l(189))}}if(a.alternate!==i)throw Error(l(190))}if(a.tag!==3)throw Error(l(188));return a.stateNode.current===a?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var x=Object.assign,w=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),q=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),te=Symbol.for("react.activity"),he=Symbol.for("react.memo_cache_sentinel"),ke=Symbol.iterator;function qe(e){return e===null||typeof e!="object"?null:(e=ke&&e[ke]||e["@@iterator"],typeof e=="function"?e:null)}var dt=Symbol.for("react.client.reference");function k(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===dt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case H:return"Fragment";case R:return"Profiler";case A:return"StrictMode";case M:return"Suspense";case $:return"SuspenseList";case te:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case C:return"Portal";case q:return e.displayName||"Context";case U:return(e._context.displayName||"Context")+".Consumer";case j:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case J:return t=e.displayName||null,t!==null?t:k(e.type)||"Memo";case Z:t=e._payload,e=e._init;try{return k(e(t))}catch{}}return null}var B=Array.isArray,_=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},ae=[],we=-1;function T(e){return{current:e}}function V(e){0>we||(e.current=ae[we],ae[we]=null,we--)}function X(e,t){we++,ae[we]=e.current,e.current=t}var F=T(null),ce=T(null),fe=T(null),xe=T(null);function rt(e,t){switch(X(fe,t),X(ce,e),X(F,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Lf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Lf(t),e=Hf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(F),X(F,e)}function Le(){V(F),V(ce),V(fe)}function Yt(e){e.memoizedState!==null&&X(xe,e);var t=F.current,a=Hf(t,e.type);t!==a&&(X(ce,e),X(F,a))}function Ri(e){ce.current===e&&(V(F),V(ce)),xe.current===e&&(V(xe),ci._currentValue=W)}var hl,hu;function Jn(e){if(hl===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);hl=t&&t[1]||"",hu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hl+e+hu}var fl=!1;function gl(e,t){if(!e||fl)return"";fl=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var P=function(){throw Error()};if(Object.defineProperty(P.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(P,[])}catch(G){var L=G}Reflect.construct(e,[],P)}else{try{P.call()}catch(G){L=G}e.call(P.prototype)}}else{try{throw Error()}catch(G){L=G}(P=e())&&typeof P.catch=="function"&&P.catch(function(){})}}catch(G){if(G&&L&&typeof G.stack=="string")return[G.stack,L.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=i.DetermineComponentFrameRoot(),g=u[0],y=u[1];if(g&&y){var S=g.split(`
`),z=y.split(`
`);for(o=i=0;i<S.length&&!S[i].includes("DetermineComponentFrameRoot");)i++;for(;o<z.length&&!z[o].includes("DetermineComponentFrameRoot");)o++;if(i===S.length||o===z.length)for(i=S.length-1,o=z.length-1;1<=i&&0<=o&&S[i]!==z[o];)o--;for(;1<=i&&0<=o;i--,o--)if(S[i]!==z[o]){if(i!==1||o!==1)do if(i--,o--,0>o||S[i]!==z[o]){var K=`
`+S[i].replace(" at new "," at ");return e.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",e.displayName)),K}while(1<=i&&0<=o);break}}}finally{fl=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Jn(a):""}function Jg(e,t){switch(e.tag){case 26:case 27:case 5:return Jn(e.type);case 16:return Jn("Lazy");case 13:return e.child!==t&&t!==null?Jn("Suspense Fallback"):Jn("Suspense");case 19:return Jn("SuspenseList");case 0:case 15:return gl(e.type,!1);case 11:return gl(e.type.render,!1);case 1:return gl(e.type,!0);case 31:return Jn("Activity");default:return""}}function fu(e){try{var t="",a=null;do t+=Jg(e,a),a=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var ml=Object.prototype.hasOwnProperty,pl=s.unstable_scheduleCallback,vl=s.unstable_cancelCallback,Qg=s.unstable_shouldYield,Xg=s.unstable_requestPaint,xt=s.unstable_now,Zg=s.unstable_getCurrentPriorityLevel,gu=s.unstable_ImmediatePriority,mu=s.unstable_UserBlockingPriority,Ui=s.unstable_NormalPriority,Wg=s.unstable_LowPriority,pu=s.unstable_IdlePriority,Fg=s.log,em=s.unstable_setDisableYieldValue,ws=null,wt=null;function bn(e){if(typeof Fg=="function"&&em(e),wt&&typeof wt.setStrictMode=="function")try{wt.setStrictMode(ws,e)}catch{}}var _t=Math.clz32?Math.clz32:am,tm=Math.log,nm=Math.LN2;function am(e){return e>>>=0,e===0?32:31-(tm(e)/nm|0)|0}var Mi=256,Di=262144,zi=4194304;function Qn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Li(e,t,a){var i=e.pendingLanes;if(i===0)return 0;var o=0,u=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var y=i&134217727;return y!==0?(i=y&~u,i!==0?o=Qn(i):(g&=y,g!==0?o=Qn(g):a||(a=y&~e,a!==0&&(o=Qn(a))))):(y=i&~u,y!==0?o=Qn(y):g!==0?o=Qn(g):a||(a=i&~e,a!==0&&(o=Qn(a)))),o===0?0:t!==0&&t!==o&&(t&u)===0&&(u=o&-o,a=t&-t,u>=a||u===32&&(a&4194048)!==0)?t:o}function _s(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function sm(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vu(){var e=zi;return zi<<=1,(zi&62914560)===0&&(zi=4194304),e}function yl(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Ss(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function im(e,t,a,i,o,u){var g=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var y=e.entanglements,S=e.expirationTimes,z=e.hiddenUpdates;for(a=g&~a;0<a;){var K=31-_t(a),P=1<<K;y[K]=0,S[K]=-1;var L=z[K];if(L!==null)for(z[K]=null,K=0;K<L.length;K++){var G=L[K];G!==null&&(G.lane&=-536870913)}a&=~P}i!==0&&yu(e,i,0),u!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=u&~(g&~t))}function yu(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-_t(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|a&261930}function bu(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var i=31-_t(a),o=1<<i;o&t|e[i]&t&&(e[i]|=t),a&=~o}}function xu(e,t){var a=t&-t;return a=(a&42)!==0?1:bl(a),(a&(e.suspendedLanes|t))!==0?0:a}function bl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function xl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function wu(){var e=I.p;return e!==0?e:(e=window.event,e===void 0?32:l0(e.type))}function _u(e,t){var a=I.p;try{return I.p=e,t()}finally{I.p=a}}var xn=Math.random().toString(36).slice(2),Fe="__reactFiber$"+xn,ht="__reactProps$"+xn,Sa="__reactContainer$"+xn,wl="__reactEvents$"+xn,rm="__reactListeners$"+xn,lm="__reactHandles$"+xn,Su="__reactResources$"+xn,Ns="__reactMarker$"+xn;function _l(e){delete e[Fe],delete e[ht],delete e[wl],delete e[rm],delete e[lm]}function Na(e){var t=e[Fe];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Sa]||a[Fe]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Kf(e);e!==null;){if(a=e[Fe])return a;e=Kf(e)}return t}e=a,a=e.parentNode}return null}function ja(e){if(e=e[Fe]||e[Sa]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function js(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(l(33))}function Ta(e){var t=e[Su];return t||(t=e[Su]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ze(e){e[Ns]=!0}var Nu=new Set,ju={};function Xn(e,t){Ea(e,t),Ea(e+"Capture",t)}function Ea(e,t){for(ju[e]=t,e=0;e<t.length;e++)Nu.add(t[e])}var om=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Tu={},Eu={};function cm(e){return ml.call(Eu,e)?!0:ml.call(Tu,e)?!1:om.test(e)?Eu[e]=!0:(Tu[e]=!0,!1)}function Hi(e,t,a){if(cm(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function Bi(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Wt(e,t,a,i){if(i===null)e.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+i)}}function Ot(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Au(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function um(e,t,a){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var o=i.get,u=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(g){a=""+g,u.call(this,g)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Sl(e){if(!e._valueTracker){var t=Au(e)?"checked":"value";e._valueTracker=um(e,t,""+e[t])}}function Cu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),i="";return e&&(i=Au(e)?e.checked?"true":"false":e.value),e=i,e!==a?(t.setValue(e),!0):!1}function Gi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var dm=/[\n"\\]/g;function Rt(e){return e.replace(dm,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Nl(e,t,a,i,o,u,g,y){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ot(t)):e.value!==""+Ot(t)&&(e.value=""+Ot(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?jl(e,g,Ot(t)):a!=null?jl(e,g,Ot(a)):i!=null&&e.removeAttribute("value"),o==null&&u!=null&&(e.defaultChecked=!!u),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.name=""+Ot(y):e.removeAttribute("name")}function ku(e,t,a,i,o,u,g,y){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||a!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){Sl(e);return}a=a!=null?""+Ot(a):"",t=t!=null?""+Ot(t):a,y||t===e.value||(e.value=t),e.defaultValue=t}i=i??o,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=y?e.checked:!!i,e.defaultChecked=!!i,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g),Sl(e)}function jl(e,t,a){t==="number"&&Gi(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Aa(e,t,a,i){if(e=e.options,t){t={};for(var o=0;o<a.length;o++)t["$"+a[o]]=!0;for(a=0;a<e.length;a++)o=t.hasOwnProperty("$"+e[a].value),e[a].selected!==o&&(e[a].selected=o),o&&i&&(e[a].defaultSelected=!0)}else{for(a=""+Ot(a),t=null,o=0;o<e.length;o++){if(e[o].value===a){e[o].selected=!0,i&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Ou(e,t,a){if(t!=null&&(t=""+Ot(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Ot(a):""}function Ru(e,t,a,i){if(t==null){if(i!=null){if(a!=null)throw Error(l(92));if(B(i)){if(1<i.length)throw Error(l(93));i=i[0]}a=i}a==null&&(a=""),t=a}a=Ot(t),e.defaultValue=a,i=e.textContent,i===a&&i!==""&&i!==null&&(e.value=i),Sl(e)}function Ca(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var hm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Uu(e,t,a){var i=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,a):typeof a!="number"||a===0||hm.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Mu(e,t,a){if(t!=null&&typeof t!="object")throw Error(l(62));if(e=e.style,a!=null){for(var i in a)!a.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var o in t)i=t[o],t.hasOwnProperty(o)&&a[o]!==i&&Uu(e,o,i)}else for(var u in t)t.hasOwnProperty(u)&&Uu(e,u,t[u])}function Tl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qi(e){return gm.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ft(){}var El=null;function Al(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ka=null,Oa=null;function Du(e){var t=ja(e);if(t&&(e=t.stateNode)){var a=e[ht]||null;e:switch(e=t.stateNode,t.type){case"input":if(Nl(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Rt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var i=a[t];if(i!==e&&i.form===e.form){var o=i[ht]||null;if(!o)throw Error(l(90));Nl(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<a.length;t++)i=a[t],i.form===e.form&&Cu(i)}break e;case"textarea":Ou(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Aa(e,!!a.multiple,t,!1)}}}var Cl=!1;function zu(e,t,a){if(Cl)return e(t,a);Cl=!0;try{var i=e(t);return i}finally{if(Cl=!1,(ka!==null||Oa!==null)&&(Ar(),ka&&(t=ka,e=Oa,Oa=ka=null,Du(t),e)))for(t=0;t<e.length;t++)Du(e[t])}}function Ts(e,t){var a=e.stateNode;if(a===null)return null;var i=a[ht]||null;if(i===null)return null;a=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(l(231,t,typeof a));return a}var en=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kl=!1;if(en)try{var Es={};Object.defineProperty(Es,"passive",{get:function(){kl=!0}}),window.addEventListener("test",Es,Es),window.removeEventListener("test",Es,Es)}catch{kl=!1}var wn=null,Ol=null,$i=null;function Lu(){if($i)return $i;var e,t=Ol,a=t.length,i,o="value"in wn?wn.value:wn.textContent,u=o.length;for(e=0;e<a&&t[e]===o[e];e++);var g=a-e;for(i=1;i<=g&&t[a-i]===o[u-i];i++);return $i=o.slice(e,1<i?1-i:void 0)}function Ii(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Vi(){return!0}function Hu(){return!1}function ft(e){function t(a,i,o,u,g){this._reactName=a,this._targetInst=o,this.type=i,this.nativeEvent=u,this.target=g,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(a=e[y],this[y]=a?a(u):u[y]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Vi:Hu,this.isPropagationStopped=Hu,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Vi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Vi)},persist:function(){},isPersistent:Vi}),t}var Zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ki=ft(Zn),As=x({},Zn,{view:0,detail:0}),mm=ft(As),Rl,Ul,Cs,Yi=x({},As,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Cs&&(Cs&&e.type==="mousemove"?(Rl=e.screenX-Cs.screenX,Ul=e.screenY-Cs.screenY):Ul=Rl=0,Cs=e),Rl)},movementY:function(e){return"movementY"in e?e.movementY:Ul}}),Bu=ft(Yi),pm=x({},Yi,{dataTransfer:0}),vm=ft(pm),ym=x({},As,{relatedTarget:0}),Ml=ft(ym),bm=x({},Zn,{animationName:0,elapsedTime:0,pseudoElement:0}),xm=ft(bm),wm=x({},Zn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_m=ft(wm),Sm=x({},Zn,{data:0}),Gu=ft(Sm),Nm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Em(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Tm[e])?!!t[e]:!1}function Dl(){return Em}var Am=x({},As,{key:function(e){if(e.key){var t=Nm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ii(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?jm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dl,charCode:function(e){return e.type==="keypress"?Ii(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ii(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Cm=ft(Am),km=x({},Yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qu=ft(km),Om=x({},As,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dl}),Rm=ft(Om),Um=x({},Zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mm=ft(Um),Dm=x({},Yi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zm=ft(Dm),Lm=x({},Zn,{newState:0,oldState:0}),Hm=ft(Lm),Bm=[9,13,27,32],zl=en&&"CompositionEvent"in window,ks=null;en&&"documentMode"in document&&(ks=document.documentMode);var Gm=en&&"TextEvent"in window&&!ks,$u=en&&(!zl||ks&&8<ks&&11>=ks),Iu=" ",Vu=!1;function Ku(e,t){switch(e){case"keyup":return Bm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ra=!1;function qm(e,t){switch(e){case"compositionend":return Yu(t);case"keypress":return t.which!==32?null:(Vu=!0,Iu);case"textInput":return e=t.data,e===Iu&&Vu?null:e;default:return null}}function $m(e,t){if(Ra)return e==="compositionend"||!zl&&Ku(e,t)?(e=Lu(),$i=Ol=wn=null,Ra=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $u&&t.locale!=="ko"?null:t.data;default:return null}}var Im={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Im[e.type]:t==="textarea"}function Ju(e,t,a,i){ka?Oa?Oa.push(i):Oa=[i]:ka=i,t=Dr(t,"onChange"),0<t.length&&(a=new Ki("onChange","change",null,a,i),e.push({event:a,listeners:t}))}var Os=null,Rs=null;function Vm(e){Of(e,0)}function Pi(e){var t=js(e);if(Cu(t))return e}function Qu(e,t){if(e==="change")return t}var Xu=!1;if(en){var Ll;if(en){var Hl="oninput"in document;if(!Hl){var Zu=document.createElement("div");Zu.setAttribute("oninput","return;"),Hl=typeof Zu.oninput=="function"}Ll=Hl}else Ll=!1;Xu=Ll&&(!document.documentMode||9<document.documentMode)}function Wu(){Os&&(Os.detachEvent("onpropertychange",Fu),Rs=Os=null)}function Fu(e){if(e.propertyName==="value"&&Pi(Rs)){var t=[];Ju(t,Rs,e,Al(e)),zu(Vm,t)}}function Km(e,t,a){e==="focusin"?(Wu(),Os=t,Rs=a,Os.attachEvent("onpropertychange",Fu)):e==="focusout"&&Wu()}function Ym(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pi(Rs)}function Pm(e,t){if(e==="click")return Pi(t)}function Jm(e,t){if(e==="input"||e==="change")return Pi(t)}function Qm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var St=typeof Object.is=="function"?Object.is:Qm;function Us(e,t){if(St(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),i=Object.keys(t);if(a.length!==i.length)return!1;for(i=0;i<a.length;i++){var o=a[i];if(!ml.call(t,o)||!St(e[o],t[o]))return!1}return!0}function ed(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function td(e,t){var a=ed(e);e=0;for(var i;a;){if(a.nodeType===3){if(i=e+a.textContent.length,e<=t&&i>=t)return{node:a,offset:t-e};e=i}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ed(a)}}function nd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?nd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ad(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Gi(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Gi(e.document)}return t}function Bl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Xm=en&&"documentMode"in document&&11>=document.documentMode,Ua=null,Gl=null,Ms=null,ql=!1;function sd(e,t,a){var i=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ql||Ua==null||Ua!==Gi(i)||(i=Ua,"selectionStart"in i&&Bl(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ms&&Us(Ms,i)||(Ms=i,i=Dr(Gl,"onSelect"),0<i.length&&(t=new Ki("onSelect","select",null,t,a),e.push({event:t,listeners:i}),t.target=Ua)))}function Wn(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Ma={animationend:Wn("Animation","AnimationEnd"),animationiteration:Wn("Animation","AnimationIteration"),animationstart:Wn("Animation","AnimationStart"),transitionrun:Wn("Transition","TransitionRun"),transitionstart:Wn("Transition","TransitionStart"),transitioncancel:Wn("Transition","TransitionCancel"),transitionend:Wn("Transition","TransitionEnd")},$l={},id={};en&&(id=document.createElement("div").style,"AnimationEvent"in window||(delete Ma.animationend.animation,delete Ma.animationiteration.animation,delete Ma.animationstart.animation),"TransitionEvent"in window||delete Ma.transitionend.transition);function Fn(e){if($l[e])return $l[e];if(!Ma[e])return e;var t=Ma[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in id)return $l[e]=t[a];return e}var rd=Fn("animationend"),ld=Fn("animationiteration"),od=Fn("animationstart"),Zm=Fn("transitionrun"),Wm=Fn("transitionstart"),Fm=Fn("transitioncancel"),cd=Fn("transitionend"),ud=new Map,Il="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Il.push("scrollEnd");function qt(e,t){ud.set(e,t),Xn(t,[e])}var Ji=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ut=[],Da=0,Vl=0;function Qi(){for(var e=Da,t=Vl=Da=0;t<e;){var a=Ut[t];Ut[t++]=null;var i=Ut[t];Ut[t++]=null;var o=Ut[t];Ut[t++]=null;var u=Ut[t];if(Ut[t++]=null,i!==null&&o!==null){var g=i.pending;g===null?o.next=o:(o.next=g.next,g.next=o),i.pending=o}u!==0&&dd(a,o,u)}}function Xi(e,t,a,i){Ut[Da++]=e,Ut[Da++]=t,Ut[Da++]=a,Ut[Da++]=i,Vl|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Kl(e,t,a,i){return Xi(e,t,a,i),Zi(e)}function ea(e,t){return Xi(e,null,null,t),Zi(e)}function dd(e,t,a){e.lanes|=a;var i=e.alternate;i!==null&&(i.lanes|=a);for(var o=!1,u=e.return;u!==null;)u.childLanes|=a,i=u.alternate,i!==null&&(i.childLanes|=a),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(o=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,o&&t!==null&&(o=31-_t(a),e=u.hiddenUpdates,i=e[o],i===null?e[o]=[t]:i.push(t),t.lane=a|536870912),u):null}function Zi(e){if(50<ni)throw ni=0,tc=null,Error(l(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var za={};function ep(e,t,a,i){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nt(e,t,a,i){return new ep(e,t,a,i)}function Yl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function tn(e,t){var a=e.alternate;return a===null?(a=Nt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function hd(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Wi(e,t,a,i,o,u){var g=0;if(i=e,typeof e=="function")Yl(e)&&(g=1);else if(typeof e=="string")g=iv(e,a,F.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case te:return e=Nt(31,a,t,o),e.elementType=te,e.lanes=u,e;case H:return ta(a.children,o,u,t);case A:g=8,o|=24;break;case R:return e=Nt(12,a,t,o|2),e.elementType=R,e.lanes=u,e;case M:return e=Nt(13,a,t,o),e.elementType=M,e.lanes=u,e;case $:return e=Nt(19,a,t,o),e.elementType=$,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q:g=10;break e;case U:g=9;break e;case j:g=11;break e;case J:g=14;break e;case Z:g=16,i=null;break e}g=29,a=Error(l(130,e===null?"null":typeof e,"")),i=null}return t=Nt(g,a,t,o),t.elementType=e,t.type=i,t.lanes=u,t}function ta(e,t,a,i){return e=Nt(7,e,i,t),e.lanes=a,e}function Pl(e,t,a){return e=Nt(6,e,null,t),e.lanes=a,e}function fd(e){var t=Nt(18,null,null,0);return t.stateNode=e,t}function Jl(e,t,a){return t=Nt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var gd=new WeakMap;function Mt(e,t){if(typeof e=="object"&&e!==null){var a=gd.get(e);return a!==void 0?a:(t={value:e,source:t,stack:fu(t)},gd.set(e,t),t)}return{value:e,source:t,stack:fu(t)}}var La=[],Ha=0,Fi=null,Ds=0,Dt=[],zt=0,_n=null,Pt=1,Jt="";function nn(e,t){La[Ha++]=Ds,La[Ha++]=Fi,Fi=e,Ds=t}function md(e,t,a){Dt[zt++]=Pt,Dt[zt++]=Jt,Dt[zt++]=_n,_n=e;var i=Pt;e=Jt;var o=32-_t(i)-1;i&=~(1<<o),a+=1;var u=32-_t(t)+o;if(30<u){var g=o-o%5;u=(i&(1<<g)-1).toString(32),i>>=g,o-=g,Pt=1<<32-_t(t)+o|a<<o|i,Jt=u+e}else Pt=1<<u|a<<o|i,Jt=e}function Ql(e){e.return!==null&&(nn(e,1),md(e,1,0))}function Xl(e){for(;e===Fi;)Fi=La[--Ha],La[Ha]=null,Ds=La[--Ha],La[Ha]=null;for(;e===_n;)_n=Dt[--zt],Dt[zt]=null,Jt=Dt[--zt],Dt[zt]=null,Pt=Dt[--zt],Dt[zt]=null}function pd(e,t){Dt[zt++]=Pt,Dt[zt++]=Jt,Dt[zt++]=_n,Pt=t.id,Jt=t.overflow,_n=e}var et=null,Ue=null,be=!1,Sn=null,Lt=!1,Zl=Error(l(519));function Nn(e){var t=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw zs(Mt(t,e)),Zl}function vd(e){var t=e.stateNode,a=e.type,i=e.memoizedProps;switch(t[Fe]=e,t[ht]=i,a){case"dialog":pe("cancel",t),pe("close",t);break;case"iframe":case"object":case"embed":pe("load",t);break;case"video":case"audio":for(a=0;a<si.length;a++)pe(si[a],t);break;case"source":pe("error",t);break;case"img":case"image":case"link":pe("error",t),pe("load",t);break;case"details":pe("toggle",t);break;case"input":pe("invalid",t),ku(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":pe("invalid",t);break;case"textarea":pe("invalid",t),Ru(t,i.value,i.defaultValue,i.children)}a=i.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||i.suppressHydrationWarning===!0||Df(t.textContent,a)?(i.popover!=null&&(pe("beforetoggle",t),pe("toggle",t)),i.onScroll!=null&&pe("scroll",t),i.onScrollEnd!=null&&pe("scrollend",t),i.onClick!=null&&(t.onclick=Ft),t=!0):t=!1,t||Nn(e,!0)}function yd(e){for(et=e.return;et;)switch(et.tag){case 5:case 31:case 13:Lt=!1;return;case 27:case 3:Lt=!0;return;default:et=et.return}}function Ba(e){if(e!==et)return!1;if(!be)return yd(e),be=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||pc(e.type,e.memoizedProps)),a=!a),a&&Ue&&Nn(e),yd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));Ue=Vf(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));Ue=Vf(e)}else t===27?(t=Ue,Hn(e.type)?(e=wc,wc=null,Ue=e):Ue=t):Ue=et?Bt(e.stateNode.nextSibling):null;return!0}function na(){Ue=et=null,be=!1}function Wl(){var e=Sn;return e!==null&&(vt===null?vt=e:vt.push.apply(vt,e),Sn=null),e}function zs(e){Sn===null?Sn=[e]:Sn.push(e)}var Fl=T(null),aa=null,an=null;function jn(e,t,a){X(Fl,t._currentValue),t._currentValue=a}function sn(e){e._currentValue=Fl.current,V(Fl)}function eo(e,t,a){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===a)break;e=e.return}}function to(e,t,a,i){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){var g=o.child;u=u.firstContext;e:for(;u!==null;){var y=u;u=o;for(var S=0;S<t.length;S++)if(y.context===t[S]){u.lanes|=a,y=u.alternate,y!==null&&(y.lanes|=a),eo(u.return,a,e),i||(g=null);break e}u=y.next}}else if(o.tag===18){if(g=o.return,g===null)throw Error(l(341));g.lanes|=a,u=g.alternate,u!==null&&(u.lanes|=a),eo(g,a,e),g=null}else g=o.child;if(g!==null)g.return=o;else for(g=o;g!==null;){if(g===e){g=null;break}if(o=g.sibling,o!==null){o.return=g.return,g=o;break}g=g.return}o=g}}function Ga(e,t,a,i){e=null;for(var o=t,u=!1;o!==null;){if(!u){if((o.flags&524288)!==0)u=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var g=o.alternate;if(g===null)throw Error(l(387));if(g=g.memoizedProps,g!==null){var y=o.type;St(o.pendingProps.value,g.value)||(e!==null?e.push(y):e=[y])}}else if(o===xe.current){if(g=o.alternate,g===null)throw Error(l(387));g.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(ci):e=[ci])}o=o.return}e!==null&&to(t,e,a,i),t.flags|=262144}function er(e){for(e=e.firstContext;e!==null;){if(!St(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function sa(e){aa=e,an=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function tt(e){return bd(aa,e)}function tr(e,t){return aa===null&&sa(e),bd(e,t)}function bd(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},an===null){if(e===null)throw Error(l(308));an=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else an=an.next=t;return a}var tp=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},np=s.unstable_scheduleCallback,ap=s.unstable_NormalPriority,Ve={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function no(){return{controller:new tp,data:new Map,refCount:0}}function Ls(e){e.refCount--,e.refCount===0&&np(ap,function(){e.controller.abort()})}var Hs=null,ao=0,qa=0,$a=null;function sp(e,t){if(Hs===null){var a=Hs=[];ao=0,qa=lc(),$a={status:"pending",value:void 0,then:function(i){a.push(i)}}}return ao++,t.then(xd,xd),t}function xd(){if(--ao===0&&Hs!==null){$a!==null&&($a.status="fulfilled");var e=Hs;Hs=null,qa=0,$a=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ip(e,t){var a=[],i={status:"pending",value:null,reason:null,then:function(o){a.push(o)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var o=0;o<a.length;o++)(0,a[o])(t)},function(o){for(i.status="rejected",i.reason=o,o=0;o<a.length;o++)(0,a[o])(void 0)}),i}var wd=_.S;_.S=function(e,t){sf=xt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&sp(e,t),wd!==null&&wd(e,t)};var ia=T(null);function so(){var e=ia.current;return e!==null?e:Oe.pooledCache}function nr(e,t){t===null?X(ia,ia.current):X(ia,t.pool)}function _d(){var e=so();return e===null?null:{parent:Ve._currentValue,pool:e}}var Ia=Error(l(460)),io=Error(l(474)),ar=Error(l(542)),sr={then:function(){}};function Sd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Nd(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Ft,Ft),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Td(e),e;default:if(typeof t.status=="string")t.then(Ft,Ft);else{if(e=Oe,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=i}},function(i){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Td(e),e}throw la=t,Ia}}function ra(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(la=a,Ia):a}}var la=null;function jd(){if(la===null)throw Error(l(459));var e=la;return la=null,e}function Td(e){if(e===Ia||e===ar)throw Error(l(483))}var Va=null,Bs=0;function ir(e){var t=Bs;return Bs+=1,Va===null&&(Va=[]),Nd(Va,e,t)}function Gs(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function rr(e,t){throw t.$$typeof===w?Error(l(525)):(e=Object.prototype.toString.call(t),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ed(e){function t(O,E){if(e){var D=O.deletions;D===null?(O.deletions=[E],O.flags|=16):D.push(E)}}function a(O,E){if(!e)return null;for(;E!==null;)t(O,E),E=E.sibling;return null}function i(O){for(var E=new Map;O!==null;)O.key!==null?E.set(O.key,O):E.set(O.index,O),O=O.sibling;return E}function o(O,E){return O=tn(O,E),O.index=0,O.sibling=null,O}function u(O,E,D){return O.index=D,e?(D=O.alternate,D!==null?(D=D.index,D<E?(O.flags|=67108866,E):D):(O.flags|=67108866,E)):(O.flags|=1048576,E)}function g(O){return e&&O.alternate===null&&(O.flags|=67108866),O}function y(O,E,D,Y){return E===null||E.tag!==6?(E=Pl(D,O.mode,Y),E.return=O,E):(E=o(E,D),E.return=O,E)}function S(O,E,D,Y){var ie=D.type;return ie===H?K(O,E,D.props.children,Y,D.key):E!==null&&(E.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===Z&&ra(ie)===E.type)?(E=o(E,D.props),Gs(E,D),E.return=O,E):(E=Wi(D.type,D.key,D.props,null,O.mode,Y),Gs(E,D),E.return=O,E)}function z(O,E,D,Y){return E===null||E.tag!==4||E.stateNode.containerInfo!==D.containerInfo||E.stateNode.implementation!==D.implementation?(E=Jl(D,O.mode,Y),E.return=O,E):(E=o(E,D.children||[]),E.return=O,E)}function K(O,E,D,Y,ie){return E===null||E.tag!==7?(E=ta(D,O.mode,Y,ie),E.return=O,E):(E=o(E,D),E.return=O,E)}function P(O,E,D){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=Pl(""+E,O.mode,D),E.return=O,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case N:return D=Wi(E.type,E.key,E.props,null,O.mode,D),Gs(D,E),D.return=O,D;case C:return E=Jl(E,O.mode,D),E.return=O,E;case Z:return E=ra(E),P(O,E,D)}if(B(E)||qe(E))return E=ta(E,O.mode,D,null),E.return=O,E;if(typeof E.then=="function")return P(O,ir(E),D);if(E.$$typeof===q)return P(O,tr(O,E),D);rr(O,E)}return null}function L(O,E,D,Y){var ie=E!==null?E.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return ie!==null?null:y(O,E,""+D,Y);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case N:return D.key===ie?S(O,E,D,Y):null;case C:return D.key===ie?z(O,E,D,Y):null;case Z:return D=ra(D),L(O,E,D,Y)}if(B(D)||qe(D))return ie!==null?null:K(O,E,D,Y,null);if(typeof D.then=="function")return L(O,E,ir(D),Y);if(D.$$typeof===q)return L(O,E,tr(O,D),Y);rr(O,D)}return null}function G(O,E,D,Y,ie){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return O=O.get(D)||null,y(E,O,""+Y,ie);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case N:return O=O.get(Y.key===null?D:Y.key)||null,S(E,O,Y,ie);case C:return O=O.get(Y.key===null?D:Y.key)||null,z(E,O,Y,ie);case Z:return Y=ra(Y),G(O,E,D,Y,ie)}if(B(Y)||qe(Y))return O=O.get(D)||null,K(E,O,Y,ie,null);if(typeof Y.then=="function")return G(O,E,D,ir(Y),ie);if(Y.$$typeof===q)return G(O,E,D,tr(E,Y),ie);rr(E,Y)}return null}function ee(O,E,D,Y){for(var ie=null,_e=null,ne=E,ge=E=0,ye=null;ne!==null&&ge<D.length;ge++){ne.index>ge?(ye=ne,ne=null):ye=ne.sibling;var Se=L(O,ne,D[ge],Y);if(Se===null){ne===null&&(ne=ye);break}e&&ne&&Se.alternate===null&&t(O,ne),E=u(Se,E,ge),_e===null?ie=Se:_e.sibling=Se,_e=Se,ne=ye}if(ge===D.length)return a(O,ne),be&&nn(O,ge),ie;if(ne===null){for(;ge<D.length;ge++)ne=P(O,D[ge],Y),ne!==null&&(E=u(ne,E,ge),_e===null?ie=ne:_e.sibling=ne,_e=ne);return be&&nn(O,ge),ie}for(ne=i(ne);ge<D.length;ge++)ye=G(ne,O,ge,D[ge],Y),ye!==null&&(e&&ye.alternate!==null&&ne.delete(ye.key===null?ge:ye.key),E=u(ye,E,ge),_e===null?ie=ye:_e.sibling=ye,_e=ye);return e&&ne.forEach(function(In){return t(O,In)}),be&&nn(O,ge),ie}function re(O,E,D,Y){if(D==null)throw Error(l(151));for(var ie=null,_e=null,ne=E,ge=E=0,ye=null,Se=D.next();ne!==null&&!Se.done;ge++,Se=D.next()){ne.index>ge?(ye=ne,ne=null):ye=ne.sibling;var In=L(O,ne,Se.value,Y);if(In===null){ne===null&&(ne=ye);break}e&&ne&&In.alternate===null&&t(O,ne),E=u(In,E,ge),_e===null?ie=In:_e.sibling=In,_e=In,ne=ye}if(Se.done)return a(O,ne),be&&nn(O,ge),ie;if(ne===null){for(;!Se.done;ge++,Se=D.next())Se=P(O,Se.value,Y),Se!==null&&(E=u(Se,E,ge),_e===null?ie=Se:_e.sibling=Se,_e=Se);return be&&nn(O,ge),ie}for(ne=i(ne);!Se.done;ge++,Se=D.next())Se=G(ne,O,ge,Se.value,Y),Se!==null&&(e&&Se.alternate!==null&&ne.delete(Se.key===null?ge:Se.key),E=u(Se,E,ge),_e===null?ie=Se:_e.sibling=Se,_e=Se);return e&&ne.forEach(function(pv){return t(O,pv)}),be&&nn(O,ge),ie}function Ce(O,E,D,Y){if(typeof D=="object"&&D!==null&&D.type===H&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case N:e:{for(var ie=D.key;E!==null;){if(E.key===ie){if(ie=D.type,ie===H){if(E.tag===7){a(O,E.sibling),Y=o(E,D.props.children),Y.return=O,O=Y;break e}}else if(E.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===Z&&ra(ie)===E.type){a(O,E.sibling),Y=o(E,D.props),Gs(Y,D),Y.return=O,O=Y;break e}a(O,E);break}else t(O,E);E=E.sibling}D.type===H?(Y=ta(D.props.children,O.mode,Y,D.key),Y.return=O,O=Y):(Y=Wi(D.type,D.key,D.props,null,O.mode,Y),Gs(Y,D),Y.return=O,O=Y)}return g(O);case C:e:{for(ie=D.key;E!==null;){if(E.key===ie)if(E.tag===4&&E.stateNode.containerInfo===D.containerInfo&&E.stateNode.implementation===D.implementation){a(O,E.sibling),Y=o(E,D.children||[]),Y.return=O,O=Y;break e}else{a(O,E);break}else t(O,E);E=E.sibling}Y=Jl(D,O.mode,Y),Y.return=O,O=Y}return g(O);case Z:return D=ra(D),Ce(O,E,D,Y)}if(B(D))return ee(O,E,D,Y);if(qe(D)){if(ie=qe(D),typeof ie!="function")throw Error(l(150));return D=ie.call(D),re(O,E,D,Y)}if(typeof D.then=="function")return Ce(O,E,ir(D),Y);if(D.$$typeof===q)return Ce(O,E,tr(O,D),Y);rr(O,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,E!==null&&E.tag===6?(a(O,E.sibling),Y=o(E,D),Y.return=O,O=Y):(a(O,E),Y=Pl(D,O.mode,Y),Y.return=O,O=Y),g(O)):a(O,E)}return function(O,E,D,Y){try{Bs=0;var ie=Ce(O,E,D,Y);return Va=null,ie}catch(ne){if(ne===Ia||ne===ar)throw ne;var _e=Nt(29,ne,null,O.mode);return _e.lanes=Y,_e.return=O,_e}finally{}}}var oa=Ed(!0),Ad=Ed(!1),Tn=!1;function ro(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function En(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function An(e,t,a){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(Ne&2)!==0){var o=i.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),i.pending=t,t=Zi(e),dd(e,null,a),t}return Xi(e,i,t,a),Zi(e)}function qs(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,a|=i,t.lanes=a,bu(e,a)}}function oo(e,t){var a=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,a===i)){var o=null,u=null;if(a=a.firstBaseUpdate,a!==null){do{var g={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};u===null?o=u=g:u=u.next=g,a=a.next}while(a!==null);u===null?o=u=t:u=u.next=t}else o=u=t;a={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:u,shared:i.shared,callbacks:i.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var co=!1;function $s(){if(co){var e=$a;if(e!==null)throw e}}function Is(e,t,a,i){co=!1;var o=e.updateQueue;Tn=!1;var u=o.firstBaseUpdate,g=o.lastBaseUpdate,y=o.shared.pending;if(y!==null){o.shared.pending=null;var S=y,z=S.next;S.next=null,g===null?u=z:g.next=z,g=S;var K=e.alternate;K!==null&&(K=K.updateQueue,y=K.lastBaseUpdate,y!==g&&(y===null?K.firstBaseUpdate=z:y.next=z,K.lastBaseUpdate=S))}if(u!==null){var P=o.baseState;g=0,K=z=S=null,y=u;do{var L=y.lane&-536870913,G=L!==y.lane;if(G?(ve&L)===L:(i&L)===L){L!==0&&L===qa&&(co=!0),K!==null&&(K=K.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});e:{var ee=e,re=y;L=t;var Ce=a;switch(re.tag){case 1:if(ee=re.payload,typeof ee=="function"){P=ee.call(Ce,P,L);break e}P=ee;break e;case 3:ee.flags=ee.flags&-65537|128;case 0:if(ee=re.payload,L=typeof ee=="function"?ee.call(Ce,P,L):ee,L==null)break e;P=x({},P,L);break e;case 2:Tn=!0}}L=y.callback,L!==null&&(e.flags|=64,G&&(e.flags|=8192),G=o.callbacks,G===null?o.callbacks=[L]:G.push(L))}else G={lane:L,tag:y.tag,payload:y.payload,callback:y.callback,next:null},K===null?(z=K=G,S=P):K=K.next=G,g|=L;if(y=y.next,y===null){if(y=o.shared.pending,y===null)break;G=y,y=G.next,G.next=null,o.lastBaseUpdate=G,o.shared.pending=null}}while(!0);K===null&&(S=P),o.baseState=S,o.firstBaseUpdate=z,o.lastBaseUpdate=K,u===null&&(o.shared.lanes=0),Un|=g,e.lanes=g,e.memoizedState=P}}function Cd(e,t){if(typeof e!="function")throw Error(l(191,e));e.call(t)}function kd(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Cd(a[e],t)}var Ka=T(null),lr=T(0);function Od(e,t){e=gn,X(lr,e),X(Ka,t),gn=e|t.baseLanes}function uo(){X(lr,gn),X(Ka,Ka.current)}function ho(){gn=lr.current,V(Ka),V(lr)}var jt=T(null),Ht=null;function Cn(e){var t=e.alternate;X($e,$e.current&1),X(jt,e),Ht===null&&(t===null||Ka.current!==null||t.memoizedState!==null)&&(Ht=e)}function fo(e){X($e,$e.current),X(jt,e),Ht===null&&(Ht=e)}function Rd(e){e.tag===22?(X($e,$e.current),X(jt,e),Ht===null&&(Ht=e)):kn()}function kn(){X($e,$e.current),X(jt,jt.current)}function Tt(e){V(jt),Ht===e&&(Ht=null),V($e)}var $e=T(0);function or(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||bc(a)||xc(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var rn=0,de=null,Ee=null,Ke=null,cr=!1,Ya=!1,ca=!1,ur=0,Vs=0,Pa=null,rp=0;function He(){throw Error(l(321))}function go(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!St(e[a],t[a]))return!1;return!0}function mo(e,t,a,i,o,u){return rn=u,de=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_.H=e===null||e.memoizedState===null?mh:ko,ca=!1,u=a(i,o),ca=!1,Ya&&(u=Md(t,a,i,o)),Ud(e),u}function Ud(e){_.H=Ps;var t=Ee!==null&&Ee.next!==null;if(rn=0,Ke=Ee=de=null,cr=!1,Vs=0,Pa=null,t)throw Error(l(300));e===null||Ye||(e=e.dependencies,e!==null&&er(e)&&(Ye=!0))}function Md(e,t,a,i){de=e;var o=0;do{if(Ya&&(Pa=null),Vs=0,Ya=!1,25<=o)throw Error(l(301));if(o+=1,Ke=Ee=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}_.H=ph,u=t(a,i)}while(Ya);return u}function lp(){var e=_.H,t=e.useState()[0];return t=typeof t.then=="function"?Ks(t):t,e=e.useState()[0],(Ee!==null?Ee.memoizedState:null)!==e&&(de.flags|=1024),t}function po(){var e=ur!==0;return ur=0,e}function vo(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function yo(e){if(cr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}cr=!1}rn=0,Ke=Ee=de=null,Ya=!1,Vs=ur=0,Pa=null}function ut(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?de.memoizedState=Ke=e:Ke=Ke.next=e,Ke}function Ie(){if(Ee===null){var e=de.alternate;e=e!==null?e.memoizedState:null}else e=Ee.next;var t=Ke===null?de.memoizedState:Ke.next;if(t!==null)Ke=t,Ee=e;else{if(e===null)throw de.alternate===null?Error(l(467)):Error(l(310));Ee=e,e={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},Ke===null?de.memoizedState=Ke=e:Ke=Ke.next=e}return Ke}function dr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ks(e){var t=Vs;return Vs+=1,Pa===null&&(Pa=[]),e=Nd(Pa,e,t),t=de,(Ke===null?t.memoizedState:Ke.next)===null&&(t=t.alternate,_.H=t===null||t.memoizedState===null?mh:ko),e}function hr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ks(e);if(e.$$typeof===q)return tt(e)}throw Error(l(438,String(e)))}function bo(e){var t=null,a=de.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var i=de.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=dr(),de.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),i=0;i<e;i++)a[i]=he;return t.index++,a}function ln(e,t){return typeof t=="function"?t(e):t}function fr(e){var t=Ie();return xo(t,Ee,e)}function xo(e,t,a){var i=e.queue;if(i===null)throw Error(l(311));i.lastRenderedReducer=a;var o=e.baseQueue,u=i.pending;if(u!==null){if(o!==null){var g=o.next;o.next=u.next,u.next=g}t.baseQueue=o=u,i.pending=null}if(u=e.baseState,o===null)e.memoizedState=u;else{t=o.next;var y=g=null,S=null,z=t,K=!1;do{var P=z.lane&-536870913;if(P!==z.lane?(ve&P)===P:(rn&P)===P){var L=z.revertLane;if(L===0)S!==null&&(S=S.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),P===qa&&(K=!0);else if((rn&L)===L){z=z.next,L===qa&&(K=!0);continue}else P={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},S===null?(y=S=P,g=u):S=S.next=P,de.lanes|=L,Un|=L;P=z.action,ca&&a(u,P),u=z.hasEagerState?z.eagerState:a(u,P)}else L={lane:P,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},S===null?(y=S=L,g=u):S=S.next=L,de.lanes|=P,Un|=P;z=z.next}while(z!==null&&z!==t);if(S===null?g=u:S.next=y,!St(u,e.memoizedState)&&(Ye=!0,K&&(a=$a,a!==null)))throw a;e.memoizedState=u,e.baseState=g,e.baseQueue=S,i.lastRenderedState=u}return o===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function wo(e){var t=Ie(),a=t.queue;if(a===null)throw Error(l(311));a.lastRenderedReducer=e;var i=a.dispatch,o=a.pending,u=t.memoizedState;if(o!==null){a.pending=null;var g=o=o.next;do u=e(u,g.action),g=g.next;while(g!==o);St(u,t.memoizedState)||(Ye=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),a.lastRenderedState=u}return[u,i]}function Dd(e,t,a){var i=de,o=Ie(),u=be;if(u){if(a===void 0)throw Error(l(407));a=a()}else a=t();var g=!St((Ee||o).memoizedState,a);if(g&&(o.memoizedState=a,Ye=!0),o=o.queue,No(Hd.bind(null,i,o,e),[e]),o.getSnapshot!==t||g||Ke!==null&&Ke.memoizedState.tag&1){if(i.flags|=2048,Ja(9,{destroy:void 0},Ld.bind(null,i,o,a,t),null),Oe===null)throw Error(l(349));u||(rn&127)!==0||zd(i,t,a)}return a}function zd(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=de.updateQueue,t===null?(t=dr(),de.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Ld(e,t,a,i){t.value=a,t.getSnapshot=i,Bd(t)&&Gd(e)}function Hd(e,t,a){return a(function(){Bd(t)&&Gd(e)})}function Bd(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!St(e,a)}catch{return!0}}function Gd(e){var t=ea(e,2);t!==null&&yt(t,e,2)}function _o(e){var t=ut();if(typeof e=="function"){var a=e;if(e=a(),ca){bn(!0);try{a()}finally{bn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ln,lastRenderedState:e},t}function qd(e,t,a,i){return e.baseState=a,xo(e,Ee,typeof i=="function"?i:ln)}function op(e,t,a,i,o){if(pr(e))throw Error(l(485));if(e=t.action,e!==null){var u={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){u.listeners.push(g)}};_.T!==null?a(!0):u.isTransition=!1,i(u),a=t.pending,a===null?(u.next=t.pending=u,$d(t,u)):(u.next=a.next,t.pending=a.next=u)}}function $d(e,t){var a=t.action,i=t.payload,o=e.state;if(t.isTransition){var u=_.T,g={};_.T=g;try{var y=a(o,i),S=_.S;S!==null&&S(g,y),Id(e,t,y)}catch(z){So(e,t,z)}finally{u!==null&&g.types!==null&&(u.types=g.types),_.T=u}}else try{u=a(o,i),Id(e,t,u)}catch(z){So(e,t,z)}}function Id(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(i){Vd(e,t,i)},function(i){return So(e,t,i)}):Vd(e,t,a)}function Vd(e,t,a){t.status="fulfilled",t.value=a,Kd(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,$d(e,a)))}function So(e,t,a){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=a,Kd(t),t=t.next;while(t!==i)}e.action=null}function Kd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Yd(e,t){return t}function Pd(e,t){if(be){var a=Oe.formState;if(a!==null){e:{var i=de;if(be){if(Ue){t:{for(var o=Ue,u=Lt;o.nodeType!==8;){if(!u){o=null;break t}if(o=Bt(o.nextSibling),o===null){o=null;break t}}u=o.data,o=u==="F!"||u==="F"?o:null}if(o){Ue=Bt(o.nextSibling),i=o.data==="F!";break e}}Nn(i)}i=!1}i&&(t=a[0])}}return a=ut(),a.memoizedState=a.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yd,lastRenderedState:t},a.queue=i,a=hh.bind(null,de,i),i.dispatch=a,i=_o(!1),u=Co.bind(null,de,!1,i.queue),i=ut(),o={state:t,dispatch:null,action:e,pending:null},i.queue=o,a=op.bind(null,de,o,u,a),o.dispatch=a,i.memoizedState=e,[t,a,!1]}function Jd(e){var t=Ie();return Qd(t,Ee,e)}function Qd(e,t,a){if(t=xo(e,t,Yd)[0],e=fr(ln)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=Ks(t)}catch(g){throw g===Ia?ar:g}else i=t;t=Ie();var o=t.queue,u=o.dispatch;return a!==t.memoizedState&&(de.flags|=2048,Ja(9,{destroy:void 0},cp.bind(null,o,a),null)),[i,u,e]}function cp(e,t){e.action=t}function Xd(e){var t=Ie(),a=Ee;if(a!==null)return Qd(t,a,e);Ie(),t=t.memoizedState,a=Ie();var i=a.queue.dispatch;return a.memoizedState=e,[t,i,!1]}function Ja(e,t,a,i){return e={tag:e,create:a,deps:i,inst:t,next:null},t=de.updateQueue,t===null&&(t=dr(),de.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(i=a.next,a.next=e,e.next=i,t.lastEffect=e),e}function Zd(){return Ie().memoizedState}function gr(e,t,a,i){var o=ut();de.flags|=e,o.memoizedState=Ja(1|t,{destroy:void 0},a,i===void 0?null:i)}function mr(e,t,a,i){var o=Ie();i=i===void 0?null:i;var u=o.memoizedState.inst;Ee!==null&&i!==null&&go(i,Ee.memoizedState.deps)?o.memoizedState=Ja(t,u,a,i):(de.flags|=e,o.memoizedState=Ja(1|t,u,a,i))}function Wd(e,t){gr(8390656,8,e,t)}function No(e,t){mr(2048,8,e,t)}function up(e){de.flags|=4;var t=de.updateQueue;if(t===null)t=dr(),de.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Fd(e){var t=Ie().memoizedState;return up({ref:t,nextImpl:e}),function(){if((Ne&2)!==0)throw Error(l(440));return t.impl.apply(void 0,arguments)}}function eh(e,t){return mr(4,2,e,t)}function th(e,t){return mr(4,4,e,t)}function nh(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ah(e,t,a){a=a!=null?a.concat([e]):null,mr(4,4,nh.bind(null,t,e),a)}function jo(){}function sh(e,t){var a=Ie();t=t===void 0?null:t;var i=a.memoizedState;return t!==null&&go(t,i[1])?i[0]:(a.memoizedState=[e,t],e)}function ih(e,t){var a=Ie();t=t===void 0?null:t;var i=a.memoizedState;if(t!==null&&go(t,i[1]))return i[0];if(i=e(),ca){bn(!0);try{e()}finally{bn(!1)}}return a.memoizedState=[i,t],i}function To(e,t,a){return a===void 0||(rn&1073741824)!==0&&(ve&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=lf(),de.lanes|=e,Un|=e,a)}function rh(e,t,a,i){return St(a,t)?a:Ka.current!==null?(e=To(e,a,i),St(e,t)||(Ye=!0),e):(rn&42)===0||(rn&1073741824)!==0&&(ve&261930)===0?(Ye=!0,e.memoizedState=a):(e=lf(),de.lanes|=e,Un|=e,t)}function lh(e,t,a,i,o){var u=I.p;I.p=u!==0&&8>u?u:8;var g=_.T,y={};_.T=y,Co(e,!1,t,a);try{var S=o(),z=_.S;if(z!==null&&z(y,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var K=ip(S,i);Ys(e,t,K,Ct(e))}else Ys(e,t,i,Ct(e))}catch(P){Ys(e,t,{then:function(){},status:"rejected",reason:P},Ct())}finally{I.p=u,g!==null&&y.types!==null&&(g.types=y.types),_.T=g}}function dp(){}function Eo(e,t,a,i){if(e.tag!==5)throw Error(l(476));var o=oh(e).queue;lh(e,o,t,W,a===null?dp:function(){return ch(e),a(i)})}function oh(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ln,lastRenderedState:W},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ln,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function ch(e){var t=oh(e);t.next===null&&(t=e.alternate.memoizedState),Ys(e,t.next.queue,{},Ct())}function Ao(){return tt(ci)}function uh(){return Ie().memoizedState}function dh(){return Ie().memoizedState}function hp(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Ct();e=En(a);var i=An(t,e,a);i!==null&&(yt(i,t,a),qs(i,t,a)),t={cache:no()},e.payload=t;return}t=t.return}}function fp(e,t,a){var i=Ct();a={lane:i,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},pr(e)?fh(t,a):(a=Kl(e,t,a,i),a!==null&&(yt(a,e,i),gh(a,t,i)))}function hh(e,t,a){var i=Ct();Ys(e,t,a,i)}function Ys(e,t,a,i){var o={lane:i,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(pr(e))fh(t,o);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var g=t.lastRenderedState,y=u(g,a);if(o.hasEagerState=!0,o.eagerState=y,St(y,g))return Xi(e,t,o,0),Oe===null&&Qi(),!1}catch{}finally{}if(a=Kl(e,t,o,i),a!==null)return yt(a,e,i),gh(a,t,i),!0}return!1}function Co(e,t,a,i){if(i={lane:2,revertLane:lc(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},pr(e)){if(t)throw Error(l(479))}else t=Kl(e,a,i,2),t!==null&&yt(t,e,2)}function pr(e){var t=e.alternate;return e===de||t!==null&&t===de}function fh(e,t){Ya=cr=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function gh(e,t,a){if((a&4194048)!==0){var i=t.lanes;i&=e.pendingLanes,a|=i,t.lanes=a,bu(e,a)}}var Ps={readContext:tt,use:hr,useCallback:He,useContext:He,useEffect:He,useImperativeHandle:He,useLayoutEffect:He,useInsertionEffect:He,useMemo:He,useReducer:He,useRef:He,useState:He,useDebugValue:He,useDeferredValue:He,useTransition:He,useSyncExternalStore:He,useId:He,useHostTransitionStatus:He,useFormState:He,useActionState:He,useOptimistic:He,useMemoCache:He,useCacheRefresh:He};Ps.useEffectEvent=He;var mh={readContext:tt,use:hr,useCallback:function(e,t){return ut().memoizedState=[e,t===void 0?null:t],e},useContext:tt,useEffect:Wd,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,gr(4194308,4,nh.bind(null,t,e),a)},useLayoutEffect:function(e,t){return gr(4194308,4,e,t)},useInsertionEffect:function(e,t){gr(4,2,e,t)},useMemo:function(e,t){var a=ut();t=t===void 0?null:t;var i=e();if(ca){bn(!0);try{e()}finally{bn(!1)}}return a.memoizedState=[i,t],i},useReducer:function(e,t,a){var i=ut();if(a!==void 0){var o=a(t);if(ca){bn(!0);try{a(t)}finally{bn(!1)}}}else o=t;return i.memoizedState=i.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},i.queue=e,e=e.dispatch=fp.bind(null,de,e),[i.memoizedState,e]},useRef:function(e){var t=ut();return e={current:e},t.memoizedState=e},useState:function(e){e=_o(e);var t=e.queue,a=hh.bind(null,de,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:jo,useDeferredValue:function(e,t){var a=ut();return To(a,e,t)},useTransition:function(){var e=_o(!1);return e=lh.bind(null,de,e.queue,!0,!1),ut().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var i=de,o=ut();if(be){if(a===void 0)throw Error(l(407));a=a()}else{if(a=t(),Oe===null)throw Error(l(349));(ve&127)!==0||zd(i,t,a)}o.memoizedState=a;var u={value:a,getSnapshot:t};return o.queue=u,Wd(Hd.bind(null,i,u,e),[e]),i.flags|=2048,Ja(9,{destroy:void 0},Ld.bind(null,i,u,a,t),null),a},useId:function(){var e=ut(),t=Oe.identifierPrefix;if(be){var a=Jt,i=Pt;a=(i&~(1<<32-_t(i)-1)).toString(32)+a,t="_"+t+"R_"+a,a=ur++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=rp++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Ao,useFormState:Pd,useActionState:Pd,useOptimistic:function(e){var t=ut();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Co.bind(null,de,!0,a),a.dispatch=t,[e,t]},useMemoCache:bo,useCacheRefresh:function(){return ut().memoizedState=hp.bind(null,de)},useEffectEvent:function(e){var t=ut(),a={impl:e};return t.memoizedState=a,function(){if((Ne&2)!==0)throw Error(l(440));return a.impl.apply(void 0,arguments)}}},ko={readContext:tt,use:hr,useCallback:sh,useContext:tt,useEffect:No,useImperativeHandle:ah,useInsertionEffect:eh,useLayoutEffect:th,useMemo:ih,useReducer:fr,useRef:Zd,useState:function(){return fr(ln)},useDebugValue:jo,useDeferredValue:function(e,t){var a=Ie();return rh(a,Ee.memoizedState,e,t)},useTransition:function(){var e=fr(ln)[0],t=Ie().memoizedState;return[typeof e=="boolean"?e:Ks(e),t]},useSyncExternalStore:Dd,useId:uh,useHostTransitionStatus:Ao,useFormState:Jd,useActionState:Jd,useOptimistic:function(e,t){var a=Ie();return qd(a,Ee,e,t)},useMemoCache:bo,useCacheRefresh:dh};ko.useEffectEvent=Fd;var ph={readContext:tt,use:hr,useCallback:sh,useContext:tt,useEffect:No,useImperativeHandle:ah,useInsertionEffect:eh,useLayoutEffect:th,useMemo:ih,useReducer:wo,useRef:Zd,useState:function(){return wo(ln)},useDebugValue:jo,useDeferredValue:function(e,t){var a=Ie();return Ee===null?To(a,e,t):rh(a,Ee.memoizedState,e,t)},useTransition:function(){var e=wo(ln)[0],t=Ie().memoizedState;return[typeof e=="boolean"?e:Ks(e),t]},useSyncExternalStore:Dd,useId:uh,useHostTransitionStatus:Ao,useFormState:Xd,useActionState:Xd,useOptimistic:function(e,t){var a=Ie();return Ee!==null?qd(a,Ee,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:bo,useCacheRefresh:dh};ph.useEffectEvent=Fd;function Oo(e,t,a,i){t=e.memoizedState,a=a(i,t),a=a==null?t:x({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Ro={enqueueSetState:function(e,t,a){e=e._reactInternals;var i=Ct(),o=En(i);o.payload=t,a!=null&&(o.callback=a),t=An(e,o,i),t!==null&&(yt(t,e,i),qs(t,e,i))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var i=Ct(),o=En(i);o.tag=1,o.payload=t,a!=null&&(o.callback=a),t=An(e,o,i),t!==null&&(yt(t,e,i),qs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Ct(),i=En(a);i.tag=2,t!=null&&(i.callback=t),t=An(e,i,a),t!==null&&(yt(t,e,a),qs(t,e,a))}};function vh(e,t,a,i,o,u,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,u,g):t.prototype&&t.prototype.isPureReactComponent?!Us(a,i)||!Us(o,u):!0}function yh(e,t,a,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,i),t.state!==e&&Ro.enqueueReplaceState(t,t.state,null)}function ua(e,t){var a=t;if("ref"in t){a={};for(var i in t)i!=="ref"&&(a[i]=t[i])}if(e=e.defaultProps){a===t&&(a=x({},a));for(var o in e)a[o]===void 0&&(a[o]=e[o])}return a}function bh(e){Ji(e)}function xh(e){console.error(e)}function wh(e){Ji(e)}function vr(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function _h(e,t,a){try{var i=e.onCaughtError;i(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Uo(e,t,a){return a=En(a),a.tag=3,a.payload={element:null},a.callback=function(){vr(e,t)},a}function Sh(e){return e=En(e),e.tag=3,e}function Nh(e,t,a,i){var o=a.type.getDerivedStateFromError;if(typeof o=="function"){var u=i.value;e.payload=function(){return o(u)},e.callback=function(){_h(t,a,i)}}var g=a.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){_h(t,a,i),typeof o!="function"&&(Mn===null?Mn=new Set([this]):Mn.add(this));var y=i.stack;this.componentDidCatch(i.value,{componentStack:y!==null?y:""})})}function gp(e,t,a,i,o){if(a.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=a.alternate,t!==null&&Ga(t,a,o,!0),a=jt.current,a!==null){switch(a.tag){case 31:case 13:return Ht===null?Cr():a.alternate===null&&Be===0&&(Be=3),a.flags&=-257,a.flags|=65536,a.lanes=o,i===sr?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([i]):t.add(i),sc(e,i,o)),!1;case 22:return a.flags|=65536,i===sr?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([i]):a.add(i)),sc(e,i,o)),!1}throw Error(l(435,a.tag))}return sc(e,i,o),Cr(),!1}if(be)return t=jt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,i!==Zl&&(e=Error(l(422),{cause:i}),zs(Mt(e,a)))):(i!==Zl&&(t=Error(l(423),{cause:i}),zs(Mt(t,a))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,i=Mt(i,a),o=Uo(e.stateNode,i,o),oo(e,o),Be!==4&&(Be=2)),!1;var u=Error(l(520),{cause:i});if(u=Mt(u,a),ti===null?ti=[u]:ti.push(u),Be!==4&&(Be=2),t===null)return!0;i=Mt(i,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=o&-o,a.lanes|=e,e=Uo(a.stateNode,i,e),oo(a,e),!1;case 1:if(t=a.type,u=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(Mn===null||!Mn.has(u))))return a.flags|=65536,o&=-o,a.lanes|=o,o=Sh(o),Nh(o,e,a,i),oo(a,o),!1}a=a.return}while(a!==null);return!1}var Mo=Error(l(461)),Ye=!1;function nt(e,t,a,i){t.child=e===null?Ad(t,null,a,i):oa(t,e.child,a,i)}function jh(e,t,a,i,o){a=a.render;var u=t.ref;if("ref"in i){var g={};for(var y in i)y!=="ref"&&(g[y]=i[y])}else g=i;return sa(t),i=mo(e,t,a,g,u,o),y=po(),e!==null&&!Ye?(vo(e,t,o),on(e,t,o)):(be&&y&&Ql(t),t.flags|=1,nt(e,t,i,o),t.child)}function Th(e,t,a,i,o){if(e===null){var u=a.type;return typeof u=="function"&&!Yl(u)&&u.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=u,Eh(e,t,u,i,o)):(e=Wi(a.type,null,i,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!$o(e,o)){var g=u.memoizedProps;if(a=a.compare,a=a!==null?a:Us,a(g,i)&&e.ref===t.ref)return on(e,t,o)}return t.flags|=1,e=tn(u,i),e.ref=t.ref,e.return=t,t.child=e}function Eh(e,t,a,i,o){if(e!==null){var u=e.memoizedProps;if(Us(u,i)&&e.ref===t.ref)if(Ye=!1,t.pendingProps=i=u,$o(e,o))(e.flags&131072)!==0&&(Ye=!0);else return t.lanes=e.lanes,on(e,t,o)}return Do(e,t,a,i,o)}function Ah(e,t,a,i){var o=i.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|a:a,e!==null){for(i=t.child=e.child,o=0;i!==null;)o=o|i.lanes|i.childLanes,i=i.sibling;i=o&~u}else i=0,t.child=null;return Ch(e,t,u,a,i)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&nr(t,u!==null?u.cachePool:null),u!==null?Od(t,u):uo(),Rd(t);else return i=t.lanes=536870912,Ch(e,t,u!==null?u.baseLanes|a:a,a,i)}else u!==null?(nr(t,u.cachePool),Od(t,u),kn(),t.memoizedState=null):(e!==null&&nr(t,null),uo(),kn());return nt(e,t,o,a),t.child}function Js(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Ch(e,t,a,i,o){var u=so();return u=u===null?null:{parent:Ve._currentValue,pool:u},t.memoizedState={baseLanes:a,cachePool:u},e!==null&&nr(t,null),uo(),Rd(t),e!==null&&Ga(e,t,i,!0),t.childLanes=o,null}function yr(e,t){return t=xr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function kh(e,t,a){return oa(t,e.child,null,a),e=yr(t,t.pendingProps),e.flags|=2,Tt(t),t.memoizedState=null,e}function mp(e,t,a){var i=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(be){if(i.mode==="hidden")return e=yr(t,i),t.lanes=536870912,Js(null,e);if(fo(t),(e=Ue)?(e=If(e,Lt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:_n!==null?{id:Pt,overflow:Jt}:null,retryLane:536870912,hydrationErrors:null},a=fd(e),a.return=t,t.child=a,et=t,Ue=null)):e=null,e===null)throw Nn(t);return t.lanes=536870912,null}return yr(t,i)}var u=e.memoizedState;if(u!==null){var g=u.dehydrated;if(fo(t),o)if(t.flags&256)t.flags&=-257,t=kh(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(l(558));else if(Ye||Ga(e,t,a,!1),o=(a&e.childLanes)!==0,Ye||o){if(i=Oe,i!==null&&(g=xu(i,a),g!==0&&g!==u.retryLane))throw u.retryLane=g,ea(e,g),yt(i,e,g),Mo;Cr(),t=kh(e,t,a)}else e=u.treeContext,Ue=Bt(g.nextSibling),et=t,be=!0,Sn=null,Lt=!1,e!==null&&pd(t,e),t=yr(t,i),t.flags|=4096;return t}return e=tn(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function br(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(l(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Do(e,t,a,i,o){return sa(t),a=mo(e,t,a,i,void 0,o),i=po(),e!==null&&!Ye?(vo(e,t,o),on(e,t,o)):(be&&i&&Ql(t),t.flags|=1,nt(e,t,a,o),t.child)}function Oh(e,t,a,i,o,u){return sa(t),t.updateQueue=null,a=Md(t,i,a,o),Ud(e),i=po(),e!==null&&!Ye?(vo(e,t,u),on(e,t,u)):(be&&i&&Ql(t),t.flags|=1,nt(e,t,a,u),t.child)}function Rh(e,t,a,i,o){if(sa(t),t.stateNode===null){var u=za,g=a.contextType;typeof g=="object"&&g!==null&&(u=tt(g)),u=new a(i,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Ro,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=i,u.state=t.memoizedState,u.refs={},ro(t),g=a.contextType,u.context=typeof g=="object"&&g!==null?tt(g):za,u.state=t.memoizedState,g=a.getDerivedStateFromProps,typeof g=="function"&&(Oo(t,a,g,i),u.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(g=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),g!==u.state&&Ro.enqueueReplaceState(u,u.state,null),Is(t,i,u,o),$s(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){u=t.stateNode;var y=t.memoizedProps,S=ua(a,y);u.props=S;var z=u.context,K=a.contextType;g=za,typeof K=="object"&&K!==null&&(g=tt(K));var P=a.getDerivedStateFromProps;K=typeof P=="function"||typeof u.getSnapshotBeforeUpdate=="function",y=t.pendingProps!==y,K||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(y||z!==g)&&yh(t,u,i,g),Tn=!1;var L=t.memoizedState;u.state=L,Is(t,i,u,o),$s(),z=t.memoizedState,y||L!==z||Tn?(typeof P=="function"&&(Oo(t,a,P,i),z=t.memoizedState),(S=Tn||vh(t,a,S,i,L,z,g))?(K||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=z),u.props=i,u.state=z,u.context=g,i=S):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{u=t.stateNode,lo(e,t),g=t.memoizedProps,K=ua(a,g),u.props=K,P=t.pendingProps,L=u.context,z=a.contextType,S=za,typeof z=="object"&&z!==null&&(S=tt(z)),y=a.getDerivedStateFromProps,(z=typeof y=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(g!==P||L!==S)&&yh(t,u,i,S),Tn=!1,L=t.memoizedState,u.state=L,Is(t,i,u,o),$s();var G=t.memoizedState;g!==P||L!==G||Tn||e!==null&&e.dependencies!==null&&er(e.dependencies)?(typeof y=="function"&&(Oo(t,a,y,i),G=t.memoizedState),(K=Tn||vh(t,a,K,i,L,G,S)||e!==null&&e.dependencies!==null&&er(e.dependencies))?(z||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(i,G,S),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(i,G,S)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||g===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=G),u.props=i,u.state=G,u.context=S,i=K):(typeof u.componentDidUpdate!="function"||g===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),i=!1)}return u=i,br(e,t),i=(t.flags&128)!==0,u||i?(u=t.stateNode,a=i&&typeof a.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&i?(t.child=oa(t,e.child,null,o),t.child=oa(t,null,a,o)):nt(e,t,a,o),t.memoizedState=u.state,e=t.child):e=on(e,t,o),e}function Uh(e,t,a,i){return na(),t.flags|=256,nt(e,t,a,i),t.child}var zo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lo(e){return{baseLanes:e,cachePool:_d()}}function Ho(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=At),e}function Mh(e,t,a){var i=t.pendingProps,o=!1,u=(t.flags&128)!==0,g;if((g=u)||(g=e!==null&&e.memoizedState===null?!1:($e.current&2)!==0),g&&(o=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(be){if(o?Cn(t):kn(),(e=Ue)?(e=If(e,Lt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:_n!==null?{id:Pt,overflow:Jt}:null,retryLane:536870912,hydrationErrors:null},a=fd(e),a.return=t,t.child=a,et=t,Ue=null)):e=null,e===null)throw Nn(t);return xc(e)?t.lanes=32:t.lanes=536870912,null}var y=i.children;return i=i.fallback,o?(kn(),o=t.mode,y=xr({mode:"hidden",children:y},o),i=ta(i,o,a,null),y.return=t,i.return=t,y.sibling=i,t.child=y,i=t.child,i.memoizedState=Lo(a),i.childLanes=Ho(e,g,a),t.memoizedState=zo,Js(null,i)):(Cn(t),Bo(t,y))}var S=e.memoizedState;if(S!==null&&(y=S.dehydrated,y!==null)){if(u)t.flags&256?(Cn(t),t.flags&=-257,t=Go(e,t,a)):t.memoizedState!==null?(kn(),t.child=e.child,t.flags|=128,t=null):(kn(),y=i.fallback,o=t.mode,i=xr({mode:"visible",children:i.children},o),y=ta(y,o,a,null),y.flags|=2,i.return=t,y.return=t,i.sibling=y,t.child=i,oa(t,e.child,null,a),i=t.child,i.memoizedState=Lo(a),i.childLanes=Ho(e,g,a),t.memoizedState=zo,t=Js(null,i));else if(Cn(t),xc(y)){if(g=y.nextSibling&&y.nextSibling.dataset,g)var z=g.dgst;g=z,i=Error(l(419)),i.stack="",i.digest=g,zs({value:i,source:null,stack:null}),t=Go(e,t,a)}else if(Ye||Ga(e,t,a,!1),g=(a&e.childLanes)!==0,Ye||g){if(g=Oe,g!==null&&(i=xu(g,a),i!==0&&i!==S.retryLane))throw S.retryLane=i,ea(e,i),yt(g,e,i),Mo;bc(y)||Cr(),t=Go(e,t,a)}else bc(y)?(t.flags|=192,t.child=e.child,t=null):(e=S.treeContext,Ue=Bt(y.nextSibling),et=t,be=!0,Sn=null,Lt=!1,e!==null&&pd(t,e),t=Bo(t,i.children),t.flags|=4096);return t}return o?(kn(),y=i.fallback,o=t.mode,S=e.child,z=S.sibling,i=tn(S,{mode:"hidden",children:i.children}),i.subtreeFlags=S.subtreeFlags&65011712,z!==null?y=tn(z,y):(y=ta(y,o,a,null),y.flags|=2),y.return=t,i.return=t,i.sibling=y,t.child=i,Js(null,i),i=t.child,y=e.child.memoizedState,y===null?y=Lo(a):(o=y.cachePool,o!==null?(S=Ve._currentValue,o=o.parent!==S?{parent:S,pool:S}:o):o=_d(),y={baseLanes:y.baseLanes|a,cachePool:o}),i.memoizedState=y,i.childLanes=Ho(e,g,a),t.memoizedState=zo,Js(e.child,i)):(Cn(t),a=e.child,e=a.sibling,a=tn(a,{mode:"visible",children:i.children}),a.return=t,a.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=a,t.memoizedState=null,a)}function Bo(e,t){return t=xr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function xr(e,t){return e=Nt(22,e,null,t),e.lanes=0,e}function Go(e,t,a){return oa(t,e.child,null,a),e=Bo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Dh(e,t,a){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),eo(e.return,t,a)}function qo(e,t,a,i,o,u){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:a,tailMode:o,treeForkCount:u}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=i,g.tail=a,g.tailMode=o,g.treeForkCount=u)}function zh(e,t,a){var i=t.pendingProps,o=i.revealOrder,u=i.tail;i=i.children;var g=$e.current,y=(g&2)!==0;if(y?(g=g&1|2,t.flags|=128):g&=1,X($e,g),nt(e,t,i,a),i=be?Ds:0,!y&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Dh(e,a,t);else if(e.tag===19)Dh(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(a=t.child,o=null;a!==null;)e=a.alternate,e!==null&&or(e)===null&&(o=a),a=a.sibling;a=o,a===null?(o=t.child,t.child=null):(o=a.sibling,a.sibling=null),qo(t,!1,o,a,u,i);break;case"backwards":case"unstable_legacy-backwards":for(a=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&or(e)===null){t.child=o;break}e=o.sibling,o.sibling=a,a=o,o=e}qo(t,!0,a,null,u,i);break;case"together":qo(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function on(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Un|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Ga(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(l(153));if(t.child!==null){for(e=t.child,a=tn(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=tn(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function $o(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&er(e)))}function pp(e,t,a){switch(t.tag){case 3:rt(t,t.stateNode.containerInfo),jn(t,Ve,e.memoizedState.cache),na();break;case 27:case 5:Yt(t);break;case 4:rt(t,t.stateNode.containerInfo);break;case 10:jn(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,fo(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Cn(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Mh(e,t,a):(Cn(t),e=on(e,t,a),e!==null?e.sibling:null);Cn(t);break;case 19:var o=(e.flags&128)!==0;if(i=(a&t.childLanes)!==0,i||(Ga(e,t,a,!1),i=(a&t.childLanes)!==0),o){if(i)return zh(e,t,a);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),X($e,$e.current),i)break;return null;case 22:return t.lanes=0,Ah(e,t,a,t.pendingProps);case 24:jn(t,Ve,e.memoizedState.cache)}return on(e,t,a)}function Lh(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ye=!0;else{if(!$o(e,a)&&(t.flags&128)===0)return Ye=!1,pp(e,t,a);Ye=(e.flags&131072)!==0}else Ye=!1,be&&(t.flags&1048576)!==0&&md(t,Ds,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=ra(t.elementType),t.type=e,typeof e=="function")Yl(e)?(i=ua(e,i),t.tag=1,t=Rh(null,t,e,i,a)):(t.tag=0,t=Do(null,t,e,i,a));else{if(e!=null){var o=e.$$typeof;if(o===j){t.tag=11,t=jh(null,t,e,i,a);break e}else if(o===J){t.tag=14,t=Th(null,t,e,i,a);break e}}throw t=k(e)||e,Error(l(306,t,""))}}return t;case 0:return Do(e,t,t.type,t.pendingProps,a);case 1:return i=t.type,o=ua(i,t.pendingProps),Rh(e,t,i,o,a);case 3:e:{if(rt(t,t.stateNode.containerInfo),e===null)throw Error(l(387));i=t.pendingProps;var u=t.memoizedState;o=u.element,lo(e,t),Is(t,i,null,a);var g=t.memoizedState;if(i=g.cache,jn(t,Ve,i),i!==u.cache&&to(t,[Ve],a,!0),$s(),i=g.element,u.isDehydrated)if(u={element:i,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=Uh(e,t,i,a);break e}else if(i!==o){o=Mt(Error(l(424)),t),zs(o),t=Uh(e,t,i,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ue=Bt(e.firstChild),et=t,be=!0,Sn=null,Lt=!0,a=Ad(t,null,i,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(na(),i===o){t=on(e,t,a);break e}nt(e,t,i,a)}t=t.child}return t;case 26:return br(e,t),e===null?(a=Qf(t.type,null,t.pendingProps,null))?t.memoizedState=a:be||(a=t.type,e=t.pendingProps,i=zr(fe.current).createElement(a),i[Fe]=t,i[ht]=e,at(i,a,e),Ze(i),t.stateNode=i):t.memoizedState=Qf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Yt(t),e===null&&be&&(i=t.stateNode=Yf(t.type,t.pendingProps,fe.current),et=t,Lt=!0,o=Ue,Hn(t.type)?(wc=o,Ue=Bt(i.firstChild)):Ue=o),nt(e,t,t.pendingProps.children,a),br(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&be&&((o=i=Ue)&&(i=Yp(i,t.type,t.pendingProps,Lt),i!==null?(t.stateNode=i,et=t,Ue=Bt(i.firstChild),Lt=!1,o=!0):o=!1),o||Nn(t)),Yt(t),o=t.type,u=t.pendingProps,g=e!==null?e.memoizedProps:null,i=u.children,pc(o,u)?i=null:g!==null&&pc(o,g)&&(t.flags|=32),t.memoizedState!==null&&(o=mo(e,t,lp,null,null,a),ci._currentValue=o),br(e,t),nt(e,t,i,a),t.child;case 6:return e===null&&be&&((e=a=Ue)&&(a=Pp(a,t.pendingProps,Lt),a!==null?(t.stateNode=a,et=t,Ue=null,e=!0):e=!1),e||Nn(t)),null;case 13:return Mh(e,t,a);case 4:return rt(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=oa(t,null,i,a):nt(e,t,i,a),t.child;case 11:return jh(e,t,t.type,t.pendingProps,a);case 7:return nt(e,t,t.pendingProps,a),t.child;case 8:return nt(e,t,t.pendingProps.children,a),t.child;case 12:return nt(e,t,t.pendingProps.children,a),t.child;case 10:return i=t.pendingProps,jn(t,t.type,i.value),nt(e,t,i.children,a),t.child;case 9:return o=t.type._context,i=t.pendingProps.children,sa(t),o=tt(o),i=i(o),t.flags|=1,nt(e,t,i,a),t.child;case 14:return Th(e,t,t.type,t.pendingProps,a);case 15:return Eh(e,t,t.type,t.pendingProps,a);case 19:return zh(e,t,a);case 31:return mp(e,t,a);case 22:return Ah(e,t,a,t.pendingProps);case 24:return sa(t),i=tt(Ve),e===null?(o=so(),o===null&&(o=Oe,u=no(),o.pooledCache=u,u.refCount++,u!==null&&(o.pooledCacheLanes|=a),o=u),t.memoizedState={parent:i,cache:o},ro(t),jn(t,Ve,o)):((e.lanes&a)!==0&&(lo(e,t),Is(t,null,null,a),$s()),o=e.memoizedState,u=t.memoizedState,o.parent!==i?(o={parent:i,cache:i},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),jn(t,Ve,i)):(i=u.cache,jn(t,Ve,i),i!==o.cache&&to(t,[Ve],a,!0))),nt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function cn(e){e.flags|=4}function Io(e,t,a,i,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(df())e.flags|=8192;else throw la=sr,io}else e.flags&=-16777217}function Hh(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!e0(t))if(df())e.flags|=8192;else throw la=sr,io}function wr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?vu():536870912,e.lanes|=t,Wa|=t)}function Qs(e,t){if(!be)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Me(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,i=0;if(t)for(var o=e.child;o!==null;)a|=o.lanes|o.childLanes,i|=o.subtreeFlags&65011712,i|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)a|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=i,e.childLanes=a,t}function vp(e,t,a){var i=t.pendingProps;switch(Xl(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Me(t),null;case 1:return Me(t),null;case 3:return a=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),sn(Ve),Le(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ba(t)?cn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Wl())),Me(t),null;case 26:var o=t.type,u=t.memoizedState;return e===null?(cn(t),u!==null?(Me(t),Hh(t,u)):(Me(t),Io(t,o,null,i,a))):u?u!==e.memoizedState?(cn(t),Me(t),Hh(t,u)):(Me(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&cn(t),Me(t),Io(t,o,e,i,a)),null;case 27:if(Ri(t),a=fe.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&cn(t);else{if(!i){if(t.stateNode===null)throw Error(l(166));return Me(t),null}e=F.current,Ba(t)?vd(t):(e=Yf(o,i,a),t.stateNode=e,cn(t))}return Me(t),null;case 5:if(Ri(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&cn(t);else{if(!i){if(t.stateNode===null)throw Error(l(166));return Me(t),null}if(u=F.current,Ba(t))vd(t);else{var g=zr(fe.current);switch(u){case 1:u=g.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:u=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":u=g.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":u=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":u=g.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof i.is=="string"?g.createElement("select",{is:i.is}):g.createElement("select"),i.multiple?u.multiple=!0:i.size&&(u.size=i.size);break;default:u=typeof i.is=="string"?g.createElement(o,{is:i.is}):g.createElement(o)}}u[Fe]=t,u[ht]=i;e:for(g=t.child;g!==null;){if(g.tag===5||g.tag===6)u.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}t.stateNode=u;e:switch(at(u,o,i),o){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&cn(t)}}return Me(t),Io(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&cn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(l(166));if(e=fe.current,Ba(t)){if(e=t.stateNode,a=t.memoizedProps,i=null,o=et,o!==null)switch(o.tag){case 27:case 5:i=o.memoizedProps}e[Fe]=t,e=!!(e.nodeValue===a||i!==null&&i.suppressHydrationWarning===!0||Df(e.nodeValue,a)),e||Nn(t,!0)}else e=zr(e).createTextNode(i),e[Fe]=t,t.stateNode=e}return Me(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(i=Ba(t),a!==null){if(e===null){if(!i)throw Error(l(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[Fe]=t}else na(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Me(t),e=!1}else a=Wl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(Tt(t),t):(Tt(t),null);if((t.flags&128)!==0)throw Error(l(558))}return Me(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=Ba(t),i!==null&&i.dehydrated!==null){if(e===null){if(!o)throw Error(l(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(l(317));o[Fe]=t}else na(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Me(t),o=!1}else o=Wl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(Tt(t),t):(Tt(t),null)}return Tt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=i!==null,e=e!==null&&e.memoizedState!==null,a&&(i=t.child,o=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(o=i.alternate.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),wr(t,t.updateQueue),Me(t),null);case 4:return Le(),e===null&&dc(t.stateNode.containerInfo),Me(t),null;case 10:return sn(t.type),Me(t),null;case 19:if(V($e),i=t.memoizedState,i===null)return Me(t),null;if(o=(t.flags&128)!==0,u=i.rendering,u===null)if(o)Qs(i,!1);else{if(Be!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=or(e),u!==null){for(t.flags|=128,Qs(i,!1),e=u.updateQueue,t.updateQueue=e,wr(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)hd(a,e),a=a.sibling;return X($e,$e.current&1|2),be&&nn(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&xt()>Tr&&(t.flags|=128,o=!0,Qs(i,!1),t.lanes=4194304)}else{if(!o)if(e=or(u),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,wr(t,e),Qs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!u.alternate&&!be)return Me(t),null}else 2*xt()-i.renderingStartTime>Tr&&a!==536870912&&(t.flags|=128,o=!0,Qs(i,!1),t.lanes=4194304);i.isBackwards?(u.sibling=t.child,t.child=u):(e=i.last,e!==null?e.sibling=u:t.child=u,i.last=u)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=xt(),e.sibling=null,a=$e.current,X($e,o?a&1|2:a&1),be&&nn(t,i.treeForkCount),e):(Me(t),null);case 22:case 23:return Tt(t),ho(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?(a&536870912)!==0&&(t.flags&128)===0&&(Me(t),t.subtreeFlags&6&&(t.flags|=8192)):Me(t),a=t.updateQueue,a!==null&&wr(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==a&&(t.flags|=2048),e!==null&&V(ia),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),sn(Ve),Me(t),null;case 25:return null;case 30:return null}throw Error(l(156,t.tag))}function yp(e,t){switch(Xl(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return sn(Ve),Le(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ri(t),null;case 31:if(t.memoizedState!==null){if(Tt(t),t.alternate===null)throw Error(l(340));na()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Tt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(l(340));na()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return V($e),null;case 4:return Le(),null;case 10:return sn(t.type),null;case 22:case 23:return Tt(t),ho(),e!==null&&V(ia),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return sn(Ve),null;case 25:return null;default:return null}}function Bh(e,t){switch(Xl(t),t.tag){case 3:sn(Ve),Le();break;case 26:case 27:case 5:Ri(t);break;case 4:Le();break;case 31:t.memoizedState!==null&&Tt(t);break;case 13:Tt(t);break;case 19:V($e);break;case 10:sn(t.type);break;case 22:case 23:Tt(t),ho(),e!==null&&V(ia);break;case 24:sn(Ve)}}function Xs(e,t){try{var a=t.updateQueue,i=a!==null?a.lastEffect:null;if(i!==null){var o=i.next;a=o;do{if((a.tag&e)===e){i=void 0;var u=a.create,g=a.inst;i=u(),g.destroy=i}a=a.next}while(a!==o)}}catch(y){Te(t,t.return,y)}}function On(e,t,a){try{var i=t.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var u=o.next;i=u;do{if((i.tag&e)===e){var g=i.inst,y=g.destroy;if(y!==void 0){g.destroy=void 0,o=t;var S=a,z=y;try{z()}catch(K){Te(o,S,K)}}}i=i.next}while(i!==u)}}catch(K){Te(t,t.return,K)}}function Gh(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{kd(t,a)}catch(i){Te(e,e.return,i)}}}function qh(e,t,a){a.props=ua(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(i){Te(e,t,i)}}function Zs(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof a=="function"?e.refCleanup=a(i):a.current=i}}catch(o){Te(e,t,o)}}function Qt(e,t){var a=e.ref,i=e.refCleanup;if(a!==null)if(typeof i=="function")try{i()}catch(o){Te(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(o){Te(e,t,o)}else a.current=null}function $h(e){var t=e.type,a=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&i.focus();break e;case"img":a.src?i.src=a.src:a.srcSet&&(i.srcset=a.srcSet)}}catch(o){Te(e,e.return,o)}}function Vo(e,t,a){try{var i=e.stateNode;Gp(i,e.type,a,t),i[ht]=t}catch(o){Te(e,e.return,o)}}function Ih(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Hn(e.type)||e.tag===4}function Ko(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ih(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Hn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yo(e,t,a){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Ft));else if(i!==4&&(i===27&&Hn(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Yo(e,t,a),e=e.sibling;e!==null;)Yo(e,t,a),e=e.sibling}function _r(e,t,a){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(i!==4&&(i===27&&Hn(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(_r(e,t,a),e=e.sibling;e!==null;)_r(e,t,a),e=e.sibling}function Vh(e){var t=e.stateNode,a=e.memoizedProps;try{for(var i=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);at(t,i,a),t[Fe]=e,t[ht]=a}catch(u){Te(e,e.return,u)}}var un=!1,Pe=!1,Po=!1,Kh=typeof WeakSet=="function"?WeakSet:Set,We=null;function bp(e,t){if(e=e.containerInfo,gc=Ir,e=ad(e),Bl(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var i=a.getSelection&&a.getSelection();if(i&&i.rangeCount!==0){a=i.anchorNode;var o=i.anchorOffset,u=i.focusNode;i=i.focusOffset;try{a.nodeType,u.nodeType}catch{a=null;break e}var g=0,y=-1,S=-1,z=0,K=0,P=e,L=null;t:for(;;){for(var G;P!==a||o!==0&&P.nodeType!==3||(y=g+o),P!==u||i!==0&&P.nodeType!==3||(S=g+i),P.nodeType===3&&(g+=P.nodeValue.length),(G=P.firstChild)!==null;)L=P,P=G;for(;;){if(P===e)break t;if(L===a&&++z===o&&(y=g),L===u&&++K===i&&(S=g),(G=P.nextSibling)!==null)break;P=L,L=P.parentNode}P=G}a=y===-1||S===-1?null:{start:y,end:S}}else a=null}a=a||{start:0,end:0}}else a=null;for(mc={focusedElem:e,selectionRange:a},Ir=!1,We=t;We!==null;)if(t=We,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,We=e;else for(;We!==null;){switch(t=We,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)o=e[a],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,a=t,o=u.memoizedProps,u=u.memoizedState,i=a.stateNode;try{var ee=ua(a.type,o);e=i.getSnapshotBeforeUpdate(ee,u),i.__reactInternalSnapshotBeforeUpdate=e}catch(re){Te(a,a.return,re)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)yc(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":yc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=t.sibling,e!==null){e.return=t.return,We=e;break}We=t.return}}function Yh(e,t,a){var i=a.flags;switch(a.tag){case 0:case 11:case 15:hn(e,a),i&4&&Xs(5,a);break;case 1:if(hn(e,a),i&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(g){Te(a,a.return,g)}else{var o=ua(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){Te(a,a.return,g)}}i&64&&Gh(a),i&512&&Zs(a,a.return);break;case 3:if(hn(e,a),i&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{kd(e,t)}catch(g){Te(a,a.return,g)}}break;case 27:t===null&&i&4&&Vh(a);case 26:case 5:hn(e,a),t===null&&i&4&&$h(a),i&512&&Zs(a,a.return);break;case 12:hn(e,a);break;case 31:hn(e,a),i&4&&Qh(e,a);break;case 13:hn(e,a),i&4&&Xh(e,a),i&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Ap.bind(null,a),Jp(e,a))));break;case 22:if(i=a.memoizedState!==null||un,!i){t=t!==null&&t.memoizedState!==null||Pe,o=un;var u=Pe;un=i,(Pe=t)&&!u?fn(e,a,(a.subtreeFlags&8772)!==0):hn(e,a),un=o,Pe=u}break;case 30:break;default:hn(e,a)}}function Ph(e){var t=e.alternate;t!==null&&(e.alternate=null,Ph(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&_l(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var De=null,gt=!1;function dn(e,t,a){for(a=a.child;a!==null;)Jh(e,t,a),a=a.sibling}function Jh(e,t,a){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(ws,a)}catch{}switch(a.tag){case 26:Pe||Qt(a,t),dn(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Pe||Qt(a,t);var i=De,o=gt;Hn(a.type)&&(De=a.stateNode,gt=!1),dn(e,t,a),ri(a.stateNode),De=i,gt=o;break;case 5:Pe||Qt(a,t);case 6:if(i=De,o=gt,De=null,dn(e,t,a),De=i,gt=o,De!==null)if(gt)try{(De.nodeType===9?De.body:De.nodeName==="HTML"?De.ownerDocument.body:De).removeChild(a.stateNode)}catch(u){Te(a,t,u)}else try{De.removeChild(a.stateNode)}catch(u){Te(a,t,u)}break;case 18:De!==null&&(gt?(e=De,qf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),rs(e)):qf(De,a.stateNode));break;case 4:i=De,o=gt,De=a.stateNode.containerInfo,gt=!0,dn(e,t,a),De=i,gt=o;break;case 0:case 11:case 14:case 15:On(2,a,t),Pe||On(4,a,t),dn(e,t,a);break;case 1:Pe||(Qt(a,t),i=a.stateNode,typeof i.componentWillUnmount=="function"&&qh(a,t,i)),dn(e,t,a);break;case 21:dn(e,t,a);break;case 22:Pe=(i=Pe)||a.memoizedState!==null,dn(e,t,a),Pe=i;break;default:dn(e,t,a)}}function Qh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{rs(e)}catch(a){Te(t,t.return,a)}}}function Xh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{rs(e)}catch(a){Te(t,t.return,a)}}function xp(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Kh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Kh),t;default:throw Error(l(435,e.tag))}}function Sr(e,t){var a=xp(e);t.forEach(function(i){if(!a.has(i)){a.add(i);var o=Cp.bind(null,e,i);i.then(o,o)}})}function mt(e,t){var a=t.deletions;if(a!==null)for(var i=0;i<a.length;i++){var o=a[i],u=e,g=t,y=g;e:for(;y!==null;){switch(y.tag){case 27:if(Hn(y.type)){De=y.stateNode,gt=!1;break e}break;case 5:De=y.stateNode,gt=!1;break e;case 3:case 4:De=y.stateNode.containerInfo,gt=!0;break e}y=y.return}if(De===null)throw Error(l(160));Jh(u,g,o),De=null,gt=!1,u=o.alternate,u!==null&&(u.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Zh(t,e),t=t.sibling}var $t=null;function Zh(e,t){var a=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:mt(t,e),pt(e),i&4&&(On(3,e,e.return),Xs(3,e),On(5,e,e.return));break;case 1:mt(t,e),pt(e),i&512&&(Pe||a===null||Qt(a,a.return)),i&64&&un&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?i:a.concat(i))));break;case 26:var o=$t;if(mt(t,e),pt(e),i&512&&(Pe||a===null||Qt(a,a.return)),i&4){var u=a!==null?a.memoizedState:null;if(i=e.memoizedState,a===null)if(i===null)if(e.stateNode===null){e:{i=e.type,a=e.memoizedProps,o=o.ownerDocument||o;t:switch(i){case"title":u=o.getElementsByTagName("title")[0],(!u||u[Ns]||u[Fe]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=o.createElement(i),o.head.insertBefore(u,o.querySelector("head > title"))),at(u,i,a),u[Fe]=e,Ze(u),i=u;break e;case"link":var g=Wf("link","href",o).get(i+(a.href||""));if(g){for(var y=0;y<g.length;y++)if(u=g[y],u.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&u.getAttribute("rel")===(a.rel==null?null:a.rel)&&u.getAttribute("title")===(a.title==null?null:a.title)&&u.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){g.splice(y,1);break t}}u=o.createElement(i),at(u,i,a),o.head.appendChild(u);break;case"meta":if(g=Wf("meta","content",o).get(i+(a.content||""))){for(y=0;y<g.length;y++)if(u=g[y],u.getAttribute("content")===(a.content==null?null:""+a.content)&&u.getAttribute("name")===(a.name==null?null:a.name)&&u.getAttribute("property")===(a.property==null?null:a.property)&&u.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&u.getAttribute("charset")===(a.charSet==null?null:a.charSet)){g.splice(y,1);break t}}u=o.createElement(i),at(u,i,a),o.head.appendChild(u);break;default:throw Error(l(468,i))}u[Fe]=e,Ze(u),i=u}e.stateNode=i}else Ff(o,e.type,e.stateNode);else e.stateNode=Zf(o,i,e.memoizedProps);else u!==i?(u===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):u.count--,i===null?Ff(o,e.type,e.stateNode):Zf(o,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Vo(e,e.memoizedProps,a.memoizedProps)}break;case 27:mt(t,e),pt(e),i&512&&(Pe||a===null||Qt(a,a.return)),a!==null&&i&4&&Vo(e,e.memoizedProps,a.memoizedProps);break;case 5:if(mt(t,e),pt(e),i&512&&(Pe||a===null||Qt(a,a.return)),e.flags&32){o=e.stateNode;try{Ca(o,"")}catch(ee){Te(e,e.return,ee)}}i&4&&e.stateNode!=null&&(o=e.memoizedProps,Vo(e,o,a!==null?a.memoizedProps:o)),i&1024&&(Po=!0);break;case 6:if(mt(t,e),pt(e),i&4){if(e.stateNode===null)throw Error(l(162));i=e.memoizedProps,a=e.stateNode;try{a.nodeValue=i}catch(ee){Te(e,e.return,ee)}}break;case 3:if(Br=null,o=$t,$t=Lr(t.containerInfo),mt(t,e),$t=o,pt(e),i&4&&a!==null&&a.memoizedState.isDehydrated)try{rs(t.containerInfo)}catch(ee){Te(e,e.return,ee)}Po&&(Po=!1,Wh(e));break;case 4:i=$t,$t=Lr(e.stateNode.containerInfo),mt(t,e),pt(e),$t=i;break;case 12:mt(t,e),pt(e);break;case 31:mt(t,e),pt(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Sr(e,i)));break;case 13:mt(t,e),pt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(jr=xt()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Sr(e,i)));break;case 22:o=e.memoizedState!==null;var S=a!==null&&a.memoizedState!==null,z=un,K=Pe;if(un=z||o,Pe=K||S,mt(t,e),Pe=K,un=z,pt(e),i&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(a===null||S||un||Pe||da(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){S=a=t;try{if(u=S.stateNode,o)g=u.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{y=S.stateNode;var P=S.memoizedProps.style,L=P!=null&&P.hasOwnProperty("display")?P.display:null;y.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(ee){Te(S,S.return,ee)}}}else if(t.tag===6){if(a===null){S=t;try{S.stateNode.nodeValue=o?"":S.memoizedProps}catch(ee){Te(S,S.return,ee)}}}else if(t.tag===18){if(a===null){S=t;try{var G=S.stateNode;o?$f(G,!0):$f(S.stateNode,!1)}catch(ee){Te(S,S.return,ee)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(a=i.retryQueue,a!==null&&(i.retryQueue=null,Sr(e,a))));break;case 19:mt(t,e),pt(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Sr(e,i)));break;case 30:break;case 21:break;default:mt(t,e),pt(e)}}function pt(e){var t=e.flags;if(t&2){try{for(var a,i=e.return;i!==null;){if(Ih(i)){a=i;break}i=i.return}if(a==null)throw Error(l(160));switch(a.tag){case 27:var o=a.stateNode,u=Ko(e);_r(e,u,o);break;case 5:var g=a.stateNode;a.flags&32&&(Ca(g,""),a.flags&=-33);var y=Ko(e);_r(e,y,g);break;case 3:case 4:var S=a.stateNode.containerInfo,z=Ko(e);Yo(e,z,S);break;default:throw Error(l(161))}}catch(K){Te(e,e.return,K)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Wh(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Wh(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function hn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Yh(e,t.alternate,t),t=t.sibling}function da(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:On(4,t,t.return),da(t);break;case 1:Qt(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&qh(t,t.return,a),da(t);break;case 27:ri(t.stateNode);case 26:case 5:Qt(t,t.return),da(t);break;case 22:t.memoizedState===null&&da(t);break;case 30:da(t);break;default:da(t)}e=e.sibling}}function fn(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,o=e,u=t,g=u.flags;switch(u.tag){case 0:case 11:case 15:fn(o,u,a),Xs(4,u);break;case 1:if(fn(o,u,a),i=u,o=i.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(z){Te(i,i.return,z)}if(i=u,o=i.updateQueue,o!==null){var y=i.stateNode;try{var S=o.shared.hiddenCallbacks;if(S!==null)for(o.shared.hiddenCallbacks=null,o=0;o<S.length;o++)Cd(S[o],y)}catch(z){Te(i,i.return,z)}}a&&g&64&&Gh(u),Zs(u,u.return);break;case 27:Vh(u);case 26:case 5:fn(o,u,a),a&&i===null&&g&4&&$h(u),Zs(u,u.return);break;case 12:fn(o,u,a);break;case 31:fn(o,u,a),a&&g&4&&Qh(o,u);break;case 13:fn(o,u,a),a&&g&4&&Xh(o,u);break;case 22:u.memoizedState===null&&fn(o,u,a),Zs(u,u.return);break;case 30:break;default:fn(o,u,a)}t=t.sibling}}function Jo(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Ls(a))}function Qo(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ls(e))}function It(e,t,a,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Fh(e,t,a,i),t=t.sibling}function Fh(e,t,a,i){var o=t.flags;switch(t.tag){case 0:case 11:case 15:It(e,t,a,i),o&2048&&Xs(9,t);break;case 1:It(e,t,a,i);break;case 3:It(e,t,a,i),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ls(e)));break;case 12:if(o&2048){It(e,t,a,i),e=t.stateNode;try{var u=t.memoizedProps,g=u.id,y=u.onPostCommit;typeof y=="function"&&y(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(S){Te(t,t.return,S)}}else It(e,t,a,i);break;case 31:It(e,t,a,i);break;case 13:It(e,t,a,i);break;case 23:break;case 22:u=t.stateNode,g=t.alternate,t.memoizedState!==null?u._visibility&2?It(e,t,a,i):Ws(e,t):u._visibility&2?It(e,t,a,i):(u._visibility|=2,Qa(e,t,a,i,(t.subtreeFlags&10256)!==0||!1)),o&2048&&Jo(g,t);break;case 24:It(e,t,a,i),o&2048&&Qo(t.alternate,t);break;default:It(e,t,a,i)}}function Qa(e,t,a,i,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,g=t,y=a,S=i,z=g.flags;switch(g.tag){case 0:case 11:case 15:Qa(u,g,y,S,o),Xs(8,g);break;case 23:break;case 22:var K=g.stateNode;g.memoizedState!==null?K._visibility&2?Qa(u,g,y,S,o):Ws(u,g):(K._visibility|=2,Qa(u,g,y,S,o)),o&&z&2048&&Jo(g.alternate,g);break;case 24:Qa(u,g,y,S,o),o&&z&2048&&Qo(g.alternate,g);break;default:Qa(u,g,y,S,o)}t=t.sibling}}function Ws(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,i=t,o=i.flags;switch(i.tag){case 22:Ws(a,i),o&2048&&Jo(i.alternate,i);break;case 24:Ws(a,i),o&2048&&Qo(i.alternate,i);break;default:Ws(a,i)}t=t.sibling}}var Fs=8192;function Xa(e,t,a){if(e.subtreeFlags&Fs)for(e=e.child;e!==null;)ef(e,t,a),e=e.sibling}function ef(e,t,a){switch(e.tag){case 26:Xa(e,t,a),e.flags&Fs&&e.memoizedState!==null&&rv(a,$t,e.memoizedState,e.memoizedProps);break;case 5:Xa(e,t,a);break;case 3:case 4:var i=$t;$t=Lr(e.stateNode.containerInfo),Xa(e,t,a),$t=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=Fs,Fs=16777216,Xa(e,t,a),Fs=i):Xa(e,t,a));break;default:Xa(e,t,a)}}function tf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ei(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var i=t[a];We=i,af(i,e)}tf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)nf(e),e=e.sibling}function nf(e){switch(e.tag){case 0:case 11:case 15:ei(e),e.flags&2048&&On(9,e,e.return);break;case 3:ei(e);break;case 12:ei(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Nr(e)):ei(e);break;default:ei(e)}}function Nr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var i=t[a];We=i,af(i,e)}tf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:On(8,t,t.return),Nr(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Nr(t));break;default:Nr(t)}e=e.sibling}}function af(e,t){for(;We!==null;){var a=We;switch(a.tag){case 0:case 11:case 15:On(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var i=a.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Ls(a.memoizedState.cache)}if(i=a.child,i!==null)i.return=a,We=i;else e:for(a=e;We!==null;){i=We;var o=i.sibling,u=i.return;if(Ph(i),i===a){We=null;break e}if(o!==null){o.return=u,We=o;break e}We=u}}}var wp={getCacheForType:function(e){var t=tt(Ve),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return tt(Ve).controller.signal}},_p=typeof WeakMap=="function"?WeakMap:Map,Ne=0,Oe=null,me=null,ve=0,je=0,Et=null,Rn=!1,Za=!1,Xo=!1,gn=0,Be=0,Un=0,ha=0,Zo=0,At=0,Wa=0,ti=null,vt=null,Wo=!1,jr=0,sf=0,Tr=1/0,Er=null,Mn=null,Qe=0,Dn=null,Fa=null,mn=0,Fo=0,ec=null,rf=null,ni=0,tc=null;function Ct(){return(Ne&2)!==0&&ve!==0?ve&-ve:_.T!==null?lc():wu()}function lf(){if(At===0)if((ve&536870912)===0||be){var e=Di;Di<<=1,(Di&3932160)===0&&(Di=262144),At=e}else At=536870912;return e=jt.current,e!==null&&(e.flags|=32),At}function yt(e,t,a){(e===Oe&&(je===2||je===9)||e.cancelPendingCommit!==null)&&(es(e,0),zn(e,ve,At,!1)),Ss(e,a),((Ne&2)===0||e!==Oe)&&(e===Oe&&((Ne&2)===0&&(ha|=a),Be===4&&zn(e,ve,At,!1)),Xt(e))}function of(e,t,a){if((Ne&6)!==0)throw Error(l(327));var i=!a&&(t&127)===0&&(t&e.expiredLanes)===0||_s(e,t),o=i?jp(e,t):ac(e,t,!0),u=i;do{if(o===0){Za&&!i&&zn(e,t,0,!1);break}else{if(a=e.current.alternate,u&&!Sp(a)){o=ac(e,t,!1),u=!1;continue}if(o===2){if(u=t,e.errorRecoveryDisabledLanes&u)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var y=e;o=ti;var S=y.current.memoizedState.isDehydrated;if(S&&(es(y,g).flags|=256),g=ac(y,g,!1),g!==2){if(Xo&&!S){y.errorRecoveryDisabledLanes|=u,ha|=u,o=4;break e}u=vt,vt=o,u!==null&&(vt===null?vt=u:vt.push.apply(vt,u))}o=g}if(u=!1,o!==2)continue}}if(o===1){es(e,0),zn(e,t,0,!0);break}e:{switch(i=e,u=o,u){case 0:case 1:throw Error(l(345));case 4:if((t&4194048)!==t)break;case 6:zn(i,t,At,!Rn);break e;case 2:vt=null;break;case 3:case 5:break;default:throw Error(l(329))}if((t&62914560)===t&&(o=jr+300-xt(),10<o)){if(zn(i,t,At,!Rn),Li(i,0,!0)!==0)break e;mn=t,i.timeoutHandle=Bf(cf.bind(null,i,a,vt,Er,Wo,t,At,ha,Wa,Rn,u,"Throttled",-0,0),o);break e}cf(i,a,vt,Er,Wo,t,At,ha,Wa,Rn,u,null,-0,0)}}break}while(!0);Xt(e)}function cf(e,t,a,i,o,u,g,y,S,z,K,P,L,G){if(e.timeoutHandle=-1,P=t.subtreeFlags,P&8192||(P&16785408)===16785408){P={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ft},ef(t,u,P);var ee=(u&62914560)===u?jr-xt():(u&4194048)===u?sf-xt():0;if(ee=lv(P,ee),ee!==null){mn=u,e.cancelPendingCommit=ee(vf.bind(null,e,t,u,a,i,o,g,y,S,K,P,null,L,G)),zn(e,u,g,!z);return}}vf(e,t,u,a,i,o,g,y,S)}function Sp(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var i=0;i<a.length;i++){var o=a[i],u=o.getSnapshot;o=o.value;try{if(!St(u(),o))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zn(e,t,a,i){t&=~Zo,t&=~ha,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var o=t;0<o;){var u=31-_t(o),g=1<<u;i[u]=-1,o&=~g}a!==0&&yu(e,a,t)}function Ar(){return(Ne&6)===0?(ai(0),!1):!0}function nc(){if(me!==null){if(je===0)var e=me.return;else e=me,an=aa=null,yo(e),Va=null,Bs=0,e=me;for(;e!==null;)Bh(e.alternate,e),e=e.return;me=null}}function es(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Ip(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),mn=0,nc(),Oe=e,me=a=tn(e.current,null),ve=t,je=0,Et=null,Rn=!1,Za=_s(e,t),Xo=!1,Wa=At=Zo=ha=Un=Be=0,vt=ti=null,Wo=!1,(t&8)!==0&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var o=31-_t(i),u=1<<o;t|=e[o],i&=~u}return gn=t,Qi(),a}function uf(e,t){de=null,_.H=Ps,t===Ia||t===ar?(t=jd(),je=3):t===io?(t=jd(),je=4):je=t===Mo?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Et=t,me===null&&(Be=1,vr(e,Mt(t,e.current)))}function df(){var e=jt.current;return e===null?!0:(ve&4194048)===ve?Ht===null:(ve&62914560)===ve||(ve&536870912)!==0?e===Ht:!1}function hf(){var e=_.H;return _.H=Ps,e===null?Ps:e}function ff(){var e=_.A;return _.A=wp,e}function Cr(){Be=4,Rn||(ve&4194048)!==ve&&jt.current!==null||(Za=!0),(Un&134217727)===0&&(ha&134217727)===0||Oe===null||zn(Oe,ve,At,!1)}function ac(e,t,a){var i=Ne;Ne|=2;var o=hf(),u=ff();(Oe!==e||ve!==t)&&(Er=null,es(e,t)),t=!1;var g=Be;e:do try{if(je!==0&&me!==null){var y=me,S=Et;switch(je){case 8:nc(),g=6;break e;case 3:case 2:case 9:case 6:jt.current===null&&(t=!0);var z=je;if(je=0,Et=null,ts(e,y,S,z),a&&Za){g=0;break e}break;default:z=je,je=0,Et=null,ts(e,y,S,z)}}Np(),g=Be;break}catch(K){uf(e,K)}while(!0);return t&&e.shellSuspendCounter++,an=aa=null,Ne=i,_.H=o,_.A=u,me===null&&(Oe=null,ve=0,Qi()),g}function Np(){for(;me!==null;)gf(me)}function jp(e,t){var a=Ne;Ne|=2;var i=hf(),o=ff();Oe!==e||ve!==t?(Er=null,Tr=xt()+500,es(e,t)):Za=_s(e,t);e:do try{if(je!==0&&me!==null){t=me;var u=Et;t:switch(je){case 1:je=0,Et=null,ts(e,t,u,1);break;case 2:case 9:if(Sd(u)){je=0,Et=null,mf(t);break}t=function(){je!==2&&je!==9||Oe!==e||(je=7),Xt(e)},u.then(t,t);break e;case 3:je=7;break e;case 4:je=5;break e;case 7:Sd(u)?(je=0,Et=null,mf(t)):(je=0,Et=null,ts(e,t,u,7));break;case 5:var g=null;switch(me.tag){case 26:g=me.memoizedState;case 5:case 27:var y=me;if(g?e0(g):y.stateNode.complete){je=0,Et=null;var S=y.sibling;if(S!==null)me=S;else{var z=y.return;z!==null?(me=z,kr(z)):me=null}break t}}je=0,Et=null,ts(e,t,u,5);break;case 6:je=0,Et=null,ts(e,t,u,6);break;case 8:nc(),Be=6;break e;default:throw Error(l(462))}}Tp();break}catch(K){uf(e,K)}while(!0);return an=aa=null,_.H=i,_.A=o,Ne=a,me!==null?0:(Oe=null,ve=0,Qi(),Be)}function Tp(){for(;me!==null&&!Qg();)gf(me)}function gf(e){var t=Lh(e.alternate,e,gn);e.memoizedProps=e.pendingProps,t===null?kr(e):me=t}function mf(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Oh(a,t,t.pendingProps,t.type,void 0,ve);break;case 11:t=Oh(a,t,t.pendingProps,t.type.render,t.ref,ve);break;case 5:yo(t);default:Bh(a,t),t=me=hd(t,gn),t=Lh(a,t,gn)}e.memoizedProps=e.pendingProps,t===null?kr(e):me=t}function ts(e,t,a,i){an=aa=null,yo(t),Va=null,Bs=0;var o=t.return;try{if(gp(e,o,t,a,ve)){Be=1,vr(e,Mt(a,e.current)),me=null;return}}catch(u){if(o!==null)throw me=o,u;Be=1,vr(e,Mt(a,e.current)),me=null;return}t.flags&32768?(be||i===1?e=!0:Za||(ve&536870912)!==0?e=!1:(Rn=e=!0,(i===2||i===9||i===3||i===6)&&(i=jt.current,i!==null&&i.tag===13&&(i.flags|=16384))),pf(t,e)):kr(t)}function kr(e){var t=e;do{if((t.flags&32768)!==0){pf(t,Rn);return}e=t.return;var a=vp(t.alternate,t,gn);if(a!==null){me=a;return}if(t=t.sibling,t!==null){me=t;return}me=t=e}while(t!==null);Be===0&&(Be=5)}function pf(e,t){do{var a=yp(e.alternate,e);if(a!==null){a.flags&=32767,me=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){me=e;return}me=e=a}while(e!==null);Be=6,me=null}function vf(e,t,a,i,o,u,g,y,S){e.cancelPendingCommit=null;do Or();while(Qe!==0);if((Ne&6)!==0)throw Error(l(327));if(t!==null){if(t===e.current)throw Error(l(177));if(u=t.lanes|t.childLanes,u|=Vl,im(e,a,u,g,y,S),e===Oe&&(me=Oe=null,ve=0),Fa=t,Dn=e,mn=a,Fo=u,ec=o,rf=i,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,kp(Ui,function(){return _f(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||i){i=_.T,_.T=null,o=I.p,I.p=2,g=Ne,Ne|=4;try{bp(e,t,a)}finally{Ne=g,I.p=o,_.T=i}}Qe=1,yf(),bf(),xf()}}function yf(){if(Qe===1){Qe=0;var e=Dn,t=Fa,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=_.T,_.T=null;var i=I.p;I.p=2;var o=Ne;Ne|=4;try{Zh(t,e);var u=mc,g=ad(e.containerInfo),y=u.focusedElem,S=u.selectionRange;if(g!==y&&y&&y.ownerDocument&&nd(y.ownerDocument.documentElement,y)){if(S!==null&&Bl(y)){var z=S.start,K=S.end;if(K===void 0&&(K=z),"selectionStart"in y)y.selectionStart=z,y.selectionEnd=Math.min(K,y.value.length);else{var P=y.ownerDocument||document,L=P&&P.defaultView||window;if(L.getSelection){var G=L.getSelection(),ee=y.textContent.length,re=Math.min(S.start,ee),Ce=S.end===void 0?re:Math.min(S.end,ee);!G.extend&&re>Ce&&(g=Ce,Ce=re,re=g);var O=td(y,re),E=td(y,Ce);if(O&&E&&(G.rangeCount!==1||G.anchorNode!==O.node||G.anchorOffset!==O.offset||G.focusNode!==E.node||G.focusOffset!==E.offset)){var D=P.createRange();D.setStart(O.node,O.offset),G.removeAllRanges(),re>Ce?(G.addRange(D),G.extend(E.node,E.offset)):(D.setEnd(E.node,E.offset),G.addRange(D))}}}}for(P=[],G=y;G=G.parentNode;)G.nodeType===1&&P.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<P.length;y++){var Y=P[y];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Ir=!!gc,mc=gc=null}finally{Ne=o,I.p=i,_.T=a}}e.current=t,Qe=2}}function bf(){if(Qe===2){Qe=0;var e=Dn,t=Fa,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=_.T,_.T=null;var i=I.p;I.p=2;var o=Ne;Ne|=4;try{Yh(e,t.alternate,t)}finally{Ne=o,I.p=i,_.T=a}}Qe=3}}function xf(){if(Qe===4||Qe===3){Qe=0,Xg();var e=Dn,t=Fa,a=mn,i=rf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Qe=5:(Qe=0,Fa=Dn=null,wf(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(Mn=null),xl(a),t=t.stateNode,wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(ws,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=_.T,o=I.p,I.p=2,_.T=null;try{for(var u=e.onRecoverableError,g=0;g<i.length;g++){var y=i[g];u(y.value,{componentStack:y.stack})}}finally{_.T=t,I.p=o}}(mn&3)!==0&&Or(),Xt(e),o=e.pendingLanes,(a&261930)!==0&&(o&42)!==0?e===tc?ni++:(ni=0,tc=e):ni=0,ai(0)}}function wf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ls(t)))}function Or(){return yf(),bf(),xf(),_f()}function _f(){if(Qe!==5)return!1;var e=Dn,t=Fo;Fo=0;var a=xl(mn),i=_.T,o=I.p;try{I.p=32>a?32:a,_.T=null,a=ec,ec=null;var u=Dn,g=mn;if(Qe=0,Fa=Dn=null,mn=0,(Ne&6)!==0)throw Error(l(331));var y=Ne;if(Ne|=4,nf(u.current),Fh(u,u.current,g,a),Ne=y,ai(0,!1),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(ws,u)}catch{}return!0}finally{I.p=o,_.T=i,wf(e,t)}}function Sf(e,t,a){t=Mt(a,t),t=Uo(e.stateNode,t,2),e=An(e,t,2),e!==null&&(Ss(e,2),Xt(e))}function Te(e,t,a){if(e.tag===3)Sf(e,e,a);else for(;t!==null;){if(t.tag===3){Sf(t,e,a);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Mn===null||!Mn.has(i))){e=Mt(a,e),a=Sh(2),i=An(t,a,2),i!==null&&(Nh(a,i,t,e),Ss(i,2),Xt(i));break}}t=t.return}}function sc(e,t,a){var i=e.pingCache;if(i===null){i=e.pingCache=new _p;var o=new Set;i.set(t,o)}else o=i.get(t),o===void 0&&(o=new Set,i.set(t,o));o.has(a)||(Xo=!0,o.add(a),e=Ep.bind(null,e,t,a),t.then(e,e))}function Ep(e,t,a){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Oe===e&&(ve&a)===a&&(Be===4||Be===3&&(ve&62914560)===ve&&300>xt()-jr?(Ne&2)===0&&es(e,0):Zo|=a,Wa===ve&&(Wa=0)),Xt(e)}function Nf(e,t){t===0&&(t=vu()),e=ea(e,t),e!==null&&(Ss(e,t),Xt(e))}function Ap(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Nf(e,a)}function Cp(e,t){var a=0;switch(e.tag){case 31:case 13:var i=e.stateNode,o=e.memoizedState;o!==null&&(a=o.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(l(314))}i!==null&&i.delete(t),Nf(e,a)}function kp(e,t){return pl(e,t)}var Rr=null,ns=null,ic=!1,Ur=!1,rc=!1,Ln=0;function Xt(e){e!==ns&&e.next===null&&(ns===null?Rr=ns=e:ns=ns.next=e),Ur=!0,ic||(ic=!0,Rp())}function ai(e,t){if(!rc&&Ur){rc=!0;do for(var a=!1,i=Rr;i!==null;){if(e!==0){var o=i.pendingLanes;if(o===0)var u=0;else{var g=i.suspendedLanes,y=i.pingedLanes;u=(1<<31-_t(42|e)+1)-1,u&=o&~(g&~y),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(a=!0,Af(i,u))}else u=ve,u=Li(i,i===Oe?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(u&3)===0||_s(i,u)||(a=!0,Af(i,u));i=i.next}while(a);rc=!1}}function Op(){jf()}function jf(){Ur=ic=!1;var e=0;Ln!==0&&$p()&&(e=Ln);for(var t=xt(),a=null,i=Rr;i!==null;){var o=i.next,u=Tf(i,t);u===0?(i.next=null,a===null?Rr=o:a.next=o,o===null&&(ns=a)):(a=i,(e!==0||(u&3)!==0)&&(Ur=!0)),i=o}Qe!==0&&Qe!==5||ai(e),Ln!==0&&(Ln=0)}function Tf(e,t){for(var a=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var g=31-_t(u),y=1<<g,S=o[g];S===-1?((y&a)===0||(y&i)!==0)&&(o[g]=sm(y,t)):S<=t&&(e.expiredLanes|=y),u&=~y}if(t=Oe,a=ve,a=Li(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,a===0||e===t&&(je===2||je===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&vl(i),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||_s(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(i!==null&&vl(i),xl(a)){case 2:case 8:a=mu;break;case 32:a=Ui;break;case 268435456:a=pu;break;default:a=Ui}return i=Ef.bind(null,e),a=pl(a,i),e.callbackPriority=t,e.callbackNode=a,t}return i!==null&&i!==null&&vl(i),e.callbackPriority=2,e.callbackNode=null,2}function Ef(e,t){if(Qe!==0&&Qe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Or()&&e.callbackNode!==a)return null;var i=ve;return i=Li(e,e===Oe?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(of(e,i,t),Tf(e,xt()),e.callbackNode!=null&&e.callbackNode===a?Ef.bind(null,e):null)}function Af(e,t){if(Or())return null;of(e,t,!0)}function Rp(){Vp(function(){(Ne&6)!==0?pl(gu,Op):jf()})}function lc(){if(Ln===0){var e=qa;e===0&&(e=Mi,Mi<<=1,(Mi&261888)===0&&(Mi=256)),Ln=e}return Ln}function Cf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:qi(""+e)}function kf(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Up(e,t,a,i,o){if(t==="submit"&&a&&a.stateNode===o){var u=Cf((o[ht]||null).action),g=i.submitter;g&&(t=(t=g[ht]||null)?Cf(t.formAction):g.getAttribute("formAction"),t!==null&&(u=t,g=null));var y=new Ki("action","action",null,i,o);e.push({event:y,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Ln!==0){var S=g?kf(o,g):new FormData(o);Eo(a,{pending:!0,data:S,method:o.method,action:u},null,S)}}else typeof u=="function"&&(y.preventDefault(),S=g?kf(o,g):new FormData(o),Eo(a,{pending:!0,data:S,method:o.method,action:u},u,S))},currentTarget:o}]})}}for(var oc=0;oc<Il.length;oc++){var cc=Il[oc],Mp=cc.toLowerCase(),Dp=cc[0].toUpperCase()+cc.slice(1);qt(Mp,"on"+Dp)}qt(rd,"onAnimationEnd"),qt(ld,"onAnimationIteration"),qt(od,"onAnimationStart"),qt("dblclick","onDoubleClick"),qt("focusin","onFocus"),qt("focusout","onBlur"),qt(Zm,"onTransitionRun"),qt(Wm,"onTransitionStart"),qt(Fm,"onTransitionCancel"),qt(cd,"onTransitionEnd"),Ea("onMouseEnter",["mouseout","mouseover"]),Ea("onMouseLeave",["mouseout","mouseover"]),Ea("onPointerEnter",["pointerout","pointerover"]),Ea("onPointerLeave",["pointerout","pointerover"]),Xn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var si="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(si));function Of(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var i=e[a],o=i.event;i=i.listeners;e:{var u=void 0;if(t)for(var g=i.length-1;0<=g;g--){var y=i[g],S=y.instance,z=y.currentTarget;if(y=y.listener,S!==u&&o.isPropagationStopped())break e;u=y,o.currentTarget=z;try{u(o)}catch(K){Ji(K)}o.currentTarget=null,u=S}else for(g=0;g<i.length;g++){if(y=i[g],S=y.instance,z=y.currentTarget,y=y.listener,S!==u&&o.isPropagationStopped())break e;u=y,o.currentTarget=z;try{u(o)}catch(K){Ji(K)}o.currentTarget=null,u=S}}}}function pe(e,t){var a=t[wl];a===void 0&&(a=t[wl]=new Set);var i=e+"__bubble";a.has(i)||(Rf(t,e,2,!1),a.add(i))}function uc(e,t,a){var i=0;t&&(i|=4),Rf(a,e,i,t)}var Mr="_reactListening"+Math.random().toString(36).slice(2);function dc(e){if(!e[Mr]){e[Mr]=!0,Nu.forEach(function(a){a!=="selectionchange"&&(zp.has(a)||uc(a,!1,e),uc(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Mr]||(t[Mr]=!0,uc("selectionchange",!1,t))}}function Rf(e,t,a,i){switch(l0(t)){case 2:var o=uv;break;case 8:o=dv;break;default:o=Tc}a=o.bind(null,t,a,e),o=void 0,!kl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),i?o!==void 0?e.addEventListener(t,a,{capture:!0,passive:o}):e.addEventListener(t,a,!0):o!==void 0?e.addEventListener(t,a,{passive:o}):e.addEventListener(t,a,!1)}function hc(e,t,a,i,o){var u=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var g=i.tag;if(g===3||g===4){var y=i.stateNode.containerInfo;if(y===o)break;if(g===4)for(g=i.return;g!==null;){var S=g.tag;if((S===3||S===4)&&g.stateNode.containerInfo===o)return;g=g.return}for(;y!==null;){if(g=Na(y),g===null)return;if(S=g.tag,S===5||S===6||S===26||S===27){i=u=g;continue e}y=y.parentNode}}i=i.return}zu(function(){var z=u,K=Al(a),P=[];e:{var L=ud.get(e);if(L!==void 0){var G=Ki,ee=e;switch(e){case"keypress":if(Ii(a)===0)break e;case"keydown":case"keyup":G=Cm;break;case"focusin":ee="focus",G=Ml;break;case"focusout":ee="blur",G=Ml;break;case"beforeblur":case"afterblur":G=Ml;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Bu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=vm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=Rm;break;case rd:case ld:case od:G=xm;break;case cd:G=Mm;break;case"scroll":case"scrollend":G=mm;break;case"wheel":G=zm;break;case"copy":case"cut":case"paste":G=_m;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=qu;break;case"toggle":case"beforetoggle":G=Hm}var re=(t&4)!==0,Ce=!re&&(e==="scroll"||e==="scrollend"),O=re?L!==null?L+"Capture":null:L;re=[];for(var E=z,D;E!==null;){var Y=E;if(D=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||D===null||O===null||(Y=Ts(E,O),Y!=null&&re.push(ii(E,Y,D))),Ce)break;E=E.return}0<re.length&&(L=new G(L,ee,null,a,K),P.push({event:L,listeners:re}))}}if((t&7)===0){e:{if(L=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",L&&a!==El&&(ee=a.relatedTarget||a.fromElement)&&(Na(ee)||ee[Sa]))break e;if((G||L)&&(L=K.window===K?K:(L=K.ownerDocument)?L.defaultView||L.parentWindow:window,G?(ee=a.relatedTarget||a.toElement,G=z,ee=ee?Na(ee):null,ee!==null&&(Ce=h(ee),re=ee.tag,ee!==Ce||re!==5&&re!==27&&re!==6)&&(ee=null)):(G=null,ee=z),G!==ee)){if(re=Bu,Y="onMouseLeave",O="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(re=qu,Y="onPointerLeave",O="onPointerEnter",E="pointer"),Ce=G==null?L:js(G),D=ee==null?L:js(ee),L=new re(Y,E+"leave",G,a,K),L.target=Ce,L.relatedTarget=D,Y=null,Na(K)===z&&(re=new re(O,E+"enter",ee,a,K),re.target=D,re.relatedTarget=Ce,Y=re),Ce=Y,G&&ee)t:{for(re=Lp,O=G,E=ee,D=0,Y=O;Y;Y=re(Y))D++;Y=0;for(var ie=E;ie;ie=re(ie))Y++;for(;0<D-Y;)O=re(O),D--;for(;0<Y-D;)E=re(E),Y--;for(;D--;){if(O===E||E!==null&&O===E.alternate){re=O;break t}O=re(O),E=re(E)}re=null}else re=null;G!==null&&Uf(P,L,G,re,!1),ee!==null&&Ce!==null&&Uf(P,Ce,ee,re,!0)}}e:{if(L=z?js(z):window,G=L.nodeName&&L.nodeName.toLowerCase(),G==="select"||G==="input"&&L.type==="file")var _e=Qu;else if(Pu(L))if(Xu)_e=Jm;else{_e=Ym;var ne=Km}else G=L.nodeName,!G||G.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?z&&Tl(z.elementType)&&(_e=Qu):_e=Pm;if(_e&&(_e=_e(e,z))){Ju(P,_e,a,K);break e}ne&&ne(e,L,z),e==="focusout"&&z&&L.type==="number"&&z.memoizedProps.value!=null&&jl(L,"number",L.value)}switch(ne=z?js(z):window,e){case"focusin":(Pu(ne)||ne.contentEditable==="true")&&(Ua=ne,Gl=z,Ms=null);break;case"focusout":Ms=Gl=Ua=null;break;case"mousedown":ql=!0;break;case"contextmenu":case"mouseup":case"dragend":ql=!1,sd(P,a,K);break;case"selectionchange":if(Xm)break;case"keydown":case"keyup":sd(P,a,K)}var ge;if(zl)e:{switch(e){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else Ra?Ku(e,a)&&(ye="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(ye="onCompositionStart");ye&&($u&&a.locale!=="ko"&&(Ra||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&Ra&&(ge=Lu()):(wn=K,Ol="value"in wn?wn.value:wn.textContent,Ra=!0)),ne=Dr(z,ye),0<ne.length&&(ye=new Gu(ye,e,null,a,K),P.push({event:ye,listeners:ne}),ge?ye.data=ge:(ge=Yu(a),ge!==null&&(ye.data=ge)))),(ge=Gm?qm(e,a):$m(e,a))&&(ye=Dr(z,"onBeforeInput"),0<ye.length&&(ne=new Gu("onBeforeInput","beforeinput",null,a,K),P.push({event:ne,listeners:ye}),ne.data=ge)),Up(P,e,z,a,K)}Of(P,t)})}function ii(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Dr(e,t){for(var a=t+"Capture",i=[];e!==null;){var o=e,u=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||u===null||(o=Ts(e,a),o!=null&&i.unshift(ii(e,o,u)),o=Ts(e,t),o!=null&&i.push(ii(e,o,u))),e.tag===3)return i;e=e.return}return[]}function Lp(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Uf(e,t,a,i,o){for(var u=t._reactName,g=[];a!==null&&a!==i;){var y=a,S=y.alternate,z=y.stateNode;if(y=y.tag,S!==null&&S===i)break;y!==5&&y!==26&&y!==27||z===null||(S=z,o?(z=Ts(a,u),z!=null&&g.unshift(ii(a,z,S))):o||(z=Ts(a,u),z!=null&&g.push(ii(a,z,S)))),a=a.return}g.length!==0&&e.push({event:t,listeners:g})}var Hp=/\r\n?/g,Bp=/\u0000|\uFFFD/g;function Mf(e){return(typeof e=="string"?e:""+e).replace(Hp,`
`).replace(Bp,"")}function Df(e,t){return t=Mf(t),Mf(e)===t}function Ae(e,t,a,i,o,u){switch(a){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Ca(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Ca(e,""+i);break;case"className":Bi(e,"class",i);break;case"tabIndex":Bi(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Bi(e,a,i);break;case"style":Mu(e,i,u);break;case"data":if(t!=="object"){Bi(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(a);break}i=qi(""+i),e.setAttribute(a,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(a==="formAction"?(t!=="input"&&Ae(e,t,"name",o.name,o,null),Ae(e,t,"formEncType",o.formEncType,o,null),Ae(e,t,"formMethod",o.formMethod,o,null),Ae(e,t,"formTarget",o.formTarget,o,null)):(Ae(e,t,"encType",o.encType,o,null),Ae(e,t,"method",o.method,o,null),Ae(e,t,"target",o.target,o,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(a);break}i=qi(""+i),e.setAttribute(a,i);break;case"onClick":i!=null&&(e.onclick=Ft);break;case"onScroll":i!=null&&pe("scroll",e);break;case"onScrollEnd":i!=null&&pe("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(l(61));if(a=i.__html,a!=null){if(o.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}a=qi(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,""+i):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":i===!0?e.setAttribute(a,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,i):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(a,i):e.removeAttribute(a);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(a):e.setAttribute(a,i);break;case"popover":pe("beforetoggle",e),pe("toggle",e),Hi(e,"popover",i);break;case"xlinkActuate":Wt(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Wt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Wt(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Wt(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Wt(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Wt(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Wt(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Wt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Wt(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Hi(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=fm.get(a)||a,Hi(e,a,i))}}function fc(e,t,a,i,o,u){switch(a){case"style":Mu(e,i,u);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(l(61));if(a=i.__html,a!=null){if(o.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"children":typeof i=="string"?Ca(e,i):(typeof i=="number"||typeof i=="bigint")&&Ca(e,""+i);break;case"onScroll":i!=null&&pe("scroll",e);break;case"onScrollEnd":i!=null&&pe("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Ft);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ju.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(o=a.endsWith("Capture"),t=a.slice(2,o?a.length-7:void 0),u=e[ht]||null,u=u!=null?u[a]:null,typeof u=="function"&&e.removeEventListener(t,u,o),typeof i=="function")){typeof u!="function"&&u!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,i,o);break e}a in e?e[a]=i:i===!0?e.setAttribute(a,""):Hi(e,a,i)}}}function at(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pe("error",e),pe("load",e);var i=!1,o=!1,u;for(u in a)if(a.hasOwnProperty(u)){var g=a[u];if(g!=null)switch(u){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Ae(e,t,u,g,a,null)}}o&&Ae(e,t,"srcSet",a.srcSet,a,null),i&&Ae(e,t,"src",a.src,a,null);return;case"input":pe("invalid",e);var y=u=g=o=null,S=null,z=null;for(i in a)if(a.hasOwnProperty(i)){var K=a[i];if(K!=null)switch(i){case"name":o=K;break;case"type":g=K;break;case"checked":S=K;break;case"defaultChecked":z=K;break;case"value":u=K;break;case"defaultValue":y=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(l(137,t));break;default:Ae(e,t,i,K,a,null)}}ku(e,u,y,S,z,g,o,!1);return;case"select":pe("invalid",e),i=g=u=null;for(o in a)if(a.hasOwnProperty(o)&&(y=a[o],y!=null))switch(o){case"value":u=y;break;case"defaultValue":g=y;break;case"multiple":i=y;default:Ae(e,t,o,y,a,null)}t=u,a=g,e.multiple=!!i,t!=null?Aa(e,!!i,t,!1):a!=null&&Aa(e,!!i,a,!0);return;case"textarea":pe("invalid",e),u=o=i=null;for(g in a)if(a.hasOwnProperty(g)&&(y=a[g],y!=null))switch(g){case"value":i=y;break;case"defaultValue":o=y;break;case"children":u=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(l(91));break;default:Ae(e,t,g,y,a,null)}Ru(e,i,o,u);return;case"option":for(S in a)if(a.hasOwnProperty(S)&&(i=a[S],i!=null))switch(S){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Ae(e,t,S,i,a,null)}return;case"dialog":pe("beforetoggle",e),pe("toggle",e),pe("cancel",e),pe("close",e);break;case"iframe":case"object":pe("load",e);break;case"video":case"audio":for(i=0;i<si.length;i++)pe(si[i],e);break;case"image":pe("error",e),pe("load",e);break;case"details":pe("toggle",e);break;case"embed":case"source":case"link":pe("error",e),pe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(i=a[z],i!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Ae(e,t,z,i,a,null)}return;default:if(Tl(t)){for(K in a)a.hasOwnProperty(K)&&(i=a[K],i!==void 0&&fc(e,t,K,i,a,void 0));return}}for(y in a)a.hasOwnProperty(y)&&(i=a[y],i!=null&&Ae(e,t,y,i,a,null))}function Gp(e,t,a,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,u=null,g=null,y=null,S=null,z=null,K=null;for(G in a){var P=a[G];if(a.hasOwnProperty(G)&&P!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":S=P;default:i.hasOwnProperty(G)||Ae(e,t,G,null,i,P)}}for(var L in i){var G=i[L];if(P=a[L],i.hasOwnProperty(L)&&(G!=null||P!=null))switch(L){case"type":u=G;break;case"name":o=G;break;case"checked":z=G;break;case"defaultChecked":K=G;break;case"value":g=G;break;case"defaultValue":y=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(l(137,t));break;default:G!==P&&Ae(e,t,L,G,i,P)}}Nl(e,g,y,S,z,K,u,o);return;case"select":G=g=y=L=null;for(u in a)if(S=a[u],a.hasOwnProperty(u)&&S!=null)switch(u){case"value":break;case"multiple":G=S;default:i.hasOwnProperty(u)||Ae(e,t,u,null,i,S)}for(o in i)if(u=i[o],S=a[o],i.hasOwnProperty(o)&&(u!=null||S!=null))switch(o){case"value":L=u;break;case"defaultValue":y=u;break;case"multiple":g=u;default:u!==S&&Ae(e,t,o,u,i,S)}t=y,a=g,i=G,L!=null?Aa(e,!!a,L,!1):!!i!=!!a&&(t!=null?Aa(e,!!a,t,!0):Aa(e,!!a,a?[]:"",!1));return;case"textarea":G=L=null;for(y in a)if(o=a[y],a.hasOwnProperty(y)&&o!=null&&!i.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:Ae(e,t,y,null,i,o)}for(g in i)if(o=i[g],u=a[g],i.hasOwnProperty(g)&&(o!=null||u!=null))switch(g){case"value":L=o;break;case"defaultValue":G=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(l(91));break;default:o!==u&&Ae(e,t,g,o,i,u)}Ou(e,L,G);return;case"option":for(var ee in a)if(L=a[ee],a.hasOwnProperty(ee)&&L!=null&&!i.hasOwnProperty(ee))switch(ee){case"selected":e.selected=!1;break;default:Ae(e,t,ee,null,i,L)}for(S in i)if(L=i[S],G=a[S],i.hasOwnProperty(S)&&L!==G&&(L!=null||G!=null))switch(S){case"selected":e.selected=L&&typeof L!="function"&&typeof L!="symbol";break;default:Ae(e,t,S,L,i,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var re in a)L=a[re],a.hasOwnProperty(re)&&L!=null&&!i.hasOwnProperty(re)&&Ae(e,t,re,null,i,L);for(z in i)if(L=i[z],G=a[z],i.hasOwnProperty(z)&&L!==G&&(L!=null||G!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(l(137,t));break;default:Ae(e,t,z,L,i,G)}return;default:if(Tl(t)){for(var Ce in a)L=a[Ce],a.hasOwnProperty(Ce)&&L!==void 0&&!i.hasOwnProperty(Ce)&&fc(e,t,Ce,void 0,i,L);for(K in i)L=i[K],G=a[K],!i.hasOwnProperty(K)||L===G||L===void 0&&G===void 0||fc(e,t,K,L,i,G);return}}for(var O in a)L=a[O],a.hasOwnProperty(O)&&L!=null&&!i.hasOwnProperty(O)&&Ae(e,t,O,null,i,L);for(P in i)L=i[P],G=a[P],!i.hasOwnProperty(P)||L===G||L==null&&G==null||Ae(e,t,P,L,i,G)}function zf(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function qp(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),i=0;i<a.length;i++){var o=a[i],u=o.transferSize,g=o.initiatorType,y=o.duration;if(u&&y&&zf(g)){for(g=0,y=o.responseEnd,i+=1;i<a.length;i++){var S=a[i],z=S.startTime;if(z>y)break;var K=S.transferSize,P=S.initiatorType;K&&zf(P)&&(S=S.responseEnd,g+=K*(S<y?1:(y-z)/(S-z)))}if(--i,t+=8*(u+g)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var gc=null,mc=null;function zr(e){return e.nodeType===9?e:e.ownerDocument}function Lf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function pc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var vc=null;function $p(){var e=window.event;return e&&e.type==="popstate"?e===vc?!1:(vc=e,!0):(vc=null,!1)}var Bf=typeof setTimeout=="function"?setTimeout:void 0,Ip=typeof clearTimeout=="function"?clearTimeout:void 0,Gf=typeof Promise=="function"?Promise:void 0,Vp=typeof queueMicrotask=="function"?queueMicrotask:typeof Gf<"u"?function(e){return Gf.resolve(null).then(e).catch(Kp)}:Bf;function Kp(e){setTimeout(function(){throw e})}function Hn(e){return e==="head"}function qf(e,t){var a=t,i=0;do{var o=a.nextSibling;if(e.removeChild(a),o&&o.nodeType===8)if(a=o.data,a==="/$"||a==="/&"){if(i===0){e.removeChild(o),rs(t);return}i--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")i++;else if(a==="html")ri(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,ri(a);for(var u=a.firstChild;u;){var g=u.nextSibling,y=u.nodeName;u[Ns]||y==="SCRIPT"||y==="STYLE"||y==="LINK"&&u.rel.toLowerCase()==="stylesheet"||a.removeChild(u),u=g}}else a==="body"&&ri(e.ownerDocument.body);a=o}while(a);rs(t)}function $f(e,t){var a=e;e=0;do{var i=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),i&&i.nodeType===8)if(a=i.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=i}while(a)}function yc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":yc(a),_l(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Yp(e,t,a,i){for(;e.nodeType===1;){var o=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Ns])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=Bt(e.nextSibling),e===null)break}return null}function Pp(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Bt(e.nextSibling),e===null))return null;return e}function If(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Bt(e.nextSibling),e===null))return null;return e}function bc(e){return e.data==="$?"||e.data==="$~"}function xc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Jp(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var i=function(){t(),a.removeEventListener("DOMContentLoaded",i)};a.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Bt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var wc=null;function Vf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Bt(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function Kf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Yf(e,t,a){switch(t=zr(a),e){case"html":if(e=t.documentElement,!e)throw Error(l(452));return e;case"head":if(e=t.head,!e)throw Error(l(453));return e;case"body":if(e=t.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function ri(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);_l(e)}var Gt=new Map,Pf=new Set;function Lr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var pn=I.d;I.d={f:Qp,r:Xp,D:Zp,C:Wp,L:Fp,m:ev,X:nv,S:tv,M:av};function Qp(){var e=pn.f(),t=Ar();return e||t}function Xp(e){var t=ja(e);t!==null&&t.tag===5&&t.type==="form"?ch(t):pn.r(e)}var as=typeof document>"u"?null:document;function Jf(e,t,a){var i=as;if(i&&typeof t=="string"&&t){var o=Rt(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof a=="string"&&(o+='[crossorigin="'+a+'"]'),Pf.has(o)||(Pf.add(o),e={rel:e,crossOrigin:a,href:t},i.querySelector(o)===null&&(t=i.createElement("link"),at(t,"link",e),Ze(t),i.head.appendChild(t)))}}function Zp(e){pn.D(e),Jf("dns-prefetch",e,null)}function Wp(e,t){pn.C(e,t),Jf("preconnect",e,t)}function Fp(e,t,a){pn.L(e,t,a);var i=as;if(i&&e&&t){var o='link[rel="preload"][as="'+Rt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(o+='[imagesrcset="'+Rt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(o+='[imagesizes="'+Rt(a.imageSizes)+'"]')):o+='[href="'+Rt(e)+'"]';var u=o;switch(t){case"style":u=ss(e);break;case"script":u=is(e)}Gt.has(u)||(e=x({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Gt.set(u,e),i.querySelector(o)!==null||t==="style"&&i.querySelector(li(u))||t==="script"&&i.querySelector(oi(u))||(t=i.createElement("link"),at(t,"link",e),Ze(t),i.head.appendChild(t)))}}function ev(e,t){pn.m(e,t);var a=as;if(a&&e){var i=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+Rt(i)+'"][href="'+Rt(e)+'"]',u=o;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=is(e)}if(!Gt.has(u)&&(e=x({rel:"modulepreload",href:e},t),Gt.set(u,e),a.querySelector(o)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(oi(u)))return}i=a.createElement("link"),at(i,"link",e),Ze(i),a.head.appendChild(i)}}}function tv(e,t,a){pn.S(e,t,a);var i=as;if(i&&e){var o=Ta(i).hoistableStyles,u=ss(e);t=t||"default";var g=o.get(u);if(!g){var y={loading:0,preload:null};if(g=i.querySelector(li(u)))y.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Gt.get(u))&&_c(e,a);var S=g=i.createElement("link");Ze(S),at(S,"link",e),S._p=new Promise(function(z,K){S.onload=z,S.onerror=K}),S.addEventListener("load",function(){y.loading|=1}),S.addEventListener("error",function(){y.loading|=2}),y.loading|=4,Hr(g,t,i)}g={type:"stylesheet",instance:g,count:1,state:y},o.set(u,g)}}}function nv(e,t){pn.X(e,t);var a=as;if(a&&e){var i=Ta(a).hoistableScripts,o=is(e),u=i.get(o);u||(u=a.querySelector(oi(o)),u||(e=x({src:e,async:!0},t),(t=Gt.get(o))&&Sc(e,t),u=a.createElement("script"),Ze(u),at(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},i.set(o,u))}}function av(e,t){pn.M(e,t);var a=as;if(a&&e){var i=Ta(a).hoistableScripts,o=is(e),u=i.get(o);u||(u=a.querySelector(oi(o)),u||(e=x({src:e,async:!0,type:"module"},t),(t=Gt.get(o))&&Sc(e,t),u=a.createElement("script"),Ze(u),at(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},i.set(o,u))}}function Qf(e,t,a,i){var o=(o=fe.current)?Lr(o):null;if(!o)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=ss(a.href),a=Ta(o).hoistableStyles,i=a.get(t),i||(i={type:"style",instance:null,count:0,state:null},a.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=ss(a.href);var u=Ta(o).hoistableStyles,g=u.get(e);if(g||(o=o.ownerDocument||o,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,g),(u=o.querySelector(li(e)))&&!u._p&&(g.instance=u,g.state.loading=5),Gt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Gt.set(e,a),u||sv(o,e,a,g.state))),t&&i===null)throw Error(l(528,""));return g}if(t&&i!==null)throw Error(l(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=is(a),a=Ta(o).hoistableScripts,i=a.get(t),i||(i={type:"script",instance:null,count:0,state:null},a.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function ss(e){return'href="'+Rt(e)+'"'}function li(e){return'link[rel="stylesheet"]['+e+"]"}function Xf(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function sv(e,t,a,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),at(t,"link",a),Ze(t),e.head.appendChild(t))}function is(e){return'[src="'+Rt(e)+'"]'}function oi(e){return"script[async]"+e}function Zf(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+Rt(a.href)+'"]');if(i)return t.instance=i,Ze(i),i;var o=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),Ze(i),at(i,"style",o),Hr(i,a.precedence,e),t.instance=i;case"stylesheet":o=ss(a.href);var u=e.querySelector(li(o));if(u)return t.state.loading|=4,t.instance=u,Ze(u),u;i=Xf(a),(o=Gt.get(o))&&_c(i,o),u=(e.ownerDocument||e).createElement("link"),Ze(u);var g=u;return g._p=new Promise(function(y,S){g.onload=y,g.onerror=S}),at(u,"link",i),t.state.loading|=4,Hr(u,a.precedence,e),t.instance=u;case"script":return u=is(a.src),(o=e.querySelector(oi(u)))?(t.instance=o,Ze(o),o):(i=a,(o=Gt.get(u))&&(i=x({},a),Sc(i,o)),e=e.ownerDocument||e,o=e.createElement("script"),Ze(o),at(o,"link",i),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(l(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(i=t.instance,t.state.loading|=4,Hr(i,a.precedence,e));return t.instance}function Hr(e,t,a){for(var i=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=i.length?i[i.length-1]:null,u=o,g=0;g<i.length;g++){var y=i[g];if(y.dataset.precedence===t)u=y;else if(u!==o)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function _c(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Sc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Br=null;function Wf(e,t,a){if(Br===null){var i=new Map,o=Br=new Map;o.set(a,i)}else o=Br,i=o.get(a),i||(i=new Map,o.set(a,i));if(i.has(e))return i;for(i.set(e,null),a=a.getElementsByTagName(e),o=0;o<a.length;o++){var u=a[o];if(!(u[Ns]||u[Fe]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var g=u.getAttribute(t)||"";g=e+g;var y=i.get(g);y?y.push(u):i.set(g,[u])}}return i}function Ff(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function iv(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function e0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function rv(e,t,a,i){if(a.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var o=ss(i.href),u=t.querySelector(li(o));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Gr.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=u,Ze(u);return}u=t.ownerDocument||t,i=Xf(i),(o=Gt.get(o))&&_c(i,o),u=u.createElement("link"),Ze(u);var g=u;g._p=new Promise(function(y,S){g.onload=y,g.onerror=S}),at(u,"link",i),a.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Gr.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Nc=0;function lv(e,t){return e.stylesheets&&e.count===0&&$r(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var i=setTimeout(function(){if(e.stylesheets&&$r(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&Nc===0&&(Nc=62500*qp());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&$r(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>Nc?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(o)}}:null}function Gr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$r(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var qr=null;function $r(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,qr=new Map,t.forEach(ov,e),qr=null,Gr.call(e))}function ov(e,t){if(!(t.state.loading&4)){var a=qr.get(e);if(a)var i=a.get(null);else{a=new Map,qr.set(e,a);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<o.length;u++){var g=o[u];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(a.set(g.dataset.precedence,g),i=g)}i&&a.set(null,i)}o=t.instance,g=o.getAttribute("data-precedence"),u=a.get(g)||i,u===i&&a.set(null,o),a.set(g,o),this.count++,i=Gr.bind(this),o.addEventListener("load",i),o.addEventListener("error",i),u?u.parentNode.insertBefore(o,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var ci={$$typeof:q,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function cv(e,t,a,i,o,u,g,y,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yl(0),this.hiddenUpdates=yl(null),this.identifierPrefix=i,this.onUncaughtError=o,this.onCaughtError=u,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function t0(e,t,a,i,o,u,g,y,S,z,K,P){return e=new cv(e,t,a,g,S,z,K,P,y),t=1,u===!0&&(t|=24),u=Nt(3,null,null,t),e.current=u,u.stateNode=e,t=no(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:i,isDehydrated:a,cache:t},ro(u),e}function n0(e){return e?(e=za,e):za}function a0(e,t,a,i,o,u){o=n0(o),i.context===null?i.context=o:i.pendingContext=o,i=En(t),i.payload={element:a},u=u===void 0?null:u,u!==null&&(i.callback=u),a=An(e,i,t),a!==null&&(yt(a,e,t),qs(a,e,t))}function s0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function jc(e,t){s0(e,t),(e=e.alternate)&&s0(e,t)}function i0(e){if(e.tag===13||e.tag===31){var t=ea(e,67108864);t!==null&&yt(t,e,67108864),jc(e,67108864)}}function r0(e){if(e.tag===13||e.tag===31){var t=Ct();t=bl(t);var a=ea(e,t);a!==null&&yt(a,e,t),jc(e,t)}}var Ir=!0;function uv(e,t,a,i){var o=_.T;_.T=null;var u=I.p;try{I.p=2,Tc(e,t,a,i)}finally{I.p=u,_.T=o}}function dv(e,t,a,i){var o=_.T;_.T=null;var u=I.p;try{I.p=8,Tc(e,t,a,i)}finally{I.p=u,_.T=o}}function Tc(e,t,a,i){if(Ir){var o=Ec(i);if(o===null)hc(e,t,i,Vr,a),o0(e,i);else if(fv(o,e,t,a,i))i.stopPropagation();else if(o0(e,i),t&4&&-1<hv.indexOf(e)){for(;o!==null;){var u=ja(o);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var g=Qn(u.pendingLanes);if(g!==0){var y=u;for(y.pendingLanes|=2,y.entangledLanes|=2;g;){var S=1<<31-_t(g);y.entanglements[1]|=S,g&=~S}Xt(u),(Ne&6)===0&&(Tr=xt()+500,ai(0))}}break;case 31:case 13:y=ea(u,2),y!==null&&yt(y,u,2),Ar(),jc(u,2)}if(u=Ec(i),u===null&&hc(e,t,i,Vr,a),u===o)break;o=u}o!==null&&i.stopPropagation()}else hc(e,t,i,null,a)}}function Ec(e){return e=Al(e),Ac(e)}var Vr=null;function Ac(e){if(Vr=null,e=Na(e),e!==null){var t=h(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=f(t),e!==null)return e;e=null}else if(a===31){if(e=m(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Vr=e,null}function l0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zg()){case gu:return 2;case mu:return 8;case Ui:case Wg:return 32;case pu:return 268435456;default:return 32}default:return 32}}var Cc=!1,Bn=null,Gn=null,qn=null,ui=new Map,di=new Map,$n=[],hv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function o0(e,t){switch(e){case"focusin":case"focusout":Bn=null;break;case"dragenter":case"dragleave":Gn=null;break;case"mouseover":case"mouseout":qn=null;break;case"pointerover":case"pointerout":ui.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":di.delete(t.pointerId)}}function hi(e,t,a,i,o,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:a,eventSystemFlags:i,nativeEvent:u,targetContainers:[o]},t!==null&&(t=ja(t),t!==null&&i0(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function fv(e,t,a,i,o){switch(t){case"focusin":return Bn=hi(Bn,e,t,a,i,o),!0;case"dragenter":return Gn=hi(Gn,e,t,a,i,o),!0;case"mouseover":return qn=hi(qn,e,t,a,i,o),!0;case"pointerover":var u=o.pointerId;return ui.set(u,hi(ui.get(u)||null,e,t,a,i,o)),!0;case"gotpointercapture":return u=o.pointerId,di.set(u,hi(di.get(u)||null,e,t,a,i,o)),!0}return!1}function c0(e){var t=Na(e.target);if(t!==null){var a=h(t);if(a!==null){if(t=a.tag,t===13){if(t=f(a),t!==null){e.blockedOn=t,_u(e.priority,function(){r0(a)});return}}else if(t===31){if(t=m(a),t!==null){e.blockedOn=t,_u(e.priority,function(){r0(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Kr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Ec(e.nativeEvent);if(a===null){a=e.nativeEvent;var i=new a.constructor(a.type,a);El=i,a.target.dispatchEvent(i),El=null}else return t=ja(a),t!==null&&i0(t),e.blockedOn=a,!1;t.shift()}return!0}function u0(e,t,a){Kr(e)&&a.delete(t)}function gv(){Cc=!1,Bn!==null&&Kr(Bn)&&(Bn=null),Gn!==null&&Kr(Gn)&&(Gn=null),qn!==null&&Kr(qn)&&(qn=null),ui.forEach(u0),di.forEach(u0)}function Yr(e,t){e.blockedOn===t&&(e.blockedOn=null,Cc||(Cc=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,gv)))}var Pr=null;function d0(e){Pr!==e&&(Pr=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Pr===e&&(Pr=null);for(var t=0;t<e.length;t+=3){var a=e[t],i=e[t+1],o=e[t+2];if(typeof i!="function"){if(Ac(i||a)===null)continue;break}var u=ja(a);u!==null&&(e.splice(t,3),t-=3,Eo(u,{pending:!0,data:o,method:a.method,action:i},i,o))}}))}function rs(e){function t(S){return Yr(S,e)}Bn!==null&&Yr(Bn,e),Gn!==null&&Yr(Gn,e),qn!==null&&Yr(qn,e),ui.forEach(t),di.forEach(t);for(var a=0;a<$n.length;a++){var i=$n[a];i.blockedOn===e&&(i.blockedOn=null)}for(;0<$n.length&&(a=$n[0],a.blockedOn===null);)c0(a),a.blockedOn===null&&$n.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(i=0;i<a.length;i+=3){var o=a[i],u=a[i+1],g=o[ht]||null;if(typeof u=="function")g||d0(a);else if(g){var y=null;if(u&&u.hasAttribute("formAction")){if(o=u,g=u[ht]||null)y=g.formAction;else if(Ac(o)!==null)continue}else y=g.action;typeof y=="function"?a[i+1]=y:(a.splice(i,3),i-=3),d0(a)}}}function h0(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(g){return o=g})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),i||setTimeout(a,20)}function a(){if(!i&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function kc(e){this._internalRoot=e}Jr.prototype.render=kc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(l(409));var a=t.current,i=Ct();a0(a,i,e,t,null,null)},Jr.prototype.unmount=kc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;a0(e.current,2,null,e,null,null),Ar(),t[Sa]=null}};function Jr(e){this._internalRoot=e}Jr.prototype.unstable_scheduleHydration=function(e){if(e){var t=wu();e={blockedOn:null,target:e,priority:t};for(var a=0;a<$n.length&&t!==0&&t<$n[a].priority;a++);$n.splice(a,0,e),a===0&&c0(e)}};var f0=n.version;if(f0!=="19.2.3")throw Error(l(527,f0,"19.2.3"));I.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=p(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var mv={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qr.isDisabled&&Qr.supportsFiber)try{ws=Qr.inject(mv),wt=Qr}catch{}}return gi.createRoot=function(e,t){if(!d(e))throw Error(l(299));var a=!1,i="",o=bh,u=xh,g=wh;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError)),t=t0(e,1,!1,null,null,a,i,null,o,u,g,h0),e[Sa]=t.current,dc(e),new kc(t)},gi.hydrateRoot=function(e,t,a){if(!d(e))throw Error(l(299));var i=!1,o="",u=bh,g=xh,y=wh,S=null;return a!=null&&(a.unstable_strictMode===!0&&(i=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(u=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(y=a.onRecoverableError),a.formState!==void 0&&(S=a.formState)),t=t0(e,1,!0,t,a??null,i,o,S,u,g,y,h0),t.context=n0(null),a=t.current,i=Ct(),i=bl(i),o=En(i),o.callback=null,An(a,o,i),a=i,t.current.lanes=a,Ss(t,a),Xt(t),e[Sa]=t.current,dc(e),new Jr(t)},gi.version="19.2.3",gi}var S0;function jv(){if(S0)return Uc.exports;S0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(n){console.error(n)}}return s(),Uc.exports=Nv(),Uc.exports}var Tv=jv();const Ev=yg(Tv);var Zt;(function(s){s.STRING="string",s.NUMBER="number",s.INTEGER="integer",s.BOOLEAN="boolean",s.ARRAY="array",s.OBJECT="object"})(Zt||(Zt={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var N0;(function(s){s.LANGUAGE_UNSPECIFIED="language_unspecified",s.PYTHON="python"})(N0||(N0={}));var j0;(function(s){s.OUTCOME_UNSPECIFIED="outcome_unspecified",s.OUTCOME_OK="outcome_ok",s.OUTCOME_FAILED="outcome_failed",s.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(j0||(j0={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0=["user","model","function","system"];var E0;(function(s){s.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",s.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",s.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",s.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",s.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",s.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(E0||(E0={}));var A0;(function(s){s.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",s.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",s.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",s.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",s.BLOCK_NONE="BLOCK_NONE"})(A0||(A0={}));var C0;(function(s){s.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",s.NEGLIGIBLE="NEGLIGIBLE",s.LOW="LOW",s.MEDIUM="MEDIUM",s.HIGH="HIGH"})(C0||(C0={}));var k0;(function(s){s.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",s.SAFETY="SAFETY",s.OTHER="OTHER"})(k0||(k0={}));var yi;(function(s){s.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",s.STOP="STOP",s.MAX_TOKENS="MAX_TOKENS",s.SAFETY="SAFETY",s.RECITATION="RECITATION",s.LANGUAGE="LANGUAGE",s.BLOCKLIST="BLOCKLIST",s.PROHIBITED_CONTENT="PROHIBITED_CONTENT",s.SPII="SPII",s.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",s.OTHER="OTHER"})(yi||(yi={}));var O0;(function(s){s.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",s.RETRIEVAL_QUERY="RETRIEVAL_QUERY",s.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",s.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",s.CLASSIFICATION="CLASSIFICATION",s.CLUSTERING="CLUSTERING"})(O0||(O0={}));var R0;(function(s){s.MODE_UNSPECIFIED="MODE_UNSPECIFIED",s.AUTO="AUTO",s.ANY="ANY",s.NONE="NONE"})(R0||(R0={}));var U0;(function(s){s.MODE_UNSPECIFIED="MODE_UNSPECIFIED",s.MODE_DYNAMIC="MODE_DYNAMIC"})(U0||(U0={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct extends Error{constructor(n){super(`[GoogleGenerativeAI Error]: ${n}`)}}class ls extends ct{constructor(n,r){super(n),this.response=r}}class bg extends ct{constructor(n,r,l,d){super(n),this.status=r,this.statusText=l,this.errorDetails=d}}class Pn extends ct{}class xg extends ct{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="https://generativelanguage.googleapis.com",Cv="v1beta",kv="0.24.1",Ov="genai-js";var wa;(function(s){s.GENERATE_CONTENT="generateContent",s.STREAM_GENERATE_CONTENT="streamGenerateContent",s.COUNT_TOKENS="countTokens",s.EMBED_CONTENT="embedContent",s.BATCH_EMBED_CONTENTS="batchEmbedContents"})(wa||(wa={}));class Rv{constructor(n,r,l,d,h){this.model=n,this.task=r,this.apiKey=l,this.stream=d,this.requestOptions=h}toString(){var n,r;const l=((n=this.requestOptions)===null||n===void 0?void 0:n.apiVersion)||Cv;let h=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||Av}/${l}/${this.model}:${this.task}`;return this.stream&&(h+="?alt=sse"),h}}function Uv(s){const n=[];return s!=null&&s.apiClient&&n.push(s.apiClient),n.push(`${Ov}/${kv}`),n.join(" ")}async function Mv(s){var n;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",Uv(s.requestOptions)),r.append("x-goog-api-key",s.apiKey);let l=(n=s.requestOptions)===null||n===void 0?void 0:n.customHeaders;if(l){if(!(l instanceof Headers))try{l=new Headers(l)}catch(d){throw new Pn(`unable to convert customHeaders value ${JSON.stringify(l)} to Headers: ${d.message}`)}for(const[d,h]of l.entries()){if(d==="x-goog-api-key")throw new Pn(`Cannot set reserved header name ${d}`);if(d==="x-goog-api-client")throw new Pn(`Header name ${d} can only be set using the apiClient field`);r.append(d,h)}}return r}async function Dv(s,n,r,l,d,h){const f=new Rv(s,n,r,l,h);return{url:f.toString(),fetchOptions:Object.assign(Object.assign({},Bv(h)),{method:"POST",headers:await Mv(f),body:d})}}async function Ci(s,n,r,l,d,h={},f=fetch){const{url:m,fetchOptions:v}=await Dv(s,n,r,l,d,h);return zv(m,v,f)}async function zv(s,n,r=fetch){let l;try{l=await r(s,n)}catch(d){Lv(d,s)}return l.ok||await Hv(l,s),l}function Lv(s,n){let r=s;throw r.name==="AbortError"?(r=new xg(`Request aborted when fetching ${n.toString()}: ${s.message}`),r.stack=s.stack):s instanceof bg||s instanceof Pn||(r=new ct(`Error fetching from ${n.toString()}: ${s.message}`),r.stack=s.stack),r}async function Hv(s,n){let r="",l;try{const d=await s.json();r=d.error.message,d.error.details&&(r+=` ${JSON.stringify(d.error.details)}`,l=d.error.details)}catch{}throw new bg(`Error fetching from ${n.toString()}: [${s.status} ${s.statusText}] ${r}`,s.status,s.statusText,l)}function Bv(s){const n={};if((s==null?void 0:s.signal)!==void 0||(s==null?void 0:s.timeout)>=0){const r=new AbortController;(s==null?void 0:s.timeout)>=0&&setTimeout(()=>r.abort(),s.timeout),s!=null&&s.signal&&s.signal.addEventListener("abort",()=>{r.abort()}),n.signal=r.signal}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(s){return s.text=()=>{if(s.candidates&&s.candidates.length>0){if(s.candidates.length>1&&console.warn(`This response had ${s.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),al(s.candidates[0]))throw new ls(`${Vn(s)}`,s);return Gv(s)}else if(s.promptFeedback)throw new ls(`Text not available. ${Vn(s)}`,s);return""},s.functionCall=()=>{if(s.candidates&&s.candidates.length>0){if(s.candidates.length>1&&console.warn(`This response had ${s.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),al(s.candidates[0]))throw new ls(`${Vn(s)}`,s);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),M0(s)[0]}else if(s.promptFeedback)throw new ls(`Function call not available. ${Vn(s)}`,s)},s.functionCalls=()=>{if(s.candidates&&s.candidates.length>0){if(s.candidates.length>1&&console.warn(`This response had ${s.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),al(s.candidates[0]))throw new ls(`${Vn(s)}`,s);return M0(s)}else if(s.promptFeedback)throw new ls(`Function call not available. ${Vn(s)}`,s)},s}function Gv(s){var n,r,l,d;const h=[];if(!((r=(n=s.candidates)===null||n===void 0?void 0:n[0].content)===null||r===void 0)&&r.parts)for(const f of(d=(l=s.candidates)===null||l===void 0?void 0:l[0].content)===null||d===void 0?void 0:d.parts)f.text&&h.push(f.text),f.executableCode&&h.push("\n```"+f.executableCode.language+`
`+f.executableCode.code+"\n```\n"),f.codeExecutionResult&&h.push("\n```\n"+f.codeExecutionResult.output+"\n```\n");return h.length>0?h.join(""):""}function M0(s){var n,r,l,d;const h=[];if(!((r=(n=s.candidates)===null||n===void 0?void 0:n[0].content)===null||r===void 0)&&r.parts)for(const f of(d=(l=s.candidates)===null||l===void 0?void 0:l[0].content)===null||d===void 0?void 0:d.parts)f.functionCall&&h.push(f.functionCall);if(h.length>0)return h}const qv=[yi.RECITATION,yi.SAFETY,yi.LANGUAGE];function al(s){return!!s.finishReason&&qv.includes(s.finishReason)}function Vn(s){var n,r,l;let d="";if((!s.candidates||s.candidates.length===0)&&s.promptFeedback)d+="Response was blocked",!((n=s.promptFeedback)===null||n===void 0)&&n.blockReason&&(d+=` due to ${s.promptFeedback.blockReason}`),!((r=s.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(d+=`: ${s.promptFeedback.blockReasonMessage}`);else if(!((l=s.candidates)===null||l===void 0)&&l[0]){const h=s.candidates[0];al(h)&&(d+=`Candidate was blocked due to ${h.finishReason}`,h.finishMessage&&(d+=`: ${h.finishMessage}`))}return d}function wi(s){return this instanceof wi?(this.v=s,this):new wi(s)}function $v(s,n,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=r.apply(s,n||[]),d,h=[];return d={},f("next"),f("throw"),f("return"),d[Symbol.asyncIterator]=function(){return this},d;function f(w){l[w]&&(d[w]=function(N){return new Promise(function(C,H){h.push([w,N,C,H])>1||m(w,N)})})}function m(w,N){try{v(l[w](N))}catch(C){x(h[0][3],C)}}function v(w){w.value instanceof wi?Promise.resolve(w.value.v).then(p,b):x(h[0][2],w)}function p(w){m("next",w)}function b(w){m("throw",w)}function x(w,N){w(N),h.shift(),h.length&&m(h[0][0],h[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Iv(s){const n=s.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=Yv(n),[l,d]=r.tee();return{stream:Kv(l),response:Vv(d)}}async function Vv(s){const n=[],r=s.getReader();for(;;){const{done:l,value:d}=await r.read();if(l)return cu(Pv(n));n.push(d)}}function Kv(s){return $v(this,arguments,function*(){const r=s.getReader();for(;;){const{value:l,done:d}=yield wi(r.read());if(d)break;yield yield wi(cu(l))}})}function Yv(s){const n=s.getReader();return new ReadableStream({start(l){let d="";return h();function h(){return n.read().then(({value:f,done:m})=>{if(m){if(d.trim()){l.error(new ct("Failed to parse stream"));return}l.close();return}d+=f;let v=d.match(D0),p;for(;v;){try{p=JSON.parse(v[1])}catch{l.error(new ct(`Error parsing JSON response: "${v[1]}"`));return}l.enqueue(p),d=d.substring(v[0].length),v=d.match(D0)}return h()}).catch(f=>{let m=f;throw m.stack=f.stack,m.name==="AbortError"?m=new xg("Request aborted when reading from the stream"):m=new ct("Error reading from the stream"),m})}}})}function Pv(s){const n=s[s.length-1],r={promptFeedback:n==null?void 0:n.promptFeedback};for(const l of s){if(l.candidates){let d=0;for(const h of l.candidates)if(r.candidates||(r.candidates=[]),r.candidates[d]||(r.candidates[d]={index:d}),r.candidates[d].citationMetadata=h.citationMetadata,r.candidates[d].groundingMetadata=h.groundingMetadata,r.candidates[d].finishReason=h.finishReason,r.candidates[d].finishMessage=h.finishMessage,r.candidates[d].safetyRatings=h.safetyRatings,h.content&&h.content.parts){r.candidates[d].content||(r.candidates[d].content={role:h.content.role||"user",parts:[]});const f={};for(const m of h.content.parts)m.text&&(f.text=m.text),m.functionCall&&(f.functionCall=m.functionCall),m.executableCode&&(f.executableCode=m.executableCode),m.codeExecutionResult&&(f.codeExecutionResult=m.codeExecutionResult),Object.keys(f).length===0&&(f.text=""),r.candidates[d].content.parts.push(f)}d++}l.usageMetadata&&(r.usageMetadata=l.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wg(s,n,r,l){const d=await Ci(n,wa.STREAM_GENERATE_CONTENT,s,!0,JSON.stringify(r),l);return Iv(d)}async function _g(s,n,r,l){const h=await(await Ci(n,wa.GENERATE_CONTENT,s,!1,JSON.stringify(r),l)).json();return{response:cu(h)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(s){if(s!=null){if(typeof s=="string")return{role:"system",parts:[{text:s}]};if(s.text)return{role:"system",parts:[s]};if(s.parts)return s.role?s:{role:"system",parts:s.parts}}}function _i(s){let n=[];if(typeof s=="string")n=[{text:s}];else for(const r of s)typeof r=="string"?n.push({text:r}):n.push(r);return Jv(n)}function Jv(s){const n={role:"user",parts:[]},r={role:"function",parts:[]};let l=!1,d=!1;for(const h of s)"functionResponse"in h?(r.parts.push(h),d=!0):(n.parts.push(h),l=!0);if(l&&d)throw new ct("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!l&&!d)throw new ct("No content is provided for sending chat message.");return l?n:r}function Qv(s,n){var r;let l={model:n==null?void 0:n.model,generationConfig:n==null?void 0:n.generationConfig,safetySettings:n==null?void 0:n.safetySettings,tools:n==null?void 0:n.tools,toolConfig:n==null?void 0:n.toolConfig,systemInstruction:n==null?void 0:n.systemInstruction,cachedContent:(r=n==null?void 0:n.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const d=s.generateContentRequest!=null;if(s.contents){if(d)throw new Pn("CountTokensRequest must have one of contents or generateContentRequest, not both.");l.contents=s.contents}else if(d)l=Object.assign(Object.assign({},l),s.generateContentRequest);else{const h=_i(s);l.contents=[h]}return{generateContentRequest:l}}function z0(s){let n;return s.contents?n=s:n={contents:[_i(s)]},s.systemInstruction&&(n.systemInstruction=Sg(s.systemInstruction)),n}function Xv(s){return typeof s=="string"||Array.isArray(s)?{content:_i(s)}:s}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Zv={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Wv(s){let n=!1;for(const r of s){const{role:l,parts:d}=r;if(!n&&l!=="user")throw new ct(`First content should be with role 'user', got ${l}`);if(!T0.includes(l))throw new ct(`Each item should include role field. Got ${l} but valid roles are: ${JSON.stringify(T0)}`);if(!Array.isArray(d))throw new ct("Content should have 'parts' property with an array of Parts");if(d.length===0)throw new ct("Each Content should have at least one part");const h={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const m of d)for(const v of L0)v in m&&(h[v]+=1);const f=Zv[l];for(const m of L0)if(!f.includes(m)&&h[m]>0)throw new ct(`Content with role '${l}' can't contain '${m}' part`);n=!0}}function H0(s){var n;if(s.candidates===void 0||s.candidates.length===0)return!1;const r=(n=s.candidates[0])===null||n===void 0?void 0:n.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const l of r.parts)if(l===void 0||Object.keys(l).length===0||l.text!==void 0&&l.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="SILENT_ERROR";class Fv{constructor(n,r,l,d={}){this.model=r,this.params=l,this._requestOptions=d,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=n,l!=null&&l.history&&(Wv(l.history),this._history=l.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(n,r={}){var l,d,h,f,m,v;await this._sendPromise;const p=_i(n),b={safetySettings:(l=this.params)===null||l===void 0?void 0:l.safetySettings,generationConfig:(d=this.params)===null||d===void 0?void 0:d.generationConfig,tools:(h=this.params)===null||h===void 0?void 0:h.tools,toolConfig:(f=this.params)===null||f===void 0?void 0:f.toolConfig,systemInstruction:(m=this.params)===null||m===void 0?void 0:m.systemInstruction,cachedContent:(v=this.params)===null||v===void 0?void 0:v.cachedContent,contents:[...this._history,p]},x=Object.assign(Object.assign({},this._requestOptions),r);let w;return this._sendPromise=this._sendPromise.then(()=>_g(this._apiKey,this.model,b,x)).then(N=>{var C;if(H0(N.response)){this._history.push(p);const H=Object.assign({parts:[],role:"model"},(C=N.response.candidates)===null||C===void 0?void 0:C[0].content);this._history.push(H)}else{const H=Vn(N.response);H&&console.warn(`sendMessage() was unsuccessful. ${H}. Inspect response object for details.`)}w=N}).catch(N=>{throw this._sendPromise=Promise.resolve(),N}),await this._sendPromise,w}async sendMessageStream(n,r={}){var l,d,h,f,m,v;await this._sendPromise;const p=_i(n),b={safetySettings:(l=this.params)===null||l===void 0?void 0:l.safetySettings,generationConfig:(d=this.params)===null||d===void 0?void 0:d.generationConfig,tools:(h=this.params)===null||h===void 0?void 0:h.tools,toolConfig:(f=this.params)===null||f===void 0?void 0:f.toolConfig,systemInstruction:(m=this.params)===null||m===void 0?void 0:m.systemInstruction,cachedContent:(v=this.params)===null||v===void 0?void 0:v.cachedContent,contents:[...this._history,p]},x=Object.assign(Object.assign({},this._requestOptions),r),w=wg(this._apiKey,this.model,b,x);return this._sendPromise=this._sendPromise.then(()=>w).catch(N=>{throw new Error(B0)}).then(N=>N.response).then(N=>{if(H0(N)){this._history.push(p);const C=Object.assign({},N.candidates[0].content);C.role||(C.role="model"),this._history.push(C)}else{const C=Vn(N);C&&console.warn(`sendMessageStream() was unsuccessful. ${C}. Inspect response object for details.`)}}).catch(N=>{N.message!==B0&&console.error(N)}),w}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ey(s,n,r,l){return(await Ci(n,wa.COUNT_TOKENS,s,!1,JSON.stringify(r),l)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ty(s,n,r,l){return(await Ci(n,wa.EMBED_CONTENT,s,!1,JSON.stringify(r),l)).json()}async function ny(s,n,r,l){const d=r.requests.map(f=>Object.assign(Object.assign({},f),{model:n}));return(await Ci(n,wa.BATCH_EMBED_CONTENTS,s,!1,JSON.stringify({requests:d}),l)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(n,r,l={}){this.apiKey=n,this._requestOptions=l,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=Sg(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(n,r={}){var l;const d=z0(n),h=Object.assign(Object.assign({},this._requestOptions),r);return _g(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(l=this.cachedContent)===null||l===void 0?void 0:l.name},d),h)}async generateContentStream(n,r={}){var l;const d=z0(n),h=Object.assign(Object.assign({},this._requestOptions),r);return wg(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(l=this.cachedContent)===null||l===void 0?void 0:l.name},d),h)}startChat(n){var r;return new Fv(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},n),this._requestOptions)}async countTokens(n,r={}){const l=Qv(n,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),d=Object.assign(Object.assign({},this._requestOptions),r);return ey(this.apiKey,this.model,l,d)}async embedContent(n,r={}){const l=Xv(n),d=Object.assign(Object.assign({},this._requestOptions),r);return ty(this.apiKey,this.model,l,d)}async batchEmbedContents(n,r={}){const l=Object.assign(Object.assign({},this._requestOptions),r);return ny(this.apiKey,this.model,n,l)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(n){this.apiKey=n}getGenerativeModel(n,r){if(!n.model)throw new ct("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new G0(this.apiKey,n,r)}getGenerativeModelFromCachedContent(n,r,l){if(!n.name)throw new Pn("Cached content must contain a `name` field.");if(!n.model)throw new Pn("Cached content must contain a `model` field.");const d=["model","systemInstruction"];for(const f of d)if(r!=null&&r[f]&&n[f]&&(r==null?void 0:r[f])!==n[f]){if(f==="model"){const m=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,v=n.model.startsWith("models/")?n.model.replace("models/",""):n.model;if(m===v)continue}throw new Pn(`Different value for "${f}" specified in modelParams (${r[f]}) and cachedContent (${n[f]})`)}const h=Object.assign(Object.assign({},r),{model:n.model,tools:n.tools,toolConfig:n.toolConfig,systemInstruction:n.systemInstruction,cachedContent:n});return new G0(this.apiKey,h,l)}}const Lc={},ay=["gemini-flash-latest","gemini-1.5-flash","gemini-2.0-flash-lite-preview-02-05","gemini-2.5-flash","gemini-2.0-flash-lite-001","gemini-2.0-flash","gemini-2.5-pro"];let Qc=[];const Xc=s=>{Qc=s.filter(n=>n.trim()!=="")},sy=s=>{let n=[];s&&(n=s.split(/[\n,]+/).map(l=>l.trim()).filter(l=>l));const r=Lc==null?void 0:Lc.VITE_GEMINI_API_KEY;if(r){const l=r.split(",").map(d=>d.trim()).filter(d=>d);n=[...n,...l]}return Qc.length>0&&(n=[...n,...Qc]),[...new Set(n)]},_a=async(s,n)=>{const r=sy(s);if(r.length===0)throw new Error("No API Keys provided. Please configure VITE_GEMINI_API_KEY or enter a key.");let l;for(const d of r){const h=new ll(d);for(const f of ay)try{const m=h.getGenerativeModel({model:f});return await n(m)}catch(m){console.warn(`Failed: Key(...${d.slice(-4)}) Model(${f}) error: ${m.message}`),l=m}}throw l||new Error("All keys and models failed to generate content.")},iy=async(s,n)=>_a(n,async r=>{const l=`
        c ton b "Kch bn i th" sau v phn tch theo quy tc:
        Kch bn: """${s}"""

        Mc tiu: Rt ra khung xng cu trc cm xc (Hook, Build-up, Value/Twist, CTA).
        
        Yu cu:
        1. Xc nh ranh gii phn theo chc nng cm xc.
        2. Vi tng phn m t: Ni dung chnh, Cm xc ch o, Cch truyn ti cm xc, L do hiu qu.
        3. Rt ra: 3 yu t ct li, c im ngn ng & tit tu (5-8 im), 3 pattern cm xc.
        
        Rng buc: Khng thm nhn vt/bi cnh ngoi script. Khng nh gi cm tnh. 
        KT THC BNG MT ON RING BIT C TIU  "PHONG CCH I TH" lit k cc c im phong cch  bc sau s dng.
      `;return(await r.generateContent(l)).response.text()}),ry=async(s,n)=>_a(n,async r=>{const l=`
        Da trn kt qu phn tch khung xng sau:
        """${s}"""
        
        Nhim v: Sng to ra 5  tng ni dung video mi, gi nguyn "linh hn cm xc" ca kch bn gc.
        
        Mi  tng gm:
        - Tiu  ngn
        - M t ni dung (3-5 cu)
        - Nhn vt/Bi cnh
        - Gi tr ni bt (Cm xc/Thc tin)
        - Kh nng lan truyn

        Response must be a valid JSON array matching the schema:
        [{ "id": number, "title": string, "description": string, "charactersContext": string, "highlightValue": string, "viralPotential": string }]
      `,d=await r.generateContent({contents:[{role:"user",parts:[{text:l}]}],generationConfig:{responseMimeType:"application/json"}});return JSON.parse(d.response.text())}),ly=async(s,n,r,l)=>_a(l,async d=>{const h=`
        Xy dng dn  chi tit da trn:
        - Khung xng gc: """${s}"""
        -  tng chn: """${JSON.stringify(n)}"""
        - Tng s t mc tiu: ${r}

        Cu trc: Gi nguyn form gc (Hook -> Build-up -> Value/Twist -> CTA).
        Yu cu: Vi mi phn nu r: Mc tiu, Cm xc chnh, Ni dung trin khai, Lin kt trc-sau, S t phn b.
      `;return(await d.generateContent(h)).response.text()}),oy=async(s,n,r)=>_a(r,async l=>{const d=`
        Vit li thoi kch bn hon chnh (voice-ready) da trn dn  v phong cch sau:
        - Dn : """${s}"""
        - Phong cch m phng: """${n}"""

        QUY TC NGHIM NGT:
        1. Ch tr v li thoi sch 100%. Khng tiu , khng ch thch, khng ngoc ( ), khng nhc nn.
        2. Vit lin mch theo th t Hook -> Build-up -> Value/Twist -> CTA.
      `;return(await l.generateContent(d)).response.text()}),cy=async(s,n,r)=>_a(r,async l=>{const d=`
        Da trn kch bn video sau:
        """${s}"""
        
        Hy chn ra 1 phong cch hnh nh ph hp nht t danh sch sau:
        ${n.join(", ")}
        
        Ch tr v duy nht tn ID ca phong cch , khng gii thch g thm.
      `;return(await l.generateContent(d)).response.text().trim()}),uy=async(s,n,r)=>_a(r,async l=>{const d=`
        Da trn kch bn sau v phong cch hnh nh [${n}]:
        Kch bn: """${s}"""
        
        Hy thit k chi tit cc nhn vt xut hin trong kch bn. Nu kch bn khng m t r, hy t sng to chi tit  m bo tnh thm m v ng b.
        
        QUY TC BT BUC: 
        1. Phn "bodyType" (Dng ngi): Ghi CC K NGN GN (v d: "Cao gy", "Mp mp", "Cn i", "Vm v").
        2. Phn "facialDetails" (c im khun mt): 
           - Nu kch bn thiu, hy t thm cho y  nhng phi M T GN GNG, KHNG LNG NHNG, KHNG VN HOA. 
           - CH C M T TRNG THI BNH THNG/TRUNG TNH (Neutral expression).
           - TUYT I KHNG a vo cm xc hay tnh hung c th (v d: KHNG ghi "ang khc", "mt lm lem", "ci nham him"). Ch m t cu trc vt l (mt, mi, ming, da, tc...).

        Tr v nh dng JSON mng cc i tng:
        - name: Tn nhn vt
        - gender: Gii tnh
        - country: Quc gia/Chng tc
        - age:  tui
        - bodyType: Dng ngi (ngn gn nht c th)
        - facialDetails: c im chi tit khun mt (cu trc vt l, gn gng, khng cm xc)
      `,h=await l.generateContent({contents:[{role:"user",parts:[{text:d}]}],generationConfig:{responseMimeType:"application/json"}});return JSON.parse(h.response.text())}),dy=async(s,n,r,l)=>_a(l,async d=>{const h=r.map(v=>`[Nhn vt: ${v.name} | Gii tnh: ${v.gender} | Quc gia: ${v.country} | Tui: ${v.age} | Dng ngi: ${v.bodyType} | Khun mt: ${v.facialDetails}]`).join(`
`),f=`
        Bn l mt CHUYN GIA PHN TCH TNH HUNG v o din hnh nh i ti.
        Nhim v: Phn tch kch bn sau  trch xut cc hnh ng quay (Shot Action).

        Kch bn: """${s}"""
        
        THNG TIN NHN VT GC (BT BUC PHI SAO CHP CHNH XC KHI NHC N):
        ${h}

        NGUYN TC PHN TCH TNH HUNG (SITUATIONAL ANALYSIS):
        1. QUAN ST NG CNH: Da vo ni dung lin trc (nu c) v lin sau ca mi hnh ng, hy suy lun logic xem nhn vt no ANG C MT trong cnh .
        2. D ON NHN VT: Nu kch bn khng nhc tn nhng logic tnh hung cho thy nhn vt  phi   (v d: ang i thoi, ang ng cnh), BT BUC phi a h vo.
        3. HIN TH TRONG 'ACTION': Trong trng 'action' (M t ngn hnh ng), hy lit k tn cc nhn vt c mt u tin, sau  n m t hnh ng.

        QUY TC TO PROMPT (Strict Compliance - Rules Override All):

        1. [VISUAL STYLE]: Lun bt u bng phong cch: [${n}].

        2. [Bi cnh] (Context Memory):
           - Nu kch bn khng nu r, hy thm chi tit (bn gh,  vt, b cc...).
           - QUAN TRNG: Ghi nh bi cnh. Nu cha i cnh, DNG LI m t bi cnh c. Nu i cnh, thit lp bi cnh mi chi tit v ghi nh cho cc shot sau.

        3. [QUY TC] (Safety & Quality):
           - Lun thm vo prompt: [NO duplication, NO mutation, NO anatomical distortion, Any violation of anatomy rules is forbidden]

        4. [CAMERA]: Gc my, chuyn ng my (Cinematic wording).

        5. [ACTION] (Character Consistency):
           - Khi nhc n nhn vt no, BT BUC COPY NGUYN VN "c im nhn vt" (Gii tnh, Tui, Dng, Khun mt) t thng tin gc vo prompt.
           - TUYT I KHNG ghi tt, KHNG tm tt, KHNG dng "nh trn". Phi copy full.
           - Nu shot c nhn vt khc, cng copy full c im ca h vo.

        6. [Trang Phc] (Costume Memory):
           - Nu kch bn khng nu, t thm v ghi r mu sc.
           - QUAN TRNG: Gi nguyn trang phc xuyn sut cc shot nu cha i thi gian/cnh.

        7. [AUDIO/VOICE  LIP SYNC]:
           - Cu trc: [Tn nhn vt ni: "Li thoi trong Master Transcript"] (nu c thoi).
           - Nu khng thoi: b qua.

        8. [SPEECH SYNC]:
           - Nu c li thoi  mc trn, BT BUC ghi tag: [Chuyn ng ming nhn vt ng b vi li thoi].

        9. [TECHNICAL]: nh sng, mu sc (Lighting, Color).

        CU TRC PROMPT VIDEO (Video Motion Ai Prompt - Output String):
        [${n}], [Bi cnh chi tit], [NO duplication, NO mutation, NO anatomical distortion, Any violation of anatomy rules is forbidden], [CAMERA], [ACTION: Tn NV + (c im Full Copy) + Hnh ng. ${r.length===1?"The scene contains EXACTLY ONE character":"Check logic"}], [Trang phc], [AUDIO/VOICE  LIP SYNC], [SPEECH SYNC], [TECHNICAL]

        TR V JSON Array cc object:
        - action: [Tn cc NV c mt]: [M t hnh ng]
        - voiceText: Li thoi (nu c)
        - motionPrompt: Prompt video (Tun th cu trc trn)
      `,m=await d.generateContent({contents:[{role:"user",parts:[{text:f}]}],generationConfig:{responseMimeType:"application/json"}});return JSON.parse(m.response.text())}),hy=({userId:s})=>{const[n,r]=Q.useState(!1),[l,d]=Q.useState(!1),[h,f]=Q.useState({gemini:"",chatgpt:"",openrouter:""}),[m,v]=Q.useState(!1),p=A=>{try{return btoa(A)}catch{return A}},b=A=>{try{return atob(A)}catch{return A}},x=`app_api_keys_${s}`;Q.useEffect(()=>{const A=localStorage.getItem(x);if(!A){f({gemini:"",chatgpt:"",openrouter:""}),Xc([]);return}if(A)try{const R=JSON.parse(A),U={gemini:b(R.gemini||""),chatgpt:b(R.chatgpt||""),openrouter:b(R.openrouter||"")};f(U),U.gemini&&w(U.gemini)}catch(R){console.error("Failed to parse keys",R)}},[s]);const w=A=>{const R=A.split(`
`).map(U=>U.trim()).filter(U=>U!=="");Xc(R)},N=()=>{if(!(h.gemini.trim()!==""||h.chatgpt.trim()!==""||h.openrouter.trim()!=="")){alert("Li: Bn phi nhp t nht 1 API Key vo mt trong 3 mc  tip tc!");return}const R={gemini:p(h.gemini),chatgpt:p(h.chatgpt),openrouter:p(h.openrouter)};localStorage.setItem(x,JSON.stringify(R)),h.gemini&&w(h.gemini),v(!0),setTimeout(()=>v(!1),3e3)},C=(A,R)=>{f(U=>({...U,[A]:R}))},H=()=>c.jsx("div",{className:"absolute inset-0 bg-slate-900/90 backdrop-blur-sm flex items-center justify-center cursor-pointer z-10 rounded-lg border border-slate-700/50",onClick:()=>d(!0),children:c.jsxs("span",{className:"text-slate-400 text-xs font-medium flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}),"Click to Show Keys"]})});return c.jsxs("div",{className:"w-full bg-[#0f172a] border-b border-white/10 relative z-[200]",children:[c.jsxs("div",{className:"px-6 py-2 flex items-center justify-between cursor-pointer hover:bg-white/5 transition-all text-xs font-bold uppercase tracking-widest text-slate-400",onClick:()=>r(!n),children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:`w-4 h-4 transition-transform ${n?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})}),c.jsxs("span",{children:["API Configuration Manager",c.jsxs("span",{className:"ml-2 text-indigo-400 normal-case tracking-normal opacity-70",children:["(User: ",s.replace("user_","Account ")," - ",l?"Visible":"Hidden",")"]}),m&&c.jsx("span",{className:"text-emerald-400 ml-4 animate-in fade-in slide-in-from-left-2 normal-case tracking-normal",children:" Saved!"})]})]}),c.jsxs("div",{className:"flex gap-4 items-center",children:[c.jsx("button",{onClick:A=>{A.stopPropagation(),d(!l)},className:"text-[10px] bg-slate-800 px-2 py-1 rounded hover:bg-slate-700 transition",children:l?"Hide Keys":"Show Keys"}),c.jsxs("div",{className:"flex gap-4 opacity-50",children:[c.jsxs("span",{children:["Gemini: ",h.gemini?h.gemini.split(`
`).filter(A=>A.trim()).length:0]}),c.jsx("span",{className:"opacity-30",children:"|"}),c.jsxs("span",{children:["GPT: ",h.chatgpt?h.chatgpt.split(`
`).filter(A=>A.trim()).length:0]}),c.jsx("span",{className:"opacity-30",children:"|"}),c.jsxs("span",{children:["OR: ",h.openrouter?h.openrouter.split(`
`).filter(A=>A.trim()).length:0]})]})]})]}),n&&c.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-3 gap-6 animate-in slide-in-from-top-2 duration-300 bg-black/20",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[10px] uppercase font-black text-indigo-400 tracking-widest",children:"Google Gemini Keys"}),c.jsxs("div",{className:"relative group",children:[!l&&c.jsx(H,{}),c.jsx("textarea",{value:h.gemini,onChange:A=>C("gemini",A.target.value),placeholder:`AIzaSy...
AIzaSy...`,rows:4,disabled:!l,className:`w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white text-xs font-mono focus:border-indigo-500 focus:ring-1 outline-none transition-all resize-y ${l?"":"blur-sm select-none"}`})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[10px] uppercase font-black text-emerald-400 tracking-widest",children:"ChatGPT Keys"}),c.jsxs("div",{className:"relative group",children:[!l&&c.jsx(H,{}),c.jsx("textarea",{value:h.chatgpt,onChange:A=>C("chatgpt",A.target.value),placeholder:`sk-...
sk-...`,rows:4,disabled:!l,className:`w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white text-xs font-mono focus:border-emerald-500 focus:ring-1 outline-none transition-all resize-y ${l?"":"blur-sm select-none"}`})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[10px] uppercase font-black text-rose-400 tracking-widest",children:"OpenRouter Keys"}),c.jsxs("div",{className:"relative group",children:[!l&&c.jsx(H,{}),c.jsx("textarea",{value:h.openrouter,onChange:A=>C("openrouter",A.target.value),placeholder:`sk-or-...
sk-or-...`,rows:4,disabled:!l,className:`w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white text-xs font-mono focus:border-rose-500 focus:ring-1 outline-none transition-all resize-y ${l?"":"blur-sm select-none"}`})]})]}),c.jsxs("div",{className:"md:col-span-3 flex flex-col md:flex-row items-center justify-between mt-2 gap-4",children:[c.jsxs("p",{className:"text-[10px] text-slate-500 italic text-center md:text-left",children:["* Bo mt: Key lu ring cho ti khon ",c.jsx("b",{children:s}),". ",c.jsx("br",{}),"H thng t ng xoay vng key khi chy."]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:async()=>{const A=h.gemini.split(`
`).map(U=>U.trim()).filter(U=>U!=="");if(A.length===0){alert("Vui lng nhp v LU t nht 1 API Key Gemini trc khi test!");return}const R=A[0];try{const q=await(await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${R}`)).json();if(q.error)alert(`Li: ${q.error.message}`);else if(q.models){const j=q.models.map(M=>M.name.replace("models/","")).slice(0,10).join(", ");alert(`Kt ni OK! C ${q.models.length} models:
${j}`)}else alert("Phn hi l: "+JSON.stringify(q))}catch(U){alert("Li mng: "+U.message)}},className:"bg-blue-600/20 text-blue-400 font-bold uppercase text-xs px-6 py-3 rounded-xl hover:bg-blue-600/30 transition-all border border-blue-600/30",children:"Test Local"}),c.jsx("button",{onClick:N,className:"bg-white text-slate-900 font-black uppercase text-xs px-8 py-3 rounded-xl hover:bg-slate-200 active:scale-95 transition-all shadow-lg flex items-center gap-2",children:"Lu cu hnh (Save)"})]})]})]})]})};function ol(s,n){var r={};for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&n.indexOf(l)<0&&(r[l]=s[l]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,l=Object.getOwnPropertySymbols(s);d<l.length;d++)n.indexOf(l[d])<0&&Object.prototype.propertyIsEnumerable.call(s,l[d])&&(r[l[d]]=s[l[d]]);return r}function fy(s,n,r,l){function d(h){return h instanceof r?h:new r(function(f){f(h)})}return new(r||(r=Promise))(function(h,f){function m(b){try{p(l.next(b))}catch(x){f(x)}}function v(b){try{p(l.throw(b))}catch(x){f(x)}}function p(b){b.done?h(b.value):d(b.value).then(m,v)}p((l=l.apply(s,n||[])).next())})}const gy=s=>s?(...n)=>s(...n):(...n)=>fetch(...n);class uu extends Error{constructor(n,r="FunctionsError",l){super(n),this.name=r,this.context=l}}class my extends uu{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class q0 extends uu{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class $0 extends uu{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Zc;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Zc||(Zc={}));class py{constructor(n,{headers:r={},customFetch:l,region:d=Zc.Any}={}){this.url=n,this.headers=r,this.region=d,this.fetch=gy(l)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return fy(this,arguments,void 0,function*(r,l={}){var d;let h,f;try{const{headers:m,method:v,body:p,signal:b,timeout:x}=l;let w={},{region:N}=l;N||(N=this.region);const C=new URL(`${this.url}/${r}`);N&&N!=="any"&&(w["x-region"]=N,C.searchParams.set("forceFunctionRegion",N));let H;p&&(m&&!Object.prototype.hasOwnProperty.call(m,"Content-Type")||!m)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(w["Content-Type"]="application/octet-stream",H=p):typeof p=="string"?(w["Content-Type"]="text/plain",H=p):typeof FormData<"u"&&p instanceof FormData?H=p:(w["Content-Type"]="application/json",H=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?H=JSON.stringify(p):H=p;let A=b;x&&(f=new AbortController,h=setTimeout(()=>f.abort(),x),b?(A=f.signal,b.addEventListener("abort",()=>f.abort())):A=f.signal);const R=yield this.fetch(C.toString(),{method:v||"POST",headers:Object.assign(Object.assign(Object.assign({},w),this.headers),m),body:H,signal:A}).catch(M=>{throw new my(M)}),U=R.headers.get("x-relay-error");if(U&&U==="true")throw new q0(R);if(!R.ok)throw new $0(R);let q=((d=R.headers.get("Content-Type"))!==null&&d!==void 0?d:"text/plain").split(";")[0].trim(),j;return q==="application/json"?j=yield R.json():q==="application/octet-stream"||q==="application/pdf"?j=yield R.blob():q==="text/event-stream"?j=R:q==="multipart/form-data"?j=yield R.formData():j=yield R.text(),{data:j,error:null,response:R}}catch(m){return{data:null,error:m,response:m instanceof $0||m instanceof q0?m.context:void 0}}finally{h&&clearTimeout(h)}})}}var vy=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}},yy=class{constructor(s){var n,r;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(n=s.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=s.signal,this.isMaybeSingle=(r=s.isMaybeSingle)!==null&&r!==void 0?r:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,n){return this.headers=new Headers(this.headers),this.headers.set(s,n),this}then(s,n){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let d=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{let f=null,m=null,v=null,p=h.status,b=h.statusText;if(h.ok){var x,w;if(r.method!=="HEAD"){var N;const R=await h.text();R===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((N=r.headers.get("Accept"))===null||N===void 0)&&N.includes("application/vnd.pgrst.plan+text"))?m=R:m=JSON.parse(R))}const H=(x=r.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),A=(w=h.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");H&&A&&A.length>1&&(v=parseInt(A[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(m)&&(m.length>1?(f={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,v=null,p=406,b="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{var C;const H=await h.text();try{f=JSON.parse(H),Array.isArray(f)&&h.status===404&&(m=[],f=null,p=200,b="OK")}catch{h.status===404&&H===""?(p=204,b="No Content"):f={message:H}}if(f&&r.isMaybeSingle&&(!(f==null||(C=f.details)===null||C===void 0)&&C.includes("0 rows"))&&(f=null,p=200,b="OK"),f&&r.shouldThrowOnError)throw new vy(f)}return{error:f,data:m,count:v,status:p,statusText:b}});return this.shouldThrowOnError||(d=d.catch(h=>{var f;let m="";const v=h==null?void 0:h.cause;if(v){var p,b,x,w;const C=(p=v==null?void 0:v.message)!==null&&p!==void 0?p:"",H=(b=v==null?void 0:v.code)!==null&&b!==void 0?b:"";m=`${(x=h==null?void 0:h.name)!==null&&x!==void 0?x:"FetchError"}: ${h==null?void 0:h.message}`,m+=`

Caused by: ${(w=v==null?void 0:v.name)!==null&&w!==void 0?w:"Error"}: ${C}`,H&&(m+=` (${H})`),v!=null&&v.stack&&(m+=`
${v.stack}`)}else{var N;m=(N=h==null?void 0:h.stack)!==null&&N!==void 0?N:""}return{error:{message:`${(f=h==null?void 0:h.name)!==null&&f!==void 0?f:"FetchError"}: ${h==null?void 0:h.message}`,details:m,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),d.then(s,n)}returns(){return this}overrideTypes(){return this}},by=class extends yy{select(s){let n=!1;const r=(s??"*").split("").map(l=>/\s/.test(l)&&!n?"":(l==='"'&&(n=!n),l)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:n=!0,nullsFirst:r,foreignTable:l,referencedTable:d=l}={}){const h=d?`${d}.order`:"order",f=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${f?`${f},`:""}${s}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:n,referencedTable:r=n}={}){const l=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,n,{foreignTable:r,referencedTable:l=r}={}){const d=typeof l>"u"?"offset":`${l}.offset`,h=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(h,`${n-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:n=!1,settings:r=!1,buffers:l=!1,wal:d=!1,format:h="text"}={}){var f;const m=[s?"analyze":null,n?"verbose":null,r?"settings":null,l?"buffers":null,d?"wal":null].filter(Boolean).join("|"),v=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${v}"; options=${m};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};const I0=new RegExp("[,()]");var gs=class extends by{eq(s,n){return this.url.searchParams.append(s,`eq.${n}`),this}neq(s,n){return this.url.searchParams.append(s,`neq.${n}`),this}gt(s,n){return this.url.searchParams.append(s,`gt.${n}`),this}gte(s,n){return this.url.searchParams.append(s,`gte.${n}`),this}lt(s,n){return this.url.searchParams.append(s,`lt.${n}`),this}lte(s,n){return this.url.searchParams.append(s,`lte.${n}`),this}like(s,n){return this.url.searchParams.append(s,`like.${n}`),this}likeAllOf(s,n){return this.url.searchParams.append(s,`like(all).{${n.join(",")}}`),this}likeAnyOf(s,n){return this.url.searchParams.append(s,`like(any).{${n.join(",")}}`),this}ilike(s,n){return this.url.searchParams.append(s,`ilike.${n}`),this}ilikeAllOf(s,n){return this.url.searchParams.append(s,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(s,n){return this.url.searchParams.append(s,`ilike(any).{${n.join(",")}}`),this}regexMatch(s,n){return this.url.searchParams.append(s,`match.${n}`),this}regexIMatch(s,n){return this.url.searchParams.append(s,`imatch.${n}`),this}is(s,n){return this.url.searchParams.append(s,`is.${n}`),this}isDistinct(s,n){return this.url.searchParams.append(s,`isdistinct.${n}`),this}in(s,n){const r=Array.from(new Set(n)).map(l=>typeof l=="string"&&I0.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`in.(${r})`),this}notIn(s,n){const r=Array.from(new Set(n)).map(l=>typeof l=="string"&&I0.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`not.in.(${r})`),this}contains(s,n){return typeof n=="string"?this.url.searchParams.append(s,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(s,`cs.{${n.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(n)}`),this}containedBy(s,n){return typeof n=="string"?this.url.searchParams.append(s,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(s,`cd.{${n.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(n)}`),this}rangeGt(s,n){return this.url.searchParams.append(s,`sr.${n}`),this}rangeGte(s,n){return this.url.searchParams.append(s,`nxl.${n}`),this}rangeLt(s,n){return this.url.searchParams.append(s,`sl.${n}`),this}rangeLte(s,n){return this.url.searchParams.append(s,`nxr.${n}`),this}rangeAdjacent(s,n){return this.url.searchParams.append(s,`adj.${n}`),this}overlaps(s,n){return typeof n=="string"?this.url.searchParams.append(s,`ov.${n}`):this.url.searchParams.append(s,`ov.{${n.join(",")}}`),this}textSearch(s,n,{config:r,type:l}={}){let d="";l==="plain"?d="pl":l==="phrase"?d="ph":l==="websearch"&&(d="w");const h=r===void 0?"":`(${r})`;return this.url.searchParams.append(s,`${d}fts${h}.${n}`),this}match(s){return Object.entries(s).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(s,n,r){return this.url.searchParams.append(s,`not.${n}.${r}`),this}or(s,{foreignTable:n,referencedTable:r=n}={}){const l=r?`${r}.or`:"or";return this.url.searchParams.append(l,`(${s})`),this}filter(s,n,r){return this.url.searchParams.append(s,`${n}.${r}`),this}},xy=class{constructor(s,{headers:n={},schema:r,fetch:l}){this.url=s,this.headers=new Headers(n),this.schema=r,this.fetch=l}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(s,n){const{head:r=!1,count:l}=n??{},d=r?"HEAD":"GET";let h=!1;const f=(s??"*").split("").map(p=>/\s/.test(p)&&!h?"":(p==='"'&&(h=!h),p)).join(""),{url:m,headers:v}=this.cloneRequestState();return m.searchParams.set("select",f),l&&v.append("Prefer",`count=${l}`),new gs({method:d,url:m,headers:v,schema:this.schema,fetch:this.fetch})}insert(s,{count:n,defaultToNull:r=!0}={}){var l;const d="POST",{url:h,headers:f}=this.cloneRequestState();if(n&&f.append("Prefer",`count=${n}`),r||f.append("Prefer","missing=default"),Array.isArray(s)){const m=s.reduce((v,p)=>v.concat(Object.keys(p)),[]);if(m.length>0){const v=[...new Set(m)].map(p=>`"${p}"`);h.searchParams.set("columns",v.join(","))}}return new gs({method:d,url:h,headers:f,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(s,{onConflict:n,ignoreDuplicates:r=!1,count:l,defaultToNull:d=!0}={}){var h;const f="POST",{url:m,headers:v}=this.cloneRequestState();if(v.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&m.searchParams.set("on_conflict",n),l&&v.append("Prefer",`count=${l}`),d||v.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((b,x)=>b.concat(Object.keys(x)),[]);if(p.length>0){const b=[...new Set(p)].map(x=>`"${x}"`);m.searchParams.set("columns",b.join(","))}}return new gs({method:f,url:m,headers:v,schema:this.schema,body:s,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}update(s,{count:n}={}){var r;const l="PATCH",{url:d,headers:h}=this.cloneRequestState();return n&&h.append("Prefer",`count=${n}`),new gs({method:l,url:d,headers:h,schema:this.schema,body:s,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:s}={}){var n;const r="DELETE",{url:l,headers:d}=this.cloneRequestState();return s&&d.append("Prefer",`count=${s}`),new gs({method:r,url:l,headers:d,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}},wy=class Ng{constructor(n,{headers:r={},schema:l,fetch:d}={}){this.url=n,this.headers=new Headers(r),this.schemaName=l,this.fetch=d}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new xy(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(n){return new Ng(this.url,{headers:this.headers,schema:n,fetch:this.fetch})}rpc(n,r={},{head:l=!1,get:d=!1,count:h}={}){var f;let m;const v=new URL(`${this.url}/rpc/${n}`);let p;const b=N=>N!==null&&typeof N=="object"&&(!Array.isArray(N)||N.some(b)),x=l&&Object.values(r).some(b);x?(m="POST",p=r):l||d?(m=l?"HEAD":"GET",Object.entries(r).filter(([N,C])=>C!==void 0).map(([N,C])=>[N,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([N,C])=>{v.searchParams.append(N,C)})):(m="POST",p=r);const w=new Headers(this.headers);return x?w.set("Prefer",h?`count=${h},return=minimal`:"return=minimal"):h&&w.set("Prefer",`count=${h}`),new gs({method:m,url:v,headers:w,schema:this.schemaName,body:p,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}};class _y{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const l=r.versions;if(l&&l.node){const d=l.node,h=parseInt(d.replace(/^v/,"").split(".")[0]);return h>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${h} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${h} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const l=this.getWebSocketConstructor();return new l(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const Sy="2.93.2",Ny=`realtime-js/${Sy}`,jy="1.0.0",jg="2.0.0",V0=jg,Wc=1e4,Ty=1e3,Ey=100;var Kn;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Kn||(Kn={}));var Xe;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(Xe||(Xe={}));var Kt;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(Kt||(Kt={}));var Fc;(function(s){s.websocket="websocket"})(Fc||(Fc={}));var pa;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(pa||(pa={}));class Ay{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,r){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(n));let l=[n.join_ref,n.ref,n.topic,n.event,n.payload];return r(JSON.stringify(l))}_binaryEncodeUserBroadcastPush(n){var r;return this._isArrayBuffer((r=n.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var r,l;const d=(l=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&l!==void 0?l:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,d)}_encodeJsonUserBroadcastPush(n){var r,l;const d=(l=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&l!==void 0?l:{},f=new TextEncoder().encode(JSON.stringify(d)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(n,r,l){var d,h;const f=n.topic,m=(d=n.ref)!==null&&d!==void 0?d:"",v=(h=n.join_ref)!==null&&h!==void 0?h:"",p=n.payload.event,b=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},x=Object.keys(b).length===0?"":JSON.stringify(b);if(v.length>255)throw new Error(`joinRef length ${v.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`ref length ${m.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`metadata length ${x.length} exceeds maximum of 255`);const w=this.USER_BROADCAST_PUSH_META_LENGTH+v.length+m.length+f.length+p.length+x.length,N=new ArrayBuffer(this.HEADER_LENGTH+w);let C=new DataView(N),H=0;C.setUint8(H++,this.KINDS.userBroadcastPush),C.setUint8(H++,v.length),C.setUint8(H++,m.length),C.setUint8(H++,f.length),C.setUint8(H++,p.length),C.setUint8(H++,x.length),C.setUint8(H++,r),Array.from(v,R=>C.setUint8(H++,R.charCodeAt(0))),Array.from(m,R=>C.setUint8(H++,R.charCodeAt(0))),Array.from(f,R=>C.setUint8(H++,R.charCodeAt(0))),Array.from(p,R=>C.setUint8(H++,R.charCodeAt(0))),Array.from(x,R=>C.setUint8(H++,R.charCodeAt(0)));var A=new Uint8Array(N.byteLength+l.byteLength);return A.set(new Uint8Array(N),0),A.set(new Uint8Array(l),N.byteLength),A.buffer}decode(n,r){if(this._isArrayBuffer(n)){let l=this._binaryDecode(n);return r(l)}if(typeof n=="string"){const l=JSON.parse(n),[d,h,f,m,v]=l;return r({join_ref:d,ref:h,topic:f,event:m,payload:v})}return r({})}_binaryDecode(n){const r=new DataView(n),l=r.getUint8(0),d=new TextDecoder;switch(l){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(n,r,d)}}_decodeUserBroadcast(n,r,l){const d=r.getUint8(1),h=r.getUint8(2),f=r.getUint8(3),m=r.getUint8(4);let v=this.HEADER_LENGTH+4;const p=l.decode(n.slice(v,v+d));v=v+d;const b=l.decode(n.slice(v,v+h));v=v+h;const x=l.decode(n.slice(v,v+f));v=v+f;const w=n.slice(v,n.byteLength),N=m===this.JSON_ENCODING?JSON.parse(l.decode(w)):w,C={type:this.BROADCAST_EVENT,event:b,payload:N};return f>0&&(C.meta=JSON.parse(x)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:C}}_isArrayBuffer(n){var r;return n instanceof ArrayBuffer||((r=n==null?void 0:n.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(n,r){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([l])=>r.includes(l)))}}class Tg{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Re;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(Re||(Re={}));const K0=(s,n,r={})=>{var l;const d=(l=r.skipTypes)!==null&&l!==void 0?l:[];return n?Object.keys(n).reduce((h,f)=>(h[f]=Cy(f,s,n,d),h),{}):{}},Cy=(s,n,r,l)=>{const d=n.find(m=>m.name===s),h=d==null?void 0:d.type,f=r[s];return h&&!l.includes(h)?Eg(h,f):eu(f)},Eg=(s,n)=>{if(s.charAt(0)==="_"){const r=s.slice(1,s.length);return Uy(n,r)}switch(s){case Re.bool:return ky(n);case Re.float4:case Re.float8:case Re.int2:case Re.int4:case Re.int8:case Re.numeric:case Re.oid:return Oy(n);case Re.json:case Re.jsonb:return Ry(n);case Re.timestamp:return My(n);case Re.abstime:case Re.date:case Re.daterange:case Re.int4range:case Re.int8range:case Re.money:case Re.reltime:case Re.text:case Re.time:case Re.timestamptz:case Re.timetz:case Re.tsrange:case Re.tstzrange:return eu(n);default:return eu(n)}},eu=s=>s,ky=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Oy=s=>{if(typeof s=="string"){const n=parseFloat(s);if(!Number.isNaN(n))return n}return s},Ry=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s},Uy=(s,n)=>{if(typeof s!="string")return s;const r=s.length-1,l=s[r];if(s[0]==="{"&&l==="}"){let h;const f=s.slice(1,r);try{h=JSON.parse("["+f+"]")}catch{h=f?f.split(","):[]}return h.map(m=>Eg(n,m))}return s},My=s=>typeof s=="string"?s.replace(" ","T"):s,Ag=s=>{const n=new URL(s);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class Hc{constructor(n,r,l={},d=Wc){this.channel=n,this.event=r,this.payload=l,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var l;return this._hasReceived(n)&&r((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(l=>l.status===n).forEach(l=>l.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var Y0;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Y0||(Y0={}));class bi{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},d=>{const{onJoin:h,onLeave:f,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bi.syncState(this.state,d,h,f),this.pendingDiffs.forEach(v=>{this.state=bi.syncDiff(this.state,v,h,f)}),this.pendingDiffs=[],m()}),this.channel._on(l.diff,{},d=>{const{onJoin:h,onLeave:f,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(d):(this.state=bi.syncDiff(this.state,d,h,f),m())}),this.onJoin((d,h,f)=>{this.channel._trigger("presence",{event:"join",key:d,currentPresences:h,newPresences:f})}),this.onLeave((d,h,f)=>{this.channel._trigger("presence",{event:"leave",key:d,currentPresences:h,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,l,d){const h=this.cloneDeep(n),f=this.transformState(r),m={},v={};return this.map(h,(p,b)=>{f[p]||(v[p]=b)}),this.map(f,(p,b)=>{const x=h[p];if(x){const w=b.map(A=>A.presence_ref),N=x.map(A=>A.presence_ref),C=b.filter(A=>N.indexOf(A.presence_ref)<0),H=x.filter(A=>w.indexOf(A.presence_ref)<0);C.length>0&&(m[p]=C),H.length>0&&(v[p]=H)}else m[p]=b}),this.syncDiff(h,{joins:m,leaves:v},l,d)}static syncDiff(n,r,l,d){const{joins:h,leaves:f}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return l||(l=()=>{}),d||(d=()=>{}),this.map(h,(m,v)=>{var p;const b=(p=n[m])!==null&&p!==void 0?p:[];if(n[m]=this.cloneDeep(v),b.length>0){const x=n[m].map(N=>N.presence_ref),w=b.filter(N=>x.indexOf(N.presence_ref)<0);n[m].unshift(...w)}l(m,b,v)}),this.map(f,(m,v)=>{let p=n[m];if(!p)return;const b=v.map(x=>x.presence_ref);p=p.filter(x=>b.indexOf(x.presence_ref)<0),n[m]=p,d(m,p,v),p.length===0&&delete n[m]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(l=>r(l,n[l]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,l)=>{const d=n[l];return"metas"in d?r[l]=d.metas.map(h=>(h.presence_ref=h.phx_ref,delete h.phx_ref,delete h.phx_ref_prev,h)):r[l]=d,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var P0;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(P0||(P0={}));var xi;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(xi||(xi={}));var vn;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(vn||(vn={}));class vs{constructor(n,r={config:{}},l){var d,h;if(this.topic=n,this.params=r,this.socket=l,this.bindings={},this.state=Xe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Hc(this,Kt.join,this.params,this.timeout),this.rejoinTimer=new Tg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xe.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Kt.reply,{},(f,m)=>{this._trigger(this._replyEventName(m),f)}),this.presence=new bi(this),this.broadcastEndpointURL=Ag(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((h=(d=this.params.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,r=this.timeout){var l,d,h;if(this.socket.isConnected()||this.socket.connect(),this.state==Xe.closed){const{config:{broadcast:f,presence:m,private:v}}=this.params,p=(d=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(N=>N.filter))!==null&&d!==void 0?d:[],b=!!this.bindings[xi.PRESENCE]&&this.bindings[xi.PRESENCE].length>0||((h=this.params.config.presence)===null||h===void 0?void 0:h.enabled)===!0,x={},w={broadcast:f,presence:Object.assign(Object.assign({},m),{enabled:b}),postgres_changes:p,private:v};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(N=>n==null?void 0:n(vn.CHANNEL_ERROR,N)),this._onClose(()=>n==null?void 0:n(vn.CLOSED)),this.updateJoinPayload(Object.assign({config:w},x)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:N})=>{var C;if(this.socket._isManualToken()||this.socket.setAuth(),N===void 0){n==null||n(vn.SUBSCRIBED);return}else{const H=this.bindings.postgres_changes,A=(C=H==null?void 0:H.length)!==null&&C!==void 0?C:0,R=[];for(let U=0;U<A;U++){const q=H[U],{filter:{event:j,schema:M,table:$,filter:J}}=q,Z=N&&N[U];if(Z&&Z.event===j&&vs.isFilterValueEqual(Z.schema,M)&&vs.isFilterValueEqual(Z.table,$)&&vs.isFilterValueEqual(Z.filter,J))R.push(Object.assign(Object.assign({},q),{id:Z.id}));else{this.unsubscribe(),this.state=Xe.errored,n==null||n(vn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=R,n&&n(vn.SUBSCRIBED);return}}).receive("error",N=>{this.state=Xe.errored,n==null||n(vn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(N).join(", ")||"error")))}).receive("timeout",()=>{n==null||n(vn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,l){return this.state===Xe.joined&&n===xi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,r,l)}async httpSend(n,r,l={}){var d;if(r==null)return Promise.reject("Payload is required for httpSend()");const h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:r,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(d=l.timeout)!==null&&d!==void 0?d:this.timeout);if(m.status===202)return{success:!0};let v=m.statusText;try{const p=await m.json();v=p.error||p.message||v}catch{}return Promise.reject(new Error(v))}async send(n,r={}){var l,d;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:h,payload:f}=n,m={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(m.Authorization=`Bearer ${this.socket.accessTokenValue}`);const v={method:"POST",headers:m,body:JSON.stringify({messages:[{topic:this.subTopic,event:h,payload:f,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,v,(l=r.timeout)!==null&&l!==void 0?l:this.timeout);return await((d=p.body)===null||d===void 0?void 0:d.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(h=>{var f,m,v;const p=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((v=(m=(f=this.params)===null||f===void 0?void 0:f.config)===null||m===void 0?void 0:m.broadcast)===null||v===void 0)&&v.ack)&&h("ok"),p.receive("ok",()=>h("ok")),p.receive("error",()=>h("error")),p.receive("timeout",()=>h("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=Xe.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Kt.close,"leave",this._joinRef())};this.joinPush.destroy();let l=null;return new Promise(d=>{l=new Hc(this,Kt.leave,{},n),l.receive("ok",()=>{r(),d("ok")}).receive("timeout",()=>{r(),d("timed out")}).receive("error",()=>{d("error")}),l.send(),this._canPush()||l.trigger("ok",{})}).finally(()=>{l==null||l.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Xe.closed,this.bindings={}}async _fetchWithTimeout(n,r,l){const d=new AbortController,h=setTimeout(()=>d.abort(),l),f=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:d.signal}));return clearTimeout(h),f}_push(n,r,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let d=new Hc(this,n,r,l);return this._canPush()?d.send():this._addToPushBuffer(d),d}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>Ey){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,l){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,l){var d,h;const f=n.toLocaleLowerCase(),{close:m,error:v,leave:p,join:b}=Kt;if(l&&[m,v,p,b].indexOf(f)>=0&&l!==this._joinRef())return;let w=this._onMessage(f,r,l);if(r&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(d=this.bindings.postgres_changes)===null||d===void 0||d.filter(N=>{var C,H,A;return((C=N.filter)===null||C===void 0?void 0:C.event)==="*"||((A=(H=N.filter)===null||H===void 0?void 0:H.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===f}).map(N=>N.callback(w,l)):(h=this.bindings[f])===null||h===void 0||h.filter(N=>{var C,H,A,R,U,q;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in N){const j=N.id,M=(C=N.filter)===null||C===void 0?void 0:C.event;return j&&((H=r.ids)===null||H===void 0?void 0:H.includes(j))&&(M==="*"||(M==null?void 0:M.toLocaleLowerCase())===((A=r.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const j=(U=(R=N==null?void 0:N.filter)===null||R===void 0?void 0:R.event)===null||U===void 0?void 0:U.toLocaleLowerCase();return j==="*"||j===((q=r==null?void 0:r.event)===null||q===void 0?void 0:q.toLocaleLowerCase())}else return N.type.toLocaleLowerCase()===f}).map(N=>{if(typeof w=="object"&&"ids"in w){const C=w.data,{schema:H,table:A,commit_timestamp:R,type:U,errors:q}=C;w=Object.assign(Object.assign({},{schema:H,table:A,commit_timestamp:R,eventType:U,new:{},old:{},errors:q}),this._getPayloadRecords(C))}N.callback(w,l)})}_isClosed(){return this.state===Xe.closed}_isJoined(){return this.state===Xe.joined}_isJoining(){return this.state===Xe.joining}_isLeaving(){return this.state===Xe.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,l){const d=n.toLocaleLowerCase(),h={type:d,filter:r,callback:l};return this.bindings[d]?this.bindings[d].push(h):this.bindings[d]=[h],this}_off(n,r){const l=n.toLocaleLowerCase();return this.bindings[l]&&(this.bindings[l]=this.bindings[l].filter(d=>{var h;return!(((h=d.type)===null||h===void 0?void 0:h.toLocaleLowerCase())===l&&vs.isEqual(d.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const l in n)if(n[l]!==r[l])return!1;return!0}static isFilterValueEqual(n,r){return(n??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Kt.close,{},n)}_onError(n){this._on(Kt.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xe.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=K0(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=K0(n.columns,n.old_record)),r}}const Bc=()=>{},Xr={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Dy=[1e3,2e3,5e3,1e4],zy=1e4,Ly=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Hy{constructor(n,r){var l;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Wc,this.transport=null,this.heartbeatIntervalMs=Xr.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Bc,this.ref=0,this.reconnectTimer=null,this.vsn=V0,this.logger=Bc,this.conn=null,this.sendBuffer=[],this.serializer=new Ay,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=d=>d?(...h)=>d(...h):(...h)=>fetch(...h),!(!((l=r==null?void 0:r.params)===null||l===void 0)&&l.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${Fc.websocket}`,this.httpEndpoint=Ag(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=_y.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const l=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(l),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,l){this.logger(n,r,l)}connectionState(){switch(this.conn&&this.conn.readyState){case Kn.connecting:return pa.Connecting;case Kn.open:return pa.Open;case Kn.closing:return pa.Closing;default:return pa.Closed}}isConnected(){return this.connectionState()===pa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const l=`realtime:${n}`,d=this.getChannels().find(h=>h.topic===l);if(d)return d;{const h=new vs(`realtime:${n}`,r,this);return this.channels.push(h),h}}push(n){const{topic:r,event:l,payload:d,ref:h}=n,f=()=>{this.encode(n,m=>{var v;(v=this.conn)===null||v===void 0||v.send(m)})};this.log("push",`${r} ${l} (${h})`,d),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(Ty,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Xr.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(l=>l.topic===n&&(l._isJoined()||l._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",p)}catch(b){this.log("error","error in heartbeat callback",b)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:l,event:d,payload:h,ref:f}=r,m=f?`(${f})`:"",v=h.status||"";this.log("receive",`${v} ${l} ${d} ${m}`.trim(),h),this.channels.filter(p=>p._isMember(l)).forEach(p=>p._trigger(d,h,f)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===Kn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Kn.open||this.conn.readyState===Kn.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(n=>n._trigger(Kt.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const l=n.match(/\?/)?"&":"?",d=new URLSearchParams(r);return`${n}${l}${d}`}_workerObjectUrl(n){let r;if(n)r=n;else{const l=new Blob([Ly],{type:"application/javascript"});r=URL.createObjectURL(l)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r,l=!1;if(n)r=n,l=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(d){this.log("error","Error fetching access token from callback",d),r=this.accessTokenValue}else r=this.accessTokenValue;l?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(d=>{const h={access_token:r,version:Ny};r&&d.updateJoinPayload(h),d.joinedOnce&&d._isJoined()&&d._push(Kt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(l=>{try{l(r)}catch(d){this.log("error",`error in ${n} callback`,d)}})}catch(l){this.log("error",`error triggering ${n} callbacks`,l)}}_setupReconnectionTimer(){this.reconnectTimer=new Tg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Xr.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,l,d,h,f,m,v,p,b,x,w,N;switch(this.transport=(r=n==null?void 0:n.transport)!==null&&r!==void 0?r:null,this.timeout=(l=n==null?void 0:n.timeout)!==null&&l!==void 0?l:Wc,this.heartbeatIntervalMs=(d=n==null?void 0:n.heartbeatIntervalMs)!==null&&d!==void 0?d:Xr.HEARTBEAT_INTERVAL,this.worker=(h=n==null?void 0:n.worker)!==null&&h!==void 0?h:!1,this.accessToken=(f=n==null?void 0:n.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(m=n==null?void 0:n.heartbeatCallback)!==null&&m!==void 0?m:Bc,this.vsn=(v=n==null?void 0:n.vsn)!==null&&v!==void 0?v:V0,n!=null&&n.params&&(this.params=n.params),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=n==null?void 0:n.reconnectAfterMs)!==null&&p!==void 0?p:(C=>Dy[C-1]||zy),this.vsn){case jy:this.encode=(b=n==null?void 0:n.encode)!==null&&b!==void 0?b:((C,H)=>H(JSON.stringify(C))),this.decode=(x=n==null?void 0:n.decode)!==null&&x!==void 0?x:((C,H)=>H(JSON.parse(C)));break;case jg:this.encode=(w=n==null?void 0:n.encode)!==null&&w!==void 0?w:this.serializer.encode.bind(this.serializer),this.decode=(N=n==null?void 0:n.decode)!==null&&N!==void 0?N:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n==null?void 0:n.workerUrl}}}var Si=class extends Error{constructor(s,n){var r;super(s),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&((r=n.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function By(s,n,r){const l=new URL(n,s);if(r)for(const[d,h]of Object.entries(r))h!==void 0&&l.searchParams.set(d,h);return l.toString()}async function Gy(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function qy(s){const n=s.fetchImpl??globalThis.fetch;return{async request({method:r,path:l,query:d,body:h,headers:f}){const m=By(s.baseUrl,l,d),v=await Gy(s.auth),p=await n(m,{method:r,headers:{...h?{"Content-Type":"application/json"}:{},...v,...f},body:h?JSON.stringify(h):void 0}),b=await p.text(),x=(p.headers.get("content-type")||"").includes("application/json"),w=x&&b?JSON.parse(b):b;if(!p.ok){const N=x?w:void 0,C=N==null?void 0:N.error;throw new Si((C==null?void 0:C.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:C==null?void 0:C.type,icebergCode:C==null?void 0:C.code,details:N})}return{status:p.status,headers:p.headers,data:w}}}}function Zr(s){return s.join("")}var $y=class{constructor(s,n=""){this.client=s,this.prefix=n}async listNamespaces(s){const n=s?{parent:Zr(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(l=>({namespace:l}))}async createNamespace(s,n){const r={namespace:s.namespace,properties:n==null?void 0:n.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Zr(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Zr(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Zr(s.namespace)}`}),!0}catch(n){if(n instanceof Si&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(s,n){try{return await this.createNamespace(s,n)}catch(r){if(r instanceof Si&&r.status===409)return;throw r}}};function os(s){return s.join("")}var Iy=class{constructor(s,n="",r){this.client=s,this.prefix=n,this.accessDelegation=r}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${os(s.namespace)}/tables`})).data.identifiers}async createTable(s,n){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${os(s.namespace)}/tables`,body:n,headers:r})).data.metadata}async updateTable(s,n){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${os(s.namespace)}/tables/${s.name}`,body:n});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(s,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${os(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String((n==null?void 0:n.purge)??!1)}})}async loadTable(s){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${os(s.namespace)}/tables/${s.name}`,headers:n})).data.metadata}async tableExists(s){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${os(s.namespace)}/tables/${s.name}`,headers:n}),!0}catch(r){if(r instanceof Si&&r.status===404)return!1;throw r}}async createTableIfNotExists(s,n){try{return await this.createTable(s,n)}catch(r){if(r instanceof Si&&r.status===409)return await this.loadTable({namespace:s.namespace,name:n.name});throw r}}},Vy=class{constructor(s){var l;let n="v1";s.catalogName&&(n+=`/${s.catalogName}`);const r=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=qy({baseUrl:r,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=(l=s.accessDelegation)==null?void 0:l.join(","),this.namespaceOps=new $y(this.client,n),this.tableOps=new Iy(this.client,n,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,n){return this.namespaceOps.createNamespace(s,n)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,n){return this.tableOps.createTable(s,n)}async updateTable(s,n){return this.tableOps.updateTable(s,n)}async dropTable(s,n){await this.tableOps.dropTable(s,n)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,n){return this.namespaceOps.createNamespaceIfNotExists(s,n)}async createTableIfNotExists(s,n){return this.tableOps.createTableIfNotExists(s,n)}},cl=class extends Error{constructor(s,n="storage",r,l){super(s),this.__isStorageError=!0,this.namespace=n,this.name=n==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=l}};function ul(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var Wr=class extends cl{constructor(s,n,r,l="storage"){super(s,l,n,r),this.name=l==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Cg=class extends cl{constructor(s,n,r="storage"){super(s,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=n}};const Ky=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),Yy=s=>{if(typeof s!="object"||s===null)return!1;const n=Object.getPrototypeOf(s);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},tu=s=>{if(Array.isArray(s))return s.map(r=>tu(r));if(typeof s=="function"||s!==Object(s))return s;const n={};return Object.entries(s).forEach(([r,l])=>{const d=r.replace(/([-_][a-z])/gi,h=>h.toUpperCase().replace(/[-_]/g,""));n[d]=tu(l)}),n},Py=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s);function Ni(s){"@babel/helpers - typeof";return Ni=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ni(s)}function Jy(s,n){if(Ni(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var l=r.call(s,n);if(Ni(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function Qy(s){var n=Jy(s,"string");return Ni(n)=="symbol"?n:n+""}function Xy(s,n,r){return(n=Qy(n))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r,s}function J0(s,n){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);n&&(l=l.filter(function(d){return Object.getOwnPropertyDescriptor(s,d).enumerable})),r.push.apply(r,l)}return r}function oe(s){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?J0(Object(r),!0).forEach(function(l){Xy(s,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):J0(Object(r)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(r,l))})}return s}const Q0=s=>{var n;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(n=s.error)===null||n===void 0?void 0:n.message)||JSON.stringify(s)},Zy=async(s,n,r,l)=>{if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!(r!=null&&r.noResolveJson)){const d=s,h=d.status||500;if(typeof d.json=="function")d.json().then(f=>{const m=(f==null?void 0:f.statusCode)||(f==null?void 0:f.code)||h+"";n(new Wr(Q0(f),h,m,l))}).catch(()=>{if(l==="vectors"){const f=h+"";n(new Wr(d.statusText||`HTTP ${h} error`,h,f,l))}else{const f=h+"";n(new Wr(d.statusText||`HTTP ${h} error`,h,f,l))}});else{const f=h+"";n(new Wr(d.statusText||`HTTP ${h} error`,h,f,l))}}else n(new Cg(Q0(s),s,l))},Wy=(s,n,r,l)=>{const d={method:s,headers:(n==null?void 0:n.headers)||{}};return s==="GET"||s==="HEAD"||!l?oe(oe({},d),r):(Yy(l)?(d.headers=oe({"Content-Type":"application/json"},n==null?void 0:n.headers),d.body=JSON.stringify(l)):d.body=l,n!=null&&n.duplex&&(d.duplex=n.duplex),oe(oe({},d),r))};async function mi(s,n,r,l,d,h,f){return new Promise((m,v)=>{s(r,Wy(n,l,d,h)).then(p=>{if(!p.ok)throw p;if(l!=null&&l.noResolveJson)return p;if(f==="vectors"){const b=p.headers.get("content-type");if(!b||!b.includes("application/json"))return{}}return p.json()}).then(p=>m(p)).catch(p=>Zy(p,v,l,f))})}function Fy(s="storage"){return{get:async(n,r,l,d)=>mi(n,"GET",r,l,d,void 0,s),post:async(n,r,l,d,h)=>mi(n,"POST",r,d,h,l,s),put:async(n,r,l,d,h)=>mi(n,"PUT",r,d,h,l,s),head:async(n,r,l,d)=>mi(n,"HEAD",r,oe(oe({},l),{},{noResolveJson:!0}),d,void 0,s),remove:async(n,r,l,d,h)=>mi(n,"DELETE",r,d,h,l,s)}}const eb=Fy("storage"),{get:ji,post:ze,put:nu,head:tb,remove:du}=eb;var bs=class{constructor(s,n={},r,l="storage"){this.shouldThrowOnError=!1,this.url=s,this.headers=n,this.fetch=Ky(r),this.namespace=l}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(s){var n=this;try{return{data:await s(),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ul(r))return{data:null,error:r};throw r}}},nb=class{constructor(s,n){this.downloadFn=s,this.shouldThrowOnError=n}then(s,n){return this.execute().then(s,n)}async execute(){var s=this;try{return{data:(await s.downloadFn()).body,error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(ul(n))return{data:null,error:n};throw n}}};let kg;kg=Symbol.toStringTag;var ab=class{constructor(s,n){this.downloadFn=s,this.shouldThrowOnError=n,this[kg]="BlobDownloadBuilder",this.promise=null}asStream(){return new nb(this.downloadFn,this.shouldThrowOnError)}then(s,n){return this.getPromise().then(s,n)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var s=this;try{return{data:await(await s.downloadFn()).blob(),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(ul(n))return{data:null,error:n};throw n}}};const sb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},X0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var ib=class extends bs{constructor(s,n={},r,l){super(s,n,l,"storage"),this.bucketId=r}async uploadOrUpdate(s,n,r,l){var d=this;return d.handleOperation(async()=>{let h;const f=oe(oe({},X0),l);let m=oe(oe({},d.headers),s==="POST"&&{"x-upsert":String(f.upsert)});const v=f.metadata;typeof Blob<"u"&&r instanceof Blob?(h=new FormData,h.append("cacheControl",f.cacheControl),v&&h.append("metadata",d.encodeMetadata(v)),h.append("",r)):typeof FormData<"u"&&r instanceof FormData?(h=r,h.has("cacheControl")||h.append("cacheControl",f.cacheControl),v&&!h.has("metadata")&&h.append("metadata",d.encodeMetadata(v))):(h=r,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType,v&&(m["x-metadata"]=d.toBase64(d.encodeMetadata(v))),(typeof ReadableStream<"u"&&h instanceof ReadableStream||h&&typeof h=="object"&&"pipe"in h&&typeof h.pipe=="function")&&!f.duplex&&(f.duplex="half")),l!=null&&l.headers&&(m=oe(oe({},m),l.headers));const p=d._removeEmptyFolders(n),b=d._getFinalPath(p),x=await(s=="PUT"?nu:ze)(d.fetch,`${d.url}/object/${b}`,h,oe({headers:m},f!=null&&f.duplex?{duplex:f.duplex}:{}));return{path:p,id:x.Id,fullPath:x.Key}})}async upload(s,n,r){return this.uploadOrUpdate("POST",s,n,r)}async uploadToSignedUrl(s,n,r,l){var d=this;const h=d._removeEmptyFolders(s),f=d._getFinalPath(h),m=new URL(d.url+`/object/upload/sign/${f}`);return m.searchParams.set("token",n),d.handleOperation(async()=>{let v;const p=oe({upsert:X0.upsert},l),b=oe(oe({},d.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&r instanceof Blob?(v=new FormData,v.append("cacheControl",p.cacheControl),v.append("",r)):typeof FormData<"u"&&r instanceof FormData?(v=r,v.append("cacheControl",p.cacheControl)):(v=r,b["cache-control"]=`max-age=${p.cacheControl}`,b["content-type"]=p.contentType),{path:h,fullPath:(await nu(d.fetch,m.toString(),v,{headers:b})).Key}})}async createSignedUploadUrl(s,n){var r=this;return r.handleOperation(async()=>{let l=r._getFinalPath(s);const d=oe({},r.headers);n!=null&&n.upsert&&(d["x-upsert"]="true");const h=await ze(r.fetch,`${r.url}/object/upload/sign/${l}`,{},{headers:d}),f=new URL(r.url+h.url),m=f.searchParams.get("token");if(!m)throw new cl("No token returned by API");return{signedUrl:f.toString(),path:s,token:m}})}async update(s,n,r){return this.uploadOrUpdate("PUT",s,n,r)}async move(s,n,r){var l=this;return l.handleOperation(async()=>await ze(l.fetch,`${l.url}/object/move`,{bucketId:l.bucketId,sourceKey:s,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:l.headers}))}async copy(s,n,r){var l=this;return l.handleOperation(async()=>({path:(await ze(l.fetch,`${l.url}/object/copy`,{bucketId:l.bucketId,sourceKey:s,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:l.headers})).Key}))}async createSignedUrl(s,n,r){var l=this;return l.handleOperation(async()=>{let d=l._getFinalPath(s),h=await ze(l.fetch,`${l.url}/object/sign/${d}`,oe({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:l.headers});const f=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${l.url}${h.signedURL}${f}`)}})}async createSignedUrls(s,n,r){var l=this;return l.handleOperation(async()=>{const d=await ze(l.fetch,`${l.url}/object/sign/${l.bucketId}`,{expiresIn:n,paths:s},{headers:l.headers}),h=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return d.map(f=>oe(oe({},f),{},{signedUrl:f.signedURL?encodeURI(`${l.url}${f.signedURL}${h}`):null}))})}download(s,n){const r=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),d=l?`?${l}`:"",h=this._getFinalPath(s),f=()=>ji(this.fetch,`${this.url}/${r}/${h}${d}`,{headers:this.headers,noResolveJson:!0});return new ab(f,this.shouldThrowOnError)}async info(s){var n=this;const r=n._getFinalPath(s);return n.handleOperation(async()=>tu(await ji(n.fetch,`${n.url}/object/info/${r}`,{headers:n.headers})))}async exists(s){var n=this;const r=n._getFinalPath(s);try{return await tb(n.fetch,`${n.url}/object/${r}`,{headers:n.headers}),{data:!0,error:null}}catch(l){if(n.shouldThrowOnError)throw l;if(ul(l)&&l instanceof Cg){const d=l.originalError;if([400,404].includes(d==null?void 0:d.status))return{data:!1,error:l}}throw l}}getPublicUrl(s,n){const r=this._getFinalPath(s),l=[],d=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";d!==""&&l.push(d);const h=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});f!==""&&l.push(f);let m=l.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${r}${m}`)}}}async remove(s){var n=this;return n.handleOperation(async()=>await du(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:s},{headers:n.headers}))}async list(s,n,r){var l=this;return l.handleOperation(async()=>{const d=oe(oe(oe({},sb),n),{},{prefix:s||""});return await ze(l.fetch,`${l.url}/object/list/${l.bucketId}`,d,{headers:l.headers},r)})}async listV2(s,n){var r=this;return r.handleOperation(async()=>{const l=oe({},s);return await ze(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,l,{headers:r.headers},n)})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const n=[];return s.width&&n.push(`width=${s.width}`),s.height&&n.push(`height=${s.height}`),s.resize&&n.push(`resize=${s.resize}`),s.format&&n.push(`format=${s.format}`),s.quality&&n.push(`quality=${s.quality}`),n.join("&")}};const rb="2.93.2",ki={"X-Client-Info":`storage-js/${rb}`};var lb=class extends bs{constructor(s,n={},r,l){const d=new URL(s);l!=null&&l.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase."));const h=d.href.replace(/\/$/,""),f=oe(oe({},ki),n);super(h,f,r,"storage")}async listBuckets(s){var n=this;return n.handleOperation(async()=>{const r=n.listBucketOptionsToQueryString(s);return await ji(n.fetch,`${n.url}/bucket${r}`,{headers:n.headers})})}async getBucket(s){var n=this;return n.handleOperation(async()=>await ji(n.fetch,`${n.url}/bucket/${s}`,{headers:n.headers}))}async createBucket(s,n={public:!1}){var r=this;return r.handleOperation(async()=>await ze(r.fetch,`${r.url}/bucket`,{id:s,name:s,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}))}async updateBucket(s,n){var r=this;return r.handleOperation(async()=>await nu(r.fetch,`${r.url}/bucket/${s}`,{id:s,name:s,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(s){var n=this;return n.handleOperation(async()=>await ze(n.fetch,`${n.url}/bucket/${s}/empty`,{},{headers:n.headers}))}async deleteBucket(s){var n=this;return n.handleOperation(async()=>await du(n.fetch,`${n.url}/bucket/${s}`,{},{headers:n.headers}))}listBucketOptionsToQueryString(s){const n={};return s&&("limit"in s&&(n.limit=String(s.limit)),"offset"in s&&(n.offset=String(s.offset)),s.search&&(n.search=s.search),s.sortColumn&&(n.sortColumn=s.sortColumn),s.sortOrder&&(n.sortOrder=s.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},ob=class extends bs{constructor(s,n={},r){const l=s.replace(/\/$/,""),d=oe(oe({},ki),n);super(l,d,r,"storage")}async createBucket(s){var n=this;return n.handleOperation(async()=>await ze(n.fetch,`${n.url}/bucket`,{name:s},{headers:n.headers}))}async listBuckets(s){var n=this;return n.handleOperation(async()=>{const r=new URLSearchParams;(s==null?void 0:s.limit)!==void 0&&r.set("limit",s.limit.toString()),(s==null?void 0:s.offset)!==void 0&&r.set("offset",s.offset.toString()),s!=null&&s.sortColumn&&r.set("sortColumn",s.sortColumn),s!=null&&s.sortOrder&&r.set("sortOrder",s.sortOrder),s!=null&&s.search&&r.set("search",s.search);const l=r.toString(),d=l?`${n.url}/bucket?${l}`:`${n.url}/bucket`;return await ji(n.fetch,d,{headers:n.headers})})}async deleteBucket(s){var n=this;return n.handleOperation(async()=>await du(n.fetch,`${n.url}/bucket/${s}`,{},{headers:n.headers}))}from(s){var n=this;if(!Py(s))throw new cl("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new Vy({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),l=this.shouldThrowOnError;return new Proxy(r,{get(d,h){const f=d[h];return typeof f!="function"?f:async(...m)=>{try{return{data:await f.apply(d,m),error:null}}catch(v){if(l)throw v;return{data:null,error:v}}}}})}},cb=class extends bs{constructor(s,n={},r){const l=s.replace(/\/$/,""),d=oe(oe({},ki),{},{"Content-Type":"application/json"},n);super(l,d,r,"vectors")}async createIndex(s){var n=this;return n.handleOperation(async()=>await ze(n.fetch,`${n.url}/CreateIndex`,s,{headers:n.headers})||{})}async getIndex(s,n){var r=this;return r.handleOperation(async()=>await ze(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:s,indexName:n},{headers:r.headers}))}async listIndexes(s){var n=this;return n.handleOperation(async()=>await ze(n.fetch,`${n.url}/ListIndexes`,s,{headers:n.headers}))}async deleteIndex(s,n){var r=this;return r.handleOperation(async()=>await ze(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:s,indexName:n},{headers:r.headers})||{})}},ub=class extends bs{constructor(s,n={},r){const l=s.replace(/\/$/,""),d=oe(oe({},ki),{},{"Content-Type":"application/json"},n);super(l,d,r,"vectors")}async putVectors(s){var n=this;if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return n.handleOperation(async()=>await ze(n.fetch,`${n.url}/PutVectors`,s,{headers:n.headers})||{})}async getVectors(s){var n=this;return n.handleOperation(async()=>await ze(n.fetch,`${n.url}/GetVectors`,s,{headers:n.headers}))}async listVectors(s){var n=this;if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return n.handleOperation(async()=>await ze(n.fetch,`${n.url}/ListVectors`,s,{headers:n.headers}))}async queryVectors(s){var n=this;return n.handleOperation(async()=>await ze(n.fetch,`${n.url}/QueryVectors`,s,{headers:n.headers}))}async deleteVectors(s){var n=this;if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return n.handleOperation(async()=>await ze(n.fetch,`${n.url}/DeleteVectors`,s,{headers:n.headers})||{})}},db=class extends bs{constructor(s,n={},r){const l=s.replace(/\/$/,""),d=oe(oe({},ki),{},{"Content-Type":"application/json"},n);super(l,d,r,"vectors")}async createBucket(s){var n=this;return n.handleOperation(async()=>await ze(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:n.headers})||{})}async getBucket(s){var n=this;return n.handleOperation(async()=>await ze(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:s},{headers:n.headers}))}async listBuckets(s={}){var n=this;return n.handleOperation(async()=>await ze(n.fetch,`${n.url}/ListVectorBuckets`,s,{headers:n.headers}))}async deleteBucket(s){var n=this;return n.handleOperation(async()=>await ze(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:n.headers})||{})}},hb=class extends db{constructor(s,n={}){super(s,n.headers||{},n.fetch)}from(s){return new fb(this.url,this.headers,s,this.fetch)}async createBucket(s){var n=()=>super.createBucket,r=this;return n().call(r,s)}async getBucket(s){var n=()=>super.getBucket,r=this;return n().call(r,s)}async listBuckets(s={}){var n=()=>super.listBuckets,r=this;return n().call(r,s)}async deleteBucket(s){var n=()=>super.deleteBucket,r=this;return n().call(r,s)}},fb=class extends cb{constructor(s,n,r,l){super(s,n,l),this.vectorBucketName=r}async createIndex(s){var n=()=>super.createIndex,r=this;return n().call(r,oe(oe({},s),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(s={}){var n=()=>super.listIndexes,r=this;return n().call(r,oe(oe({},s),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(s){var n=()=>super.getIndex,r=this;return n().call(r,r.vectorBucketName,s)}async deleteIndex(s){var n=()=>super.deleteIndex,r=this;return n().call(r,r.vectorBucketName,s)}index(s){return new gb(this.url,this.headers,this.vectorBucketName,s,this.fetch)}},gb=class extends ub{constructor(s,n,r,l,d){super(s,n,d),this.vectorBucketName=r,this.indexName=l}async putVectors(s){var n=()=>super.putVectors,r=this;return n().call(r,oe(oe({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(s){var n=()=>super.getVectors,r=this;return n().call(r,oe(oe({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(s={}){var n=()=>super.listVectors,r=this;return n().call(r,oe(oe({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(s){var n=()=>super.queryVectors,r=this;return n().call(r,oe(oe({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(s){var n=()=>super.deleteVectors,r=this;return n().call(r,oe(oe({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},mb=class extends lb{constructor(s,n={},r,l){super(s,n,r,l)}from(s){return new ib(this.url,this.headers,s,this.fetch)}get vectors(){return new hb(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new ob(this.url+"/iceberg",this.headers,this.fetch)}};const Og="2.93.2",ms=30*1e3,au=3,Gc=au*ms,pb="http://localhost:9999",vb="supabase.auth.token",yb={"X-Client-Info":`gotrue-js/${Og}`},su="X-Supabase-Api-Version",Rg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},bb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,xb=600*1e3;class Ti extends Error{constructor(n,r,l){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=l}}function se(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class wb extends Ti{constructor(n,r,l){super(n,r,l),this.name="AuthApiError",this.status=r,this.code=l}}function _b(s){return se(s)&&s.name==="AuthApiError"}class va extends Ti{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class yn extends Ti{constructor(n,r,l,d){super(n,l,d),this.name=r,this.status=l}}class kt extends yn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function qc(s){return se(s)&&s.name==="AuthSessionMissingError"}class cs extends yn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Fr extends yn{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class el extends yn{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Sb(s){return se(s)&&s.name==="AuthImplicitGrantRedirectError"}class Z0 extends yn{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Nb extends yn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class iu extends yn{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function $c(s){return se(s)&&s.name==="AuthRetryableFetchError"}class W0 extends yn{constructor(n,r,l){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=l}}class ru extends yn{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const sl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),F0=` 	
\r=`.split(""),jb=(()=>{const s=new Array(128);for(let n=0;n<s.length;n+=1)s[n]=-1;for(let n=0;n<F0.length;n+=1)s[F0[n].charCodeAt(0)]=-2;for(let n=0;n<sl.length;n+=1)s[sl[n].charCodeAt(0)]=n;return s})();function eg(s,n,r){if(s!==null)for(n.queue=n.queue<<8|s,n.queuedBits+=8;n.queuedBits>=6;){const l=n.queue>>n.queuedBits-6&63;r(sl[l]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const l=n.queue>>n.queuedBits-6&63;r(sl[l]),n.queuedBits-=6}}function Ug(s,n,r){const l=jb[s];if(l>-1)for(n.queue=n.queue<<6|l,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function tg(s){const n=[],r=f=>{n.push(String.fromCodePoint(f))},l={utf8seq:0,codepoint:0},d={queue:0,queuedBits:0},h=f=>{Ab(f,l,r)};for(let f=0;f<s.length;f+=1)Ug(s.charCodeAt(f),d,h);return n.join("")}function Tb(s,n){if(s<=127){n(s);return}else if(s<=2047){n(192|s>>6),n(128|s&63);return}else if(s<=65535){n(224|s>>12),n(128|s>>6&63),n(128|s&63);return}else if(s<=1114111){n(240|s>>18),n(128|s>>12&63),n(128|s>>6&63),n(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function Eb(s,n){for(let r=0;r<s.length;r+=1){let l=s.charCodeAt(r);if(l>55295&&l<=56319){const d=(l-55296)*1024&65535;l=(s.charCodeAt(r+1)-56320&65535|d)+65536,r+=1}Tb(l,n)}}function Ab(s,n,r){if(n.utf8seq===0){if(s<=127){r(s);return}for(let l=1;l<6;l+=1)if((s>>7-l&1)===0){n.utf8seq=l;break}if(n.utf8seq===2)n.codepoint=s&31;else if(n.utf8seq===3)n.codepoint=s&15;else if(n.utf8seq===4)n.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|s&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function ys(s){const n=[],r={queue:0,queuedBits:0},l=d=>{n.push(d)};for(let d=0;d<s.length;d+=1)Ug(s.charCodeAt(d),r,l);return new Uint8Array(n)}function Cb(s){const n=[];return Eb(s,r=>n.push(r)),new Uint8Array(n)}function ya(s){const n=[],r={queue:0,queuedBits:0},l=d=>{n.push(d)};return s.forEach(d=>eg(d,r,l)),eg(null,r,l),n.join("")}function kb(s){return Math.round(Date.now()/1e3)+s}function Ob(){return Symbol("auth-callback")}const it=()=>typeof window<"u"&&typeof document<"u",fa={tested:!1,writable:!1},Mg=()=>{if(!it())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(fa.tested)return fa.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),fa.tested=!0,fa.writable=!0}catch{fa.tested=!0,fa.writable=!1}return fa.writable};function Rb(s){const n={},r=new URL(s);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((d,h)=>{n[h]=d})}catch{}return r.searchParams.forEach((l,d)=>{n[d]=l}),n}const Dg=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),Ub=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",ps=async(s,n,r)=>{await s.setItem(n,JSON.stringify(r))},ga=async(s,n)=>{const r=await s.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},st=async(s,n)=>{await s.removeItem(n)};class dl{constructor(){this.promise=new dl.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}dl.promiseConstructor=Promise;function tl(s){const n=s.split(".");if(n.length!==3)throw new ru("Invalid JWT structure");for(let l=0;l<n.length;l++)if(!bb.test(n[l]))throw new ru("JWT not in base64url format");return{header:JSON.parse(tg(n[0])),payload:JSON.parse(tg(n[1])),signature:ys(n[2]),raw:{header:n[0],payload:n[1]}}}async function Mb(s){return await new Promise(n=>{setTimeout(()=>n(null),s)})}function Db(s,n){return new Promise((l,d)=>{(async()=>{for(let h=0;h<1/0;h++)try{const f=await s(h);if(!n(h,null,f)){l(f);return}}catch(f){if(!n(h,f)){d(f);return}}})()})}function zb(s){return("0"+s.toString(16)).substr(-2)}function Lb(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=r.length;let d="";for(let h=0;h<56;h++)d+=r.charAt(Math.floor(Math.random()*l));return d}return crypto.getRandomValues(n),Array.from(n,zb).join("")}async function Hb(s){const r=new TextEncoder().encode(s),l=await crypto.subtle.digest("SHA-256",r),d=new Uint8Array(l);return Array.from(d).map(h=>String.fromCharCode(h)).join("")}async function Bb(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const r=await Hb(s);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function us(s,n,r=!1){const l=Lb();let d=l;r&&(d+="/PASSWORD_RECOVERY"),await ps(s,`${n}-code-verifier`,d);const h=await Bb(l);return[h,l===h?"plain":"s256"]}const Gb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function qb(s){const n=s.headers.get(su);if(!n||!n.match(Gb))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function $b(s){if(!s)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(s<=n)throw new Error("JWT has expired")}function Ib(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Vb=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ds(s){if(!Vb.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ic(){const s={};return new Proxy(s,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const l=r.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Kb(s,n){return new Proxy(s,{get:(r,l,d)=>{if(l==="__isInsecureUserWarningProxy")return!0;if(typeof l=="symbol"){const h=l.toString();if(h==="Symbol(Symbol.toPrimitive)"||h==="Symbol(Symbol.toStringTag)"||h==="Symbol(util.inspect.custom)"||h==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,l,d)}return!n.value&&typeof l=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(r,l,d)}})}function ng(s){return JSON.parse(JSON.stringify(s))}const ma=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Yb=[502,503,504];async function ag(s){var n;if(!Ub(s))throw new iu(ma(s),0);if(Yb.includes(s.status))throw new iu(ma(s),s.status);let r;try{r=await s.json()}catch(h){throw new va(ma(h),h)}let l;const d=qb(s);if(d&&d.getTime()>=Rg["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?l=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(l=r.error_code),l){if(l==="weak_password")throw new W0(ma(r),s.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(l==="session_not_found")throw new kt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((h,f)=>h&&typeof f=="string",!0))throw new W0(ma(r),s.status,r.weak_password.reasons);throw new wb(ma(r),s.status||500,l)}const Pb=(s,n,r,l)=>{const d={method:s,headers:(n==null?void 0:n.headers)||{}};return s==="GET"?d:(d.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n==null?void 0:n.headers),d.body=JSON.stringify(l),Object.assign(Object.assign({},d),r))};async function le(s,n,r,l){var d;const h=Object.assign({},l==null?void 0:l.headers);h[su]||(h[su]=Rg["2024-01-01"].name),l!=null&&l.jwt&&(h.Authorization=`Bearer ${l.jwt}`);const f=(d=l==null?void 0:l.query)!==null&&d!==void 0?d:{};l!=null&&l.redirectTo&&(f.redirect_to=l.redirectTo);const m=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",v=await Jb(s,n,r+m,{headers:h,noResolveJson:l==null?void 0:l.noResolveJson},{},l==null?void 0:l.body);return l!=null&&l.xform?l==null?void 0:l.xform(v):{data:Object.assign({},v),error:null}}async function Jb(s,n,r,l,d,h){const f=Pb(n,l,d,h);let m;try{m=await s(r,Object.assign({},f))}catch(v){throw console.error(v),new iu(ma(v),0)}if(m.ok||await ag(m),l!=null&&l.noResolveJson)return m;try{return await m.json()}catch(v){await ag(v)}}function Vt(s){var n;let r=null;Zb(s)&&(r=Object.assign({},s),s.expires_at||(r.expires_at=kb(s.expires_in)));const l=(n=s.user)!==null&&n!==void 0?n:s;return{data:{session:r,user:l},error:null}}function sg(s){const n=Vt(s);return!n.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((r,l)=>r&&typeof l=="string",!0)&&(n.data.weak_password=s.weak_password),n}function Yn(s){var n;return{data:{user:(n=s.user)!==null&&n!==void 0?n:s},error:null}}function Qb(s){return{data:s,error:null}}function Xb(s){const{action_link:n,email_otp:r,hashed_token:l,redirect_to:d,verification_type:h}=s,f=ol(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:n,email_otp:r,hashed_token:l,redirect_to:d,verification_type:h},v=Object.assign({},f);return{data:{properties:m,user:v},error:null}}function ig(s){return s}function Zb(s){return s.access_token&&s.refresh_token&&s.expires_in}const Vc=["global","local","others"];class Wb{constructor({url:n="",headers:r={},fetch:l}){this.url=n,this.headers=r,this.fetch=Dg(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,r=Vc[0]){if(Vc.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Vc.join(", ")}`);try{return await le(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(l){if(se(l))return{data:null,error:l};throw l}}async inviteUserByEmail(n,r={}){try{return await le(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Yn})}catch(l){if(se(l))return{data:{user:null},error:l};throw l}}async generateLink(n){try{const{options:r}=n,l=ol(n,["options"]),d=Object.assign(Object.assign({},l),r);return"newEmail"in l&&(d.new_email=l==null?void 0:l.newEmail,delete d.newEmail),await le(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:d,headers:this.headers,xform:Xb,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(se(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await le(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Yn})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,l,d,h,f,m,v;try{const p={nextPage:null,lastPage:0,total:0},b=await le(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(r=n==null?void 0:n.page)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:"",per_page:(h=(d=n==null?void 0:n.perPage)===null||d===void 0?void 0:d.toString())!==null&&h!==void 0?h:""},xform:ig});if(b.error)throw b.error;const x=await b.json(),w=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,N=(v=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&v!==void 0?v:[];return N.length>0&&(N.forEach(C=>{const H=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(C.split(";")[1].split("=")[1]);p[`${A}Page`]=H}),p.total=parseInt(w)),{data:Object.assign(Object.assign({},x),p),error:null}}catch(p){if(se(p))return{data:{users:[]},error:p};throw p}}async getUserById(n){ds(n);try{return await le(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Yn})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){ds(n);try{return await le(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:Yn})}catch(l){if(se(l))return{data:{user:null},error:l};throw l}}async deleteUser(n,r=!1){ds(n);try{return await le(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:Yn})}catch(l){if(se(l))return{data:{user:null},error:l};throw l}}async _listFactors(n){ds(n.userId);try{const{data:r,error:l}=await le(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:d=>({data:{factors:d},error:null})});return{data:r,error:l}}catch(r){if(se(r))return{data:null,error:r};throw r}}async _deleteFactor(n){ds(n.userId),ds(n.id);try{return{data:await le(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}}async _listOAuthClients(n){var r,l,d,h,f,m,v;try{const p={nextPage:null,lastPage:0,total:0},b=await le(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(r=n==null?void 0:n.page)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:"",per_page:(h=(d=n==null?void 0:n.perPage)===null||d===void 0?void 0:d.toString())!==null&&h!==void 0?h:""},xform:ig});if(b.error)throw b.error;const x=await b.json(),w=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,N=(v=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&v!==void 0?v:[];return N.length>0&&(N.forEach(C=>{const H=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(C.split(";")[1].split("=")[1]);p[`${A}Page`]=H}),p.total=parseInt(w)),{data:Object.assign(Object.assign({},x),p),error:null}}catch(p){if(se(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(n){try{return await le(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(se(r))return{data:null,error:r};throw r}}async _getOAuthClient(n){try{return await le(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(se(r))return{data:null,error:r};throw r}}async _updateOAuthClient(n,r){try{return await le(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:r,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(se(l))return{data:null,error:l};throw l}}async _deleteOAuthClient(n){try{return await le(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(n){try{return await le(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(se(r))return{data:null,error:r};throw r}}}function rg(s={}){return{getItem:n=>s[n]||null,setItem:(n,r)=>{s[n]=r},removeItem:n=>{delete s[n]}}}const hs={debug:!!(globalThis&&Mg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class zg extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Fb extends zg{}async function ex(s,n,r){hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,n);const l=new globalThis.AbortController;return n>0&&setTimeout(()=>{l.abort(),hs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async d=>{if(d){hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,d.name);try{return await r()}finally{hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,d.name)}}else{if(n===0)throw hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new Fb(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(hs.debug)try{const h=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(h,null,"  "))}catch(h){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",h)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function tx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Lg(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function nx(s){return parseInt(s,16)}function ax(s){const n=new TextEncoder().encode(s);return"0x"+Array.from(n,l=>l.toString(16).padStart(2,"0")).join("")}function sx(s){var n;const{chainId:r,domain:l,expirationTime:d,issuedAt:h=new Date,nonce:f,notBefore:m,requestId:v,resources:p,scheme:b,uri:x,version:w}=s;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!l)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!x)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((n=s.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const N=Lg(s.address),C=b?`${b}://${l}`:l,H=s.statement?`${s.statement}
`:"",A=`${C} wants you to sign in with your Ethereum account:
${N}

${H}`;let R=`URI: ${x}
Version: ${w}
Chain ID: ${r}${f?`
Nonce: ${f}`:""}
Issued At: ${h.toISOString()}`;if(d&&(R+=`
Expiration Time: ${d.toISOString()}`),m&&(R+=`
Not Before: ${m.toISOString()}`),v&&(R+=`
Request ID: ${v}`),p){let U=`
Resources:`;for(const q of p){if(!q||typeof q!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${q}`);U+=`
- ${q}`}R+=U}return`${A}
${R}`}class Je extends Error{constructor({message:n,code:r,cause:l,name:d}){var h;super(n,{cause:l}),this.__isWebAuthnError=!0,this.name=(h=d??(l instanceof Error?l.name:void 0))!==null&&h!==void 0?h:"Unknown Error",this.code=r}}class il extends Je{constructor(n,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:n}),this.name="WebAuthnUnknownError",this.originalError=r}}function ix({error:s,options:n}){var r,l,d;const{publicKey:h}=n;if(!h)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Je({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((r=h.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Je({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(n.mediation==="conditional"&&((l=h.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new Je({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((d=h.authenticatorSelection)===null||d===void 0?void 0:d.userVerification)==="required")return new Je({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new Je({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new Je({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return h.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new Je({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new Je({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const f=window.location.hostname;if(Hg(f)){if(h.rp.id!==f)return new Je({message:`The RP ID "${h.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new Je({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(h.user.id.byteLength<1||h.user.id.byteLength>64)return new Je({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new Je({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new Je({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function rx({error:s,options:n}){const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Je({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new Je({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const l=window.location.hostname;if(Hg(l)){if(r.rpId!==l)return new Je({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new Je({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new Je({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new Je({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class lx{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const ox=new lx;function cx(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:n,user:r,excludeCredentials:l}=s,d=ol(s,["challenge","user","excludeCredentials"]),h=ys(n).buffer,f=Object.assign(Object.assign({},r),{id:ys(r.id).buffer}),m=Object.assign(Object.assign({},d),{challenge:h,user:f});if(l&&l.length>0){m.excludeCredentials=new Array(l.length);for(let v=0;v<l.length;v++){const p=l[v];m.excludeCredentials[v]=Object.assign(Object.assign({},p),{id:ys(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return m}function ux(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:n,allowCredentials:r}=s,l=ol(s,["challenge","allowCredentials"]),d=ys(n).buffer,h=Object.assign(Object.assign({},l),{challenge:d});if(r&&r.length>0){h.allowCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const m=r[f];h.allowCredentials[f]=Object.assign(Object.assign({},m),{id:ys(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return h}function dx(s){var n;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s;return{id:s.id,rawId:s.id,response:{attestationObject:ya(new Uint8Array(s.response.attestationObject)),clientDataJSON:ya(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function hx(s){var n;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s,l=s.getClientExtensionResults(),d=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:ya(new Uint8Array(d.authenticatorData)),clientDataJSON:ya(new Uint8Array(d.clientDataJSON)),signature:ya(new Uint8Array(d.signature)),userHandle:d.userHandle?ya(new Uint8Array(d.userHandle)):void 0},type:"public-key",clientExtensionResults:l,authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Hg(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function lg(){var s,n;return!!(it()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.get)=="function")}async function fx(s){try{const n=await navigator.credentials.create(s);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new il("Browser returned unexpected credential type",n)}:{data:null,error:new il("Empty credential response",n)}}catch(n){return{data:null,error:ix({error:n,options:s})}}}async function gx(s){try{const n=await navigator.credentials.get(s);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new il("Browser returned unexpected credential type",n)}:{data:null,error:new il("Empty credential response",n)}}catch(n){return{data:null,error:rx({error:n,options:s})}}}const mx={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},px={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function rl(...s){const n=d=>d!==null&&typeof d=="object"&&!Array.isArray(d),r=d=>d instanceof ArrayBuffer||ArrayBuffer.isView(d),l={};for(const d of s)if(d)for(const h in d){const f=d[h];if(f!==void 0)if(Array.isArray(f))l[h]=f;else if(r(f))l[h]=f;else if(n(f)){const m=l[h];n(m)?l[h]=rl(m,f):l[h]=rl(f)}else l[h]=f}return l}function vx(s,n){return rl(mx,s,n||{})}function yx(s,n){return rl(px,s,n||{})}class bx{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:r,friendlyName:l,signal:d},h){try{const{data:f,error:m}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!f)return{data:null,error:m};const v=d??ox.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:p}=f.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${l}`),p.displayName||(p.displayName=p.name)}switch(f.webauthn.type){case"create":{const p=vx(f.webauthn.credential_options.publicKey,h==null?void 0:h.create),{data:b,error:x}=await fx({publicKey:p,signal:v});return b?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:x}}case"request":{const p=yx(f.webauthn.credential_options.publicKey,h==null?void 0:h.request),{data:b,error:x}=await gx(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:p,signal:v}));return b?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:x}}}}catch(f){return se(f)?{data:null,error:f}:{data:null,error:new va("Unexpected error in challenge",f)}}}async _verify({challengeId:n,factorId:r,webauthn:l}){return this.client.mfa.verify({factorId:r,challengeId:n,webauthn:l})}async _authenticate({factorId:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},h){if(!r)return{data:null,error:new Ti("rpId is required for WebAuthn authentication")};try{if(!lg())return{data:null,error:new va("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:l},signal:d},{request:h});if(!f)return{data:null,error:m};const{webauthn:v}=f;return this._verify({factorId:n,challengeId:f.challengeId,webauthn:{type:v.type,rpId:r,rpOrigins:l,credential_response:v.credential_response}})}catch(f){return se(f)?{data:null,error:f}:{data:null,error:new va("Unexpected error in authenticate",f)}}}async _register({friendlyName:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},h){if(!r)return{data:null,error:new Ti("rpId is required for WebAuthn registration")};try{if(!lg())return{data:null,error:new va("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this._enroll({friendlyName:n});if(!f)return await this.client.mfa.listFactors().then(b=>{var x;return(x=b.data)===null||x===void 0?void 0:x.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===n&&w.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b==null?void 0:b.id}):void 0),{data:null,error:m};const{data:v,error:p}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:r,rpOrigins:l},signal:d},{create:h});return v?this._verify({factorId:f.id,challengeId:v.challengeId,webauthn:{rpId:r,rpOrigins:l,type:v.webauthn.type,credential_response:v.webauthn.credential_response}}):{data:null,error:p}}catch(f){return se(f)?{data:null,error:f}:{data:null,error:new va("Unexpected error in register",f)}}}}tx();const xx={url:pb,storageKey:vb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function og(s,n,r){return await r()}const fs={};class Ei{get jwks(){var n,r;return(r=(n=fs[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){fs[this.storageKey]=Object.assign(Object.assign({},fs[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=fs[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){fs[this.storageKey]=Object.assign(Object.assign({},fs[this.storageKey]),{cachedAt:n})}constructor(n){var r,l,d;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const h=Object.assign(Object.assign({},xx),n);if(this.storageKey=h.storageKey,this.instanceID=(r=Ei.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Ei.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!h.debug,typeof h.debug=="function"&&(this.logger=h.debug),this.instanceID>0&&it()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=h.persistSession,this.autoRefreshToken=h.autoRefreshToken,this.admin=new Wb({url:h.url,headers:h.headers,fetch:h.fetch}),this.url=h.url,this.headers=h.headers,this.fetch=Dg(h.fetch),this.lock=h.lock||og,this.detectSessionInUrl=h.detectSessionInUrl,this.flowType=h.flowType,this.hasCustomAuthorizationHeader=h.hasCustomAuthorizationHeader,this.throwOnError=h.throwOnError,this.lockAcquireTimeout=h.lockAcquireTimeout,h.lock?this.lock=h.lock:this.persistSession&&it()&&(!((l=globalThis==null?void 0:globalThis.navigator)===null||l===void 0)&&l.locks)?this.lock=ex:this.lock=og,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new bx(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(h.storage?this.storage=h.storage:Mg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=rg(this.memoryStorage)),h.userStorage&&(this.userStorage=h.userStorage)):(this.memoryStorage={},this.storage=rg(this.memoryStorage)),it()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(d=this.broadcastChannel)===null||d===void 0||d.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f);try{await this._notifyAllSubscribers(f.data.event,f.data.session,!1)}catch(m){this._debug("#broadcastChannel","error",m)}})}this.initialize().catch(f=>{this._debug("#initialize()","error",f)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Og}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},l="none";if(it()&&(r=Rb(window.location.href),this._isImplicitGrantCallback(r)?l="implicit":await this._isPKCECallback(r)&&(l="pkce")),it()&&this.detectSessionInUrl&&l!=="none"){const{data:d,error:h}=await this._getSessionFromURL(r,l);if(h){if(this._debug("#_initialize()","error detecting session from URL",h),Sb(h)){const v=(n=h.details)===null||n===void 0?void 0:n.code;if(v==="identity_already_exists"||v==="identity_not_found"||v==="single_identity_not_deletable")return{error:h}}return{error:h}}const{session:f,redirectType:m}=d;return this._debug("#_initialize()","detected session in URL",f,"redirect type",m),await this._saveSession(f),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return se(r)?this._returnResult({error:r}):this._returnResult({error:new va("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,l,d;try{const h=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(r=n==null?void 0:n.options)===null||r===void 0?void 0:r.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(d=n==null?void 0:n.options)===null||d===void 0?void 0:d.captchaToken}},xform:Vt}),{data:f,error:m}=h;if(m||!f)return this._returnResult({data:{user:null,session:null},error:m});const v=f.session,p=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",v)),this._returnResult({data:{user:p,session:v},error:null})}catch(h){if(se(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signUp(n){var r,l,d;try{let h;if("email"in n){const{email:b,password:x,options:w}=n;let N=null,C=null;this.flowType==="pkce"&&([N,C]=await us(this.storage,this.storageKey)),h=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w==null?void 0:w.emailRedirectTo,body:{email:b,password:x,data:(r=w==null?void 0:w.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken},code_challenge:N,code_challenge_method:C},xform:Vt})}else if("phone"in n){const{phone:b,password:x,options:w}=n;h=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:x,data:(l=w==null?void 0:w.data)!==null&&l!==void 0?l:{},channel:(d=w==null?void 0:w.channel)!==null&&d!==void 0?d:"sms",gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken}},xform:Vt})}else throw new Fr("You must provide either an email or phone number and a password");const{data:f,error:m}=h;if(m||!f)return await st(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:m});const v=f.session,p=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",v)),this._returnResult({data:{user:p,session:v},error:null})}catch(h){if(await st(this.storage,`${this.storageKey}-code-verifier`),se(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signInWithPassword(n){try{let r;if("email"in n){const{email:h,password:f,options:m}=n;r=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:h,password:f,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:sg})}else if("phone"in n){const{phone:h,password:f,options:m}=n;r=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:h,password:f,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:sg})}else throw new Fr("You must provide either an email or phone number and a password");const{data:l,error:d}=r;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!l||!l.session||!l.user){const h=new cs;return this._returnResult({data:{user:null,session:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:d})}catch(r){if(se(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,l,d,h;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(l=n.options)===null||l===void 0?void 0:l.scopes,queryParams:(d=n.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:(h=n.options)===null||h===void 0?void 0:h.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,l,d,h,f,m,v,p,b,x,w;let N,C;if("message"in n)N=n.message,C=n.signature;else{const{chain:H,wallet:A,statement:R,options:U}=n;let q;if(it())if(typeof A=="object")q=A;else{const te=window;if("ethereum"in te&&typeof te.ethereum=="object"&&"request"in te.ethereum&&typeof te.ethereum.request=="function")q=te.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!(U!=null&&U.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");q=A}const j=new URL((r=U==null?void 0:U.url)!==null&&r!==void 0?r:window.location.href),M=await q.request({method:"eth_requestAccounts"}).then(te=>te).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!M||M.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const $=Lg(M[0]);let J=(l=U==null?void 0:U.signInWithEthereum)===null||l===void 0?void 0:l.chainId;if(!J){const te=await q.request({method:"eth_chainId"});J=nx(te)}const Z={domain:j.host,address:$,statement:R,uri:j.href,version:"1",chainId:J,nonce:(d=U==null?void 0:U.signInWithEthereum)===null||d===void 0?void 0:d.nonce,issuedAt:(f=(h=U==null?void 0:U.signInWithEthereum)===null||h===void 0?void 0:h.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(m=U==null?void 0:U.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(v=U==null?void 0:U.signInWithEthereum)===null||v===void 0?void 0:v.notBefore,requestId:(p=U==null?void 0:U.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(b=U==null?void 0:U.signInWithEthereum)===null||b===void 0?void 0:b.resources};N=sx(Z),C=await q.request({method:"personal_sign",params:[ax(N),$]})}try{const{data:H,error:A}=await le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:N,signature:C},!((x=n.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(w=n.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Vt});if(A)throw A;if(!H||!H.session||!H.user){const R=new cs;return this._returnResult({data:{user:null,session:null},error:R})}return H.session&&(await this._saveSession(H.session),await this._notifyAllSubscribers("SIGNED_IN",H.session)),this._returnResult({data:Object.assign({},H),error:A})}catch(H){if(se(H))return this._returnResult({data:{user:null,session:null},error:H});throw H}}async signInWithSolana(n){var r,l,d,h,f,m,v,p,b,x,w,N;let C,H;if("message"in n)C=n.message,H=n.signature;else{const{chain:A,wallet:R,statement:U,options:q}=n;let j;if(it())if(typeof R=="object")j=R;else{const $=window;if("solana"in $&&typeof $.solana=="object"&&("signIn"in $.solana&&typeof $.solana.signIn=="function"||"signMessage"in $.solana&&typeof $.solana.signMessage=="function"))j=$.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!(q!=null&&q.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=R}const M=new URL((r=q==null?void 0:q.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const $=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},q==null?void 0:q.signInWithSolana),{version:"1",domain:M.host,uri:M.href}),U?{statement:U}:null));let J;if(Array.isArray($)&&$[0]&&typeof $[0]=="object")J=$[0];else if($&&typeof $=="object"&&"signedMessage"in $&&"signature"in $)J=$;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in J&&"signature"in J&&(typeof J.signedMessage=="string"||J.signedMessage instanceof Uint8Array)&&J.signature instanceof Uint8Array)C=typeof J.signedMessage=="string"?J.signedMessage:new TextDecoder().decode(J.signedMessage),H=J.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");C=[`${M.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...U?["",U,""]:[""],"Version: 1",`URI: ${M.href}`,`Issued At: ${(d=(l=q==null?void 0:q.signInWithSolana)===null||l===void 0?void 0:l.issuedAt)!==null&&d!==void 0?d:new Date().toISOString()}`,...!((h=q==null?void 0:q.signInWithSolana)===null||h===void 0)&&h.notBefore?[`Not Before: ${q.signInWithSolana.notBefore}`]:[],...!((f=q==null?void 0:q.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${q.signInWithSolana.expirationTime}`]:[],...!((m=q==null?void 0:q.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${q.signInWithSolana.chainId}`]:[],...!((v=q==null?void 0:q.signInWithSolana)===null||v===void 0)&&v.nonce?[`Nonce: ${q.signInWithSolana.nonce}`]:[],...!((p=q==null?void 0:q.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${q.signInWithSolana.requestId}`]:[],...!((x=(b=q==null?void 0:q.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||x===void 0)&&x.length?["Resources",...q.signInWithSolana.resources.map(J=>`- ${J}`)]:[]].join(`
`);const $=await j.signMessage(new TextEncoder().encode(C),"utf8");if(!$||!($ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");H=$}}try{const{data:A,error:R}=await le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:C,signature:ya(H)},!((w=n.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(N=n.options)===null||N===void 0?void 0:N.captchaToken}}:null),xform:Vt});if(R)throw R;if(!A||!A.session||!A.user){const U=new cs;return this._returnResult({data:{user:null,session:null},error:U})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:R})}catch(A){if(se(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async _exchangeCodeForSession(n){const r=await ga(this.storage,`${this.storageKey}-code-verifier`),[l,d]=(r??"").split("/");try{if(!l&&this.flowType==="pkce")throw new Nb;const{data:h,error:f}=await le(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:l},xform:Vt});if(await st(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!h||!h.session||!h.user){const m=new cs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:m})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:Object.assign(Object.assign({},h),{redirectType:d??null}),error:f})}catch(h){if(await st(this.storage,`${this.storageKey}-code-verifier`),se(h))return this._returnResult({data:{user:null,session:null,redirectType:null},error:h});throw h}}async signInWithIdToken(n){try{const{options:r,provider:l,token:d,access_token:h,nonce:f}=n,m=await le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:d,access_token:h,nonce:f,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Vt}),{data:v,error:p}=m;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!v||!v.session||!v.user){const b=new cs;return this._returnResult({data:{user:null,session:null},error:b})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:v,error:p})}catch(r){if(se(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,l,d,h,f;try{if("email"in n){const{email:m,options:v}=n;let p=null,b=null;this.flowType==="pkce"&&([p,b]=await us(this.storage,this.storageKey));const{error:x}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},create_user:(l=v==null?void 0:v.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:p,code_challenge_method:b},redirectTo:v==null?void 0:v.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}if("phone"in n){const{phone:m,options:v}=n,{data:p,error:b}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(d=v==null?void 0:v.data)!==null&&d!==void 0?d:{},create_user:(h=v==null?void 0:v.shouldCreateUser)!==null&&h!==void 0?h:!0,gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},channel:(f=v==null?void 0:v.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:b})}throw new Fr("You must provide either an email or phone number.")}catch(m){if(await st(this.storage,`${this.storageKey}-code-verifier`),se(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async verifyOtp(n){var r,l;try{let d,h;"options"in n&&(d=(r=n.options)===null||r===void 0?void 0:r.redirectTo,h=(l=n.options)===null||l===void 0?void 0:l.captchaToken);const{data:f,error:m}=await le(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:h}}),redirectTo:d,xform:Vt});if(m)throw m;if(!f)throw new Error("An error occurred on token verification.");const v=f.session,p=f.user;return v!=null&&v.access_token&&(await this._saveSession(v),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",v)),this._returnResult({data:{user:p,session:v},error:null})}catch(d){if(se(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithSSO(n){var r,l,d,h,f;try{let m=null,v=null;this.flowType==="pkce"&&([m,v]=await us(this.storage,this.storageKey));const p=await le(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(l=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&l!==void 0?l:void 0}),!((d=n==null?void 0:n.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:m,code_challenge_method:v}),headers:this.headers,xform:Qb});return!((h=p.data)===null||h===void 0)&&h.url&&it()&&!(!((f=n.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(m){if(await st(this.storage,`${this.storageKey}-code-verifier`),se(m))return this._returnResult({data:null,error:m});throw m}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:l}=n;if(l)throw l;if(!r)throw new kt;const{error:d}=await le(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:d})})}catch(n){if(se(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:l,type:d,options:h}=n,{error:f}=await le(this.fetch,"POST",r,{headers:this.headers,body:{email:l,type:d,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},redirectTo:h==null?void 0:h.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in n){const{phone:l,type:d,options:h}=n,{data:f,error:m}=await le(this.fetch,"POST",r,{headers:this.headers,body:{phone:l,type:d,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:m})}throw new Fr("You must provide either an email or phone number and a type")}catch(r){if(se(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),d=(async()=>(await l,await r()))();return this.pendingInLock.push((async()=>{try{await d}catch{}})()),d}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=r();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const d=[...this.pendingInLock];await Promise.all(d),this.pendingInLock.splice(0,d.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await ga(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const l=n.expires_at?n.expires_at*1e3-Date.now()<Gc:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",n.expires_at),!l){if(this.userStorage){const f=await ga(this.userStorage,this.storageKey+"-user");f!=null&&f.user?n.user=f.user:n.user=Ic()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};n.user=Kb(n.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:d,error:h}=await this._callRefreshToken(n.refresh_token);return h?this._returnResult({data:{session:null},error:h}):this._returnResult({data:{session:d},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Yn}):await this._useSession(async r=>{var l,d,h;const{data:f,error:m}=r;if(m)throw m;return!(!((l=f.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new kt}:await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(h=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0,xform:Yn})})}catch(r){if(se(r))return qc(r)&&(await this._removeSession(),await st(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async l=>{const{data:d,error:h}=l;if(h)throw h;if(!d.session)throw new kt;const f=d.session;let m=null,v=null;this.flowType==="pkce"&&n.email!=null&&([m,v]=await us(this.storage,this.storageKey));const{data:p,error:b}=await le(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:m,code_challenge_method:v}),jwt:f.access_token,xform:Yn});if(b)throw b;return f.user=p.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(l){if(await st(this.storage,`${this.storageKey}-code-verifier`),se(l))return this._returnResult({data:{user:null},error:l});throw l}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new kt;const r=Date.now()/1e3;let l=r,d=!0,h=null;const{payload:f}=tl(n.access_token);if(f.exp&&(l=f.exp,d=l<=r),d){const{data:m,error:v}=await this._callRefreshToken(n.refresh_token);if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!m)return{data:{user:null,session:null},error:null};h=m}else{const{data:m,error:v}=await this._getUser(n.access_token);if(v)return this._returnResult({data:{user:null,session:null},error:v});h={access_token:n.access_token,refresh_token:n.refresh_token,user:m.user,token_type:"bearer",expires_in:l-r,expires_at:l},await this._saveSession(h),await this._notifyAllSubscribers("SIGNED_IN",h)}return this._returnResult({data:{user:h.user,session:h},error:null})}catch(r){if(se(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var l;if(!n){const{data:f,error:m}=r;if(m)throw m;n=(l=f.session)!==null&&l!==void 0?l:void 0}if(!(n!=null&&n.refresh_token))throw new kt;const{data:d,error:h}=await this._callRefreshToken(n.refresh_token);return h?this._returnResult({data:{user:null,session:null},error:h}):d?this._returnResult({data:{user:d.user,session:d},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(se(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!it())throw new el("No browser detected.");if(n.error||n.error_description||n.error_code)throw new el(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Z0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new el("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Z0("No code detected.");const{data:U,error:q}=await this._exchangeCodeForSession(n.code);if(q)throw q;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:U.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:d,access_token:h,refresh_token:f,expires_in:m,expires_at:v,token_type:p}=n;if(!h||!m||!f||!p)throw new el("No session defined in URL");const b=Math.round(Date.now()/1e3),x=parseInt(m);let w=b+x;v&&(w=parseInt(v));const N=w-b;N*1e3<=ms&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${N}s, should have been closer to ${x}s`);const C=w-x;b-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,w,b):b-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,w,b);const{data:H,error:A}=await this._getUser(h);if(A)throw A;const R={provider_token:l,provider_refresh_token:d,access_token:h,expires_in:x,expires_at:w,refresh_token:f,token_type:p,user:H.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:R,redirectType:n.type},error:null})}catch(l){if(se(l))return this._returnResult({data:{session:null,redirectType:null},error:l});throw l}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await ga(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var l;const{data:d,error:h}=r;if(h&&!qc(h))return this._returnResult({error:h});const f=(l=d.session)===null||l===void 0?void 0:l.access_token;if(f){const{error:m}=await this.admin.signOut(f,n);if(m&&!(_b(m)&&(m.status===404||m.status===401||m.status===403)||qc(m)))return this._returnResult({error:m})}return n!=="others"&&(await this._removeSession(),await st(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const r=Ob(),l={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,l),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:l}}}async _emitInitialSession(n){return await this._useSession(async r=>{var l,d;try{const{data:{session:h},error:f}=r;if(f)throw f;await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",h)),this._debug("INITIAL_SESSION","callback id",n,"session",h)}catch(h){await((d=this.stateChangeEmitters.get(n))===null||d===void 0?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",h),console.error(h)}})}async resetPasswordForEmail(n,r={}){let l=null,d=null;this.flowType==="pkce"&&([l,d]=await us(this.storage,this.storageKey,!0));try{return await le(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:l,code_challenge_method:d,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(h){if(await st(this.storage,`${this.storageKey}-code-verifier`),se(h))return this._returnResult({data:null,error:h});throw h}}async getUserIdentities(){var n;try{const{data:r,error:l}=await this.getUser();if(l)throw l;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{const{data:l,error:d}=await this._useSession(async h=>{var f,m,v,p,b;const{data:x,error:w}=h;if(w)throw w;const N=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(f=n.options)===null||f===void 0?void 0:f.redirectTo,scopes:(m=n.options)===null||m===void 0?void 0:m.scopes,queryParams:(v=n.options)===null||v===void 0?void 0:v.queryParams,skipBrowserRedirect:!0});return await le(this.fetch,"GET",N,{headers:this.headers,jwt:(b=(p=x.session)===null||p===void 0?void 0:p.access_token)!==null&&b!==void 0?b:void 0})});if(d)throw d;return it()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(l==null?void 0:l.url),this._returnResult({data:{provider:n.provider,url:l==null?void 0:l.url},error:null})}catch(l){if(se(l))return this._returnResult({data:{provider:n.provider,url:null},error:l});throw l}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var l;try{const{error:d,data:{session:h}}=r;if(d)throw d;const{options:f,provider:m,token:v,access_token:p,nonce:b}=n,x=await le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(l=h==null?void 0:h.access_token)!==null&&l!==void 0?l:void 0,body:{provider:m,id_token:v,access_token:p,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Vt}),{data:w,error:N}=x;return N?this._returnResult({data:{user:null,session:null},error:N}):!w||!w.session||!w.user?this._returnResult({data:{user:null,session:null},error:new cs}):(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),this._returnResult({data:w,error:N}))}catch(d){if(await st(this.storage,`${this.storageKey}-code-verifier`),se(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var l,d;const{data:h,error:f}=r;if(f)throw f;return await le(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(d=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&d!==void 0?d:void 0})})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const l=Date.now();return await Db(async d=>(d>0&&await Mb(200*Math.pow(2,d-1)),this._debug(r,"refreshing attempt",d),await le(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Vt})),(d,h)=>{const f=200*Math.pow(2,d);return h&&$c(h)&&Date.now()+f-l<ms})}catch(l){if(this._debug(r,"error",l),se(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const l=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",l),it()&&!r.skipBrowserRedirect&&window.location.assign(l),{data:{provider:n,url:l},error:null}}async _recoverAndRefresh(){var n,r;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const d=await ga(this.storage,this.storageKey);if(d&&this.userStorage){let f=await ga(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:d.user},await ps(this.userStorage,this.storageKey+"-user",f)),d.user=(n=f==null?void 0:f.user)!==null&&n!==void 0?n:Ic()}else if(d&&!d.user&&!d.user){const f=await ga(this.storage,this.storageKey+"-user");f&&(f!=null&&f.user)?(d.user=f.user,await st(this.storage,this.storageKey+"-user"),await ps(this.storage,this.storageKey,d)):d.user=Ic()}if(this._debug(l,"session from storage",d),!this._isValidSession(d)){this._debug(l,"session is not valid"),d!==null&&await this._removeSession();return}const h=((r=d.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Gc;if(this._debug(l,`session has${h?"":" not"} expired with margin of ${Gc}s`),h){if(this.autoRefreshToken&&d.refresh_token){const{error:f}=await this._callRefreshToken(d.refresh_token);f&&(console.error(f),$c(f)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(d.user&&d.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:m}=await this._getUser(d.access_token);!m&&(f!=null&&f.user)?(d.user=f.user,await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)):this._debug(l,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(l,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",d)}catch(d){this._debug(l,"error",d),console.error(d);return}finally{this._debug(l,"end")}}async _callRefreshToken(n){var r,l;if(!n)throw new kt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const d=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(d,"begin");try{this.refreshingDeferred=new dl;const{data:h,error:f}=await this._refreshAccessToken(n);if(f)throw f;if(!h.session)throw new kt;await this._saveSession(h.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",h.session);const m={data:h.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(h){if(this._debug(d,"error",h),se(h)){const f={data:null,error:h};return $c(h)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(f),f}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(h),h}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(n,r,l=!0){const d=`#_notifyAllSubscribers(${n})`;this._debug(d,"begin",r,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:n,session:r});const h=[],f=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(n,r)}catch(v){h.push(v)}});if(await Promise.all(f),h.length>0){for(let m=0;m<h.length;m+=1)console.error(h[m]);throw h[0]}}finally{this._debug(d,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await st(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},n),l=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!l&&r.user&&await ps(this.userStorage,this.storageKey+"-user",{user:r.user});const d=Object.assign({},r);delete d.user;const h=ng(d);await ps(this.storage,this.storageKey,h)}else{const d=ng(r);await ps(this.storage,this.storageKey,d)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await st(this.storage,this.storageKey),await st(this.storage,this.storageKey+"-code-verifier"),await st(this.storage,this.storageKey+"-user"),this.userStorage&&await st(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&it()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),ms);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:l}}=r;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const d=Math.floor((l.expires_at*1e3-n)/ms);this._debug("#_autoRefreshTokenTick()",`access token expires in ${d} ticks, a tick lasts ${ms}ms, refresh threshold is ${au} ticks`),d<=au&&await this._callRefreshToken(l.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof zg)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!it()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(n){this._debug("#visibilityChangedCallback","error",n)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,l){const d=[`provider=${encodeURIComponent(r)}`];if(l!=null&&l.redirectTo&&d.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l!=null&&l.scopes&&d.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[h,f]=await us(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(h)}`,code_challenge_method:`${encodeURIComponent(f)}`});d.push(m.toString())}if(l!=null&&l.queryParams){const h=new URLSearchParams(l.queryParams);d.push(h.toString())}return l!=null&&l.skipBrowserRedirect&&d.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${n}?${d.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var l;const{data:d,error:h}=r;return h?this._returnResult({data:null,error:h}):await le(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(l=d==null?void 0:d.session)===null||l===void 0?void 0:l.access_token})})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var l,d;const{data:h,error:f}=r;if(f)return this._returnResult({data:null,error:f});const m=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:v,error:p}=await le(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(l=h==null?void 0:h.session)===null||l===void 0?void 0:l.access_token});return p?this._returnResult({data:null,error:p}):(n.factorType==="totp"&&v.type==="totp"&&(!((d=v==null?void 0:v.totp)===null||d===void 0)&&d.qr_code)&&(v.totp.qr_code=`data:image/svg+xml;utf-8,${v.totp.qr_code}`),this._returnResult({data:v,error:null}))})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var l;const{data:d,error:h}=r;if(h)return this._returnResult({data:null,error:h});const f=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?dx(n.webauthn.credential_response):hx(n.webauthn.credential_response)})}:{code:n.code}),{data:m,error:v}=await le(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:f,headers:this.headers,jwt:(l=d==null?void 0:d.session)===null||l===void 0?void 0:l.access_token});return v?this._returnResult({data:null,error:v}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),this._returnResult({data:m,error:v}))})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var l;const{data:d,error:h}=r;if(h)return this._returnResult({data:null,error:h});const f=await le(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(l=d==null?void 0:d.session)===null||l===void 0?void 0:l.access_token});if(f.error)return f;const{data:m}=f;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:cx(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:ux(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){const{data:r,error:l}=await this._challenge({factorId:n.factorId});return l?this._returnResult({data:null,error:l}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;const{data:{user:r},error:l}=await this.getUser();if(l)return{data:null,error:l};const d={all:[],phone:[],totp:[],webauthn:[]};for(const h of(n=r==null?void 0:r.factors)!==null&&n!==void 0?n:[])d.all.push(h),h.status==="verified"&&d[h.factor_type].push(h);return{data:d,error:null}}async _getAuthenticatorAssuranceLevel(n){var r,l,d,h;if(n)try{const{payload:N}=tl(n);let C=null;N.aal&&(C=N.aal);let H=C;const{data:{user:A},error:R}=await this.getUser(n);if(R)return this._returnResult({data:null,error:R});((l=(r=A==null?void 0:A.factors)===null||r===void 0?void 0:r.filter(j=>j.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(H="aal2");const q=N.amr||[];return{data:{currentLevel:C,nextLevel:H,currentAuthenticationMethods:q},error:null}}catch(N){if(se(N))return this._returnResult({data:null,error:N});throw N}const{data:{session:f},error:m}=await this.getSession();if(m)return this._returnResult({data:null,error:m});if(!f)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:v}=tl(f.access_token);let p=null;v.aal&&(p=v.aal);let b=p;((h=(d=f.user.factors)===null||d===void 0?void 0:d.filter(N=>N.status==="verified"))!==null&&h!==void 0?h:[]).length>0&&(b="aal2");const w=v.amr||[];return{data:{currentLevel:p,nextLevel:b,currentAuthenticationMethods:w},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{const{data:{session:l},error:d}=r;return d?this._returnResult({data:null,error:d}):l?await le(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:l.access_token,xform:h=>({data:h,error:null})}):this._returnResult({data:null,error:new kt})})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async l=>{const{data:{session:d},error:h}=l;if(h)return this._returnResult({data:null,error:h});if(!d)return this._returnResult({data:null,error:new kt});const f=await le(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&it()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(l){if(se(l))return this._returnResult({data:null,error:l});throw l}}async _denyAuthorization(n,r){try{return await this._useSession(async l=>{const{data:{session:d},error:h}=l;if(h)return this._returnResult({data:null,error:h});if(!d)return this._returnResult({data:null,error:new kt});const f=await le(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&it()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(l){if(se(l))return this._returnResult({data:null,error:l});throw l}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:r},error:l}=n;return l?this._returnResult({data:null,error:l}):r?await le(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new kt})})}catch(n){if(se(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{const{data:{session:l},error:d}=r;return d?this._returnResult({data:null,error:d}):l?(await le(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:l.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new kt})})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let l=r.keys.find(m=>m.kid===n);if(l)return l;const d=Date.now();if(l=this.jwks.keys.find(m=>m.kid===n),l&&this.jwks_cached_at+xb>d)return l;const{data:h,error:f}=await le(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!h.keys||h.keys.length===0||(this.jwks=h,this.jwks_cached_at=d,l=h.keys.find(m=>m.kid===n),!l)?null:l}async getClaims(n,r={}){try{let l=n;if(!l){const{data:N,error:C}=await this.getSession();if(C||!N.session)return this._returnResult({data:null,error:C});l=N.session.access_token}const{header:d,payload:h,signature:f,raw:{header:m,payload:v}}=tl(l);r!=null&&r.allowExpired||$b(h.exp);const p=!d.alg||d.alg.startsWith("HS")||!d.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(d.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!p){const{error:N}=await this.getUser(l);if(N)throw N;return{data:{claims:h,header:d,signature:f},error:null}}const b=Ib(d.alg),x=await crypto.subtle.importKey("jwk",p,b,!0,["verify"]);if(!await crypto.subtle.verify(b,x,f,Cb(`${m}.${v}`)))throw new ru("Invalid JWT signature");return{data:{claims:h,header:d,signature:f},error:null}}catch(l){if(se(l))return this._returnResult({data:null,error:l});throw l}}}Ei.nextInstanceID={};const wx=Ei,_x="2.93.2";let vi="";typeof Deno<"u"?vi="deno":typeof document<"u"?vi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?vi="react-native":vi="node";const Sx={"X-Client-Info":`supabase-js-${vi}/${_x}`},Nx={headers:Sx},jx={schema:"public"},Tx={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ex={};function Ai(s){"@babel/helpers - typeof";return Ai=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ai(s)}function Ax(s,n){if(Ai(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var l=r.call(s,n);if(Ai(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function Cx(s){var n=Ax(s,"string");return Ai(n)=="symbol"?n:n+""}function kx(s,n,r){return(n=Cx(n))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r,s}function cg(s,n){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);n&&(l=l.filter(function(d){return Object.getOwnPropertyDescriptor(s,d).enumerable})),r.push.apply(r,l)}return r}function Ge(s){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?cg(Object(r),!0).forEach(function(l){kx(s,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):cg(Object(r)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(r,l))})}return s}const Ox=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),Rx=()=>Headers,Ux=(s,n,r)=>{const l=Ox(r),d=Rx();return async(h,f)=>{var m;const v=(m=await n())!==null&&m!==void 0?m:s;let p=new d(f==null?void 0:f.headers);return p.has("apikey")||p.set("apikey",s),p.has("Authorization")||p.set("Authorization",`Bearer ${v}`),l(h,Ge(Ge({},f),{},{headers:p}))}};function Mx(s){return s.endsWith("/")?s:s+"/"}function Dx(s,n){var r,l;const{db:d,auth:h,realtime:f,global:m}=s,{db:v,auth:p,realtime:b,global:x}=n,w={db:Ge(Ge({},v),d),auth:Ge(Ge({},p),h),realtime:Ge(Ge({},b),f),storage:{},global:Ge(Ge(Ge({},x),m),{},{headers:Ge(Ge({},(r=x==null?void 0:x.headers)!==null&&r!==void 0?r:{}),(l=m==null?void 0:m.headers)!==null&&l!==void 0?l:{})}),accessToken:async()=>""};return s.accessToken?w.accessToken=s.accessToken:delete w.accessToken,w}function zx(s){const n=s==null?void 0:s.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Mx(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Lx=class extends wx{constructor(s){super(s)}},Hx=class{constructor(s,n,r){var l,d;this.supabaseUrl=s,this.supabaseKey=n;const h=zx(s);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const f=`sb-${h.hostname.split(".")[0]}-auth-token`,m={db:jx,realtime:Ex,auth:Ge(Ge({},Tx),{},{storageKey:f}),global:Nx},v=Dx(r??{},m);if(this.storageKey=(l=v.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(d=v.global.headers)!==null&&d!==void 0?d:{},v.accessToken)this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(b,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=v.auth)!==null&&p!==void 0?p:{},this.headers,v.global.fetch)}this.fetch=Ux(n,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Ge({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(b=>this.realtime.setAuth(b)).catch(b=>console.warn("Failed to set initial Realtime auth token:",b)),this.rest=new wy(new URL("rest/v1",h).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new mb(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new py(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,n,r)}channel(s,n={config:{}}){return this.realtime.channel(s,n)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s=this,n,r;if(s.accessToken)return await s.accessToken();const{data:l}=await s.auth.getSession();return(n=(r=l.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:s.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:n,detectSessionInUrl:r,storage:l,userStorage:d,storageKey:h,flowType:f,lock:m,debug:v,throwOnError:p},b,x){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Lx({url:this.authUrl.href,headers:Ge(Ge({},w),b),storageKey:h,autoRefreshToken:s,persistSession:n,detectSessionInUrl:r,storage:l,userStorage:d,flowType:f,lock:m,debug:v,throwOnError:p,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(N=>N.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new Hy(this.realtimeUrl.href,Ge(Ge({},s),{},{params:Ge(Ge({},{apikey:this.supabaseKey}),s==null?void 0:s.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(s,n,r){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Bx=(s,n,r)=>new Hx(s,n,r);function Gx(){if(typeof window<"u")return!1;const s=globalThis.process;if(!s)return!1;const n=s.version;if(n==null)return!1;const r=n.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}Gx()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const qx="https://prrldyvdefoyloqtrhfw.supabase.co",$x="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBycmxkeXZkZWZveWxvcXRyaGZ3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk1OTQ5NzUsImV4cCI6MjA4NTE3MDk3NX0.ANRkpfrxGKefAW3-2-WXfB7RRmQbTFIYd2VcW24OeWk",ot=Bx(qx,$x),Ix=async(s,n="images")=>{try{const r=s.name.split(".").pop(),d=`${`${Date.now()}_${Math.random().toString(36).substring(2)}.${r}`}`,{data:h,error:f}=await ot.storage.from(n).upload(d,s,{cacheControl:"3600",upsert:!1});if(f)throw f;const{data:m}=ot.storage.from(n).getPublicUrl(d);return m.publicUrl}catch(r){throw console.error("Supabase Upload Error:",r),new Error(r.message||"Upload failed")}},xa={registerUser:async(s,n,r,l,d="user")=>{try{const{data:h,error:f}=await ot.auth.signUp({email:s,password:n,options:{data:{username:r,phone:l}}});if(f)throw f;if(!h.user)throw new Error("Registration failed");let m=d,v=[];r==="huytamky"&&(m="admin",v=["video-viral","image-script","zenshot-ai","translation","new-tool"]);const p={id:h.user.id,username:r,email:s,phone:l,role:m,allowedApps:v,createdAt:Date.now()},{error:b}=await ot.from("users").insert({id:p.id,username:p.username,email:p.email,phone:p.phone,role:p.role,allowed_apps:p.allowedApps,created_at:new Date().toISOString()});if(b)throw console.error(" DB INSERT ERROR:",b),alert(`Li to h s: ${b.message}`),new Error("Li khi to User Profile: "+b.message);return console.log(" User created successfully in both Auth and DB"),p}catch(h){throw h}},loginUser:async(s,n)=>{var r,l;try{const{data:d,error:h}=await ot.auth.signInWithPassword({email:s,password:n});if(h)throw h;if(!d.user)throw new Error("Login failed");const f=await xa.getUserProfile(d.user.id);if(f)return f;console.log(" Profile missing for existing Auth user. Creating now...");const m=((r=d.user.user_metadata)==null?void 0:r.username)||s.split("@")[0],v=((l=d.user.user_metadata)==null?void 0:l.phone)||"";let p="user",b=[];(m==="huytamky"||s.includes("huytamky"))&&(p="admin",b=["video-viral","image-script","zenshot-ai","translation","new-tool"]);const x={id:d.user.id,username:m,email:s,phone:v,role:p,allowedApps:b,createdAt:Date.now()};return await ot.from("users").insert({id:x.id,username:x.username,email:x.email,phone:x.phone,role:x.role,allowed_apps:x.allowedApps,created_at:new Date().toISOString()}),x}catch(d){throw d}},getUserProfile:async s=>{try{const{data:n,error:r}=await ot.from("users").select("*").eq("id",s).single();return r?null:{id:n.id,username:n.username,email:n.email,phone:n.phone,role:n.role,allowedApps:n.allowed_apps,createdAt:new Date(n.created_at).getTime()}}catch(n){return console.error("Error fetching user profile:",n),null}},logoutUser:async()=>{const{error:s}=await ot.auth.signOut();if(s)throw s},updateProfile:async(s,n)=>{const r={};n.username&&(r.username=n.username),n.phone&&(r.phone=n.phone),n.email&&(r.email=n.email),n.role&&(r.role=n.role),n.allowedApps&&(r.allowed_apps=n.allowedApps);const{error:l}=await ot.from("users").update(r).eq("id",s);if(l)throw l}},Vx=({onLogin:s})=>{const[n,r]=Q.useState(!1),[l,d]=Q.useState(""),[h,f]=Q.useState(""),[m,v]=Q.useState(""),[p,b]=Q.useState(""),[x,w]=Q.useState(""),[N,C]=Q.useState(""),[H,A]=Q.useState(!1),R=async()=>{if(C(""),A(!0),!p||!h){C("Vui lng nhp Email v Mt khu"),A(!1);return}try{let U;if(n){if(!l||!x){C("Vui lng nhp y  Tn v ST"),A(!1);return}if(h!==m){C("Mt khu nhp li khng khp"),A(!1);return}U=await xa.registerUser(p,h,l,x)}else U=await xa.loginUser(p,h);s(U)}catch(U){console.error(U),U.code==="auth/email-already-in-use"?C("Email ny  c s dng."):U.code==="auth/invalid-email"?C("a ch Email khng hp l (V d: ten@gmail.com)."):U.code==="auth/invalid-credential"?C("Email hoc mt khu khng ng."):U.code==="auth/weak-password"?C("Mt khu qu yu (cn t nht 6 k t)."):C(" c li xy ra: "+U.message)}finally{A(!1)}};return c.jsx("div",{className:"min-h-screen bg-[#020617] flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-[#1e293b] p-8 rounded-2xl shadow-xl w-full max-w-md border border-white/10",children:[c.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:n?"ng K Ti Khon":"ng Nhp"}),c.jsxs("div",{className:"space-y-4",children:[n&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-2",children:"Tn hin th"}),c.jsx("input",{type:"text",value:l,onChange:U=>d(U.target.value),className:"w-full bg-[#0f172a] border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 outline-none"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-2",children:"Email"}),c.jsx("input",{type:"email",value:p,onChange:U=>b(U.target.value),className:"w-full bg-[#0f172a] border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 outline-none"})]}),n&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-2",children:"S in thoi"}),c.jsx("input",{type:"tel",value:x,onChange:U=>w(U.target.value),className:"w-full bg-[#0f172a] border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 outline-none"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-2",children:"Mt khu"}),c.jsx("input",{type:"password",value:h,onChange:U=>f(U.target.value),className:"w-full bg-[#0f172a] border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 outline-none"})]}),n&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-2",children:"Nhp li mt khu"}),c.jsx("input",{type:"password",value:m,onChange:U=>v(U.target.value),className:"w-full bg-[#0f172a] border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 outline-none"})]}),N&&c.jsx("p",{className:"text-red-400 text-sm text-center",children:N}),c.jsx("button",{onClick:R,disabled:H,className:`w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg transition-colors mt-4 ${H?"opacity-50 cursor-not-allowed":""}`,children:H?"ang x l...":n?"ng K":"ng Nhp"}),c.jsx("p",{className:"text-center text-slate-400 text-sm mt-4 cursor-pointer hover:text-white",onClick:()=>r(!n),children:n?" c ti khon? ng nhp ngay":"Cha c ti khon? ng k mi"}),c.jsx("div",{className:"mt-6 pt-4 border-t border-white/5 text-center",children:c.jsx("span",{className:"text-[10px] uppercase font-black tracking-widest text-emerald-500/50",children:"System: Supabase V2 (Secure)"})})]})]})})},nl=[{id:"Cinematic Realistic",label:"Cinematic High-End Realistic (in nh thc t cao cp)"},{id:"3D Pixar Animation",label:"3D Pixar/Disney Style Animation (Hot hnh 3D Pixar/Disney)"},{id:"Japanese Anime 90s",label:"Classic 90s Japanese Anime (Hot hnh Nht Bn thp nin 90)"},{id:"Modern Makoto Shinkai",label:"Makoto Shinkai Cinematic Style (Phong cch Makoto Shinkai hin i)"},{id:"Studio Ghibli Aesthetic",label:"Studio Ghibli Hand-painted Aesthetic (Phong cch v tay Ghibli)"},{id:"Cyberpunk Neon 2077",label:"Cyberpunk Neon / Sci-Fi Futurism (Tng lai vin tng Neon)"},{id:"Hyper-realistic 8K Photo",label:"Hyper-realistic 8K RAW Photography (Nhip nh siu thc 8K)"},{id:"Spider-Verse Vibrant Comic",label:"Into the Spider-Verse Vibrant Comic (Truyn tranh phong cch Spider-Verse)"},{id:"Vintage 16mm Film",label:"Vintage 16mm Grainy Film Style (Phim nha 16mm c in)"},{id:"Noir Black and White",label:"Classic Film Noir / Moody Black & White (Phim en trng Noir su lng)"},{id:"Oil Painting Impressionism",label:"Classic Oil Painting / Impressionist Art (Tranh sn du n tng)"},{id:"Lo-fi Aesthetic Retro",label:"Lo-fi / Vaporwave Retro Aesthetic (Phong cch Lo-fi c in)"},{id:"Claymation Stop Motion",label:"Claymation Claymation Style (Hot hnh t st)"},{id:"Minimalist Vector Art",label:"Clean Minimalist Vector Illustration (Minh ha Vector ti gin)"},{id:"Dark Fantasy Gothic",label:"Dark Fantasy / Gothic Horror Style (Gi tng en ti / Gothic)"},{id:"Ukiyo-e Woodblock",label:"Traditional Japanese Ukiyo-e Woodblock (Tranh khc g Nht Bn)"},{id:"Surrealist Dreamscape",label:"Surrealist / Dreamlike Visual Art (Ngh thut siu thc o mng)"},{id:"Paper Cutout Collage",label:"Hand-crafted Paper Cutout Collage (Ct dn giy th cng)"},{id:"Sketch Graphite Art",label:"Detailed Graphite Pencil Sketch (Phc tho bt ch chi tit)"},{id:"Glitch Art Digital",label:"Experimental Glitch Art / Digital Distortion (Ngh thut li k thut s)"}];let Kx=class extends Q.Component{constructor(n){super(n),this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("ErrorBoundary caught error:",n,r)}render(){var n;return this.state.hasError?c.jsxs("div",{className:"p-8 m-8 bg-slate-900 border border-slate-700 rounded-3xl space-y-4 text-center text-white",children:[c.jsx("h2",{className:"text-xl font-bold text-rose-500",children:" xy ra li hin th"}),c.jsx("p",{className:"text-slate-300",children:(n=this.state.error)==null?void 0:n.message}),c.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"px-6 py-3 bg-white text-slate-900 font-bold rounded-xl hover:bg-slate-200 transition-all",children:"Th li"}),c.jsx("p",{className:"text-xs text-slate-500",children:"D liu vn c lu trong b nh tm."})]}):this.props.children}};const Yx=({userId:s})=>{const[n,r]=Q.useState({opponentScript:"",skeleton:null,ideas:[],selectedIdeaIndex:null,outlines:{},finalScripts:{},selectedStyle:nl[0].id,characters:[],tags:{},showCharacterSection:!1,loading:{analysis:!1,ideas:!1,outline:!1,script:!1,characters:!1}}),[l,d]=Q.useState("");Q.useEffect(()=>{if(!s)return;const j=`app_api_keys_${s}`,M=localStorage.getItem(j);if(M)try{const $=JSON.parse(M),Z=atob($.gemini||"").split(`
`).map(te=>te.trim()).filter(te=>te);Z.length>0&&(d(Z.join(`
`)),Xc(Z))}catch($){console.error("Failed to load Gemini keys",$)}},[s]);const[h,f]=Q.useState(null),m=(j,M="info")=>{f({message:j,type:M}),setTimeout(()=>f(null),5e3)},v=Q.useRef(null),p=j=>/[\u3040-\u30ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff\uff66-\uff9f\uac00-\ud7af]/.test(j)?j.replace(/\s/g,"").length:j.trim().split(/\s+/).filter(Boolean).length,b=async()=>{if(n.opponentScript.trim()){r(j=>({...j,loading:{...j.loading,analysis:!0}}));try{const j=await iy(n.opponentScript,l),M=p(n.opponentScript),$=j.split(/PHONG CCH I TH/i),J=$.length>1?$[1].trim():"T nhin, viral";r(Z=>({...Z,skeleton:{content:j,wordCount:M,style:J},loading:{...Z.loading,analysis:!1}}))}catch(j){console.error(j),m("Li Phn tch: "+(j instanceof Error?j.message:String(j)),"error"),r(M=>({...M,loading:{...M.loading,analysis:!1}}))}}},x=async()=>{if(n.skeleton){r(j=>({...j,loading:{...j.loading,ideas:!0}}));try{const j=await ry(n.skeleton.content,l);r(M=>({...M,ideas:j,loading:{...M.loading,ideas:!1}}))}catch(j){console.error(j),m("Li Sinh  tng: "+(j instanceof Error?j.message:String(j)),"error"),r(M=>({...M,loading:{...M.loading,ideas:!1}}))}}},w=async j=>{if(!(!n.skeleton||!n.ideas[j])){r(M=>({...M,selectedIdeaIndex:j,loading:{...M.loading,outline:!0}}));try{const M=await ly(n.skeleton.content,n.ideas[j],n.skeleton.wordCount,l);r($=>({...$,outlines:{...$.outlines,[j]:M},loading:{...$.loading,outline:!1}}))}catch(M){console.error(M),m("Li Lp dn : "+(M instanceof Error?M.message:String(M)),"error"),r($=>({...$,loading:{...$.loading,outline:!1}}))}}},N=async j=>{if(!(!n.outlines[j]||!n.skeleton)){r(M=>({...M,loading:{...M.loading,script:!0}}));try{const M=await oy(n.outlines[j],n.skeleton.style,l);r($=>({...$,finalScripts:{...$.finalScripts,[j]:M},loading:{...$.loading,script:!1}}))}catch(M){console.error(M),m("Li Vit kch bn: "+(M instanceof Error?M.message:String(M)),"error"),r($=>({...$,loading:{...$.loading,script:!1}}))}}},C=async()=>{const j=n.selectedIdeaIndex,M=j!==null?n.finalScripts[j]:null;if(r($=>({...$,showCharacterSection:!0})),setTimeout(()=>{var $;($=v.current)==null||$.scrollIntoView({behavior:"smooth",block:"start"})},100),M)try{const $=await cy(M,nl.map(Z=>Z.id),l),J=nl.find(Z=>Z.id===$||$.includes(Z.id));J&&r(Z=>({...Z,selectedStyle:J.id}))}catch($){console.error("Style recommendation failed",$)}},H=async()=>{const j=n.selectedIdeaIndex;if(!(j===null||!n.finalScripts[j])){r(M=>({...M,loading:{...M.loading,characters:!0}}));try{const M=await uy(n.finalScripts[j],n.selectedStyle,l);r($=>({...$,characters:M,loading:{...$.loading,characters:!1}}))}catch(M){console.error(M),m("Li Thit k NV: "+(M instanceof Error?M.message:String(M)),"error"),r($=>({...$,loading:{...$.loading,characters:!1}}))}}},A=j=>{const M=n.finalScripts[j];if(!M)return;const $=2e3;let J=[];if(M.length<=$)J=[M];else{let te=M;for(;te.length>0;){let he=te.lastIndexOf(`
`,$);(he===-1||he<500)&&(he=$),J.push(te.substring(0,he).trim()),te=te.substring(he).trim()}}const Z=J.map(te=>({content:te,actions:[],isAnalyzing:!1}));r(te=>({...te,tags:{...te.tags,[j]:Z}}))},R=async(j,M)=>{var J;const $=(J=n.tags[j])==null?void 0:J[M];if(!$||!n.characters.length){m("Vui lng thc hin bc 'Thit k Nhn Vt' trc khi phn tch hnh ng.","info");return}r(Z=>{const te={...Z.tags},he=[...te[j]||[]];return he[M]&&(he[M]={...he[M],isAnalyzing:!0}),te[j]=he,{...Z,tags:te}});try{const Z=await dy($.content,n.selectedStyle,n.characters,l);r(te=>{const he={...te.tags},ke=[...he[j]||[]];return ke[M]&&(ke[M]={...ke[M],actions:Z,isAnalyzing:!1}),he[j]=ke,{...te,tags:he}})}catch(Z){console.error(Z),m("Li Phn tch Tag: "+(Z instanceof Error?Z.message:String(Z)),"error"),r(te=>{const he={...te.tags},ke=[...he[j]||[]];return ke[M]&&(ke[M]={...ke[M],isAnalyzing:!1}),he[j]=ke,{...te,tags:he}})}},U=j=>{navigator.clipboard.writeText(j),m(" sao chp prompt!","success")},q=j=>{const M=j.map($=>$.motionPrompt).join(`
`);navigator.clipboard.writeText(M),m(" sao chp tt c prompt video!","success")};return c.jsx(Kx,{children:c.jsxs(ou.Fragment,{children:[h&&c.jsx("div",{className:"fixed top-4 right-4 z-50 animate-in slide-in-from-right fade-in duration-300",children:c.jsxs("div",{className:`px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-3 font-bold text-sm ${h.type==="error"?"bg-rose-50 text-rose-600 border border-rose-100":h.type==="success"?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-white text-slate-700 border border-slate-100"}`,children:[h.type==="success"&&c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),h.type==="error"&&c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),h.message]})}),c.jsxs("main",{className:"w-full grid grid-cols-1 md:grid-cols-10 gap-8 p-4 md:p-10",children:[c.jsxs("div",{className:"md:col-span-3 space-y-10",children:[c.jsxs("section",{className:"bg-white rounded-3xl shadow-xl shadow-slate-200/50 border border-slate-100 p-8 group transition-all",children:[c.jsxs("h2",{className:"text-xl font-black text-slate-800 uppercase tracking-tighter mb-6 flex items-center gap-3",children:[c.jsx("span",{className:"w-2 h-6 bg-indigo-600 rounded-full"}),"Kch bn i th"]}),c.jsx("textarea",{className:"w-full h-80 p-6 bg-slate-50 border border-slate-100 rounded-2xl focus:ring-8 focus:ring-indigo-600/5 focus:border-indigo-600/20 focus:bg-white outline-none transition-all text-sm leading-relaxed placeholder:text-slate-300 font-medium custom-scrollbar mb-6",placeholder:"Dn kch bn i th vo y...",value:n.opponentScript,onChange:j=>r(M=>({...M,opponentScript:j.target.value}))}),c.jsx("button",{onClick:b,disabled:n.loading.analysis||!n.opponentScript,className:"w-full bg-[#020617] hover:bg-indigo-700 disabled:bg-slate-100 disabled:text-slate-300 text-white font-black py-6 rounded-2xl transition-all shadow-2xl hover:scale-[1.02] active:scale-95 flex justify-center items-center gap-4 text-sm uppercase tracking-widest",children:n.loading.analysis?"ang x l...":"Phn tch Cu trc & Phong cch"})]}),n.skeleton&&c.jsxs("div",{className:"space-y-8 animate-in slide-in-from-left-8 duration-700",children:[c.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 to-indigo-800 rounded-3xl p-8 text-white shadow-2xl relative overflow-hidden",children:[c.jsx("h3",{className:"text-[10px] font-black uppercase opacity-60 mb-2 tracking-[0.3em]",children:"Quantitative Data"}),c.jsxs("div",{className:"text-5xl font-black italic tracking-tighter",children:[n.skeleton.wordCount," ",c.jsx("span",{className:"text-xs font-bold uppercase opacity-60",children:"Units"})]})]}),c.jsxs("section",{className:"bg-white rounded-3xl shadow-xl border border-slate-100 p-8",children:[c.jsx("h2",{className:"text-lg font-black text-slate-800 uppercase tracking-tighter mb-6",children:"Khung xng Logic"}),c.jsx("div",{className:"max-h-96 overflow-y-auto pr-4 text-sm text-slate-600 leading-relaxed whitespace-pre-wrap font-medium custom-scrollbar",children:n.skeleton.content}),c.jsx("button",{onClick:x,disabled:n.loading.ideas,className:"w-full mt-8 bg-rose-500 hover:bg-rose-600 disabled:bg-slate-100 text-white font-black py-6 rounded-2xl transition-all shadow-xl hover:scale-[1.02] active:scale-95 uppercase tracking-widest text-xs",children:"SINH 5  TNG LIN QUAN"})]})]}),n.showCharacterSection&&c.jsxs("div",{ref:v,className:"animate-in fade-in slide-in-from-bottom-12 duration-1000 space-y-8",children:[c.jsxs("section",{className:"bg-white rounded-3xl shadow-xl border border-slate-100 p-8",children:[c.jsx("h2",{className:"text-lg font-black text-slate-800 uppercase tracking-tighter mb-6",children:"B lc Phong cch"}),c.jsxs("div",{className:"space-y-6 mb-8",children:[c.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest px-1",children:"Visual Architecture"}),c.jsx("select",{value:n.selectedStyle,onChange:j=>r(M=>({...M,selectedStyle:j.target.value})),className:"w-full p-5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-4 focus:ring-amber-500/10 outline-none text-sm font-bold text-slate-800 transition-all cursor-pointer",children:nl.map(j=>c.jsx("option",{value:j.id,children:j.label},j.id))})]}),c.jsx("button",{onClick:H,disabled:n.loading.characters,className:"w-full bg-amber-500 hover:bg-amber-600 disabled:bg-slate-100 text-white font-black py-6 rounded-2xl shadow-xl transition-all hover:scale-[1.02] active:scale-95 uppercase tracking-widest text-xs",children:"Thit k Nhn Vt"})]}),n.characters.length>0&&c.jsx("div",{className:"space-y-6",children:n.characters.map((j,M)=>c.jsxs("div",{className:"bg-[#020617] text-white p-8 rounded-[2rem] border-l-[10px] border-amber-500 shadow-3xl",children:[c.jsx("input",{className:"bg-transparent border-none text-2xl font-black text-white tracking-tighter mb-1 w-full focus:ring-0 placeholder-white/30",value:j.name,onChange:$=>{const J=[...n.characters];J[M].name=$.target.value,r(Z=>({...Z,characters:J}))},placeholder:"Tn nhn vt"}),c.jsx("div",{className:"text-[10px] font-bold text-amber-500/60 uppercase tracking-widest mb-4",children:"Neural Casting Profile"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-[11px] mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"opacity-40 uppercase whitespace-nowrap",children:"G.Tnh:"}),c.jsx("input",{className:"bg-white/10 rounded px-2 py-1 w-full border-none focus:ring-1 focus:ring-amber-500 text-white",value:j.gender,onChange:$=>{const J=[...n.characters];J[M].gender=$.target.value,r(Z=>({...Z,characters:J}))}})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"opacity-40 uppercase whitespace-nowrap",children:"Tui:"}),c.jsx("input",{className:"bg-white/10 rounded px-2 py-1 w-full border-none focus:ring-1 focus:ring-amber-500 text-white",value:j.age,onChange:$=>{const J=[...n.characters];J[M].age=$.target.value,r(Z=>({...Z,characters:J}))}})]}),c.jsxs("div",{className:"flex items-center gap-2 col-span-2",children:[c.jsx("span",{className:"opacity-40 uppercase whitespace-nowrap",children:"Quc tch:"}),c.jsx("input",{className:"bg-white/10 rounded px-2 py-1 w-full border-none focus:ring-1 focus:ring-amber-500 text-white",value:j.country,onChange:$=>{const J=[...n.characters];J[M].country=$.target.value,r(Z=>({...Z,characters:J}))}})]}),c.jsxs("div",{className:"flex items-center gap-2 col-span-2",children:[c.jsx("span",{className:"opacity-40 uppercase whitespace-nowrap",children:"Dng ngi:"}),c.jsx("input",{className:"bg-white/10 rounded px-2 py-1 w-full border-none focus:ring-1 focus:ring-amber-500 text-white",value:j.bodyType,onChange:$=>{const J=[...n.characters];J[M].bodyType=$.target.value,r(Z=>({...Z,characters:J}))}})]})]}),c.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10",children:[c.jsx("label",{className:"text-[10px] text-slate-400 uppercase tracking-widest block mb-1",children:"c im khun mt (Trung tnh)"}),c.jsx("textarea",{className:"w-full bg-white/5 rounded-xl p-3 text-xs text-slate-300 italic leading-relaxed border border-white/10 focus:ring-1 focus:ring-amber-500 outline-none resize-none h-24",value:j.facialDetails,onChange:$=>{const J=[...n.characters];J[M].facialDetails=$.target.value,r(Z=>({...Z,characters:J}))}})]})]},M))})]})]}),c.jsx("div",{className:"md:col-span-7 space-y-12",children:n.ideas.length>0?c.jsxs("div",{className:"space-y-16 animate-in fade-in zoom-in-95 duration-1000",children:[c.jsx("div",{className:"flex items-center justify-between border-b-4 border-slate-100 pb-8",children:c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsx("div",{className:"bg-[#020617] text-white w-14 h-14 rounded-2xl flex items-center justify-center text-3xl font-black shadow-2xl",children:"#"}),c.jsx("h2",{className:"text-4xl font-black text-slate-900 tracking-tighter uppercase",children:"Production Suite"})]})}),n.ideas.map((j,M)=>c.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl border border-slate-100 p-10 md:p-16 space-y-12 transition-all hover:border-indigo-200",children:[c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("span",{className:"bg-indigo-600 text-white text-[11px] font-black px-6 py-2 rounded-full uppercase",children:["Module ",M+1]}),c.jsx("span",{className:"text-rose-500 text-xs font-black uppercase tracking-widest",children:j.highlightValue})]}),c.jsx("h3",{className:"text-5xl font-black text-slate-900 tracking-tighter leading-none",children:j.title}),c.jsx("p",{className:"text-xl text-slate-500 leading-relaxed font-medium",children:j.description}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 pt-4",children:[c.jsxs("div",{className:"bg-slate-50 p-8 rounded-3xl border border-slate-100",children:[c.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase mb-2 tracking-widest",children:"Environment Context"}),c.jsx("p",{className:"font-bold text-slate-700",children:j.charactersContext})]}),c.jsxs("div",{className:"bg-slate-50 p-8 rounded-3xl border border-slate-100",children:[c.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase mb-2 tracking-widest",children:"Growth Potential"}),c.jsx("p",{className:"font-bold text-slate-700",children:j.viralPotential})]})]})]}),c.jsx("div",{className:"pt-12 border-t-2 border-slate-50 space-y-12",children:n.outlines[M]?c.jsxs("div",{className:"space-y-16",children:[c.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-[2.5rem] p-12 shadow-inner",children:[c.jsxs("h4",{className:"text-slate-900 font-black mb-8 uppercase tracking-[0.4em] text-[10px] flex items-center gap-3",children:[c.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-ping"})," Structural Protocol"]}),c.jsx("div",{className:"whitespace-pre-wrap text-base text-slate-600 leading-[2] font-medium opacity-80 max-h-[500px] overflow-y-auto pr-8 custom-scrollbar",children:n.outlines[M]}),!n.finalScripts[M]&&c.jsx("button",{onClick:()=>N(M),disabled:n.loading.script,className:`mt-12 bg-emerald-600 hover:bg-emerald-700 text-white font-black px-12 py-8 rounded-2xl shadow-2xl transition-all uppercase tracking-widest text-xs ${n.loading.script?"opacity-30 cursor-not-allowed":"hover:scale-[1.02] active:scale-95"}`,children:n.loading.script?"ang vit...":"Vit kch bn hon chnh"})]}),n.finalScripts[M]&&c.jsxs("div",{className:"space-y-12 animate-in zoom-in-95 duration-[1200ms]",children:[c.jsxs("div",{className:"bg-[#020617] text-white rounded-[3.5rem] p-16 lg:p-24 shadow-[0_50px_100px_-20px_rgba(0,0,0,0.5)]",children:[c.jsx("h4",{className:"text-indigo-400 font-black uppercase text-xs tracking-[0.5em] border-b border-white/5 pb-8 mb-12",children:"Final Master Copy"}),c.jsx("div",{className:"whitespace-pre-wrap text-lg lg:text-xl font-bold tracking-tight leading-relaxed text-slate-100",children:n.finalScripts[M]})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8",children:[c.jsxs("button",{onClick:C,className:"bg-amber-500 hover:bg-amber-600 text-white font-black px-12 py-10 rounded-3xl shadow-2xl transition-all hover:scale-[1.03] active:scale-95 flex flex-col items-center gap-4 text-center group",children:[c.jsx("svg",{className:"w-8 h-8 group-hover:rotate-45 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xl",children:"Thit lp Styles & NV"}),c.jsx("div",{className:"text-[10px] opacity-60 mt-2 uppercase tracking-widest",children:"Tip tc thit k hnh nh"})]})]}),c.jsxs("button",{onClick:()=>A(M),className:"bg-indigo-600 hover:bg-indigo-700 text-white font-black px-12 py-10 rounded-3xl shadow-2xl transition-all hover:scale-[1.03] active:scale-95 flex flex-col items-center gap-4 text-center group",children:[c.jsx("svg",{className:"w-8 h-8 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xl",children:"Bt u Chia TAGS"}),c.jsx("div",{className:"text-[10px] opacity-60 mt-2 uppercase tracking-widest",children:"Shot Decomposition"})]})]})]}),n.tags[M]&&c.jsxs("div",{className:"space-y-16 pt-24 border-t-8 border-slate-100",children:[c.jsx("h3",{className:"text-5xl font-black text-slate-900 tracking-tighter italic",children:"Alpha Production Tags"}),n.tags[M].map(($,J)=>c.jsxs("div",{className:"bg-white border-4 border-slate-50 rounded-[4rem] p-12 md:p-16 space-y-12 shadow-sm transition-all animate-in slide-in-from-bottom-16 duration-700",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-8",children:[c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("div",{className:"bg-[#020617] text-white px-6 py-2 rounded-xl text-xs font-black uppercase tracking-widest",children:["TAG #",J+1]}),c.jsxs("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:[p($.content)," units identified"]})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>q($.actions),disabled:$.actions.length===0,className:"bg-indigo-50 hover:bg-indigo-100 text-indigo-600 px-6 py-3 rounded-xl text-xs font-black uppercase tracking-widest transition-all shadow-sm border border-indigo-100 disabled:opacity-30",children:"Copy All Video"}),c.jsx("button",{onClick:()=>R(M,J),disabled:$.isAnalyzing,className:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-100 text-white font-black px-10 py-4 rounded-xl text-xs transition-all shadow-xl uppercase tracking-widest",children:$.isAnalyzing?"Processing...":"To Motion Prompts"})]})]}),c.jsx("div",{className:"p-10 bg-slate-50 rounded-[2.5rem] text-slate-500 text-lg italic font-medium leading-relaxed border-2 border-slate-100",children:$.content}),$.actions.length>0&&c.jsx("div",{className:"grid grid-cols-1 gap-12 mt-12",children:$.actions.map((Z,te)=>c.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom-12 duration-1000",children:[c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsx("div",{className:"w-10 h-10 bg-slate-900 text-white rounded-lg flex items-center justify-center font-black text-sm",children:te+1}),c.jsx("div",{className:"h-px flex-1 bg-slate-100"})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-8",children:[c.jsxs("div",{className:"bg-[#020617] text-white p-10 rounded-[2.5rem] shadow-3xl",children:[c.jsx("div",{className:"text-[10px] font-black uppercase text-indigo-400 mb-4 tracking-widest",children:"Shot Execution"}),c.jsx("div",{className:"text-xl font-bold leading-relaxed",children:Z.action})]}),c.jsxs("div",{className:"bg-indigo-50 border-l-[10px] border-indigo-400 p-10 rounded-[2.5rem] shadow-inner",children:[c.jsx("div",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-4",children:"Master Transcript"}),c.jsx("div",{className:"text-xl font-bold text-indigo-900 italic font-serif",children:Z.voiceText?`"${Z.voiceText}"`:"--- Instrumental Segment ---"})]}),c.jsxs("div",{className:"bg-[#FFF1F2] border-l-[10px] border-rose-400 p-10 rounded-[2.5rem] relative group shadow-lg",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("div",{className:"text-[10px] font-black text-rose-400 uppercase tracking-[0.3em]",children:"Video Motion AI Prompt"}),c.jsx("button",{onClick:()=>U(Z.motionPrompt),className:"bg-white/80 hover:bg-white p-2 rounded-lg text-rose-500 shadow-sm transition-all active:scale-90",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})})]}),c.jsx("div",{className:"text-sm font-bold text-rose-950 leading-relaxed italic bg-white/40 p-6 rounded-2xl border border-rose-200",children:Z.motionPrompt})]})]})]},te))})]},J))]})]})]}):c.jsx("button",{onClick:()=>w(M),disabled:n.loading.outline,className:"bg-[#020617] text-white px-12 py-8 rounded-2xl font-black shadow-2xl hover:bg-indigo-700 hover:scale-[1.02] active:scale-95 transition-all text-sm uppercase tracking-widest",children:n.loading.outline&&n.selectedIdeaIndex===M?"Kin trc...":"Chn & Lp dn "})})]},M))]}):c.jsxs("div",{className:"h-full min-h-[900px] flex flex-col items-center justify-center text-slate-200 space-y-16 border-8 border-dashed border-slate-100 rounded-[6rem] bg-white/50 backdrop-blur-3xl group hover:border-indigo-100 transition-all duration-[2000ms]",children:[c.jsx("div",{className:"relative",children:c.jsx("div",{className:"w-56 h-56 bg-white rounded-[4.5rem] flex items-center justify-center shadow-3xl group-hover:rotate-12 transition-all",children:c.jsx("svg",{className:"w-24 h-24 text-slate-100",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})})}),c.jsxs("div",{className:"text-center space-y-6",children:[c.jsx("h3",{className:"text-4xl font-black italic uppercase tracking-[0.5em] text-slate-300",children:"Quang Huy Production"}),c.jsx("p",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest opacity-40 italic",children:"Waiting for initial data analysis to start production sequence..."})]})]})})]}),c.jsxs("footer",{className:"w-full p-20 text-center border-t border-slate-100 bg-white mt-40",children:[c.jsxs("h4",{className:"text-2xl font-black tracking-tighter uppercase text-[#020617]",children:["QUANG HUY ",c.jsx("span",{className:"text-indigo-600",children:"VIDEO"})]}),c.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.5em] text-slate-400 mt-4",children:"AI Viral Content Engine  2024"})]})]})})},Kc={},Px=s=>{let n=[];if(s&&(n=s.split(`
`).map(r=>r.trim()).filter(r=>r)),n.length===0){const r=Kc==null?void 0:Kc.VITE_GEMINI_API_KEY;r&&n.push(r)}return n},Jx=["gemini-2.0-flash-lite-preview-02-05","gemini-2.5-flash","gemini-2.0-flash-lite-001","gemini-2.0-flash-exp","gemini-2.0-flash-001","gemini-2.0-flash","gemini-2.5-pro","gemini-flash-latest"],Oi=async(s,n)=>{const r=Px(s);if(r.length===0)throw new Error("No API Keys provided.");let l;for(const d of r){const h=new ll(d);for(const f of Jx)try{const m=h.getGenerativeModel({model:f});return await n(m)}catch(m){console.warn(`Failed: Key(...${d.slice(-4)}) Model(${f}) error: ${m.message}`),l=m}}throw l||new Error("All keys and models failed to generate content.")},Qx=async(s,n)=>Oi(n,async r=>(await r.generateContent([{inlineData:{mimeType:"image/jpeg",data:s}},{text:"Hy phn tch chi tit phong cch hnh nh trong bc nh ny: nh sng, mu sc, gc my, cht liu ngh thut (medium), tm trng v cc c im hnh nh c trng khc. Tr v m t ngn gn nhng sc tch bng ting Vit."}])).response.text()||"Khng th phn tch phong cch."),Xx=async(s,n)=>Oi(n,async r=>{const l=`Nhim v: c kch bn di y v chia tch thnh cc phn cnh hnh nh tiu biu (Scene Breakdown). Mi phn on phi i din cho mt thng ip hoc giai on cm xc. Sau  hy m tng s phn on.
      
      Kch bn: "${s}"
      
      Tr v JSON: { "breakdown": string, "count": number }`,d={responseMimeType:"application/json"},h=await r.generateContent({contents:[{role:"user",parts:[{text:l}]}],generationConfig:d}),f=JSON.parse(h.response.text()||"{}");let m=f.breakdown||"";return typeof m!="string"&&(m=JSON.stringify(m)),{breakdown:m,count:Number(f.count)||0}}),Zx=async(s,n,r,l)=>Oi(l,async d=>{const h=`Da vo phn tch phn cnh: "${n}" v s lng ${r} phn on. Hy chia ni dung kch bn gc di y thnh ng ${r} hng tng ng vi cc phn on.
        
        QUY TC CC K QUAN TRNG:
        - KHNG C XO B BT C K T NO ca kch bn gc.
        - Ch c thm xung dng  phn tch cc on.
        - Tr v danh sch cc chui tng ng vi mi phn cnh.
        
        Kch bn gc: "${s}"`,f=await d.generateContent({contents:[{role:"user",parts:[{text:h}]}],generationConfig:{responseMimeType:"application/json"}}),m=JSON.parse(f.response.text()||"[]");return Array.isArray(m)?m.map(v=>typeof v=="string"?v:typeof v=="object"&&v!==null?v.content||v.text||v.description||v.script_content||v.row||JSON.stringify(v):String(v)):[]}),Wx=async(s,n,r)=>Oi(r,async l=>{const d=`Hy to ra Image Prompts cho Midjourney/Stable Diffusion da trn cc on kch bn sau v phong cch hnh nh c cung cp.
        
        Phong cch (Style): ${n}
        
        Cu trc Prompt (Ting Anh): [Subject], [Action], [Environment], [Lighting/Atmosphere], [Camera Angle/Lens], [Style].
        
        Cc on kch bn cn to prompt:
        ${s.map((f,m)=>`${m+1}. ${f}`).join(`
`)}
        
        Tr v mng JSON cha cc prompt tng ng theo th t (mng string).`,h=await l.generateContent({contents:[{role:"user",parts:[{text:d}]}],generationConfig:{responseMimeType:"application/json"}});return JSON.parse(h.response.text()||"[]")}),Fx=async(s,n,r)=>Oi(r,async l=>{const d=`Da vo ni dung kch bn v cc prompt nh  c, hy to ra cc "Video Motion Prompts" (Prompt chuyn ng cho video) tng ng.
        
        Yu cu:
        - Mi prompt video phi m t chuyn ng ca ch th v my nh (Camera motion, subject action, dynamic transitions).
        - Ngn ng: Ting Anh.
        - Kt qu phi l mt mng chui, mi chui tng ng vi mt hng kch bn.
        
        Kch bn & Prompt nh:
        ${s.map((f,m)=>`Hng ${m+1}: [Kch bn: ${f}] [Prompt nh: ${n[m]||"N/A"}]`).join(`
`)}
        
        Tr v mng JSON (mng string).`,h=await l.generateContent({contents:[{role:"user",parts:[{text:d}]}],generationConfig:{responseMimeType:"application/json"}});return JSON.parse(h.response.text()||"[]")});let Bg=class extends ou.Component{constructor(n){super(n),this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("ErrorBoundary caught error:",n,r)}render(){var n;return this.state.hasError?c.jsxs("div",{className:"p-8 m-8 bg-red-50 border border-red-200 rounded-xl space-y-4 text-center",children:[c.jsx("h2",{className:"text-xl font-bold text-red-700",children:" xy ra li hin th"}),c.jsx("p",{className:"text-red-600",children:(n=this.state.error)==null?void 0:n.message}),c.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"px-4 py-2 bg-white border border-red-200 text-red-600 rounded-lg hover:bg-red-50",children:"Th li"}),c.jsx("p",{className:"text-xs text-slate-500",children:"D liu vn c lu trong b nh tm."})]}):this.props.children}};const ew=Q.forwardRef(({tag:s,style:n,index:r,apiKey:l,onNotify:d},h)=>{const[f,m]=Q.useState(s),v=Q.useRef(f);Q.useEffect(()=>{v.current=f},[f]);const[p,b]=Q.useState({}),x=R=>new Promise(U=>setTimeout(U,R)),w=async()=>{b(R=>({...R,analyze:!0}));try{const R=await Xx(f.content,l);return m(U=>({...U,analysis:R.breakdown,sceneCount:R.count})),R}catch(R){throw console.error(R),d("Li khi phn tch phn cnh","error"),R}finally{b(R=>({...R,analyze:!1}))}},N=async(R,U)=>{const q=R||f.analysis,j=U||f.sceneCount;if(!q||!j){d("Cn phn tch phn cnh trc","info");return}b(M=>({...M,split:!0}));try{const M=await Zx(f.content,q,j,l);return m($=>({...$,rows:M})),M}catch(M){throw console.error(M),d("Li khi chia hng","error"),M}finally{b(M=>({...M,split:!1}))}},C=async R=>{const U=R||f.rows;if(!U||U.length===0){d("Cn chia hng trc","info");return}b(q=>({...q,prompt:!0}));try{const q=await Wx(U,n,l);return m(j=>({...j,prompts:q})),q}catch(q){throw console.error(q),d("Li khi to prompt","error"),q}finally{b(q=>({...q,prompt:!1}))}},H=async()=>{if(!f.rows||f.rows.length===0){d("Cn chia hng trc","info");return}b(R=>({...R,videoPrompt:!0}));try{const R=await Fx(f.rows,f.prompts||[],l);m(U=>({...U,videoPrompts:R}))}catch(R){console.error(R),d("Li khi to prompt video","error")}finally{b(R=>({...R,videoPrompt:!1}))}},A=R=>{if(!R||R.length===0)return;const U=R.map(q=>q.trim()).filter(q=>q.length>0).map(q=>q.replace(/\r?\n|\r/g," ")).map(q=>q.replace(/^["']+|["']+$/g,"")).join(`
`);navigator.clipboard.writeText(U),d(" sao chp ni dung chnh xc theo tng hng!","success")};return Q.useImperativeHandle(h,()=>({runAutoSequence:async()=>{const R=await w();await x(5e3);const U=await N(R.breakdown,R.count);await x(5e3),await C(U)},getRows:()=>v.current.rows||[],getPrompts:()=>v.current.prompts||[]}),[]),c.jsxs("div",{className:`bg-white rounded-2xl shadow-sm border p-6 space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500 transition-colors ${Object.values(p).some(R=>R)?"border-indigo-300 ring-1 ring-indigo-100":"border-gray-100"}`,children:[c.jsxs("div",{className:"flex items-center justify-between border-b border-gray-50 pb-4",children:[c.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[c.jsxs("span",{className:"w-10 h-10 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center text-xs font-bold",children:["TAG ",r+1]}),"Phn kch bn"]}),f.sceneCount!==void 0&&c.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold",children:[f.sceneCount," Phn on"]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Ni dung kch bn"}),c.jsx("div",{className:"p-4 bg-gray-50 rounded-xl border border-gray-100 text-sm text-gray-700 max-h-48 overflow-y-auto whitespace-pre-wrap leading-relaxed",children:f.content})]}),c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[c.jsx("button",{onClick:()=>w(),disabled:p.analyze,className:`py-2.5 px-3 rounded-xl text-xs font-semibold transition-all flex items-center justify-center gap-2 ${p.analyze?"bg-gray-100 text-gray-400":"bg-blue-50 text-blue-700 hover:bg-blue-100 active:scale-95"}`,children:p.analyze?"...":"Phn Tch"}),c.jsx("button",{onClick:()=>N(),disabled:p.split||!f.analysis,className:`py-2.5 px-3 rounded-xl text-xs font-semibold transition-all flex items-center justify-center gap-2 ${p.split||!f.analysis?"bg-gray-100 text-gray-400":"bg-teal-50 text-teal-700 hover:bg-teal-100 active:scale-95"}`,children:p.split?"...":"Chia hng"}),c.jsx("button",{onClick:()=>C(),disabled:p.prompt||!f.rows,className:`py-2.5 px-3 rounded-xl text-xs font-semibold transition-all flex items-center justify-center gap-2 ${p.prompt||!f.rows?"bg-gray-100 text-gray-400":"bg-purple-50 text-purple-700 hover:bg-purple-100 active:scale-95"}`,children:p.prompt?"...":"Prompt nh"}),c.jsx("button",{onClick:()=>H(),disabled:p.videoPrompt||!f.rows,className:`py-2.5 px-3 rounded-xl text-xs font-semibold transition-all flex items-center justify-center gap-2 ${p.videoPrompt||!f.rows?"bg-gray-100 text-gray-400":"bg-rose-50 text-rose-700 hover:bg-rose-100 active:scale-95"}`,children:p.videoPrompt?"...":"Prompt Video"})]}),f.analysis&&c.jsxs("div",{className:"p-4 bg-indigo-50 border border-indigo-100 rounded-xl space-y-2",children:[c.jsx("h4",{className:"text-xs font-bold text-indigo-700 uppercase",children:"Phn tch phn cnh"}),c.jsx("p",{className:"text-sm text-indigo-900 leading-relaxed whitespace-pre-wrap",children:f.analysis})]}),f.rows&&f.rows.length>0&&c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:["Kch bn  chia hng (",f.rows.length,")"]}),c.jsx("button",{onClick:()=>A(f.rows||[]),className:"text-[10px] font-bold text-indigo-500 hover:text-indigo-700 uppercase flex items-center gap-1",children:"Copy All"})]}),c.jsx("div",{className:"space-y-2",children:f.rows.map((R,U)=>c.jsxs("div",{className:"p-3 bg-white border border-gray-100 rounded-lg text-sm flex gap-3",children:[c.jsx("span",{className:"text-indigo-300 font-mono text-xs",children:U+1}),c.jsxs("span",{className:"text-gray-700 italic",children:['"',R,'"']})]},U))})]}),f.prompts&&f.prompts.length>0&&c.jsxs("div",{className:"space-y-3 pt-4 border-t border-gray-50",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h4",{className:"text-xs font-bold text-purple-700 uppercase tracking-wider",children:"Image Prompts"}),c.jsx("button",{onClick:()=>A(f.prompts||[]),className:"text-[10px] font-bold text-purple-500 hover:text-purple-700 uppercase flex items-center gap-1",children:"Copy All"})]}),c.jsx("div",{className:"space-y-3",children:f.prompts.map((R,U)=>c.jsxs("div",{className:"p-4 bg-purple-50 border border-purple-100 rounded-xl text-sm font-mono text-purple-900 leading-relaxed",children:[c.jsxs("div",{className:"text-[10px] font-bold text-purple-400 mb-1",children:["PROMPT #",U+1]}),R]},U))})]})]})]})}),tw=({onStyleChange:s,onSplitScript:n,apiKey:r})=>{const[l,d]=Q.useState(null),[h,f]=Q.useState(""),[m,v]=Q.useState(""),[p,b]=Q.useState(!1),x=async N=>{var A;const C=(A=N.target.files)==null?void 0:A[0];if(!C)return;const H=new FileReader;H.onloadend=async()=>{const R=H.result.split(",")[1];d(H.result),b(!0);try{const U=await Qx(R,r);f(U),s(U)}catch(U){console.error(U),alert("Li khi phn tch nh: "+(U instanceof Error?U.message:String(U)))}finally{b(!1)}},H.readAsDataURL(C)},w=()=>{m.trim()&&n(m)};return c.jsxs("div",{className:"flex flex-col h-full space-y-6 p-6 border-r border-gray-200 bg-white",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h2",{className:"text-xl font-bold text-indigo-700",children:"HOT AI Visual Director"}),c.jsx("p",{className:"text-xs text-gray-500 italic",children:"Professional image direction & analysis"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Ti nh phong cch"}),c.jsxs("div",{className:"relative group",children:[c.jsxs("div",{className:`border-2 border-dashed rounded-xl p-4 transition-all duration-300 flex flex-col items-center justify-center cursor-pointer ${l?"border-indigo-400 bg-indigo-50":"border-gray-300 hover:border-indigo-500 hover:bg-gray-50"}`,children:[c.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:x,accept:"image/*"}),l?c.jsx("img",{src:l,alt:"Reference",className:"w-full h-32 object-cover rounded-lg shadow-sm"}):c.jsxs("div",{className:"text-center",children:[c.jsx("svg",{className:"mx-auto h-10 w-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c.jsx("span",{className:"mt-2 block text-xs font-medium text-gray-600",children:"Click hoc ko th nh vo y"})]})]}),p&&c.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-70 flex items-center justify-center rounded-xl",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Phong cch phn tch"}),c.jsx("textarea",{value:h,onChange:N=>{f(N.target.value),s(N.target.value)},className:"w-full h-32 p-3 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none bg-gray-50",placeholder:"c im phong cch s hin  y..."})]}),c.jsxs("div",{className:"flex-grow flex flex-col space-y-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nhp kch bn"}),c.jsx("textarea",{value:m,onChange:N=>v(N.target.value),className:"flex-grow w-full p-3 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",placeholder:"Dn kch bn ca bn vo y..."})]}),c.jsx("button",{onClick:w,className:"w-full py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl shadow-lg transform transition-all active:scale-95 focus:outline-none focus:ring-4 focus:ring-indigo-200",children:"Chia Kch Bn"}),c.jsx("div",{className:"text-[10px] text-gray-400 text-center uppercase tracking-widest",children:" 2024 HOT AI Studio"})]})},nw=({tags:s,style:n,apiKey:r,onNotify:l})=>{const d=Q.useRef([]),[h,f]=Q.useState(!1),[m,v]=Q.useState(""),p=async()=>{if(s.length!==0){f(!0),v("ang x l...");try{for(let w=0;w<d.current.length;w++){const N=d.current[w];N&&(v(`ang x l Tag ${w+1}/${s.length}...`),console.log(`Auto processing tag ${w+1}/${s.length}...`),await N.runAutoSequence())}v("Hon tt!")}catch(w){console.error(w),v("C li xy ra!"),l("Qu trnh t ng b gin on do li.","error")}finally{f(!1),setTimeout(()=>v(""),5e3)}}},b=()=>{const w=[];if(d.current.forEach(N=>{if(N){const H=N.getRows().map(A=>A.trim()).filter(A=>A.length>0).map(A=>A.replace(/\r?\n|\r/g," ")).map(A=>A.replace(/^["']+|["']+$/g,""));w.push(...H)}}),w.length===0){l("Khng c kch bn  chia hng  copy!","info");return}navigator.clipboard.writeText(w.join(`
`)),l(` copy chnh xc ${w.length} hng kch bn!`,"success")},x=()=>{const w=[];if(d.current.forEach(N=>{if(N){const H=N.getPrompts().map(A=>A.trim()).filter(A=>A.length>0).map(A=>A.replace(/\r?\n|\r/g," ")).map(A=>A.replace(/^["']+|["']+$/g,""));w.push(...H)}}),w.length===0){l("Khng c prompt  copy!","info");return}navigator.clipboard.writeText(w.join(`
`)),l(` copy chnh xc ${w.length} prompt!`,"success")};return s.length===0?c.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 space-y-4 p-12 bg-white rounded-3xl border border-gray-100 border-dashed",children:[c.jsx("svg",{className:"w-16 h-16 opacity-20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("p",{className:"text-lg font-medium",children:"Cha c kch bn c chia"}),c.jsx("p",{className:"text-sm",children:'Vui lng nhp kch bn v nhn "Chia Kch Bn"  ct tri'})]}):(d.current.length!==s.length&&(d.current=new Array(s.length).fill(null)),c.jsxs("div",{className:"space-y-8 pb-12",children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-3 p-4 bg-gray-100 rounded-2xl sticky top-4 z-10 shadow-sm border border-gray-200",children:[c.jsx("button",{onClick:p,disabled:h,className:`px-6 py-2.5 rounded-xl font-bold text-sm transition-all flex items-center gap-2 ${h?"bg-gray-400 text-white cursor-not-allowed":"bg-gradient-to-r from-indigo-600 to-blue-600 hover:from-indigo-700 hover:to-blue-700 text-white shadow-md active:scale-95"}`,children:h?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"ang T ng..."]}):c.jsxs(c.Fragment,{children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"T ng Hon Ton"]})}),c.jsxs("button",{onClick:b,className:"px-5 py-2.5 bg-white border border-gray-200 text-gray-700 rounded-xl font-bold text-sm hover:bg-gray-50 transition-all shadow-sm active:scale-95 flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-teal-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Copy All Kch Bn"]}),c.jsxs("button",{onClick:x,className:"px-5 py-2.5 bg-white border border-gray-200 text-gray-700 rounded-xl font-bold text-sm hover:bg-gray-50 transition-all shadow-sm active:scale-95 flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Copy All Prompt Anh"]})]}),m&&c.jsxs("div",{className:`mx-4 mt-2 p-3 rounded-xl text-sm font-bold flex items-center gap-2 ${m==="C li xy ra!"?"bg-red-50 text-red-600":"bg-green-50 text-green-700 border border-green-200"}`,children:[m==="Hon tt!"?c.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}):c.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-current border-t-transparent animate-spin"}),m]}),c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Bng iu Khin Tags"}),c.jsx("div",{className:"h-px flex-grow bg-gray-100"}),c.jsxs("span",{className:"text-sm font-medium text-gray-400",children:[s.length," TAGS SN SNG"]})]}),c.jsx("div",{className:"space-y-8",children:s.map((w,N)=>c.jsx(ew,{tag:w,style:n,index:N,apiKey:r,ref:C=>{d.current[N]=C},onNotify:l},w.id))})]}))},aw=({userId:s})=>{const[n,r]=Q.useState(""),[l,d]=Q.useState([]),[h,f]=Q.useState(""),[m,v]=Q.useState(null),p=(w,N="info")=>{v({message:w,type:N}),setTimeout(()=>v(null),5e3)};Q.useEffect(()=>{if(s)try{const w=`app_api_keys_${s}`,N=localStorage.getItem(w);if(N){const C=JSON.parse(N),A=atob(C.gemini||"").split(`
`).map(R=>R.trim()).filter(R=>R);f(A.join(`
`))}}catch(w){console.error("Failed to load API key",w)}},[s]);const b=Q.useCallback(w=>{const N=/[\u3040-\u30ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff\uff66-\uff9f]/.test(w);let C=[];if(N)for(let A=0;A<w.length;A+=2e3)C.push(w.substring(A,A+2e3));else{const A=w.split(/\s+/),R=1400;for(let U=0;U<A.length;U+=R)C.push(A.slice(U,U+R).join(" "))}const H=C.map((A,R)=>({id:crypto.randomUUID(),content:A}));d(H)},[]),x=w=>{r(w)};return c.jsxs("div",{className:"flex h-screen w-full overflow-hidden bg-gray-50",children:[c.jsx("aside",{className:"w-[30%] min-w-[320px] max-w-[450px] flex-shrink-0 h-full",children:c.jsx(tw,{onStyleChange:x,onSplitScript:b,apiKey:h})}),c.jsx("main",{className:"flex-grow h-full overflow-y-auto p-8 lg:p-12 scroll-smooth",children:c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("header",{className:"mb-12",children:[c.jsxs("h1",{className:"text-4xl font-extrabold text-gray-900 tracking-tight",children:["HOT ",c.jsx("span",{className:"text-indigo-600",children:"AI"})]}),c.jsx("p",{className:"mt-2 text-gray-500 font-medium",children:"H thng sn xut Visual Prompts chuyn nghip"})]}),c.jsx(Bg,{children:c.jsxs("div",{className:"relative",children:[m&&c.jsx("div",{className:"fixed top-4 right-4 z-50 animate-in slide-in-from-right fade-in duration-300",children:c.jsxs("div",{className:`px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-3 font-bold text-sm ${m.type==="error"?"bg-rose-50 text-rose-600 border border-rose-100":m.type==="success"?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-white text-slate-700 border border-slate-100"}`,children:[m.type==="success"&&c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),m.type==="error"&&c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),m.message]})}),c.jsx(nw,{tags:l,style:n,apiKey:h,onNotify:p})]})})]})})]})};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),iw=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,r,l)=>l?l.toUpperCase():r.toLowerCase()),ug=s=>{const n=iw(s);return n.charAt(0).toUpperCase()+n.slice(1)},Gg=(...s)=>s.filter((n,r,l)=>!!n&&n.trim()!==""&&l.indexOf(n)===r).join(" ").trim(),rw=s=>{for(const n in s)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=Q.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:l,className:d="",children:h,iconNode:f,...m},v)=>Q.createElement("svg",{ref:v,...lw,width:n,height:n,stroke:s,strokeWidth:l?Number(r)*24/Number(n):r,className:Gg("lucide",d),...!h&&!rw(m)&&{"aria-hidden":"true"},...m},[...f.map(([p,b])=>Q.createElement(p,b)),...Array.isArray(h)?h:[h]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=(s,n)=>{const r=Q.forwardRef(({className:l,...d},h)=>Q.createElement(ow,{ref:h,iconNode:n,className:Gg(`lucide-${sw(ug(s))}`,`lucide-${s}`,l),...d}));return r.displayName=ug(s),r};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],uw=bt("activity",cw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],hw=bt("camera",dw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],qg=bt("circle-check",fw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],mw=bt("clipboard-list",gw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],$g=bt("copy",pw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],dg=bt("image",vw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],bw=bt("layers",yw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ba=bt("loader-circle",xw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Ig=bt("play",ww);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],Vg=bt("scissors",_w);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Kg=bt("trash-2",Sw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],hg=bt("upload",Nw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Tw=bt("video",jw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],fg=bt("zap",Ew),Yc={},Aw=s=>{let n=[];if(s&&(n=s.split(`
`).map(r=>r.trim()).filter(r=>r)),n.length===0){const r=Yc==null?void 0:Yc.VITE_GEMINI_API_KEY;r&&n.push(r)}return n},Cw=["gemini-2.0-flash-lite-preview-02-05","gemini-2.5-flash","gemini-2.0-flash-lite-001","gemini-2.0-flash-exp","gemini-2.0-flash-001","gemini-2.0-flash","gemini-2.5-pro","gemini-flash-latest"],xs=async(s,n)=>{const r=Aw(s);if(r.length===0)throw new Error("No API Keys provided.");let l;for(const d of r){const h=new ll(d);for(const f of Cw)try{const m=h.getGenerativeModel({model:f});return await n(m)}catch(m){console.warn(`Failed: Key(...${d.slice(-4)}) Model(${f}) error: ${m.message}`),l=m}}throw l||new Error("All keys and models failed to generate content.")},kw=async(s,n)=>xs(n,async r=>(await r.generateContent([{inlineData:{mimeType:"image/jpeg",data:s}},{text:"Analyze this image and describe its visual style in detail (lighting, color palette, texture, composition, atmosphere). Provide a concise but comprehensive paragraph suitable for an image generation prompt style reference."}])).response.text()||"No analysis found."),Ow=async(s,n)=>xs(n,async r=>{const l={type:Zt.ARRAY,items:{type:Zt.OBJECT,properties:{name:{type:Zt.STRING},gender:{type:Zt.STRING},country:{type:Zt.STRING},age:{type:Zt.STRING},physique:{type:Zt.STRING},features:{type:Zt.STRING}},required:["name","gender","country","age","physique","features"]}},d=`Analyze the following script and extract/create characters. For each character, provide: Name, Gender, Country, Age, Physique, and Detailed Facial Features. 
        
        CRITICAL RULES:
        1. If details are missing in the script (Gender, Country, Age, Physique, or Face), you MUST creatively generate them to make the character visually distinct.
        2. Focus HEAVILY on specific facial features: eye shape/color, nose shape, skin texture, wrinkles, hair style/texture/color, and any unique facial markings.
        3. ABSOLUTELY NO clothing, NO personality traits, and NO equipment.
        4. Format the 'features' field as descriptive sentences about the face and hair only.
        
        Example structure: "Mi tc en bng mt vi nhng si bc thanh lch c bi cht thnh kiu tc truyn thng gn gng. Ln da mn mng. i mt nu sm hnh qu hnh m p, np nhn nh quanh khe mt, chic mi nh nhn, thanh t."
        
        Output in JSON format as an array of objects. Script: ${s}`,h=await r.generateContent({contents:[{role:"user",parts:[{text:d}]}],generationConfig:{responseMimeType:"application/json",responseSchema:l}});return JSON.parse(h.response.text()||"[]")}),Rw=async(s,n)=>xs(n,async r=>{var f;const l=`Bn l chuyn gia phn tch kch bn. Hy m s lng "hnh ng th gic" (visual actions) chnh trong kch bn di y.
        
        QUY TC:
        1. Ch m cc hnh ng c th c th dng thnh hnh nh (v d: "chy", "cm bento", "nhn xa xm").
        2. B qua cc li dn truyn (narration) mang tnh suy tng v cc suy ngh ni tm khng th hin qua hnh ng/biu cm.
        3. Tr v DUY NHT mt con s.
        
        KCH BN:
        ${s}`,d=await r.generateContent(l),h=parseInt(((f=d.response.text())==null?void 0:f.trim())||"0");return isNaN(h)?0:h}),Uw=async(s,n,r)=>xs(r,async l=>{const d=`Bn l mt cng c chia kch bn chuyn nghip. Hy chia kch bn di y thnh ng ${n} hng.
        
        CC QUY TC TI THNG:
        1. CH TR V CC HNG KCH BN. Khng c bt k cu dn nhp no.
        2. GI NGUYN 100% VN BN GC. Tuyt i khng xa b, khng chnh sa, khng thm bt bt k k t no.
        3. Tr v ng ${n} dng, mi dng l mt phn on logic.
        
        KCH BN:
        ${s}`;return((await l.generateContent(d)).response.text()||"").trim().split(`
`).filter(m=>m.trim().length>0)}),Mw=async(s,n,r,l,d)=>xs(d,async h=>{const m=`Bn l ZenShot AI - Mt Visual Director k lut st . Nhim v ca bn l chuyn i kch bn thnh Image Prompts cho Midjourney.
    
    QUY TC CT LI (BT BUC TUN TH 100%):
    1. NH DNG: Mi prompt phi nm trn MT HNG DUY NHT (Single line). Khng xung dng bn trong mt prompt.
    2. KHNG TM TT: Copy-paste NGUYN VN m t nhn vt t d liu bn di.
    3. B NH TRNG THI:
       - Nu c thng tin cnh trc (Previous Context), hy k tha trang phc v bi cnh t  tr khi kch bn thay i.
       - Lun duy tr tnh nht qun v qun o v bi cnh cho cc phn on lin tip.
    4. CU TRC PROMPT (Vit lin thnh 1 on vn): 
       [Phong cch/Gc my] + [Hnh ng/Biu cm] + [Tn nhn vt: M t chi tit nguyn vn] + [Trang phc hin ti] + [Bi cnh chi tit] + --ar 16:9
    
    D LIU NHN VT:
    ${r.map(b=>`${b.name}: ${b.gender}, ${b.country}, ${b.age}, ${b.physique}. ${b.features}`).join(`
`)}
    
    PHONG CCH VISUAL:
    ${n}
    
    BI CNH/TRANG PHC CA CC TAG TRC (NU C):
    ${l||"Khng c cnh trc."}
    
    HY TO PROMPT CHO CC PHN ON SAU (Mi prompt 1 hng):
    ${s.map((b,x)=>`Row ${x+1}: ${b}`).join(`
`)}
    
    Ch tr v danh sch cc prompt. Mi prompt l 1 hng.`;return{prompts:((await h.generateContent(m)).response.text()||"").split(`
`).filter(b=>b.trim().length>0)}}),Dw=async(s,n,r,l,d)=>xs(d,async h=>{const m=`Bn l o din hnh nh (Visual Director) chuyn v Video/Cinematic. Nhim v ca bn l phn tch ni dung on "Hook" v to Video Prompts (din t chuyn ng).
    
    YU CU CHI TIT:
    1. PHN TCH HNH NG: Mi hnh ng c th trong on Hook phi c mt prompt ring bit.
    2. NG B NHN VT: Copy-paste NGUYN VN m t nhn vt t d liu bn di khi nhn vt  xut hin trong hnh ng.
    3. CHUYN NG (MOTION): M t r loi chuyn ng (v d: "Slo-mo walking", "Cinematic drone shot following", "Close-up of facial expression change").
    4. BI CNH/TRANG PHC: K tha t thng tin bi cnh  cung cp.
    5. NH DNG: Mi prompt l 1 hng duy nht.
    
    CU TRC PROMPT:
    [Loi chuyn ng/Gc my] + [Hnh ng nhn vt] + [M t nhn vt chi tit] + [Trang phc & Bi cnh]
    
    D LIU NHN VT:
    ${r.map(p=>`${p.name}: ${p.gender}, ${p.country}, ${p.age}, ${p.physique}. ${p.features}`).join(`
`)}
    
    PHONG CCH VISUAL:
    ${n}
    
    BI CNH/TRANG PHC K THA:
    ${l||"T do sng to da trn khng kh chung."}
    
    NI DUNG ON HOOK CN X L:
    ${s}
    
    Ch tr v danh sch cc prompt video, mi prompt mt hng.`;return((await h.generateContent(m)).response.text()||"").split(`
`).filter(p=>p.trim().length>0)});class zw extends Q.Component{constructor(n){super(n),this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("ErrorBoundary caught error:",n,r)}render(){var n;return this.state.hasError?c.jsxs("div",{className:"p-8 m-8 bg-slate-900 border border-slate-700 rounded-3xl space-y-4 text-center text-white",children:[c.jsx("h2",{className:"text-xl font-bold text-rose-500",children:" xy ra li hin th"}),c.jsx("p",{className:"text-slate-300",children:(n=this.state.error)==null?void 0:n.message}),c.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"px-6 py-3 bg-white text-slate-900 font-bold rounded-xl hover:bg-slate-200 transition-all",children:"Th li"}),c.jsx("p",{className:"text-xs text-slate-500",children:"D liu vn c lu trong b nh tm."})]}):this.props.children}}const Lw=({userId:s})=>{const[n,r]=Q.useState({visualStyle:"",script:"",characters:[],tags:[],hook:"",hookPrompts:[],isAnalyzing:!1,isProcessingScript:!1,isGeneratingHook:!1}),[l,d]=Q.useState(!1),[h,f]=Q.useState(!1),[m,v]=Q.useState(""),[p,b]=Q.useState(null),[x,w]=Q.useState(null),N=(k,B="info")=>{w({message:k,type:B}),setTimeout(()=>w(null),5e3)};Q.useEffect(()=>{if(s)try{const k=`app_api_keys_${s}`,B=localStorage.getItem(k);if(B){const _=JSON.parse(B),W=atob(_.gemini||"").split(`
`).map(ae=>ae.trim()).filter(ae=>ae);v(W.join(`
`))}}catch(k){console.error("Failed to load API key",k)}},[s]);const C=Q.useRef(n.tags);Q.useEffect(()=>{C.current=n.tags},[n.tags]);const H=k=>new Promise(B=>setTimeout(B,k)),A=async k=>{var I;const B=(I=k.target.files)==null?void 0:I[0];if(!B)return;d(!0);const _=new FileReader;_.onload=async W=>{var T;const ae=(T=W.target)==null?void 0:T.result;b(ae);const we=ae.split(",")[1];try{const V=await kw(we,m);r(X=>({...X,visualStyle:V}))}catch(V){N(`Li phn tch style: ${V.message||V}`,"error")}finally{d(!1)}},_.readAsDataURL(B)},R=async()=>{if(n.script){r(k=>({...k,isProcessingScript:!0}));try{const k=await Ow(n.script,m);r(B=>({...B,characters:k,isProcessingScript:!1}))}catch(k){N(`Li x l kch bn: ${k.message||k}`,"error"),r(B=>({...B,isProcessingScript:!1}))}}},U=k=>{const B=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf\uac00-\ud7af]/.test(k),_=[];let I=k;const W=B?1800:1200,ae=B?2e3:1500,we=B?[`
`,"","","",".","!","?"]:[`
`,".","!","?"];for(;I.length>0;)if(B){if(I.length<=ae){_.push(I);break}let T=I.slice(W,ae),V=-1;for(const X of we){const F=T.lastIndexOf(X);F>V&&(V=F)}if(V!==-1){const X=W+V+1;_.push(I.slice(0,X)),I=I.slice(X)}else _.push(I.slice(0,ae)),I=I.slice(ae)}else{const T=I.split(/(\s+)/);let V=0,X=0,F=-1,ce=!1;for(let fe=0;fe<T.length;fe++){const xe=T[fe];/\S/.test(xe)&&V++;const Le=X;if(X+=xe.length,V>=W&&V<=ae&&we.some(Yt=>xe.includes(Yt))&&(F=X),V>ae){const Yt=F!==-1?F:Le;_.push(I.slice(0,Yt)),I=I.slice(Yt),ce=!0;break}}if(!ce){_.push(I);break}}return _},q=()=>{if(!n.script)return;const B=U(n.script).map((_,I)=>({id:`tag-${Date.now()}-${I}`,originalContent:_,rows:[_],imageCount:10,prompts:[],status:"idle"}));r(_=>({..._,tags:B}))},j=(k,B)=>{r(_=>({..._,tags:_.tags.map(I=>I.id===k?{...I,...B}:I)}))},M=(k,B)=>{r(_=>({..._,characters:_.characters.map((I,W)=>W===k?{...I,...B}:I)}))},$=async k=>{const B=C.current.find(_=>_.id===k);if(!B)return!1;j(k,{status:"splitting"});try{const _=await Uw(B.originalContent,B.imageCount,m);return j(k,{rows:_,status:"ready"}),!0}catch(_){return console.error(`Error splitting rows for TAG: ${k}`,_),N(`Li chia hng: ${_.message||_}`,"error"),j(k,{status:"idle"}),!1}},J=async k=>{const B=C.current,_=B.findIndex(ae=>ae.id===k);if(_===-1)return!1;const I=B[_];let W="";if(_>0){const ae=B[_-1];ae&&ae.prompts.length>0&&(W=`y l prompt cui ca Tag trc  bn k tha bi cnh v trang phc: ${ae.prompts[ae.prompts.length-1]}`)}j(k,{status:"generating"});try{const ae=await Mw(I.rows,n.visualStyle,n.characters,W,m);if(!ae.prompts||ae.prompts.length===0)throw new Error("Empty prompts generated");return j(k,{prompts:ae.prompts,status:"ready"}),!0}catch(ae){return console.error(`Error generating prompts for TAG: ${k}`,ae),j(k,{status:"ready"}),!1}},Z=async()=>{if(!n.hook||n.characters.length===0){N("Vui lng nhp ni dung Hook v m bo  phn tch nhn vt.","info");return}r(_=>({..._,isGeneratingHook:!0}));let k="";const B=n.tags[n.tags.length-1];B&&B.prompts.length>0&&(k=`K tha bi cnh t prompt ny: ${B.prompts[B.prompts.length-1]}`);try{const _=await Dw(n.hook,n.visualStyle,n.characters,k,m);r(I=>({...I,hookPrompts:_,isGeneratingHook:!1}))}catch(_){N(`Li to Prompt Video Hook: ${_.message||_}`,"error"),r(I=>({...I,isGeneratingHook:!1}))}},te=async k=>{const B=n.tags.find(_=>_.id===k);if(B){j(k,{status:"analyzing"});try{const _=await Rw(B.originalContent,m);j(k,{actionCount:_,status:"idle"})}catch(_){N(`Li phn tch hnh ng: ${_.message||_}`,"error"),j(k,{status:"idle"})}}},he=async()=>{if(n.tags.length===0)return;f(!0);const k=n.tags.map(B=>B.id);for(const B of k){if(!await $(B)&&!await $(B))break;await H(1e4);let I=await J(B);if(I||(await H(1e4),I=await J(B)),!I&&!confirm(`TAG ${B} khng th to prompt sau 2 ln th. Bn c mun tip tc cc TAG sau khng?`))break;await H(1e4)}f(!1),N("Hon thnh quy trnh t ng cho tt c cc TAG!","success")},ke=()=>{const B=n.tags.flatMap(_=>(_.status==="ready"||_.status==="generating"?_.rows.join(`
`):_.originalContent).split(`
`).map(W=>W.trim()).filter(W=>W.length>0)).join(`
`);navigator.clipboard.writeText(B),N(" copy ton b kch bn ca tt c cc TAG!","success")},qe=()=>{const k=n.tags.flatMap(B=>B.prompts).map(B=>B.trim()).filter(B=>B.length>0).join(`
`);navigator.clipboard.writeText(k),N(" copy ton b Prompt ca tt c cc TAG!","success")},dt=()=>{const k=n.hookPrompts.join(`
`);navigator.clipboard.writeText(k),N(" copy Prompt Video cho Hook!","success")};return c.jsx(zw,{children:c.jsxs("div",{className:"flex h-screen bg-slate-50 overflow-hidden text-slate-900 w-full relative",children:[x&&c.jsx("div",{className:"absolute top-4 right-4 z-50 animate-in slide-in-from-right fade-in duration-300",children:c.jsxs("div",{className:`px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-3 font-bold text-sm ${x.type==="error"?"bg-rose-50 text-rose-600 border border-rose-100":x.type==="success"?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-white text-slate-700 border border-slate-100"}`,children:[x.type==="success"&&c.jsx(qg,{className:"w-5 h-5"}),x.type==="error"&&c.jsx(Kg,{className:"w-5 h-5"}),x.message]})}),c.jsxs("aside",{className:"w-[30%] bg-white border-r border-slate-200 overflow-y-auto p-6 space-y-8 flex flex-col shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg",children:c.jsx(hw,{className:"text-white w-6 h-6"})}),c.jsx("h1",{className:"text-xl font-black text-slate-800 tracking-tight uppercase",children:"ZenShot AI"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-slate-500 uppercase tracking-widest",children:[c.jsx(dg,{className:"w-3.5 h-3.5"})," Phong cch hnh nh"]}),c.jsxs("div",{className:`border-2 border-dashed border-slate-200 rounded-xl p-4 transition hover:border-indigo-400 bg-slate-50/50 relative group overflow-hidden ${p?"border-none p-0":""}`,children:[c.jsx("input",{type:"file",accept:"image/*",onChange:A,className:"hidden",id:"image-upload"}),c.jsx("label",{htmlFor:"image-upload",className:`cursor-pointer flex flex-col items-center justify-center gap-2 py-2 w-full h-full ${p?"p-0":""}`,children:l?c.jsxs("div",{className:"py-8 flex flex-col items-center",children:[c.jsx(ba,{className:"animate-spin text-indigo-500 w-8 h-8"}),c.jsx("span",{className:"text-[10px] text-indigo-500 font-bold mt-2 uppercase tracking-wider",children:"ang phn tch..."})]}):p?c.jsxs("div",{className:"relative w-full h-48",children:[c.jsx("img",{src:p,alt:"Style Reference",className:"w-full h-full object-cover rounded-lg shadow-sm"}),c.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-lg",children:c.jsxs("div",{className:"flex items-center gap-2 text-white text-xs font-bold uppercase tracking-widest bg-black/50 px-3 py-2 rounded-full backdrop-blur-sm border border-white/20",children:[c.jsx(hg,{className:"w-3 h-3"})," Thay i nh"]})})]}):c.jsxs(c.Fragment,{children:[c.jsx(hg,{className:"text-slate-400 w-6 h-6"}),c.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-tighter",children:"Phn tch phong cch qua nh"})]})})]}),c.jsx("textarea",{className:"w-full h-24 p-3 text-sm bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none transition placeholder:italic",placeholder:"Phong cch chi tit s hin  y...",value:n.visualStyle,onChange:k=>r(B=>({...B,visualStyle:k.target.value}))})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"flex items-center gap-2 text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Nhp kch bn chnh"}),c.jsx("textarea",{className:"w-full h-40 p-3 text-sm border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none transition leading-relaxed",placeholder:"Dn kch bn ca bn vo y...",value:n.script,onChange:k=>r(B=>({...B,script:k.target.value}))}),c.jsxs("button",{onClick:R,disabled:n.isProcessingScript||!n.script,className:"w-full flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-300 text-white font-bold py-3.5 px-4 rounded-xl transition shadow-lg shadow-indigo-100 uppercase text-xs tracking-widest",children:[n.isProcessingScript?c.jsx(ba,{className:"animate-spin w-4 h-4"}):c.jsx(Ig,{className:"w-4 h-4 fill-current"}),"Bt u phn tch kch bn"]})]}),n.characters.length>0&&c.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-100",children:[c.jsx("label",{className:"flex items-center gap-2 text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Thng tin nhn vt (C th chnh sa)"}),c.jsx("div",{className:"space-y-4 max-h-[500px] overflow-y-auto pr-1",children:n.characters.map((k,B)=>c.jsxs("div",{className:"p-4 bg-white rounded-xl border border-slate-200 shadow-sm relative overflow-hidden transition hover:border-indigo-300 group",children:[c.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-indigo-500"}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("input",{className:"font-black text-slate-800 text-[11px] uppercase bg-transparent border-none p-0 focus:ring-0",value:k.name,onChange:_=>M(B,{name:_.target.value})}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsx("input",{className:"text-[10px] bg-slate-50 border border-slate-100 rounded px-2 py-1 focus:ring-1 focus:ring-indigo-400",value:k.gender,placeholder:"Gender",onChange:_=>M(B,{gender:_.target.value})}),c.jsx("input",{className:"text-[10px] bg-slate-50 border border-slate-100 rounded px-2 py-1 focus:ring-1 focus:ring-indigo-400",value:k.age,placeholder:"Age",onChange:_=>M(B,{age:_.target.value})})]}),c.jsx("textarea",{className:"text-[10px] text-slate-700 leading-relaxed font-medium bg-slate-50 border border-slate-100 rounded p-2 focus:ring-1 focus:ring-indigo-400 resize-none h-20",value:k.features,onChange:_=>M(B,{features:_.target.value})})]})]},B))})]}),c.jsx("div",{className:"mt-auto pt-6",children:c.jsxs("button",{onClick:q,disabled:!n.script,className:"w-full flex items-center justify-center gap-2 bg-slate-800 hover:bg-slate-900 text-white font-bold py-3.5 px-4 rounded-xl transition uppercase text-xs tracking-widest",children:[c.jsx(Vg,{className:"w-4 h-4"}),"Chia kch bn sang TAG"]})})]}),c.jsxs("main",{className:"flex-1 overflow-y-auto bg-slate-50 scroll-smooth flex flex-col",children:[n.tags.length>0&&c.jsxs("div",{className:"sticky top-0 z-10 bg-white/80 backdrop-blur-md border-b border-slate-200 px-8 py-4 flex items-center justify-between shadow-sm",children:[c.jsx("div",{className:"flex items-center gap-3",children:c.jsxs("button",{onClick:he,disabled:h,className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-300 text-white px-5 py-2.5 rounded-xl font-black text-[11px] uppercase tracking-widest shadow-lg shadow-indigo-100 transition-all active:scale-95",children:[h?c.jsx(ba,{className:"animate-spin w-4 h-4"}):c.jsx(fg,{className:"w-4 h-4 fill-amber-400 text-amber-400"}),"T ng Hon Ton"]})}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("button",{onClick:ke,className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-900 text-white px-5 py-2.5 rounded-xl font-black text-[11px] uppercase tracking-widest transition-all active:scale-95",children:[c.jsx(mw,{className:"w-4 h-4"}),"Copy All Kch Bn"]}),c.jsxs("button",{onClick:qe,className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-900 text-white px-5 py-2.5 rounded-xl font-black text-[11px] uppercase tracking-widest transition-all active:scale-95",children:[c.jsx(bw,{className:"w-4 h-4"}),"Copy All Prompt nh"]})]})]}),c.jsx("div",{className:"max-w-4xl mx-auto space-y-8 p-8 w-full",children:n.tags.length===0?c.jsxs("div",{className:"h-[70vh] flex flex-col items-center justify-center text-slate-300 space-y-6",children:[c.jsx("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center shadow-sm border border-slate-100",children:c.jsx(dg,{className:"w-10 h-10 opacity-40"})}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-xl font-bold text-slate-400",children:"ZenShot Visual Director"}),c.jsx("p",{className:"text-sm text-slate-400 mt-1 uppercase tracking-widest font-bold opacity-60",children:"Split script and start generating prompts"})]})]}):c.jsxs(c.Fragment,{children:[n.tags.map((k,B)=>c.jsx(Hw,{tag:k,index:B,onSplit:()=>$(k.id),onAnalyze:()=>te(k.id),onGenerate:()=>J(k.id),onUpdateCount:_=>j(k.id,{imageCount:_}),onCopy:()=>{const _=k.prompts.map(I=>I.trim()).join(`
`);navigator.clipboard.writeText(_),N("Copied prompts for this TAG!","success")},onUpdateContent:_=>j(k.id,{originalContent:_}),onDelete:()=>r(_=>({..._,tags:_.tags.filter(I=>I.id!==k.id)}))},k.id)),c.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden transition hover:shadow-lg mt-12 mb-20 p-8 space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between border-b border-slate-50 pb-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"bg-amber-500 text-white text-[10px] font-black px-3 py-1 rounded-full uppercase tracking-widest",children:"VIDEO HOOK"}),c.jsx("h2",{className:"text-sm font-black text-slate-800 uppercase tracking-widest",children:"Phn tch chuyn ng"})]}),c.jsx(Tw,{className:"w-5 h-5 text-slate-300"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Ni dung on Hook"}),c.jsx("textarea",{className:"w-full h-40 p-4 text-sm bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:outline-none resize-none leading-relaxed transition font-medium",placeholder:"Nhp ni dung on Hook kch bn ti y...",value:n.hook,onChange:k=>r(B=>({...B,hook:k.target.value}))})]}),n.hookPrompts.length>0&&c.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Prompts Video Chuyn ng"}),c.jsxs("button",{onClick:dt,className:"flex items-center gap-1.5 text-amber-600 hover:text-amber-700 text-[10px] font-black px-4 py-2 bg-amber-50 rounded-xl transition uppercase tracking-widest shadow-sm shadow-amber-50",children:[c.jsx($g,{className:"w-3.5 h-3.5"})," Copy Hook Prompts"]})]}),c.jsx("div",{className:"space-y-4",children:n.hookPrompts.map((k,B)=>c.jsxs("div",{className:"p-4 bg-slate-900 rounded-xl border border-slate-800 relative group transition hover:border-amber-500 shadow-lg",children:[c.jsx("div",{className:"absolute -left-3 top-4 w-7 h-7 bg-amber-500 text-white flex items-center justify-center text-[10px] font-black rounded-full border-2 border-slate-50 shadow-md",children:B+1}),c.jsx("p",{className:"text-slate-300 text-[11px] font-mono break-words leading-relaxed pl-4",children:k})]},B))})]}),c.jsxs("button",{onClick:Z,disabled:n.isGeneratingHook||!n.hook,className:"w-full flex items-center justify-center gap-2 bg-slate-800 hover:bg-slate-900 disabled:bg-slate-300 text-white font-black py-4.5 rounded-2xl transition shadow-xl shadow-slate-200 uppercase text-xs tracking-[0.2em]",children:[n.isGeneratingHook?c.jsx(ba,{className:"animate-spin w-5 h-5"}):c.jsx(fg,{className:"w-5 h-5 fill-amber-400 text-amber-400"}),"To Prompt Video"]})]})]})})]})]})})},Hw=({tag:s,index:n,onSplit:r,onAnalyze:l,onGenerate:d,onUpdateCount:h,onCopy:f,onUpdateContent:m,onDelete:v})=>c.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden transition hover:shadow-lg",children:[c.jsxs("div",{className:"px-6 py-4 bg-slate-50/80 border-b border-slate-100 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("span",{className:"bg-slate-800 text-white text-[10px] font-black px-3 py-1 rounded-full uppercase tracking-widest",children:["TAG ",n+1]}),c.jsxs("span",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:[s.originalContent.length," k t"]})]}),c.jsx("button",{onClick:v,className:"text-slate-300 hover:text-red-500 transition p-1",children:c.jsx(Kg,{className:"w-4 h-4"})})]}),c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Kch bn phn on"}),c.jsxs("div",{className:"relative group",children:[c.jsx("textarea",{className:"w-full h-40 p-4 text-sm bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:outline-none resize-none leading-relaxed transition font-medium",value:s.status==="ready"||s.status==="generating"?s.rows.join(`
`):s.originalContent,readOnly:s.status==="ready"||s.status==="generating",onChange:p=>m(p.target.value)}),(s.status==="ready"||s.status==="generating")&&s.rows.length>1&&c.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-1.5 bg-white text-emerald-600 px-3 py-1.5 rounded-lg text-[10px] font-black border border-emerald-100 shadow-sm uppercase",children:[c.jsx(qg,{className:"w-3 h-3"})," Chia hng xong"]})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-6 items-end border-y border-slate-50 py-4",children:[c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[c.jsx(uw,{className:"w-3 h-3"})," Phn tch hnh ng"]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:l,disabled:s.status==="analyzing",className:"flex items-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-800 text-[10px] font-black rounded-lg transition uppercase tracking-widest",children:s.status==="analyzing"?c.jsx(ba,{className:"animate-spin w-3 h-3"}):"Phn tch"}),s.actionCount!==void 0&&c.jsxs("div",{className:"flex items-center gap-1.5 text-indigo-600 font-black text-sm",children:[c.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:"S hnh ng:"})," ",s.actionCount]})]})]}),c.jsxs("div",{className:"w-40 space-y-2",children:[c.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"S lng nh"}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx("button",{onClick:()=>h(Math.max(1,s.imageCount-1)),className:"absolute left-1 w-7 h-7 flex items-center justify-center bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-lg font-bold",children:"-"}),c.jsx("input",{type:"number",min:"1",max:"100",className:"w-full h-10 px-8 text-center border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:outline-none font-bold text-slate-700",value:s.imageCount,onChange:p=>h(parseInt(p.target.value)||1)}),c.jsx("button",{onClick:()=>h(s.imageCount+1),className:"absolute right-1 w-7 h-7 flex items-center justify-center bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-lg font-bold",children:"+"})]})]}),c.jsxs("button",{onClick:r,disabled:s.status==="splitting",className:"h-10 px-6 flex items-center justify-center gap-2 bg-slate-800 hover:bg-slate-900 text-white font-bold rounded-xl transition uppercase text-[10px] tracking-widest shadow-sm",children:[s.status==="splitting"?c.jsx(ba,{className:"animate-spin w-3 h-3"}):c.jsx(Vg,{className:"w-3 h-3"}),"Chia hng"]})]}),s.prompts.length>0&&c.jsxs("div",{className:"space-y-4 pt-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Prompts Midjourney"}),c.jsxs("button",{onClick:f,className:"flex items-center gap-1.5 text-indigo-600 hover:text-indigo-700 text-[10px] font-black px-4 py-2 bg-indigo-50 rounded-xl transition uppercase tracking-widest shadow-sm shadow-indigo-50",children:[c.jsx($g,{className:"w-3.5 h-3.5"})," Sao chp Tag ny"]})]}),c.jsx("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar",children:s.prompts.map((p,b)=>c.jsxs("div",{className:"p-4 bg-slate-900 rounded-xl border border-slate-800 relative group transition hover:border-indigo-500 shadow-lg",children:[c.jsx("div",{className:"absolute -left-3 top-4 w-7 h-7 bg-indigo-600 text-white flex items-center justify-center text-[10px] font-black rounded-full border-2 border-slate-50 shadow-md",children:b+1}),c.jsx("p",{className:"text-slate-300 text-[11px] font-mono break-words leading-relaxed pl-4",children:p})]},b))})]}),c.jsxs("button",{onClick:d,disabled:s.status==="generating",className:"w-full flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-300 text-white font-black py-4.5 rounded-2xl transition shadow-xl shadow-indigo-200 uppercase text-xs tracking-[0.2em]",children:[s.status==="generating"?c.jsx(ba,{className:"animate-spin w-5 h-5"}):c.jsx(Ig,{className:"w-5 h-5 fill-current"}),"To Prompt nh"]})]})]}),Bw=Q.forwardRef(({value:s,onChange:n,className:r=""},l)=>{const d=Q.useRef(null),h=Q.useRef(null);Q.useEffect(()=>{d.current&&d.current.innerHTML!==s&&(s===""&&d.current.innerHTML!==""?d.current.innerHTML="":d.current.innerHTML===""&&s&&(d.current.innerHTML=s))},[s]),Q.useImperativeHandle(l,()=>({insertText:b=>{m(),document.execCommand("insertText",!1,b),p()}}));const f=()=>{const b=window.getSelection();b&&b.rangeCount>0&&d.current&&d.current.contains(b.anchorNode)&&(h.current=b.getRangeAt(0))},m=()=>{var x;const b=window.getSelection();b&&h.current?(b.removeAllRanges(),b.addRange(h.current)):(x=d.current)==null||x.focus()},v=(b,x=void 0)=>{document.execCommand(b,!1,x),p()},p=()=>{d.current&&n(d.current.innerHTML),f()};return c.jsxs("div",{className:`border border-slate-700 rounded-lg overflow-hidden flex flex-col ${r}`,children:[c.jsxs("div",{className:"bg-slate-800 border-b border-slate-700 p-2 flex gap-1 flex-wrap",children:[c.jsx("button",{onMouseDown:b=>{b.preventDefault(),v("bold")},className:"p-1 px-2 text-slate-300 hover:bg-white/10 rounded font-bold",type:"button",title:"Bold",children:"B"}),c.jsx("button",{onMouseDown:b=>{b.preventDefault(),v("italic")},className:"p-1 px-2 text-slate-300 hover:bg-white/10 rounded italic",type:"button",title:"Italic",children:"I"}),c.jsx("button",{onMouseDown:b=>{b.preventDefault(),v("underline")},className:"p-1 px-2 text-slate-300 hover:bg-white/10 rounded underline",type:"button",title:"Underline",children:"U"}),c.jsx("div",{className:"w-px h-6 bg-slate-600 mx-1 self-center"}),c.jsx("button",{onMouseDown:b=>{b.preventDefault(),v("justifyLeft")},className:"p-1 px-2 text-slate-300 hover:bg-white/10 rounded",type:"button",title:"Align Left",children:""}),c.jsx("button",{onMouseDown:b=>{b.preventDefault(),v("justifyCenter")},className:"p-1 px-2 text-slate-300 hover:bg-white/10 rounded",type:"button",title:"Align Center",children:""}),c.jsx("button",{onMouseDown:b=>{b.preventDefault(),v("justifyRight")},className:"p-1 px-2 text-slate-300 hover:bg-white/10 rounded",type:"button",title:"Align Right",children:""}),c.jsx("div",{className:"w-px h-6 bg-slate-600 mx-1 self-center"}),c.jsx("button",{onMouseDown:b=>{b.preventDefault();const x=prompt("Nhp ng dn URL:");x&&v("createLink",x)},className:"p-1 px-2 text-slate-300 hover:bg-white/10 rounded text-blue-400",type:"button",title:"Link",children:"Link"}),c.jsxs("select",{onChange:b=>v("formatBlock",b.target.value),className:"bg-slate-700 text-white text-xs rounded px-2 py-1 outline-none border border-slate-600",children:[c.jsx("option",{value:"p",children:"Normal"}),c.jsx("option",{value:"h3",children:"Heading 1"}),c.jsx("option",{value:"h4",children:"Heading 2"}),c.jsx("option",{value:"blockquote",children:"Quote"})]})]}),c.jsx("div",{ref:d,contentEditable:!0,onInput:p,onBlur:f,onMouseUp:f,onKeyUp:f,className:"flex-grow bg-slate-900 text-white p-4 outline-none min-h-[150px] overflow-auto prose prose-invert prose-sm max-w-none"})]})}),Gw=({currentImage:s,onImageUploaded:n,onClear:r})=>{const[l,d]=Q.useState(s||null),[h,f]=Q.useState(!1),[m,v]=Q.useState(null),p=Q.useRef(null),b=Q.useRef(null);Q.useEffect(()=>{d(s||null)},[s]),Q.useEffect(()=>{const A=R=>{if(R.clipboardData&&R.clipboardData.items){const U=R.clipboardData.items;for(let q=0;q<U.length;q++)if(U[q].type.indexOf("image")!==-1){const j=U[q].getAsFile();j&&w(j);break}}};return window.addEventListener("paste",A),()=>window.removeEventListener("paste",A)},[]);const x=A=>A.type.startsWith("image/")?A.size>5*1024*1024?(v("Dung lng hnh nh phi di 5MB."),!1):!0:(v("Ch chp nhn file hnh nh (JPG, PNG, GIF, WEBP)."),!1),w=async A=>{if(v(null),!x(A))return;const R=URL.createObjectURL(A);d(R),f(!0);try{const U=await Ix(A,"images");n(U),f(!1)}catch(U){console.error("Upload error:",U);let q="C li xy ra khi ti nh ln.";U.message&&(q=U.message),v(q),f(!1)}},N=A=>{A.target.files&&A.target.files[0]&&w(A.target.files[0])},C=A=>{A.preventDefault(),A.stopPropagation(),A.dataTransfer.files&&A.dataTransfer.files[0]&&w(A.dataTransfer.files[0])},H=A=>{A.preventDefault(),A.stopPropagation()};return c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400",children:"Hnh nh i din (Ti a 5MB)"}),l?c.jsxs("div",{className:"relative group rounded-xl overflow-hidden border border-slate-700 bg-slate-900",children:[c.jsx("img",{src:l,alt:"Preview",className:"w-full h-48 object-cover opacity-80 group-hover:opacity-100 transition-opacity"}),c.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-3",children:[c.jsx("button",{onClick:()=>{var A;return(A=p.current)==null?void 0:A.click()},className:"bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-1.5 rounded text-xs font-bold",children:"Thay i"}),c.jsx("button",{onClick:()=>{d(null),r()},className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded text-xs font-bold",children:"Xa"})]}),h&&c.jsxs("div",{className:"absolute inset-0 bg-black/70 flex flex-col items-center justify-center z-10",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mb-2"}),c.jsx("span",{className:"text-white text-xs font-bold mb-2",children:"ang ti ln Supabase..."})]})]}):c.jsxs("div",{ref:b,onDrop:C,onDragOver:H,className:"border-2 border-dashed border-slate-700 hover:border-indigo-500 bg-slate-800/50 hover:bg-slate-800 rounded-xl p-8 text-center cursor-pointer transition-all flex flex-col items-center justify-center gap-2 group",onClick:()=>{var A;return(A=p.current)==null?void 0:A.click()},tabIndex:0,children:[c.jsx("svg",{className:"w-8 h-8 text-slate-500 group-hover:text-indigo-400 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c.jsxs("div",{children:[c.jsx("span",{className:"text-indigo-400 font-bold text-sm",children:"Upload File"}),c.jsx("span",{className:"text-slate-500 text-sm",children:" hoc ko th vo y"})]}),c.jsx("div",{className:"text-[10px] text-slate-500 uppercase font-bold tracking-widest mt-1",children:"H tr Paste (Ctrl+V)"})]}),m&&c.jsx("div",{className:"text-red-400 text-xs font-bold bg-red-400/10 p-2 rounded",children:m}),c.jsx("input",{type:"file",ref:p,onChange:N,accept:"image/*",className:"hidden"})]})},qw=({news:s,formatDate:n,onImageClick:r})=>{const[l,d]=Q.useState(!1),m=(p=>{const b=document.createElement("DIV");return b.innerHTML=p,b.textContent||b.innerText||""})(s.content).split(/\s+/).filter(p=>p.length>0),v=m.length>50;return c.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:[c.jsx("h3",{className:"text-xl font-bold text-indigo-700 mb-2",children:s.title}),c.jsxs("div",{className:"text-xs text-gray-400 mb-4",children:[n(s.date)," | Bi ",s.author]}),s.imageUrl&&c.jsx("div",{className:"mb-4 rounded-xl overflow-hidden cursor-zoom-in shadow-sm hover:shadow-md transition-all",children:c.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-full h-auto object-cover hover:scale-105 transition-transform duration-500",onClick:p=>{p.stopPropagation(),r(s.imageUrl)}})}),c.jsx("div",{className:`prose prose-slate max-w-none ${!l&&v?"line-clamp-3":""}`,onClick:p=>{const b=p.target;b.tagName==="IMG"&&(p.stopPropagation(),r(b.src))},children:l||!v?c.jsx("div",{dangerouslySetInnerHTML:{__html:s.content},className:"[&_img]:cursor-zoom-in [&_img]:rounded-lg [&_img]:shadow-sm hover:[&_img]:shadow-md [&_img]:transition-all"}):c.jsx("div",{children:c.jsxs("p",{children:[m.slice(0,50).join(" "),"..."]})})}),v&&c.jsx("button",{onClick:()=>d(!l),className:"mt-3 text-sm font-bold text-indigo-600 hover:text-indigo-800 underline decoration-2 underline-offset-4",children:l?"Thu gn":"Xem thm"})]})},$w=({user:s,onNavigate:n})=>{var dt;const[r,l]=Q.useState({layout:"modern",news:[],welcomeTitle:"",welcomeMessage:"",statusTitle:"",statusMessage:""}),[d,h]=Q.useState(!1),[f,m]=Q.useState({}),[v,p]=Q.useState(!1),b=Q.useRef(null),[x,w]=Q.useState(null),[N,C]=Q.useState(null);Q.useEffect(()=>{const k=localStorage.getItem("app_settings");if(k)l(JSON.parse(k));else{const B=[{id:"1",title:"Cho mng n vi Quang Huy Studio",content:"<p>H thng <b>Multi-App Engine</b>  chnh thc vn hnh. Hy chn ng dng  bt u!</p>",date:Date.now(),author:"System"}];l({layout:"modern",news:B,welcomeTitle:"Cho mng, {username}!",welcomeMessage:"H thng AI Studio cung cp cc cng c ti tn nht  t ng ha quy trnh sng to ni dung ca bn.",statusTitle:"Stable",statusMessage:"Tt c dch v API ang hot ng bnh thng.",zaloPhone:"0987654321",sidebarWidgets:[{id:"w1",type:"status",title:"Trng thi",order:0},{id:"w2",type:"shortcuts",title:"Li tt",order:1}]})}},[]),Q.useEffect(()=>{d&&w(r)},[d,r]);const H=k=>{l(k),localStorage.setItem("app_settings",JSON.stringify(k))},A=()=>{x&&(H(x),alert(" lu cu hnh thnh cng!"))},R=(k,B)=>{x&&w({...x,[k]:B})},U=()=>{if(!f.title||!f.content)return;const k={id:f.id||crypto.randomUUID(),title:f.title,content:f.content,imageUrl:f.imageUrl,date:f.date||Date.now(),author:s.username};let B=[...r.news];f.id?B=B.map(_=>_.id===f.id?k:_):B=[k,...B],H({...r,news:B}),p(!1),m({})},q=k=>{if(confirm("Bn c chc mun xa tin tc ny?")){const B=r.news.filter(_=>_.id!==k);H({...r,news:B})}},j=k=>new Date(k).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric"}),M=k=>k?k.replace("{username}",s.username||"User"):"",$=(k,B)=>{if(!x)return;const _=[...x.sidebarWidgets||[]];B==="up"&&k>0?[_[k],_[k-1]]=[_[k-1],_[k]]:B==="down"&&k<_.length-1&&([_[k],_[k+1]]=[_[k+1],_[k]]),R("sidebarWidgets",_)},J=()=>{var B;if(!x)return;const k={id:crypto.randomUUID(),type:"custom",title:"Tiu  mi",content:"<p>Ni dung ty chnh...</p>",order:((B=x.sidebarWidgets)==null?void 0:B.length)||0};R("sidebarWidgets",[...x.sidebarWidgets||[],k])},Z=k=>{var B;if(x&&confirm("Xa widget ny?")){const _=((B=x.sidebarWidgets)==null?void 0:B.filter(I=>I.id!==k))||[];R("sidebarWidgets",_)}},te=(k,B,_)=>{var W;if(!x)return;const I=((W=x.sidebarWidgets)==null?void 0:W.map(ae=>ae.id===k?{...ae,[B]:_}:ae))||[];R("sidebarWidgets",I)},he=(k,B)=>{const _=[...r.news];B==="up"&&k>0?[_[k],_[k-1]]=[_[k-1],_[k]]:B==="down"&&k<_.length-1&&([_[k],_[k+1]]=[_[k+1],_[k]]),H({...r,news:_})},ke=()=>c.jsxs("div",{className:"flex flex-col h-full overflow-y-auto",children:[r.zaloPhone&&c.jsxs("a",{href:`https://zalo.me/${r.zaloPhone}`,target:"_blank",rel:"noreferrer",className:"fixed bottom-24 right-6 z-40 bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full shadow-lg flex items-center gap-2 animate-bounce transition-transform hover:scale-110",title:"Chat Zalo",children:[c.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C6.48 2 2 5.92 2 10.5c0 2.37 1.17 4.54 3.12 6.13-.15.86-.54 1.95-1.42 2.62-.23.18-.08.57.21.57 2.39 0 4.19-1.29 4.88-1.93.7.13 1.43.21 2.21.21 5.52 0 10-3.92 10-8.5S17.52 2 12 2zm0 15c-.71 0-1.39-.07-2.04-.2-.27-.05-.54.04-.73.23-.74.72-2.12 1.58-3.73 1.66.44-.8 1.05-2.22 1.05-2.22.06-.16.03-.35-.09-.48C4.94 14.54 4 12.63 4 10.5 4 7.02 7.7 4 12 4s8 3.02 8 6.5-3.7 6.5-8 6.5z"})}),c.jsx("span",{className:"font-bold text-xs",children:r.zaloPhone})]}),c.jsxs("div",{className:"relative py-24 px-6 md:px-12 text-center overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-900 via-[#0f172a] to-slate-900 z-0"}),c.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 z-0"}),c.jsxs("div",{className:"relative z-10 space-y-6 max-w-4xl mx-auto",children:[c.jsx("span",{className:"inline-block py-1 px-3 rounded-full bg-indigo-500/20 border border-indigo-400/30 text-indigo-300 text-xs font-bold uppercase tracking-widest animate-in fade-in slide-in-from-bottom-4",children:"H thng iu hnh AI tp trung"}),c.jsx("h1",{className:"text-5xl md:text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-indigo-200 to-indigo-400 leading-tight drop-shadow-2xl animate-in zoom-in-95 duration-700",children:r.welcomeTitle?M(r.welcomeTitle):"QUANG HUY AI STUDIO"}),c.jsx("p",{className:"text-lg md:text-xl text-slate-400 font-light max-w-2xl mx-auto leading-relaxed animate-in fade-in slide-in-from-bottom-6 delay-200",children:r.welcomeMessage||"Nn tng tch hp a cng c mnh m, gip bn ti u ha quy trnh sng to Video v Hnh nh Viral ch vi mt c click."}),c.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 pt-8 animate-in fade-in slide-in-from-bottom-8 delay-300",children:[c.jsxs("button",{onClick:()=>n("video-viral"),className:"group relative px-8 py-4 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-2xl shadow-xl shadow-indigo-600/20 transition-all hover:-translate-y-1 active:scale-95 overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300 transform skew-y-12"}),"VIDEO VIRAL ENGINE"]}),c.jsx("button",{onClick:()=>n("image-script"),className:"px-8 py-4 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-white font-bold rounded-2xl shadow-xl transition-all hover:-translate-y-1 active:scale-95",children:"VISUAL SCRIPT ENGINE"})]})]})]}),c.jsxs("div",{className:"max-w-5xl mx-auto w-full px-6 py-16 space-y-12",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800 border-l-4 border-indigo-600 pl-4 uppercase tracking-wider",children:"Tin Tc Mi Nht"}),c.jsx("div",{className:"h-px bg-gray-200 flex-grow"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[r.news.map(k=>c.jsxs("div",{className:"group bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-2xl hover:border-indigo-100 transition-all",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400 mb-4 font-bold uppercase tracking-wider",children:[c.jsx("span",{children:j(k.date)}),c.jsx("span",{className:"text-indigo-500",children:k.author})]}),k.imageUrl&&c.jsx("div",{className:"mb-3 rounded-lg overflow-hidden h-40 w-full relative",children:c.jsx("img",{src:k.imageUrl,alt:k.title,className:"absolute inset-0 w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500 cursor-zoom-in",onClick:()=>C(k.imageUrl)})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3 group-hover:text-indigo-600 transition-colors line-clamp-2",children:k.title}),c.jsx("div",{className:"prose prose-sm text-gray-500 line-clamp-4 [&_img]:cursor-zoom-in",dangerouslySetInnerHTML:{__html:k.content},onClick:B=>{const _=B.target;_.tagName==="IMG"&&(B.stopPropagation(),C(_.src))}}),c.jsxs("button",{className:"mt-6 text-sm font-bold text-indigo-600 hover:text-indigo-800 flex items-center gap-2 group/btn",children:["Xem chi tit",c.jsx("svg",{className:"w-4 h-4 group-hover/btn:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})]},k.id)),r.news.length===0&&c.jsx("p",{className:"text-gray-400 italic",children:"Cha c tin tc no."})]})]})]}),qe=()=>{var k;return c.jsxs("div",{className:"h-full overflow-y-auto bg-gray-50",children:[r.zaloPhone&&c.jsxs("a",{href:`https://zalo.me/${r.zaloPhone}`,target:"_blank",rel:"noreferrer",className:"fixed bottom-24 right-6 z-40 bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-full shadow-lg flex items-center gap-2 animate-bounce transition-transform hover:scale-110",title:"Chat Zalo",children:[c.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C6.48 2 2 5.92 2 10.5c0 2.37 1.17 4.54 3.12 6.13-.15.86-.54 1.95-1.42 2.62-.23.18-.08.57.21.57 2.39 0 4.19-1.29 4.88-1.93.7.13 1.43.21 2.21.21 5.52 0 10-3.92 10-8.5S17.52 2 12 2zm0 15c-.71 0-1.39-.07-2.04-.2-.27-.05-.54.04-.73.23-.74.72-2.12 1.58-3.73 1.66.44-.8 1.05-2.22 1.05-2.22.06-.16.03-.35-.09-.48C4.94 14.54 4 12.63 4 10.5 4 7.02 7.7 4 12 4s8 3.02 8 6.5-3.7 6.5-8 6.5z"})}),c.jsxs("span",{className:"font-bold text-sm",children:["H tr: ",r.zaloPhone]})]}),c.jsx("div",{className:"max-w-6xl mx-auto px-6 py-12",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[c.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[c.jsxs("div",{className:"bg-white rounded-3xl p-10 shadow-xl border border-gray-100 relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 p-8 w-64 opacity-10",children:c.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zm0 9l2.5-1.25L12 8.5l-2.5 1.25L12 11zm0 2.5l-5-2.5-5 2.5L12 22l10-8.5-5-2.5-5 2.5z"})})}),c.jsx("h1",{className:"text-4xl font-black text-gray-900 mb-6",children:M(r.welcomeTitle)||`Cho mng, ${s.username}!`}),c.jsx("p",{className:"text-lg text-gray-600 mb-8 leading-relaxed",children:r.welcomeMessage||"H thng AI Studio cung cp cc cng c ti tn nht  t ng ha quy trnh sng to ni dung ca bn."}),c.jsx("div",{className:"flex flex-wrap gap-4"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Cp nht h thng"}),r.news.map(B=>c.jsx(qw,{news:B,formatDate:j,onImageClick:C},B.id))]})]}),c.jsx("div",{className:"space-y-6",children:(k=r.sidebarWidgets)==null?void 0:k.map(B=>c.jsxs("div",{className:`${B.type==="status"?"bg-gradient-to-br from-indigo-500 to-purple-600 text-white":"bg-white text-gray-800 border-gray-100"} rounded-3xl p-8 shadow-xl border`,children:[c.jsx("h3",{className:"text-lg font-bold uppercase tracking-widest mb-4 opacity-80",children:B.title}),B.type==="status"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-4xl font-black mb-4",children:r.statusTitle||"Stable"}),c.jsx("p",{className:"text-sm opacity-90",children:r.statusMessage||"Tt c dch v API ang hot ng bnh thng."})]}),B.type==="shortcuts"&&c.jsxs("ul",{className:"space-y-3 text-sm text-gray-600",children:[c.jsxs("li",{className:"flex items-center gap-2 cursor-pointer hover:text-indigo-600",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})," User Guide"]}),c.jsxs("li",{className:"flex items-center gap-2 cursor-pointer hover:text-indigo-600",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"})," API Docs"]}),c.jsxs("li",{className:"flex items-center gap-2 cursor-pointer hover:text-indigo-600",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-500"})," Support"]})]}),B.type==="custom"&&B.content&&c.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:B.content}})]},B.id))})]})})]})};return c.jsxs("div",{className:"relative h-full w-full bg-slate-50",children:[r.layout==="modern"&&c.jsx(ke,{}),r.layout==="classic"&&c.jsx(qe,{}),r.layout==="news-focus"&&c.jsx(qe,{})," ",s.role==="admin"&&c.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:c.jsx("button",{onClick:()=>h(!0),className:"w-14 h-14 bg-red-600 hover:bg-red-700 text-white rounded-full shadow-2xl flex items-center justify-center transition-transform hover:scale-110 active:scale-95",title:"Qun tr trang ch",children:c.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),N&&c.jsx("div",{className:"fixed inset-0 z-[300] bg-black/95 backdrop-blur-md flex items-center justify-center p-4 md:p-10 animate-in fade-in duration-300",onClick:()=>C(null),children:c.jsxs("div",{className:"relative max-w-full max-h-full flex flex-col items-center",children:[c.jsx("img",{src:N,alt:"Full View",className:"max-w-full max-h-[85vh] object-contain rounded-lg shadow-2xl",onClick:k=>k.stopPropagation()}),c.jsxs("button",{onClick:()=>C(null),className:"mt-6 bg-white/10 hover:bg-white/20 text-white px-6 py-2 rounded-full backdrop-blur-md border border-white/20 font-bold transition-all hover:scale-105 active:scale-95 flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),"ng hnh nh"]})]})}),d&&c.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[200] flex items-center justify-center p-6",children:c.jsxs("div",{className:"bg-[#1e293b] w-full max-w-4xl h-[90vh] rounded-2xl border border-white/10 shadow-2xl flex flex-col animate-in zoom-in-95",children:[c.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-white/10",children:[c.jsx("h2",{className:"text-xl font-bold text-white uppercase tracking-widest",children:"Cu hnh Trang Ch"}),c.jsx("button",{onClick:()=>h(!1),className:"text-slate-400 hover:text-white",children:c.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"flex-grow flex overflow-hidden",children:[c.jsxs("div",{className:"w-1/3 bg-black/20 p-6 border-r border-white/5 space-y-8 overflow-y-auto flex flex-col",children:[c.jsxs("div",{className:"flex-grow space-y-8",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-3",children:"Chn B Cc (Layout)"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{onClick:()=>R("layout","modern"),className:`p-4 rounded-xl border-2 cursor-pointer transition-all ${(x==null?void 0:x.layout)==="modern"?"border-indigo-500 bg-indigo-500/10":"border-slate-700 hover:border-slate-500"}`,children:[c.jsx("div",{className:"font-bold text-white text-sm mb-1",children:"Modern Visual (Default)"}),c.jsx("div",{className:"text-xs text-slate-400",children:"Hero ln, nn ng, card trong sut."})]}),c.jsxs("div",{onClick:()=>R("layout","classic"),className:`p-4 rounded-xl border-2 cursor-pointer transition-all ${(x==null?void 0:x.layout)==="classic"?"border-indigo-500 bg-indigo-500/10":"border-slate-700 hover:border-slate-500"}`,children:[c.jsx("div",{className:"font-bold text-white text-sm mb-1",children:"Classic Dashboard"}),c.jsx("div",{className:"text-xs text-slate-400",children:"Gn gng, tp trung thng tin."})]})]})]}),c.jsx("hr",{className:"border-white/10"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-3",children:"Thng tin Zalo (0 n)"}),c.jsx("input",{type:"text",value:(x==null?void 0:x.zaloPhone)||"",onChange:k=>R("zaloPhone",k.target.value),placeholder:"ST Zalo (V d: 0987654321)",className:"w-full bg-slate-800 border-slate-700 text-white p-2 rounded text-sm"})]}),c.jsx("hr",{className:"border-white/10"}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400",children:"Qun l Ct Bn Phi"}),c.jsx("button",{onClick:J,className:"text-xs bg-indigo-600 px-2 py-1 rounded text-white hover:bg-indigo-700",children:"+ Thm Ct"})]}),c.jsx("div",{className:"space-y-3",children:(dt=x==null?void 0:x.sidebarWidgets)==null?void 0:dt.map((k,B)=>{var _;return c.jsxs("div",{className:"bg-slate-800 p-3 rounded-lg border border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsxs("span",{className:"text-xs font-bold text-slate-300",children:["#",B+1," - ",k.type==="custom"?"Ty chnh":k.title]}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:()=>$(B,"up"),disabled:B===0,className:"p-1 text-slate-400 hover:text-white disabled:opacity-30",children:""}),c.jsx("button",{onClick:()=>$(B,"down"),disabled:B===(((_=x.sidebarWidgets)==null?void 0:_.length)||0)-1,className:"p-1 text-slate-400 hover:text-white disabled:opacity-30",children:""}),c.jsx("button",{onClick:()=>Z(k.id),className:"p-1 text-red-400 hover:text-red-300",children:""})]})]}),c.jsx("input",{type:"text",value:k.title,onChange:I=>te(k.id,"title",I.target.value),className:"w-full bg-slate-900 border border-slate-700 text-white p-1 rounded text-xs mb-2",placeholder:"Tiu  widget..."}),k.type==="custom"&&c.jsx("textarea",{value:k.content||"",onChange:I=>te(k.id,"content",I.target.value),className:"w-full bg-slate-900 border border-slate-700 text-white p-1 rounded text-xs h-16",placeholder:"Ni dung HTML..."})]},k.id)})})]}),c.jsx("hr",{className:"border-white/10"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-3",children:"Ni dung Cho mng"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"text-xs text-slate-500 block mb-1",children:["Tiu  (dng ","{username}","  chn tn)"]}),c.jsx("input",{type:"text",value:(x==null?void 0:x.welcomeTitle)||"",onChange:k=>R("welcomeTitle",k.target.value),placeholder:"Cho mng, {username}!",className:"w-full bg-slate-800 border-slate-700 text-white p-2 rounded text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"M t"}),c.jsx("textarea",{value:(x==null?void 0:x.welcomeMessage)||"",onChange:k=>R("welcomeMessage",k.target.value),placeholder:"M t ngn...",className:"w-full bg-slate-800 border-slate-700 text-white p-2 rounded text-sm h-20"})]})]})]})]}),c.jsx("div",{className:"pt-6 border-t border-white/10",children:c.jsx("button",{onClick:A,className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl shadow-lg transition-all",children:"Lu Cu Hnh"})})]}),c.jsxs("div",{className:"w-2/3 p-6 flex flex-col bg-[#0f172a]",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h3",{className:"font-bold text-white",children:"Qun l Tin Tc"}),c.jsx("button",{onClick:()=>{p(!0),m({})},className:"bg-indigo-600 hover:bg-indigo-700 text-white text-xs font-bold px-4 py-2 rounded-lg",children:"+ Thm Tin Mi"})]}),v?c.jsxs("div",{className:"flex-grow flex flex-col min-h-0",children:[c.jsxs("div",{className:"flex-grow overflow-y-auto pr-2 space-y-4",children:[c.jsx("input",{type:"text",placeholder:"Tiu  bi vit...",value:f.title||"",onChange:k=>m({...f,title:k.target.value}),className:"bg-slate-800 border-slate-700 text-white p-3 rounded-lg outline-none focus:border-indigo-500 w-full"}),c.jsx("div",{className:"flex flex-col min-h-[300px]",children:c.jsx(Bw,{ref:b,value:f.content||"",onChange:k=>m({...f,content:k}),className:"flex-grow h-full"})}),c.jsxs("div",{className:"flex gap-2 flex-wrap pt-2 pb-2",children:[["","","","","","","","","","","","","","Ok",""].map(k=>c.jsx("button",{type:"button",onMouseDown:B=>{var _;B.preventDefault(),(_=b.current)==null||_.insertText(k)},className:"bg-slate-700 hover:bg-slate-600 text-white px-2 py-1 rounded text-sm transition-colors",title:"Chn vo ni dung",children:k},k)),c.jsx("span",{className:"text-[10px] text-slate-500 self-center ml-2 uppercase font-bold tracking-wider opacity-60",children:"Click  chn vo ni dung"})]}),c.jsx("div",{className:"pt-2",children:c.jsx(Gw,{currentImage:f.imageUrl,onImageUploaded:k=>m({...f,imageUrl:k}),onClear:()=>m({...f,imageUrl:void 0})})})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-700 mt-2 flex-shrink-0 bg-[#0f172a]",children:[c.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 text-slate-400 hover:text-white",children:"Hy"}),c.jsx("button",{onClick:U,className:"px-6 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-bold",children:"Lu Tin"})]})]}):c.jsx("div",{className:"flex-grow overflow-y-auto space-y-3 pr-2",children:r.news.map((k,B)=>c.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl border border-slate-700 flex justify-between items-start group",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-white text-sm",children:k.title}),c.jsxs("div",{className:"text-[10px] text-slate-400 mt-1",children:[j(k.date)," - ",k.author]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("div",{className:"flex flex-col gap-1 mr-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>he(B,"up"),disabled:B===0,className:"text-slate-500 hover:text-white disabled:opacity-20",children:""}),c.jsx("button",{onClick:()=>he(B,"down"),disabled:B===r.news.length-1,className:"text-slate-500 hover:text-white disabled:opacity-20",children:""})]}),c.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity items-center",children:[c.jsx("button",{onClick:()=>{m(k),p(!0)},className:"p-1 text-blue-400 hover:bg-blue-400/10 rounded",children:"Sa"}),c.jsx("button",{onClick:()=>q(k.id),className:"p-1 text-red-400 hover:bg-red-400/10 rounded",children:"Xa"})]})]})]},k.id))})]})]})]})})]})},gg=[{id:"CHINESE",name:"Ting Trung",icon:""},{id:"JAPANESE",name:"Ting Nht",icon:""},{id:"KOREAN",name:"Ting Hn",icon:""}],mg={CHINESE:{batchSize:50,delaySeconds:1,customPrompt:"Dch sang ting Vit phong cch kim hip, xng h huynh-, vn phong c trang, gi nguyn cc danh xng c th.",removeSourceText:!0,autoFixFormat:!0},JAPANESE:{batchSize:40,delaySeconds:1.5,customPrompt:"Dch sang ting Vit phong cch Anime/Manga, gi nguyn cc hu t nh -san, -kun, -sama nu cn thit, dch st ngha nhng t nhin.",removeSourceText:!0,autoFixFormat:!0},KOREAN:{batchSize:45,delaySeconds:1,customPrompt:"Dch sang ting Vit phong cch phim truyn hnh Hn Quc (K-Drama), xng h Oppa/Unnie/Noona ph hp ng cnh, vn phong gn gi.",removeSourceText:!0,autoFixFormat:!0}},Iw=s=>(s=s.replace(/\r\n/g,`
`),s.trim().split(/\n\s*\n/).map(r=>{const l=r.split(`
`);if(l.length<3)return{index:"",timecode:"",text:""};const d=l[0].trim(),h=l[1].trim(),f=l.slice(2).join(`
`).trim();return{index:d,timecode:h,text:f}}).filter(r=>r.index!=="")),Vw=s=>s.map(n=>`${n.index}
${n.timecode}
${n.text}
`).join(`
`),Kw=(s,n)=>{const r=new Uint8Array([239,187,191]),l=new Blob([r,n],{type:"text/srt;charset=utf-8"}),d=URL.createObjectURL(l),h=document.createElement("a");h.href=d,h.download=s.replace(/\.(srt|txt)$/i,"")+"_VIET.srt",document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(d)},Yw=(s,n)=>{let r;switch(n){case"CHINESE":r=/[\u4e00-\u9fa5]/g;break;case"JAPANESE":r=/[\u3040-\u30ff\u4e00-\u9faf]/g;break;case"KOREAN":r=/[\uac00-\ud7af]/g;break;default:r=/$/}return s.replace(r,"").trim()},Pw=s=>{const n=(s==null?void 0:s.message)||(s==null?void 0:s.toString())||"";throw n.includes("429")||n.includes("Quota")||n.includes("quota")||n.includes("Resource has been exhausted")?n.includes("quota")||n.includes("Exceeded")?new Error("Ht API key, bn hy nhp thm API key  tip tc cng vic"):new Error("Hy thao tc chm li v api key ca bn khng p ng  x l nhanh"):n.includes("Network")||n.includes("fetch")?new Error("Li kt ni mng. Vui lng kim tra ng truyn."):new Error(`Li h thng: ${n}`)};class Jw{constructor(n){this.apiKeys=n}getModel(){if(this.apiKeys.length===0)throw new Error("No API Keys provided");const n=this.apiKeys[Math.floor(Math.random()*this.apiKeys.length)];return new ll(n).getGenerativeModel({model:"gemini-flash-latest"})}async translateBatch(n,r,l,d){const h=`
Bn l mt chuyn gia dch thut phim nh cao cp t ${r==="CHINESE"?"Ting Trung":r==="JAPANESE"?"Ting Nht":"Ting Hn"} sang Ting Vit.
Nhim v: Dch ni dung cc ph  di y sang Ting Vit.

Yu cu c th:
1. ${l}
2. Gi nguyn nh dng ca tng mc (Index, Timecode).
3. CH tr v bn dch Ting Vit cho phn text ca ph . Khng c bao gm ngn ng gc.
4. KHNG gii thch, KHNG thm li dn.
5. m bo cu trc SRT chnh xc:
Index
Timecode
Ni dung dch

D liu u vo:
${n.map(f=>`${f.index}
${f.timecode}
${f.text}`).join(`

`)}
    `;try{const b=((await(await this.getModel().generateContent({contents:[{role:"user",parts:[{text:h}]}],generationConfig:{temperature:.3,topP:.8}})).response).text()||"").trim().split(/\n\s*\n/);return n.map((x,w)=>{const N=b[w];if(!N)return{...x,text:"[Li dch]"};const C=N.split(`
`),H=C.length>=3?C.slice(2).join(`
`).trim():C.join(`
`).trim();return{...x,text:H||x.text}})}catch(f){console.error("Translation error:",f),Pw(f)}}}const pg=({className:s="w-6 h-6",size:n=24})=>c.jsx("svg",{width:n,height:n,className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),Qw=({className:s="w-6 h-6",size:n=24})=>c.jsx("svg",{width:n,height:n,className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),Xw=({className:s="w-6 h-6",size:n=24})=>c.jsx("svg",{width:n,height:n,className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),pi=({className:s="w-6 h-6",size:n=24})=>c.jsx("svg",{width:n,height:n,className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),Zw=({className:s="w-6 h-6",size:n=24})=>c.jsxs("svg",{width:n,height:n,className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),vg=({className:s="w-6 h-6",size:n=24})=>c.jsx("svg",{width:n,height:n,className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Ww=({className:s="w-6 h-6",size:n=24})=>c.jsx("svg",{width:n,height:n,className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),Fw=({className:s="w-6 h-6",size:n=24})=>c.jsx("svg",{width:n,height:n,className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e1=({className:s="w-6 h-6",size:n=24})=>c.jsxs("svg",{width:n,height:n,className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),t1=({className:s="w-6 h-6",size:n=24})=>c.jsx("svg",{width:n,height:n,className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),Pc=({className:s="w-6 h-6",size:n=24})=>c.jsx("svg",{width:n,height:n,className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),n1=({className:s="w-6 h-6",size:n=24})=>c.jsx("svg",{width:n,height:n,className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),a1=({userId:s})=>{var q;const[n,r]=Q.useState(null),[l,d]=Q.useState(""),[h,f]=Q.useState("CHINESE"),[m,v]=Q.useState(!1),[p,b]=Q.useState(mg.CHINESE),[x,w]=Q.useState({isProcessing:!1,progress:0,currentBatch:0,totalBatches:0}),[N,C]=Q.useState(""),H=Q.useRef(null);Q.useEffect(()=>{const j=localStorage.getItem(`app_api_keys_${s}`);if(j)try{const M=JSON.parse(j),J=atob(M.gemini||"").split(`
`).map(Z=>Z.trim()).filter(Z=>Z!=="");J.length>0&&C(J[0])}catch(M){console.error("Failed to load keys",M)}},[s]);const A=j=>{var $;const M=($=j.target.files)==null?void 0:$[0];if(M){r(M);const J=new FileReader;J.onload=Z=>{var te;d(((te=Z.target)==null?void 0:te.result)||"")},J.readAsText(M),w(Z=>({...Z,result:void 0,error:void 0}))}},R=()=>{n&&(v(!0),b(mg[h]))},U=async()=>{if(!l)return;if(!N){w(te=>({...te,isProcessing:!1,error:"Cha c API Key. Vui lng cu hnh  trang ch."}));return}const j=Iw(l),M=p.batchSize,$=Math.ceil(j.length/M);w({isProcessing:!0,progress:0,currentBatch:0,totalBatches:$,error:void 0});const J=new Jw([N]);let Z=[];try{for(let he=0;he<$;he++){const ke=he*M,qe=Math.min(ke+M,j.length),dt=j.slice(ke,qe);w(_=>({..._,currentBatch:he+1,progress:Math.round(he/$*100)}));const B=(await J.translateBatch(dt,h,p.customPrompt,p.autoFixFormat)).map(_=>({..._,text:p.removeSourceText?Yw(_.text,h):_.text}));Z=[...Z,...B],he<$-1&&await new Promise(_=>setTimeout(_,p.delaySeconds*1e3))}const te=Vw(Z);w(he=>({...he,isProcessing:!1,progress:100,result:te}))}catch(te){w(he=>({...he,isProcessing:!1,error:" xy ra li trong qu trnh dch: "+(te.message||"Unknown error")}))}};return N?c.jsx(Bg,{children:c.jsxs("div",{className:"min-h-full p-4 md:p-8 flex flex-col items-center bg-transparent",children:[c.jsxs("header",{className:"w-full max-w-4xl text-center mb-12",children:[c.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-indigo-600 rounded-2xl mb-4 text-white shadow-lg",children:c.jsx(pg,{size:32})}),c.jsx("h1",{className:"text-4xl font-extrabold text-slate-900 mb-2",children:"Dch Thut Chuyn Gia"}),c.jsx("p",{className:"text-slate-500",children:"Nng tm bn dch ph  ca bn vi sc mnh ca AI"})]}),c.jsxs("main",{className:"w-full max-w-4xl bg-white rounded-3xl shadow-xl shadow-slate-200/50 border border-slate-100 overflow-hidden",children:[x.isProcessing&&c.jsx("div",{className:"h-1.5 w-full bg-slate-100 relative",children:c.jsx("div",{className:"absolute top-0 left-0 h-full bg-indigo-600 transition-all duration-500 ease-out",style:{width:`${x.progress}%`}})}),c.jsxs("div",{className:"p-8",children:[!m&&!x.isProcessing&&!x.result&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs("section",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Ti ln file ngun (.srt, .txt)"}),c.jsxs("div",{onClick:()=>{var j;return(j=H.current)==null?void 0:j.click()},className:`border-2 border-dashed rounded-2xl p-10 flex flex-col items-center justify-center cursor-pointer transition-all ${n?"border-indigo-500 bg-indigo-50/30":"border-slate-200 hover:border-indigo-400 hover:bg-slate-50"}`,children:[c.jsx("input",{type:"file",ref:H,onChange:A,accept:".srt,.txt",className:"hidden"}),n?c.jsxs(c.Fragment,{children:[c.jsx(Xw,{className:"text-indigo-600 mb-4 w-12 h-12",size:48}),c.jsx("p",{className:"text-indigo-900 font-medium",children:n.name}),c.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:[(n.size/1024).toFixed(2)," KB"]})]}):c.jsxs(c.Fragment,{children:[c.jsx(Qw,{className:"text-slate-400 mb-4 w-12 h-12",size:48}),c.jsx("p",{className:"text-slate-600 font-medium text-lg",children:"Ko th hoc nhp  chn file"}),c.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Ch h tr nh dng .srt v .txt"})]})]})]}),n&&c.jsxs("section",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Chn ngn ng ngun"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:gg.map(j=>c.jsxs("button",{onClick:()=>f(j.id),className:`flex items-center gap-3 p-4 rounded-xl border-2 transition-all ${h===j.id?"border-indigo-600 bg-indigo-50 text-indigo-700":"border-slate-100 hover:border-slate-200"}`,children:[c.jsx("span",{className:"text-2xl",children:j.icon}),c.jsx("span",{className:"font-semibold",children:j.name}),h===j.id&&c.jsx(pi,{size:20,className:"ml-auto"})]},j.id))})]}),n&&c.jsxs("button",{onClick:R,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-lg shadow-lg shadow-indigo-200 transition-all flex items-center justify-center gap-2",children:[c.jsx(Zw,{size:20}),"Bt u thit lp"]})]}),m&&!x.isProcessing&&!x.result&&c.jsxs("div",{className:"space-y-8 animate-in zoom-in-95 duration-300",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[c.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-slate-100 rounded-lg text-slate-500",children:c.jsx(vg,{size:20})}),c.jsxs("h2",{className:"text-xl font-bold text-slate-800",children:["Cu hnh chuyn gia cho ",(q=gg.find(j=>j.id===h))==null?void 0:q.name]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700",children:[c.jsx(Ww,{size:16,className:"text-indigo-500"}),"S ph  mi gi (Batch Size)"]}),c.jsx("input",{type:"number",value:p.batchSize,onChange:j=>b({...p,batchSize:parseInt(j.target.value)||1}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all"}),c.jsx("p",{className:"text-xs text-slate-400",children:"Gom nhiu dng gip AI hiu ng cnh tt hn v trnh b ngt qung."})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700",children:[c.jsx(Fw,{size:16,className:"text-indigo-500"}),"Thi gian ngh (s)"]}),c.jsx("input",{type:"number",step:"0.5",value:p.delaySeconds,onChange:j=>b({...p,delaySeconds:parseFloat(j.target.value)||.1}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all"}),c.jsx("p",{className:"text-xs text-slate-400",children:"Thi gian ch gia cc ln gi API  trnh b gii hn bng thng."})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700",children:[c.jsx(e1,{size:16,className:"text-indigo-500"}),"Kim sot cht lng dch (Prompt ty chnh)"]}),c.jsx("textarea",{rows:4,value:p.customPrompt,onChange:j=>b({...p,customPrompt:j.target.value}),className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all resize-none",placeholder:"V d: Dch phong cch kim hip, xng h huynh-..."})]}),c.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl space-y-4",children:[c.jsx("h3",{className:"font-bold text-slate-800 text-sm uppercase tracking-wider",children:"Hu k chuyn su"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"checkbox",checked:p.removeSourceText,onChange:j=>b({...p,removeSourceText:j.target.checked}),className:"sr-only peer"}),c.jsx("div",{className:"w-10 h-6 bg-slate-200 rounded-full peer peer-checked:bg-indigo-600 transition-all"}),c.jsx("div",{className:"absolute left-1 top-1 w-4 h-4 bg-white rounded-full peer-checked:translate-x-4 transition-all"})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Loi b k t tha (Regex)"}),c.jsx("span",{className:"text-xs text-slate-400",children:"T ng xa cc k t tng hnh cn st li sau khi dch."})]})]}),c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"checkbox",checked:p.autoFixFormat,onChange:j=>b({...p,autoFixFormat:j.target.checked}),className:"sr-only peer"}),c.jsx("div",{className:"w-10 h-6 bg-slate-200 rounded-full peer peer-checked:bg-indigo-600 transition-all"}),c.jsx("div",{className:"absolute left-1 top-1 w-4 h-4 bg-white rounded-full peer-checked:translate-x-4 transition-all"})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Kim tra & Sa cha nh dng SRT"}),c.jsx("span",{className:"text-xs text-slate-400",children:"m bo m thi gian v s th t chun xc 100%."})]})]})]})]}),c.jsxs("button",{onClick:U,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-lg shadow-lg shadow-indigo-200 transition-all flex items-center justify-center gap-2",children:[c.jsx(pg,{size:20}),"Tin hnh dch ngay"]})]}),x.isProcessing&&c.jsxs("div",{className:"py-12 flex flex-col items-center justify-center space-y-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx(n1,{size:64,className:"text-indigo-600 animate-spin w-16 h-16"}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsxs("span",{className:"text-sm font-bold text-indigo-700",children:[x.progress,"%"]})})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"ang x l d liu..."}),c.jsxs("p",{className:"text-slate-500 mt-1",children:["ang dch gi ",x.currentBatch," / ",x.totalBatches]}),c.jsxs("div",{className:"mt-6 p-4 bg-amber-50 rounded-xl border border-amber-100 flex items-center gap-3 text-amber-800 text-sm max-w-md",children:[c.jsx(Pc,{size:18}),"Vui lng khng ng trnh duyt cho n khi qu trnh hon tt."]})]})]}),x.result&&c.jsxs("div",{className:"py-8 flex flex-col items-center space-y-6 animate-in fade-in duration-500",children:[c.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center text-green-600 mb-2",children:c.jsx(pi,{size:40,className:"w-10 h-10"})}),c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Dch thnh cng!"}),c.jsx("p",{className:"text-slate-500 mt-2",children:"File ca bn  c ti u ha v sn sng s dng."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 w-full max-w-lg",children:[c.jsxs("button",{onClick:()=>Kw((n==null?void 0:n.name)||"translated.srt",x.result),className:"flex items-center justify-center gap-3 p-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 transition-all",children:[c.jsx(t1,{size:20}),"Ti file (.srt)"]}),c.jsxs("button",{onClick:()=>{r(null),w({isProcessing:!1,progress:0,currentBatch:0,totalBatches:0}),v(!1)},className:"flex items-center justify-center gap-3 p-4 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-bold transition-all",children:[c.jsx(vg,{size:20}),"Dch file khc"]})]}),c.jsxs("div",{className:"w-full mt-6 space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Xem trc ni dung"}),c.jsx("div",{className:"w-full h-48 bg-slate-950 rounded-2xl p-4 font-mono text-xs text-slate-300 overflow-y-auto border border-slate-800",children:c.jsxs("pre",{className:"whitespace-pre-wrap",children:[x.result.slice(0,1e3),"..."]})})]})]}),x.error&&c.jsxs("div",{className:"mt-8 p-6 bg-rose-50 border border-rose-100 rounded-2xl flex items-start gap-4 text-rose-800",children:[c.jsx(Pc,{size:24,className:"flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold",children:"Li x l"}),c.jsx("p",{className:"text-sm mt-1",children:x.error}),c.jsx("button",{onClick:()=>w(j=>({...j,error:void 0})),className:"mt-3 text-sm font-bold underline hover:no-underline",children:"Th li"})]})]})]})]}),c.jsxs("footer",{className:"mt-12 text-slate-400 text-sm flex flex-col items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(pi,{size:14})," UTF-8 with BOM"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(pi,{size:14})," Ti u ng cnh"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(pi,{size:14})," T ng sa li"]})]}),c.jsx("p",{children:" 2024 Dch Thut Chuyn Gia  Bn quyn thuc v AI Studio"})]})]})}):c.jsx("div",{className:"flex flex-col items-center justify-center p-10 h-full",children:c.jsxs("div",{className:"bg-red-50 text-red-600 p-6 rounded-xl border border-red-200 text-center shadow-sm",children:[c.jsx(Pc,{className:"w-12 h-12 mx-auto mb-2 text-red-500"}),c.jsx("h3",{className:"font-bold text-lg mb-2",children:"Cha cu hnh API Key"}),c.jsx("p",{children:"Vui lng nhp Gemini API Key  phn qun l Key pha trn trc khi s dng ng dng ny."})]})})},s1=()=>c.jsxs("div",{className:"w-full h-full min-h-[500px] flex flex-col items-center justify-center p-10 bg-white rounded-3xl shadow-xl border border-dashed border-slate-300",children:[c.jsx("div",{className:"w-20 h-20 bg-indigo-50 rounded-full flex items-center justify-center mb-6",children:c.jsx("svg",{className:"w-10 h-10 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),c.jsx("h2",{className:"text-2xl font-black text-slate-800 uppercase tracking-tighter mb-2",children:"New Application"}),c.jsxs("p",{className:"text-slate-500 text-center max-w-md",children:["This is a placeholder for your future application. ",c.jsx("br",{}),"You can start building your new features here within the ",c.jsx("code",{children:"apps/NewToolApp.tsx"})," file."]}),c.jsx("button",{className:"mt-8 px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition-all",children:"Initialize Project"})]}),i1=[{id:"video-viral",label:"Video Viral"},{id:"image-script",label:"Visual Script"},{id:"zenshot-ai",label:"ZenShot AI"},{id:"translation",label:"Translation"},{id:"new-tool",label:"New Tool"}],r1=({onClose:s})=>{const[n,r]=Q.useState({}),[l,d]=Q.useState(""),h=async()=>{const{data:p,error:b}=await ot.from("users").select("*");if(p){const x={};p.forEach(w=>{x[w.username]={id:w.id,username:w.username,email:w.email,phone:w.phone,role:w.role,allowedApps:w.allowed_apps,createdAt:new Date(w.created_at).getTime()}}),r(x)}};Q.useEffect(()=>{h()},[]);const f=async(p,b)=>{const x=n[p];if(!x)return;let w=x.allowedApps?[...x.allowedApps]:[];w.includes(b)?w=w.filter(N=>N!==b):w.push(b),r(N=>({...N,[p]:{...N[p],allowedApps:w}})),await ot.from("users").update({allowed_apps:w}).eq("id",x.id)},m=async p=>{const b=n[p];if(!b)return;const x=b.role==="admin"?"user":"admin";r(w=>({...w,[p]:{...w[p],role:x}})),await ot.from("users").update({role:x}).eq("id",b.id)},v=Object.values(n).filter(p=>p.username.toLowerCase().includes(l.toLowerCase())||p.email&&p.email.toLowerCase().includes(l.toLowerCase()));return c.jsx("div",{className:"fixed inset-0 bg-slate-900/90 backdrop-blur-md flex items-center justify-center z-[400] p-6",children:c.jsxs("div",{className:"bg-white w-full max-w-5xl rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-300",children:[c.jsxs("div",{className:"bg-[#020617] text-white p-8 flex justify-between items-center shrink-0 gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h2",{className:"text-2xl font-black uppercase tracking-tighter",children:"Admin Control Panel (v1.2)"}),c.jsx("p",{className:"text-xs text-indigo-400 font-bold uppercase tracking-[0.3em] mt-1",children:"User & Access Management"})]}),c.jsxs("button",{onClick:h,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-bold text-xs uppercase tracking-widest shadow-lg transition-all flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Force Refresh"]}),c.jsx("button",{onClick:s,className:"bg-white/10 hover:bg-white/20 p-3 rounded-xl transition-all",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"p-6 border-b border-slate-100 bg-slate-50 flex items-center gap-4 shrink-0 justify-between",children:c.jsx("div",{className:"flex items-center gap-4 flex-1",children:c.jsxs("div",{className:"relative flex-1 max-w-md",children:[c.jsx("svg",{className:"w-5 h-5 absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),c.jsx("input",{type:"text",placeholder:"Search users...",className:"w-full pl-12 pr-4 py-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none font-medium",value:l,onChange:p=>d(p.target.value)})]})})}),c.jsx("div",{className:"overflow-y-auto flex-1 p-6 bg-slate-100",children:c.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:c.jsxs("table",{className:"w-full text-left border-collapse",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200 text-xs font-black text-slate-500 uppercase tracking-wider",children:[c.jsx("th",{className:"p-4 pl-6",children:"User Identity"}),c.jsx("th",{className:"p-4",children:"Role"}),c.jsx("th",{className:"p-4 text-center",children:"Video Viral"}),c.jsx("th",{className:"p-4 text-center",children:"Visual Script"}),c.jsx("th",{className:"p-4 text-center",children:"ZenShot New"}),c.jsx("th",{className:"p-4 text-center",children:"Translation"}),c.jsx("th",{className:"p-4 text-center",children:"New App"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-100",children:v.map(p=>c.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[c.jsxs("td",{className:"p-4 pl-6",children:[c.jsx("div",{className:"font-bold text-slate-800",children:p.username}),c.jsx("div",{className:"text-xs text-slate-400 font-medium",children:p.email||"No email"})]}),c.jsx("td",{className:"p-4",children:c.jsx("button",{onClick:()=>m(p.username),className:`px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${p.role==="admin"?"bg-indigo-100 text-indigo-700 hover:bg-indigo-200":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:p.role})}),i1.map(b=>{var w;const x=(w=p.allowedApps)==null?void 0:w.includes(b.id);return c.jsx("td",{className:"p-4 text-center",children:c.jsxs("label",{className:"inline-flex items-center cursor-pointer relative",children:[c.jsx("input",{type:"checkbox",className:"peer sr-only",checked:x,onChange:()=>f(p.username,b.id)}),c.jsx("div",{className:"w-11 h-6 bg-slate-200 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-500"})]})},b.id)})]},p.id))})]})})}),c.jsxs("div",{className:"p-4 bg-black text-xs font-mono text-green-400 overflow-auto h-32 border-t border-slate-700 shrink-0",children:[c.jsx("p",{className:"font-bold text-white mb-2",children:"DEBUG RAW DATA (Search here for username):"}),c.jsx("pre",{className:"whitespace-pre-wrap",children:JSON.stringify(n,null,2)})]})]})})},Yg={async getAppNames(){try{const{data:s,error:n}=await ot.from("app_config").select("*").eq("id","global_names").single();return s&&s.names?s.names:{}}catch(s){return console.warn("App Config Fetch Error (Ignorable if table missing):",s),{}}},async saveAppConfig(s){try{await ot.from("app_config").upsert({id:"global_names",names:s})}catch(n){throw console.error("Error saving app config:",n),n}}},Jc={"video-viral":"Video Viral Engine","image-script":"Visual Script Engine","zenshot-ai":"ZenShot AI (New)",translation:"Translation AI","new-tool":"New Application"},l1=({currentNames:s,onClose:n,onUpdate:r})=>{const[l,d]=Q.useState(s),[h,f]=Q.useState(!1);Q.useEffect(()=>{d({...Jc,...s})},[s]);const m=(p,b)=>{d(x=>({...x,[p]:b}))},v=async()=>{f(!0);try{await Yg.saveAppConfig(l),r(),n()}catch(p){console.error("Failed to save app names",p),alert("Failed to save changes. Please try again.")}finally{f(!1)}};return c.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[200]",children:c.jsxs("div",{className:"bg-slate-900 rounded-3xl border border-indigo-500/20 shadow-2xl w-full max-w-lg overflow-hidden",children:[c.jsxs("div",{className:"p-6 border-b border-indigo-500/10 bg-indigo-500/5",children:[c.jsxs("h2",{className:"text-xl font-black text-white uppercase tracking-wider flex items-center gap-3",children:[c.jsx("span",{className:"p-2 bg-indigo-500/10 rounded-lg text-indigo-400",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),"Manage App Names"]}),c.jsx("p",{className:"text-slate-400 text-xs mt-2 ml-14",children:"Customize how application names appear in the navigation bar."})]}),c.jsx("div",{className:"p-6 max-h-[60vh] overflow-y-auto space-y-4 custom-scrollbar",children:Object.keys(Jc).map(p=>c.jsxs("div",{className:"group",children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 group-hover:text-indigo-400 transition-colors",children:p.replace("-"," ")}),c.jsx("input",{type:"text",value:l[p]||"",onChange:b=>m(p,b.target.value),className:"w-full bg-slate-800/50 border border-slate-700 rounded-xl px-4 py-3 text-sm text-white focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 outline-none transition-all placeholder:text-slate-600",placeholder:Jc[p]})]},p))}),c.jsxs("div",{className:"p-6 border-t border-indigo-500/10 bg-slate-800/20 flex justify-end gap-3",children:[c.jsx("button",{onClick:n,className:"px-5 py-2.5 rounded-xl text-slate-400 font-bold text-xs uppercase tracking-wider hover:text-white hover:bg-white/5 transition-all",children:"Cancel"}),c.jsx("button",{onClick:v,disabled:h,className:"px-6 py-2.5 rounded-xl bg-indigo-600 text-white font-bold text-xs uppercase tracking-wider hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-indigo-500/20 transition-all flex items-center gap-2",children:h?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-3 h-3 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Saving..."]}):"Save Changes"})]})]})})},o1=({user:s,onUpdateUser:n,onClose:r,appNames:l={},onUpdateAppNames:d=()=>{}})=>{const[h,f]=Q.useState(s.email||""),[m,v]=Q.useState(s.phone||""),[p,b]=Q.useState(""),[x,w]=Q.useState(""),[N,C]=Q.useState(!1),[H,A]=Q.useState(!1),R=async()=>{try{await xa.updateProfile(s.id,{email:h,phone:m}),n({...s,email:h,phone:m}),w("Cp nht thnh cng!"),setTimeout(()=>w(""),3e3)}catch(U){console.error(U),w("Li khi cp nht!")}};return N?c.jsx(r1,{onClose:()=>C(!1)}):H?c.jsx(l1,{currentNames:l,onClose:()=>A(!1),onUpdate:d}):c.jsx("div",{className:"fixed inset-0 bg-slate-900/80 backdrop-blur-sm flex items-center justify-center z-[300] p-4",children:c.jsxs("div",{className:"bg-[#1e293b] w-full max-w-lg rounded-2xl border border-white/10 shadow-2xl p-6 md:p-8 animate-in zoom-in-95 duration-200",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-white/5 pb-4",children:[c.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Qun l ti khon"]}),c.jsx("button",{onClick:r,className:"text-slate-400 hover:text-white transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-xl border border-white/5 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-[10px] text-slate-400 uppercase font-bold tracking-widest",children:"Tn ng nhp"}),c.jsx("p",{className:"text-lg font-bold text-white",children:s.username})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-[10px] text-slate-400 uppercase font-bold tracking-widest",children:"Vai tr"}),c.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold uppercase ${s.role==="admin"?"bg-indigo-500/20 text-indigo-400":"bg-slate-700 text-slate-300"}`,children:s.role})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-2",children:"Email"}),c.jsx("input",{type:"email",value:h,onChange:U=>f(U.target.value),className:"w-full bg-[#0f172a] border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 outline-none text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-2",children:"S in thoi"}),c.jsx("input",{type:"tel",value:m,onChange:U=>v(U.target.value),className:"w-full bg-[#0f172a] border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 outline-none text-sm"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-2",children:"i mt khu mi (Nu cn)"}),c.jsx("input",{type:"password",value:p,onChange:U=>b(U.target.value),placeholder:" trng nu khng i",className:"w-full bg-[#0f172a] border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 outline-none text-sm placeholder-slate-600"})]}),x&&c.jsx("div",{className:"p-3 bg-emerald-500/10 text-emerald-400 text-sm font-bold rounded-lg text-center animate-in fade-in slide-in-from-top-2",children:x}),c.jsxs("div",{className:"pt-4 border-t border-white/5 flex justify-between gap-3 items-center",children:[s.role==="admin"?c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>C(!0),className:"px-4 py-2 rounded-lg text-sm font-bold bg-amber-500/10 text-amber-500 hover:bg-amber-500/20 transition-all uppercase tracking-wider flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),"Admin Panel"]}),c.jsxs("button",{onClick:()=>A(!0),className:"px-4 py-2 rounded-lg text-sm font-bold bg-indigo-500/10 text-indigo-400 hover:bg-indigo-500/20 transition-all uppercase tracking-wider flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Manage App Names"]})]}):c.jsx("div",{}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:r,className:"px-4 py-2 rounded-lg text-sm font-bold text-slate-400 hover:text-white hover:bg-white/5 transition-all",children:"ng"}),c.jsx("button",{onClick:R,className:"px-6 py-2 rounded-lg text-sm font-bold bg-indigo-600 text-white hover:bg-indigo-500 transition-all shadow-lg active:scale-95",children:"Lu Thay i"})]})]})]})]})})},c1=()=>{var C,H,A,R,U;const[s,n]=Q.useState(null),[r,l]=Q.useState("home"),[d,h]=Q.useState(!1),[f,m]=Q.useState(!0),[v,p]=Q.useState({}),b=async()=>{const q=await Yg.getAppNames();p(q)};Q.useEffect(()=>{b()},[]),Q.useEffect(()=>{ot.auth.getSession().then(({data:{session:j}})=>{j!=null&&j.user?xa.getUserProfile(j.user.id).then(M=>{var $,J;n(M||{id:j.user.id,username:(($=j.user.user_metadata)==null?void 0:$.username)||((J=j.user.email)==null?void 0:J.split("@")[0])||"User",email:j.user.email,role:"user",createdAt:Date.now()}),m(!1)}):(n(null),m(!1))});const{data:{subscription:q}}=ot.auth.onAuthStateChange(async(j,M)=>{if(M!=null&&M.user){const $=await xa.getUserProfile(M.user.id);$&&n($)}else n(null);m(!1)});return()=>q.unsubscribe()},[]);const x=q=>{n(q)},w=q=>{n(q)},N=async()=>{m(!0),await xa.logoutUser()};return f?c.jsx("div",{className:"min-h-screen bg-[#020617] flex items-center justify-center",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):s?c.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col items-center",children:[c.jsx(hy,{userId:s.id}),c.jsxs("nav",{className:"w-full bg-[#020617] text-white border-b border-white/5 sticky top-0 z-[100] px-6 md:px-12 py-4 backdrop-blur-2xl bg-opacity-95 shadow-2xl flex flex-col md:flex-row items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-center gap-6 cursor-pointer",onClick:()=>l("home"),children:[c.jsx("div",{className:"bg-gradient-to-tr from-indigo-500 via-indigo-600 to-violet-600 p-3 rounded-2xl shadow-2xl shadow-indigo-500/30 ring-4 ring-indigo-500/10",children:c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("h1",{className:"text-2xl font-black tracking-tighter uppercase leading-none",children:["QUANG HUY ",c.jsx("span",{className:"text-indigo-400",children:"STUDIO"})]}),c.jsx("span",{className:"text-[10px] font-black text-indigo-400/70 uppercase tracking-[0.4em] mt-1",children:"Multi-App Engine"})]})]}),c.jsxs("div",{className:"flex items-center bg-white/5 rounded-2xl p-1 border border-white/10",children:[(s.role==="admin"||((C=s.allowedApps)==null?void 0:C.includes("video-viral")))&&c.jsx("button",{onClick:()=>l("video-viral"),className:`px-6 py-2 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${r==="video-viral"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:v["video-viral"]||"Video Viral Engine"}),(s.role==="admin"||((H=s.allowedApps)==null?void 0:H.includes("image-script")))&&c.jsx("button",{onClick:()=>l("image-script"),className:`px-6 py-2 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${r==="image-script"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:v["image-script"]||"Visual Script Engine"}),(s.role==="admin"||((A=s.allowedApps)==null?void 0:A.includes("zenshot-ai")))&&c.jsx("button",{onClick:()=>l("zenshot-ai"),className:`px-6 py-2 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${r==="zenshot-ai"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:v["zenshot-ai"]||"ZenShot AI (New)"}),(s.role==="admin"||((R=s.allowedApps)==null?void 0:R.includes("translation")))&&c.jsx("button",{onClick:()=>l("translation"),className:`px-6 py-2 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${r==="translation"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:v.translation||"Translation AI"}),(s.role==="admin"||((U=s.allowedApps)==null?void 0:U.includes("new-tool")))&&c.jsx("button",{onClick:()=>l("new-tool"),className:`px-6 py-2 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${r==="new-tool"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:v["new-tool"]||"New Application"})]}),c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("div",{className:"text-right hidden md:block",children:[c.jsxs("div",{className:"text-xs font-black uppercase text-indigo-400",children:["Hello, ",s.username]}),c.jsx("button",{onClick:N,className:"text-[10px] uppercase font-bold text-slate-500 hover:text-white transition-colors",children:"Logout"})]}),c.jsx("div",{className:"w-10 h-10 bg-indigo-600 rounded-full flex items-center justify-center font-black text-sm shadow-lg ring-2 ring-indigo-400/20 cursor-pointer hover:ring-indigo-400 hover:scale-105 transition-all",onClick:()=>h(!0),children:s.username.charAt(0).toUpperCase()})]})]}),c.jsxs("div",{className:"w-full h-[calc(100vh-140px)]",children:[r==="home"&&c.jsx($w,{user:s,onNavigate:l},s.id),r==="video-viral"&&c.jsx(Yx,{userId:s.id},s.id),r==="image-script"&&c.jsx(aw,{userId:s.id},s.id),r==="zenshot-ai"&&c.jsx(Lw,{userId:s.id},s.id),r==="translation"&&c.jsx(a1,{userId:s.id},s.id),r==="new-tool"&&c.jsx(s1,{},s.id)]}),d&&c.jsx(o1,{user:s,onUpdateUser:w,onClose:()=>h(!1),appNames:v,onUpdateAppNames:b})]}):c.jsx(Vx,{onLogin:x})},Pg=document.getElementById("root");if(!Pg)throw new Error("Could not find root element to mount to");const u1=Ev.createRoot(Pg);u1.render(c.jsx(ou.StrictMode,{children:c.jsx(c1,{})}));
