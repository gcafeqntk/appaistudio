(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function _x(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Sm={exports:{}},Hl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wv;function T2(){if(Wv)return Hl;Wv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var p in o)p!=="key"&&(c[p]=o[p])}else c=o;return o=c.ref,{$$typeof:s,type:r,key:u,ref:o!==void 0?o:null,props:c}}return Hl.Fragment=e,Hl.jsx=n,Hl.jsxs=n,Hl}var Jv;function w2(){return Jv||(Jv=1,Sm.exports=T2()),Sm.exports}var f=w2(),Am={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv;function E2(){if(Zv)return Ne;Zv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function O(M){return M===null||typeof M!="object"?null:(M=S&&M[S]||M["@@iterator"],typeof M=="function"?M:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,U={};function X(M,ne,ue){this.props=M,this.context=ne,this.refs=U,this.updater=ue||q}X.prototype.isReactComponent={},X.prototype.setState=function(M,ne){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,ne,"setState")},X.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function Y(){}Y.prototype=X.prototype;function ee(M,ne,ue){this.props=M,this.context=ne,this.refs=U,this.updater=ue||q}var L=ee.prototype=new Y;L.constructor=ee,Z(L,X.prototype),L.isPureReactComponent=!0;var H=Array.isArray;function te(){}var N={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function C(M,ne,ue){var fe=ue.ref;return{$$typeof:s,type:M,key:ne,ref:fe!==void 0?fe:null,props:ue}}function j(M,ne){return C(M.type,ne,M.props)}function D(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function z(M){var ne={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ue){return ne[ue]})}var I=/\/+/g;function P(M,ne){return typeof M=="object"&&M!==null&&M.key!=null?z(""+M.key):ne.toString(36)}function Q(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(te,te):(M.status="pending",M.then(function(ne){M.status==="pending"&&(M.status="fulfilled",M.value=ne)},function(ne){M.status==="pending"&&(M.status="rejected",M.reason=ne)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function R(M,ne,ue,fe,Te){var Se=typeof M;(Se==="undefined"||Se==="boolean")&&(M=null);var Oe=!1;if(M===null)Oe=!0;else switch(Se){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(M.$$typeof){case s:case e:Oe=!0;break;case x:return Oe=M._init,R(Oe(M._payload),ne,ue,fe,Te)}}if(Oe)return Te=Te(M),Oe=fe===""?"."+P(M,0):fe,H(Te)?(ue="",Oe!=null&&(ue=Oe.replace(I,"$&/")+"/"),R(Te,ne,ue,"",function(kn){return kn})):Te!=null&&(D(Te)&&(Te=j(Te,ue+(Te.key==null||M&&M.key===Te.key?"":(""+Te.key).replace(I,"$&/")+"/")+Oe)),ne.push(Te)),1;Oe=0;var bt=fe===""?".":fe+":";if(H(M))for(var nt=0;nt<M.length;nt++)fe=M[nt],Se=bt+P(fe,nt),Oe+=R(fe,ne,ue,Se,Te);else if(nt=O(M),typeof nt=="function")for(M=nt.call(M),nt=0;!(fe=M.next()).done;)fe=fe.value,Se=bt+P(fe,nt++),Oe+=R(fe,ne,ue,Se,Te);else if(Se==="object"){if(typeof M.then=="function")return R(Q(M),ne,ue,fe,Te);throw ne=String(M),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function se(M,ne,ue){if(M==null)return M;var fe=[],Te=0;return R(M,fe,"","",function(Se){return ne.call(ue,Se,Te++)}),fe}function de(M){if(M._status===-1){var ne=M._result;ne=ne(),ne.then(function(ue){(M._status===0||M._status===-1)&&(M._status=1,M._result=ue)},function(ue){(M._status===0||M._status===-1)&&(M._status=2,M._result=ue)}),M._status===-1&&(M._status=0,M._result=ne)}if(M._status===1)return M._result.default;throw M._result}var ge=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Be={map:se,forEach:function(M,ne,ue){se(M,function(){ne.apply(this,arguments)},ue)},count:function(M){var ne=0;return se(M,function(){ne++}),ne},toArray:function(M){return se(M,function(ne){return ne})||[]},only:function(M){if(!D(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Ne.Activity=T,Ne.Children=Be,Ne.Component=X,Ne.Fragment=n,Ne.Profiler=o,Ne.PureComponent=ee,Ne.StrictMode=r,Ne.Suspense=g,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(M){return N.H.useMemoCache(M)}},Ne.cache=function(M){return function(){return M.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(M,ne,ue){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var fe=Z({},M.props),Te=M.key;if(ne!=null)for(Se in ne.key!==void 0&&(Te=""+ne.key),ne)!E.call(ne,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&ne.ref===void 0||(fe[Se]=ne[Se]);var Se=arguments.length-2;if(Se===1)fe.children=ue;else if(1<Se){for(var Oe=Array(Se),bt=0;bt<Se;bt++)Oe[bt]=arguments[bt+2];fe.children=Oe}return C(M.type,Te,fe)},Ne.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:c,_context:M},M},Ne.createElement=function(M,ne,ue){var fe,Te={},Se=null;if(ne!=null)for(fe in ne.key!==void 0&&(Se=""+ne.key),ne)E.call(ne,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(Te[fe]=ne[fe]);var Oe=arguments.length-2;if(Oe===1)Te.children=ue;else if(1<Oe){for(var bt=Array(Oe),nt=0;nt<Oe;nt++)bt[nt]=arguments[nt+2];Te.children=bt}if(M&&M.defaultProps)for(fe in Oe=M.defaultProps,Oe)Te[fe]===void 0&&(Te[fe]=Oe[fe]);return C(M,Se,Te)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(M){return{$$typeof:p,render:M}},Ne.isValidElement=D,Ne.lazy=function(M){return{$$typeof:x,_payload:{_status:-1,_result:M},_init:de}},Ne.memo=function(M,ne){return{$$typeof:y,type:M,compare:ne===void 0?null:ne}},Ne.startTransition=function(M){var ne=N.T,ue={};N.T=ue;try{var fe=M(),Te=N.S;Te!==null&&Te(ue,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(te,ge)}catch(Se){ge(Se)}finally{ne!==null&&ue.types!==null&&(ne.types=ue.types),N.T=ne}},Ne.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Ne.use=function(M){return N.H.use(M)},Ne.useActionState=function(M,ne,ue){return N.H.useActionState(M,ne,ue)},Ne.useCallback=function(M,ne){return N.H.useCallback(M,ne)},Ne.useContext=function(M){return N.H.useContext(M)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(M,ne){return N.H.useDeferredValue(M,ne)},Ne.useEffect=function(M,ne){return N.H.useEffect(M,ne)},Ne.useEffectEvent=function(M){return N.H.useEffectEvent(M)},Ne.useId=function(){return N.H.useId()},Ne.useImperativeHandle=function(M,ne,ue){return N.H.useImperativeHandle(M,ne,ue)},Ne.useInsertionEffect=function(M,ne){return N.H.useInsertionEffect(M,ne)},Ne.useLayoutEffect=function(M,ne){return N.H.useLayoutEffect(M,ne)},Ne.useMemo=function(M,ne){return N.H.useMemo(M,ne)},Ne.useOptimistic=function(M,ne){return N.H.useOptimistic(M,ne)},Ne.useReducer=function(M,ne,ue){return N.H.useReducer(M,ne,ue)},Ne.useRef=function(M){return N.H.useRef(M)},Ne.useState=function(M){return N.H.useState(M)},Ne.useSyncExternalStore=function(M,ne,ue){return N.H.useSyncExternalStore(M,ne,ue)},Ne.useTransition=function(){return N.H.useTransition()},Ne.version="19.2.3",Ne}var e_;function Rp(){return e_||(e_=1,Am.exports=E2()),Am.exports}var le=Rp();const Ip=_x(le);var Nm={exports:{}},ql={},Cm={exports:{}},Rm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t_;function S2(){return t_||(t_=1,(function(s){function e(R,se){var de=R.length;R.push(se);e:for(;0<de;){var ge=de-1>>>1,Be=R[ge];if(0<o(Be,se))R[ge]=se,R[de]=Be,de=ge;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var se=R[0],de=R.pop();if(de!==se){R[0]=de;e:for(var ge=0,Be=R.length,M=Be>>>1;ge<M;){var ne=2*(ge+1)-1,ue=R[ne],fe=ne+1,Te=R[fe];if(0>o(ue,de))fe<Be&&0>o(Te,ue)?(R[ge]=Te,R[fe]=de,ge=fe):(R[ge]=ue,R[ne]=de,ge=ne);else if(fe<Be&&0>o(Te,de))R[ge]=Te,R[fe]=de,ge=fe;else break e}}return se}function o(R,se){var de=R.sortIndex-se.sortIndex;return de!==0?de:R.id-se.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var u=Date,p=u.now();s.unstable_now=function(){return u.now()-p}}var g=[],y=[],x=1,T=null,S=3,O=!1,q=!1,Z=!1,U=!1,X=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;function L(R){for(var se=n(y);se!==null;){if(se.callback===null)r(y);else if(se.startTime<=R)r(y),se.sortIndex=se.expirationTime,e(g,se);else break;se=n(y)}}function H(R){if(Z=!1,L(R),!q)if(n(g)!==null)q=!0,te||(te=!0,z());else{var se=n(y);se!==null&&Q(H,se.startTime-R)}}var te=!1,N=-1,E=5,C=-1;function j(){return U?!0:!(s.unstable_now()-C<E)}function D(){if(U=!1,te){var R=s.unstable_now();C=R;var se=!0;try{e:{q=!1,Z&&(Z=!1,Y(N),N=-1),O=!0;var de=S;try{t:{for(L(R),T=n(g);T!==null&&!(T.expirationTime>R&&j());){var ge=T.callback;if(typeof ge=="function"){T.callback=null,S=T.priorityLevel;var Be=ge(T.expirationTime<=R);if(R=s.unstable_now(),typeof Be=="function"){T.callback=Be,L(R),se=!0;break t}T===n(g)&&r(g),L(R)}else r(g);T=n(g)}if(T!==null)se=!0;else{var M=n(y);M!==null&&Q(H,M.startTime-R),se=!1}}break e}finally{T=null,S=de,O=!1}se=void 0}}finally{se?z():te=!1}}}var z;if(typeof ee=="function")z=function(){ee(D)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,P=I.port2;I.port1.onmessage=D,z=function(){P.postMessage(null)}}else z=function(){X(D,0)};function Q(R,se){N=X(function(){R(s.unstable_now())},se)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(R){R.callback=null},s.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<R?Math.floor(1e3/R):5},s.unstable_getCurrentPriorityLevel=function(){return S},s.unstable_next=function(R){switch(S){case 1:case 2:case 3:var se=3;break;default:se=S}var de=S;S=se;try{return R()}finally{S=de}},s.unstable_requestPaint=function(){U=!0},s.unstable_runWithPriority=function(R,se){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var de=S;S=R;try{return se()}finally{S=de}},s.unstable_scheduleCallback=function(R,se,de){var ge=s.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?ge+de:ge):de=ge,R){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=de+Be,R={id:x++,callback:se,priorityLevel:R,startTime:de,expirationTime:Be,sortIndex:-1},de>ge?(R.sortIndex=de,e(y,R),n(g)===null&&R===n(y)&&(Z?(Y(N),N=-1):Z=!0,Q(H,de-ge))):(R.sortIndex=Be,e(g,R),q||O||(q=!0,te||(te=!0,z()))),R},s.unstable_shouldYield=j,s.unstable_wrapCallback=function(R){var se=S;return function(){var de=S;S=se;try{return R.apply(this,arguments)}finally{S=de}}}})(Rm)),Rm}var n_;function A2(){return n_||(n_=1,Cm.exports=S2()),Cm.exports}var Im={exports:{}},Xt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s_;function N2(){if(s_)return Xt;s_=1;var s=Rp();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)y+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,y,x){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:g,containerInfo:y,implementation:x}}var u=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Xt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Xt.createPortal=function(g,y){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,x)},Xt.flushSync=function(g){var y=u.T,x=r.p;try{if(u.T=null,r.p=2,g)return g()}finally{u.T=y,r.p=x,r.d.f()}},Xt.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},Xt.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Xt.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var x=y.as,T=p(x,y.crossOrigin),S=typeof y.integrity=="string"?y.integrity:void 0,O=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;x==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:O}):x==="script"&&r.d.X(g,{crossOrigin:T,integrity:S,fetchPriority:O,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Xt.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var x=p(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},Xt.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var x=y.as,T=p(x,y.crossOrigin);r.d.L(g,x,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Xt.preloadModule=function(g,y){if(typeof g=="string")if(y){var x=p(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},Xt.requestFormReset=function(g){r.d.r(g)},Xt.unstable_batchedUpdates=function(g,y){return g(y)},Xt.useFormState=function(g,y,x){return u.H.useFormState(g,y,x)},Xt.useFormStatus=function(){return u.H.useHostTransitionStatus()},Xt.version="19.2.3",Xt}var i_;function C2(){if(i_)return Im.exports;i_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Im.exports=N2(),Im.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r_;function R2(){if(r_)return ql;r_=1;var s=A2(),e=Rp(),n=C2();function r(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function u(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(r(188))}function y(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(r(188));return i!==t?null:t}for(var a=t,l=i;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return g(d),t;if(m===l)return g(d),i;m=m.sibling}throw Error(r(188))}if(a.return!==l.return)a=d,l=m;else{for(var _=!1,w=d.child;w;){if(w===a){_=!0,a=d,l=m;break}if(w===l){_=!0,l=d,a=m;break}w=w.sibling}if(!_){for(w=m.child;w;){if(w===a){_=!0,a=m,l=d;break}if(w===l){_=!0,l=m,a=d;break}w=w.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:i}function x(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=x(t),i!==null)return i;t=t.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),Y=Symbol.for("react.consumer"),ee=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function z(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function P(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Z:return"Fragment";case X:return"Profiler";case U:return"StrictMode";case H:return"Suspense";case te:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case q:return"Portal";case ee:return t.displayName||"Context";case Y:return(t._context.displayName||"Context")+".Consumer";case L:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return i=t.displayName||null,i!==null?i:P(t.type)||"Memo";case E:i=t._payload,t=t._init;try{return P(t(i))}catch{}}return null}var Q=Array.isArray,R=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},ge=[],Be=-1;function M(t){return{current:t}}function ne(t){0>Be||(t.current=ge[Be],ge[Be]=null,Be--)}function ue(t,i){Be++,ge[Be]=t.current,t.current=i}var fe=M(null),Te=M(null),Se=M(null),Oe=M(null);function bt(t,i){switch(ue(Se,i),ue(Te,t),ue(fe,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?bv(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=bv(i),t=xv(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ne(fe),ue(fe,t)}function nt(){ne(fe),ne(Te),ne(Se)}function kn(t){t.memoizedState!==null&&ue(Oe,t);var i=fe.current,a=xv(i,t.type);i!==a&&(ue(Te,t),ue(fe,a))}function _a(t){Te.current===t&&(ne(fe),ne(Te)),Oe.current===t&&(ne(Oe),Pl._currentValue=de)}var ba,xa;function ds(t){if(ba===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);ba=i&&i[1]||"",xa=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ba+t+xa}var Po=!1;function Tr(t,i){if(!t||Po)return"";Po=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(J){var $=J}Reflect.construct(t,[],ae)}else{try{ae.call()}catch(J){$=J}t.call(ae.prototype)}}else{try{throw Error()}catch(J){$=J}(ae=t())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(J){if(J&&$&&typeof J.stack=="string")return[J.stack,$.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),_=m[0],w=m[1];if(_&&w){var k=_.split(`
`),K=w.split(`
`);for(d=l=0;l<k.length&&!k[l].includes("DetermineComponentFrameRoot");)l++;for(;d<K.length&&!K[d].includes("DetermineComponentFrameRoot");)d++;if(l===k.length||d===K.length)for(l=k.length-1,d=K.length-1;1<=l&&0<=d&&k[l]!==K[d];)d--;for(;1<=l&&0<=d;l--,d--)if(k[l]!==K[d]){if(l!==1||d!==1)do if(l--,d--,0>d||k[l]!==K[d]){var ie=`
`+k[l].replace(" at new "," at ");return t.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",t.displayName)),ie}while(1<=l&&0<=d);break}}}finally{Po=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ds(a):""}function Uo(t,i){switch(t.tag){case 26:case 27:case 5:return ds(t.type);case 16:return ds("Lazy");case 13:return t.child!==i&&i!==null?ds("Suspense Fallback"):ds("Suspense");case 19:return ds("SuspenseList");case 0:case 15:return Tr(t.type,!1);case 11:return Tr(t.type.render,!1);case 1:return Tr(t.type,!0);case 31:return ds("Activity");default:return""}}function zo(t){try{var i="",a=null;do i+=Uo(t,a),a=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var xt=Object.prototype.hasOwnProperty,Ot=s.unstable_scheduleCallback,bi=s.unstable_cancelCallback,Ad=s.unstable_shouldYield,Lc=s.unstable_requestPaint,nn=s.unstable_now,wr=s.unstable_getCurrentPriorityLevel,Bo=s.unstable_ImmediatePriority,Ho=s.unstable_UserBlockingPriority,xi=s.unstable_NormalPriority,Nd=s.unstable_LowPriority,Pc=s.unstable_IdlePriority,Uc=s.log,zc=s.unstable_setDisableYieldValue,Qn=null,Bt=null;function On(t){if(typeof Uc=="function"&&zc(t),Bt&&typeof Bt.setStrictMode=="function")try{Bt.setStrictMode(Qn,t)}catch{}}var mt=Math.clz32?Math.clz32:Hc,Bc=Math.log,Ta=Math.LN2;function Hc(t){return t>>>=0,t===0?32:31-(Bc(t)/Ta|0)|0}var fs=256,Er=262144,Tt=4194304;function ms(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ps(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var d=0,m=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var w=l&134217727;return w!==0?(l=w&~m,l!==0?d=ms(l):(_&=w,_!==0?d=ms(_):a||(a=w&~t,a!==0&&(d=ms(a))))):(w=l&~m,w!==0?d=ms(w):_!==0?d=ms(_):a||(a=l&~t,a!==0&&(d=ms(a)))),d===0?0:i!==0&&i!==d&&(i&m)===0&&(m=d&-d,a=i&-i,m>=a||m===32&&(a&4194048)!==0)?i:d}function Xn(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Cd(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qc(){var t=Tt;return Tt<<=1,(Tt&62914560)===0&&(Tt=4194304),t}function gs(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Sr(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Rd(t,i,a,l,d,m){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,k=t.expirationTimes,K=t.hiddenUpdates;for(a=_&~a;0<a;){var ie=31-mt(a),ae=1<<ie;w[ie]=0,k[ie]=-1;var $=K[ie];if($!==null)for(K[ie]=null,ie=0;ie<$.length;ie++){var J=$[ie];J!==null&&(J.lane&=-536870913)}a&=~ae}l!==0&&Ar(t,l,0),m!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=m&~(_&~i))}function Ar(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-mt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function qo(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-mt(a),d=1<<l;d&i|t[l]&i&&(t[l]|=i),a&=~d}}function Go(t,i){var a=i&-i;return a=(a&42)!==0?1:Nr(a),(a&(t.suspendedLanes|i))!==0?0:a}function Nr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Fs(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Gc(){var t=se.p;return t!==0?t:(t=window.event,t===void 0?32:Gv(t.type))}function Wn(t,i){var a=se.p;try{return se.p=t,i()}finally{se.p=a}}var Jn=Math.random().toString(36).slice(2),wt="__reactFiber$"+Jn,Vt="__reactProps$"+Jn,ys="__reactContainer$"+Jn,wa="__reactEvents$"+Jn,Id="__reactListeners$"+Jn,Fc="__reactHandles$"+Jn,Kc="__reactResources$"+Jn,vs="__reactMarker$"+Jn;function Ea(t){delete t[wt],delete t[Vt],delete t[wa],delete t[Id],delete t[Fc]}function _s(t){var i=t[wt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[ys]||a[wt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=Cv(t);t!==null;){if(a=t[wt])return a;t=Cv(t)}return i}t=a,a=t.parentNode}return null}function jn(t){if(t=t[wt]||t[ys]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function _n(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(r(33))}function bs(t){var i=t[Kc];return i||(i=t[Kc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Et(t){t[vs]=!0}var Fo=new Set,Ko={};function xs(t,i){Ts(t,i),Ts(t+"Capture",i)}function Ts(t,i){for(Ko[t]=i,t=0;t<i.length;t++)Fo.add(i[t])}var $o=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yo={},Qo={};function $c(t){return xt.call(Qo,t)?!0:xt.call(Yo,t)?!1:$o.test(t)?Qo[t]=!0:(Yo[t]=!0,!1)}function Sa(t,i,a){if($c(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function bn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function St(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function Lt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ti(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Xo(t,i,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,m=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return d.call(this)},set:function(_){a=""+_,m.call(this,_)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Ye(t){if(!t._valueTracker){var i=Ti(t)?"checked":"value";t._valueTracker=Xo(t,i,""+t[i])}}function Cr(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Ti(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function ws(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Rr=/[\n"\\]/g;function ln(t){return t.replace(Rr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Aa(t,i,a,l,d,m,_,w){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Lt(i)):t.value!==""+Lt(i)&&(t.value=""+Lt(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?Wo(t,_,Lt(i)):a!=null?Wo(t,_,Lt(a)):l!=null&&t.removeAttribute("value"),d==null&&m!=null&&(t.defaultChecked=!!m),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+Lt(w):t.removeAttribute("name")}function Yc(t,i,a,l,d,m,_,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),i!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){Ye(t);return}a=a!=null?""+Lt(a):"",i=i!=null?""+Lt(i):a,w||i===t.value||(t.value=i),t.defaultValue=i}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),Ye(t)}function Wo(t,i,a){i==="number"&&ws(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function wi(t,i,a,l){if(t=t.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=i.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Lt(a),i=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,l&&(t[d].defaultSelected=!0);return}i!==null||t[d].disabled||(i=t[d])}i!==null&&(i.selected=!0)}}function Qc(t,i,a){if(i!=null&&(i=""+Lt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Lt(a):""}function Ei(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(Q(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Lt(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Ye(t)}function cn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Xc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jo(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||Xc.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Zo(t,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var d in i)l=i[d],i.hasOwnProperty(d)&&a[d]!==l&&Jo(t,d,l)}else for(var m in i)i.hasOwnProperty(m)&&Jo(t,m,i[m])}function Na(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Si=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ca(t){return Si.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Zn(){}var el=null;function Dn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ai=null,Es=null;function Ir(t){var i=jn(t);if(i&&(t=i.stateNode)){var a=t[Vt]||null;e:switch(t=i.stateNode,i.type){case"input":if(Aa(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ln(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var d=l[Vt]||null;if(!d)throw Error(r(90));Aa(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Cr(l)}break e;case"textarea":Qc(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&wi(t,!!a.multiple,i,!1)}}}var Ra=!1;function Ni(t,i,a){if(Ra)return t(i,a);Ra=!0;try{var l=t(i);return l}finally{if(Ra=!1,(Ai!==null||Es!==null)&&(Gu(),Ai&&(i=Ai,t=Es,Es=Ai=null,Ir(i),t)))for(i=0;i<t.length;i++)Ir(t[i])}}function es(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Vt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kr=!1;if(Mn)try{var We={};Object.defineProperty(We,"passive",{get:function(){kr=!0}}),window.addEventListener("test",We,We),window.removeEventListener("test",We,We)}catch{kr=!1}var Ss=null,tl=null,Or=null;function nl(){if(Or)return Or;var t,i=tl,a=i.length,l,d="value"in Ss?Ss.value:Ss.textContent,m=d.length;for(t=0;t<a&&i[t]===d[t];t++);var _=a-t;for(l=1;l<=_&&i[a-l]===d[m-l];l++);return Or=d.slice(t,1<l?1-l:void 0)}function jr(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Ks(){return!0}function ts(){return!1}function Ht(t){function i(a,l,d,m,_){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ks:ts,this.isPropagationStopped=ts,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ks)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ks)},persist:function(){},isPersistent:Ks}),i}var $s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},As=Ht($s),Ci=T({},$s,{view:0,detail:0}),sl=Ht(Ci),Ri,Ia,Ns,ka=T({},Ci,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ii,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ns&&(Ns&&t.type==="mousemove"?(Ri=t.screenX-Ns.screenX,Ia=t.screenY-Ns.screenY):Ia=Ri=0,Ns=t),Ri)},movementY:function(t){return"movementY"in t?t.movementY:Ia}}),il=Ht(ka),Dr=T({},ka,{dataTransfer:0}),Jc=Ht(Dr),Zc=T({},Ci,{relatedTarget:0}),Mr=Ht(Zc),rl=T({},$s,{animationName:0,elapsedTime:0,pseudoElement:0}),eu=Ht(rl),Oa=T({},$s,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tu=Ht(Oa),nu=T({},$s,{data:0}),Cs=Ht(nu),su={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ru={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function au(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=ru[t])?!!i[t]:!1}function Ii(){return au}var sn=T({},Ci,{key:function(t){if(t.key){var i=su[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=jr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?iu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ii,charCode:function(t){return t.type==="keypress"?jr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ou=Ht(sn),lu=T({},ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ys=Ht(lu),h=T({},Ci,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ii}),v=Ht(h),b=T({},$s,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Ht(b),G=T({},ka,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),W=Ht(G),he=T({},$s,{newState:0,oldState:0}),Re=Ht(he),pt=[9,13,27,32],Fe=Mn&&"CompositionEvent"in window,ot=null;Mn&&"documentMode"in document&&(ot=document.documentMode);var Vn=Mn&&"TextEvent"in window&&!ot,Rs=Mn&&(!Fe||ot&&8<ot&&11>=ot),ns=" ",ss=!1;function Vr(t,i){switch(t){case"keyup":return pt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ja(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Da=!1;function Kw(t,i){switch(t){case"compositionend":return ja(i);case"keypress":return i.which!==32?null:(ss=!0,ns);case"textInput":return t=i.data,t===ns&&ss?null:t;default:return null}}function $w(t,i){if(Da)return t==="compositionend"||!Fe&&Vr(t,i)?(t=nl(),Or=tl=Ss=null,Da=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Rs&&i.locale!=="ko"?null:i.data;default:return null}}var Yw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kg(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Yw[t.type]:i==="textarea"}function Og(t,i,a,l){Ai?Es?Es.push(l):Es=[l]:Ai=l,i=Wu(i,"onChange"),0<i.length&&(a=new As("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var al=null,ol=null;function Qw(t){mv(t,0)}function cu(t){var i=_n(t);if(Cr(i))return t}function jg(t,i){if(t==="change")return i}var Dg=!1;if(Mn){var kd;if(Mn){var Od="oninput"in document;if(!Od){var Mg=document.createElement("div");Mg.setAttribute("oninput","return;"),Od=typeof Mg.oninput=="function"}kd=Od}else kd=!1;Dg=kd&&(!document.documentMode||9<document.documentMode)}function Vg(){al&&(al.detachEvent("onpropertychange",Lg),ol=al=null)}function Lg(t){if(t.propertyName==="value"&&cu(ol)){var i=[];Og(i,ol,t,Dn(t)),Ni(Qw,i)}}function Xw(t,i,a){t==="focusin"?(Vg(),al=i,ol=a,al.attachEvent("onpropertychange",Lg)):t==="focusout"&&Vg()}function Ww(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cu(ol)}function Jw(t,i){if(t==="click")return cu(i)}function Zw(t,i){if(t==="input"||t==="change")return cu(i)}function eE(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var xn=typeof Object.is=="function"?Object.is:eE;function ll(t,i){if(xn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!xt.call(i,d)||!xn(t[d],i[d]))return!1}return!0}function Pg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ug(t,i){var a=Pg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Pg(a)}}function zg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?zg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Bg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=ws(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=ws(t.document)}return i}function jd(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var tE=Mn&&"documentMode"in document&&11>=document.documentMode,Ma=null,Dd=null,cl=null,Md=!1;function Hg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Md||Ma==null||Ma!==ws(l)||(l=Ma,"selectionStart"in l&&jd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),cl&&ll(cl,l)||(cl=l,l=Wu(Dd,"onSelect"),0<l.length&&(i=new As("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=Ma)))}function Lr(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Va={animationend:Lr("Animation","AnimationEnd"),animationiteration:Lr("Animation","AnimationIteration"),animationstart:Lr("Animation","AnimationStart"),transitionrun:Lr("Transition","TransitionRun"),transitionstart:Lr("Transition","TransitionStart"),transitioncancel:Lr("Transition","TransitionCancel"),transitionend:Lr("Transition","TransitionEnd")},Vd={},qg={};Mn&&(qg=document.createElement("div").style,"AnimationEvent"in window||(delete Va.animationend.animation,delete Va.animationiteration.animation,delete Va.animationstart.animation),"TransitionEvent"in window||delete Va.transitionend.transition);function Pr(t){if(Vd[t])return Vd[t];if(!Va[t])return t;var i=Va[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in qg)return Vd[t]=i[a];return t}var Gg=Pr("animationend"),Fg=Pr("animationiteration"),Kg=Pr("animationstart"),nE=Pr("transitionrun"),sE=Pr("transitionstart"),iE=Pr("transitioncancel"),$g=Pr("transitionend"),Yg=new Map,Ld="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ld.push("scrollEnd");function is(t,i){Yg.set(t,i),xs(i,[t])}var uu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ln=[],La=0,Pd=0;function hu(){for(var t=La,i=Pd=La=0;i<t;){var a=Ln[i];Ln[i++]=null;var l=Ln[i];Ln[i++]=null;var d=Ln[i];Ln[i++]=null;var m=Ln[i];if(Ln[i++]=null,l!==null&&d!==null){var _=l.pending;_===null?d.next=d:(d.next=_.next,_.next=d),l.pending=d}m!==0&&Qg(a,d,m)}}function du(t,i,a,l){Ln[La++]=t,Ln[La++]=i,Ln[La++]=a,Ln[La++]=l,Pd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Ud(t,i,a,l){return du(t,i,a,l),fu(t)}function Ur(t,i){return du(t,null,null,i),fu(t)}function Qg(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var d=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(d=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,d&&i!==null&&(d=31-mt(a),t=m.hiddenUpdates,l=t[d],l===null?t[d]=[i]:l.push(i),i.lane=a|536870912),m):null}function fu(t){if(50<kl)throw kl=0,Qf=null,Error(r(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Pa={};function rE(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(t,i,a,l){return new rE(t,i,a,l)}function zd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Qs(t,i){var a=t.alternate;return a===null?(a=Tn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Xg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function mu(t,i,a,l,d,m){var _=0;if(l=t,typeof t=="function")zd(t)&&(_=1);else if(typeof t=="string")_=u2(t,a,fe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=Tn(31,a,i,d),t.elementType=C,t.lanes=m,t;case Z:return zr(a.children,d,m,i);case U:_=8,d|=24;break;case X:return t=Tn(12,a,i,d|2),t.elementType=X,t.lanes=m,t;case H:return t=Tn(13,a,i,d),t.elementType=H,t.lanes=m,t;case te:return t=Tn(19,a,i,d),t.elementType=te,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ee:_=10;break e;case Y:_=9;break e;case L:_=11;break e;case N:_=14;break e;case E:_=16,l=null;break e}_=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return i=Tn(_,a,i,d),i.elementType=t,i.type=l,i.lanes=m,i}function zr(t,i,a,l){return t=Tn(7,t,l,i),t.lanes=a,t}function Bd(t,i,a){return t=Tn(6,t,null,i),t.lanes=a,t}function Wg(t){var i=Tn(18,null,null,0);return i.stateNode=t,i}function Hd(t,i,a){return i=Tn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Jg=new WeakMap;function Pn(t,i){if(typeof t=="object"&&t!==null){var a=Jg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:zo(i)},Jg.set(t,i),i)}return{value:t,source:i,stack:zo(i)}}var Ua=[],za=0,pu=null,ul=0,Un=[],zn=0,ki=null,Is=1,ks="";function Xs(t,i){Ua[za++]=ul,Ua[za++]=pu,pu=t,ul=i}function Zg(t,i,a){Un[zn++]=Is,Un[zn++]=ks,Un[zn++]=ki,ki=t;var l=Is;t=ks;var d=32-mt(l)-1;l&=~(1<<d),a+=1;var m=32-mt(i)+d;if(30<m){var _=d-d%5;m=(l&(1<<_)-1).toString(32),l>>=_,d-=_,Is=1<<32-mt(i)+d|a<<d|l,ks=m+t}else Is=1<<m|a<<d|l,ks=t}function qd(t){t.return!==null&&(Xs(t,1),Zg(t,1,0))}function Gd(t){for(;t===pu;)pu=Ua[--za],Ua[za]=null,ul=Ua[--za],Ua[za]=null;for(;t===ki;)ki=Un[--zn],Un[zn]=null,ks=Un[--zn],Un[zn]=null,Is=Un[--zn],Un[zn]=null}function e0(t,i){Un[zn++]=Is,Un[zn++]=ks,Un[zn++]=ki,Is=i.id,ks=i.overflow,ki=t}var qt=null,st=null,ze=!1,Oi=null,Bn=!1,Fd=Error(r(519));function ji(t){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw hl(Pn(i,t)),Fd}function t0(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[wt]=t,i[Vt]=l,a){case"dialog":De("cancel",i),De("close",i);break;case"iframe":case"object":case"embed":De("load",i);break;case"video":case"audio":for(a=0;a<jl.length;a++)De(jl[a],i);break;case"source":De("error",i);break;case"img":case"image":case"link":De("error",i),De("load",i);break;case"details":De("toggle",i);break;case"input":De("invalid",i),Yc(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":De("invalid",i);break;case"textarea":De("invalid",i),Ei(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||vv(i.textContent,a)?(l.popover!=null&&(De("beforetoggle",i),De("toggle",i)),l.onScroll!=null&&De("scroll",i),l.onScrollEnd!=null&&De("scrollend",i),l.onClick!=null&&(i.onclick=Zn),i=!0):i=!1,i||ji(t,!0)}function n0(t){for(qt=t.return;qt;)switch(qt.tag){case 5:case 31:case 13:Bn=!1;return;case 27:case 3:Bn=!0;return;default:qt=qt.return}}function Ba(t){if(t!==qt)return!1;if(!ze)return n0(t),ze=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||um(t.type,t.memoizedProps)),a=!a),a&&st&&ji(t),n0(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));st=Nv(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));st=Nv(t)}else i===27?(i=st,$i(t.type)?(t=pm,pm=null,st=t):st=i):st=qt?qn(t.stateNode.nextSibling):null;return!0}function Br(){st=qt=null,ze=!1}function Kd(){var t=Oi;return t!==null&&(fn===null?fn=t:fn.push.apply(fn,t),Oi=null),t}function hl(t){Oi===null?Oi=[t]:Oi.push(t)}var $d=M(null),Hr=null,Ws=null;function Di(t,i,a){ue($d,i._currentValue),i._currentValue=a}function Js(t){t._currentValue=$d.current,ne($d)}function Yd(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Qd(t,i,a,l){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var m=d.dependencies;if(m!==null){var _=d.child;m=m.firstContext;e:for(;m!==null;){var w=m;m=d;for(var k=0;k<i.length;k++)if(w.context===i[k]){m.lanes|=a,w=m.alternate,w!==null&&(w.lanes|=a),Yd(m.return,a,t),l||(_=null);break e}m=w.next}}else if(d.tag===18){if(_=d.return,_===null)throw Error(r(341));_.lanes|=a,m=_.alternate,m!==null&&(m.lanes|=a),Yd(_,a,t),_=null}else _=d.child;if(_!==null)_.return=d;else for(_=d;_!==null;){if(_===t){_=null;break}if(d=_.sibling,d!==null){d.return=_.return,_=d;break}_=_.return}d=_}}function Ha(t,i,a,l){t=null;for(var d=i,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var _=d.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var w=d.type;xn(d.pendingProps.value,_.value)||(t!==null?t.push(w):t=[w])}}else if(d===Oe.current){if(_=d.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(Pl):t=[Pl])}d=d.return}t!==null&&Qd(i,t,a,l),i.flags|=262144}function gu(t){for(t=t.firstContext;t!==null;){if(!xn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function qr(t){Hr=t,Ws=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Gt(t){return s0(Hr,t)}function yu(t,i){return Hr===null&&qr(t),s0(t,i)}function s0(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Ws===null){if(t===null)throw Error(r(308));Ws=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Ws=Ws.next=i;return a}var aE=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},oE=s.unstable_scheduleCallback,lE=s.unstable_NormalPriority,At={$$typeof:ee,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xd(){return{controller:new aE,data:new Map,refCount:0}}function dl(t){t.refCount--,t.refCount===0&&oE(lE,function(){t.controller.abort()})}var fl=null,Wd=0,qa=0,Ga=null;function cE(t,i){if(fl===null){var a=fl=[];Wd=0,qa=tm(),Ga={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Wd++,i.then(i0,i0),i}function i0(){if(--Wd===0&&fl!==null){Ga!==null&&(Ga.status="fulfilled");var t=fl;fl=null,qa=0,Ga=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function uE(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var d=0;d<a.length;d++)(0,a[d])(i)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var r0=R.S;R.S=function(t,i){Hy=nn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&cE(t,i),r0!==null&&r0(t,i)};var Gr=M(null);function Jd(){var t=Gr.current;return t!==null?t:tt.pooledCache}function vu(t,i){i===null?ue(Gr,Gr.current):ue(Gr,i.pool)}function a0(){var t=Jd();return t===null?null:{parent:At._currentValue,pool:t}}var Fa=Error(r(460)),Zd=Error(r(474)),_u=Error(r(542)),bu={then:function(){}};function o0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function l0(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Zn,Zn),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,u0(t),t;default:if(typeof i.status=="string")i.then(Zn,Zn);else{if(t=tt,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var d=i;d.status="fulfilled",d.value=l}},function(l){if(i.status==="pending"){var d=i;d.status="rejected",d.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,u0(t),t}throw Kr=i,Fa}}function Fr(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Kr=a,Fa):a}}var Kr=null;function c0(){if(Kr===null)throw Error(r(459));var t=Kr;return Kr=null,t}function u0(t){if(t===Fa||t===_u)throw Error(r(483))}var Ka=null,ml=0;function xu(t){var i=ml;return ml+=1,Ka===null&&(Ka=[]),l0(Ka,t,i)}function pl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Tu(t,i){throw i.$$typeof===S?Error(r(525)):(t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function h0(t){function i(B,V){if(t){var F=B.deletions;F===null?(B.deletions=[V],B.flags|=16):F.push(V)}}function a(B,V){if(!t)return null;for(;V!==null;)i(B,V),V=V.sibling;return null}function l(B){for(var V=new Map;B!==null;)B.key!==null?V.set(B.key,B):V.set(B.index,B),B=B.sibling;return V}function d(B,V){return B=Qs(B,V),B.index=0,B.sibling=null,B}function m(B,V,F){return B.index=F,t?(F=B.alternate,F!==null?(F=F.index,F<V?(B.flags|=67108866,V):F):(B.flags|=67108866,V)):(B.flags|=1048576,V)}function _(B){return t&&B.alternate===null&&(B.flags|=67108866),B}function w(B,V,F,re){return V===null||V.tag!==6?(V=Bd(F,B.mode,re),V.return=B,V):(V=d(V,F),V.return=B,V)}function k(B,V,F,re){var _e=F.type;return _e===Z?ie(B,V,F.props.children,re,F.key):V!==null&&(V.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===E&&Fr(_e)===V.type)?(V=d(V,F.props),pl(V,F),V.return=B,V):(V=mu(F.type,F.key,F.props,null,B.mode,re),pl(V,F),V.return=B,V)}function K(B,V,F,re){return V===null||V.tag!==4||V.stateNode.containerInfo!==F.containerInfo||V.stateNode.implementation!==F.implementation?(V=Hd(F,B.mode,re),V.return=B,V):(V=d(V,F.children||[]),V.return=B,V)}function ie(B,V,F,re,_e){return V===null||V.tag!==7?(V=zr(F,B.mode,re,_e),V.return=B,V):(V=d(V,F),V.return=B,V)}function ae(B,V,F){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Bd(""+V,B.mode,F),V.return=B,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case O:return F=mu(V.type,V.key,V.props,null,B.mode,F),pl(F,V),F.return=B,F;case q:return V=Hd(V,B.mode,F),V.return=B,V;case E:return V=Fr(V),ae(B,V,F)}if(Q(V)||z(V))return V=zr(V,B.mode,F,null),V.return=B,V;if(typeof V.then=="function")return ae(B,xu(V),F);if(V.$$typeof===ee)return ae(B,yu(B,V),F);Tu(B,V)}return null}function $(B,V,F,re){var _e=V!==null?V.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return _e!==null?null:w(B,V,""+F,re);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case O:return F.key===_e?k(B,V,F,re):null;case q:return F.key===_e?K(B,V,F,re):null;case E:return F=Fr(F),$(B,V,F,re)}if(Q(F)||z(F))return _e!==null?null:ie(B,V,F,re,null);if(typeof F.then=="function")return $(B,V,xu(F),re);if(F.$$typeof===ee)return $(B,V,yu(B,F),re);Tu(B,F)}return null}function J(B,V,F,re,_e){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return B=B.get(F)||null,w(V,B,""+re,_e);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case O:return B=B.get(re.key===null?F:re.key)||null,k(V,B,re,_e);case q:return B=B.get(re.key===null?F:re.key)||null,K(V,B,re,_e);case E:return re=Fr(re),J(B,V,F,re,_e)}if(Q(re)||z(re))return B=B.get(F)||null,ie(V,B,re,_e,null);if(typeof re.then=="function")return J(B,V,F,xu(re),_e);if(re.$$typeof===ee)return J(B,V,F,yu(V,re),_e);Tu(V,re)}return null}function pe(B,V,F,re){for(var _e=null,qe=null,ye=V,ke=V=0,Ve=null;ye!==null&&ke<F.length;ke++){ye.index>ke?(Ve=ye,ye=null):Ve=ye.sibling;var Ge=$(B,ye,F[ke],re);if(Ge===null){ye===null&&(ye=Ve);break}t&&ye&&Ge.alternate===null&&i(B,ye),V=m(Ge,V,ke),qe===null?_e=Ge:qe.sibling=Ge,qe=Ge,ye=Ve}if(ke===F.length)return a(B,ye),ze&&Xs(B,ke),_e;if(ye===null){for(;ke<F.length;ke++)ye=ae(B,F[ke],re),ye!==null&&(V=m(ye,V,ke),qe===null?_e=ye:qe.sibling=ye,qe=ye);return ze&&Xs(B,ke),_e}for(ye=l(ye);ke<F.length;ke++)Ve=J(ye,B,ke,F[ke],re),Ve!==null&&(t&&Ve.alternate!==null&&ye.delete(Ve.key===null?ke:Ve.key),V=m(Ve,V,ke),qe===null?_e=Ve:qe.sibling=Ve,qe=Ve);return t&&ye.forEach(function(Ji){return i(B,Ji)}),ze&&Xs(B,ke),_e}function xe(B,V,F,re){if(F==null)throw Error(r(151));for(var _e=null,qe=null,ye=V,ke=V=0,Ve=null,Ge=F.next();ye!==null&&!Ge.done;ke++,Ge=F.next()){ye.index>ke?(Ve=ye,ye=null):Ve=ye.sibling;var Ji=$(B,ye,Ge.value,re);if(Ji===null){ye===null&&(ye=Ve);break}t&&ye&&Ji.alternate===null&&i(B,ye),V=m(Ji,V,ke),qe===null?_e=Ji:qe.sibling=Ji,qe=Ji,ye=Ve}if(Ge.done)return a(B,ye),ze&&Xs(B,ke),_e;if(ye===null){for(;!Ge.done;ke++,Ge=F.next())Ge=ae(B,Ge.value,re),Ge!==null&&(V=m(Ge,V,ke),qe===null?_e=Ge:qe.sibling=Ge,qe=Ge);return ze&&Xs(B,ke),_e}for(ye=l(ye);!Ge.done;ke++,Ge=F.next())Ge=J(ye,B,ke,Ge.value,re),Ge!==null&&(t&&Ge.alternate!==null&&ye.delete(Ge.key===null?ke:Ge.key),V=m(Ge,V,ke),qe===null?_e=Ge:qe.sibling=Ge,qe=Ge);return t&&ye.forEach(function(x2){return i(B,x2)}),ze&&Xs(B,ke),_e}function et(B,V,F,re){if(typeof F=="object"&&F!==null&&F.type===Z&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case O:e:{for(var _e=F.key;V!==null;){if(V.key===_e){if(_e=F.type,_e===Z){if(V.tag===7){a(B,V.sibling),re=d(V,F.props.children),re.return=B,B=re;break e}}else if(V.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===E&&Fr(_e)===V.type){a(B,V.sibling),re=d(V,F.props),pl(re,F),re.return=B,B=re;break e}a(B,V);break}else i(B,V);V=V.sibling}F.type===Z?(re=zr(F.props.children,B.mode,re,F.key),re.return=B,B=re):(re=mu(F.type,F.key,F.props,null,B.mode,re),pl(re,F),re.return=B,B=re)}return _(B);case q:e:{for(_e=F.key;V!==null;){if(V.key===_e)if(V.tag===4&&V.stateNode.containerInfo===F.containerInfo&&V.stateNode.implementation===F.implementation){a(B,V.sibling),re=d(V,F.children||[]),re.return=B,B=re;break e}else{a(B,V);break}else i(B,V);V=V.sibling}re=Hd(F,B.mode,re),re.return=B,B=re}return _(B);case E:return F=Fr(F),et(B,V,F,re)}if(Q(F))return pe(B,V,F,re);if(z(F)){if(_e=z(F),typeof _e!="function")throw Error(r(150));return F=_e.call(F),xe(B,V,F,re)}if(typeof F.then=="function")return et(B,V,xu(F),re);if(F.$$typeof===ee)return et(B,V,yu(B,F),re);Tu(B,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,V!==null&&V.tag===6?(a(B,V.sibling),re=d(V,F),re.return=B,B=re):(a(B,V),re=Bd(F,B.mode,re),re.return=B,B=re),_(B)):a(B,V)}return function(B,V,F,re){try{ml=0;var _e=et(B,V,F,re);return Ka=null,_e}catch(ye){if(ye===Fa||ye===_u)throw ye;var qe=Tn(29,ye,null,B.mode);return qe.lanes=re,qe.return=B,qe}finally{}}}var $r=h0(!0),d0=h0(!1),Mi=!1;function ef(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Vi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Li(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ke&2)!==0){var d=l.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),l.pending=i,i=fu(t),Qg(t,null,a),i}return du(t,l,i,a),fu(t)}function gl(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,qo(t,a)}}function nf(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?d=m=_:m=m.next=_,a=a.next}while(a!==null);m===null?d=m=i:m=m.next=i}else d=m=i;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var sf=!1;function yl(){if(sf){var t=Ga;if(t!==null)throw t}}function vl(t,i,a,l){sf=!1;var d=t.updateQueue;Mi=!1;var m=d.firstBaseUpdate,_=d.lastBaseUpdate,w=d.shared.pending;if(w!==null){d.shared.pending=null;var k=w,K=k.next;k.next=null,_===null?m=K:_.next=K,_=k;var ie=t.alternate;ie!==null&&(ie=ie.updateQueue,w=ie.lastBaseUpdate,w!==_&&(w===null?ie.firstBaseUpdate=K:w.next=K,ie.lastBaseUpdate=k))}if(m!==null){var ae=d.baseState;_=0,ie=K=k=null,w=m;do{var $=w.lane&-536870913,J=$!==w.lane;if(J?(Me&$)===$:(l&$)===$){$!==0&&$===qa&&(sf=!0),ie!==null&&(ie=ie.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var pe=t,xe=w;$=i;var et=a;switch(xe.tag){case 1:if(pe=xe.payload,typeof pe=="function"){ae=pe.call(et,ae,$);break e}ae=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=xe.payload,$=typeof pe=="function"?pe.call(et,ae,$):pe,$==null)break e;ae=T({},ae,$);break e;case 2:Mi=!0}}$=w.callback,$!==null&&(t.flags|=64,J&&(t.flags|=8192),J=d.callbacks,J===null?d.callbacks=[$]:J.push($))}else J={lane:$,tag:w.tag,payload:w.payload,callback:w.callback,next:null},ie===null?(K=ie=J,k=ae):ie=ie.next=J,_|=$;if(w=w.next,w===null){if(w=d.shared.pending,w===null)break;J=w,w=J.next,J.next=null,d.lastBaseUpdate=J,d.shared.pending=null}}while(!0);ie===null&&(k=ae),d.baseState=k,d.firstBaseUpdate=K,d.lastBaseUpdate=ie,m===null&&(d.shared.lanes=0),Hi|=_,t.lanes=_,t.memoizedState=ae}}function f0(t,i){if(typeof t!="function")throw Error(r(191,t));t.call(i)}function m0(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)f0(a[t],i)}var $a=M(null),wu=M(0);function p0(t,i){t=oi,ue(wu,t),ue($a,i),oi=t|i.baseLanes}function rf(){ue(wu,oi),ue($a,$a.current)}function af(){oi=wu.current,ne($a),ne(wu)}var wn=M(null),Hn=null;function Pi(t){var i=t.alternate;ue(gt,gt.current&1),ue(wn,t),Hn===null&&(i===null||$a.current!==null||i.memoizedState!==null)&&(Hn=t)}function of(t){ue(gt,gt.current),ue(wn,t),Hn===null&&(Hn=t)}function g0(t){t.tag===22?(ue(gt,gt.current),ue(wn,t),Hn===null&&(Hn=t)):Ui()}function Ui(){ue(gt,gt.current),ue(wn,wn.current)}function En(t){ne(wn),Hn===t&&(Hn=null),ne(gt)}var gt=M(0);function Eu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||fm(a)||mm(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Zs=0,Ie=null,Je=null,Nt=null,Su=!1,Ya=!1,Yr=!1,Au=0,_l=0,Qa=null,hE=0;function dt(){throw Error(r(321))}function lf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!xn(t[a],i[a]))return!1;return!0}function cf(t,i,a,l,d,m){return Zs=m,Ie=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,R.H=t===null||t.memoizedState===null?Z0:Ef,Yr=!1,m=a(l,d),Yr=!1,Ya&&(m=v0(i,a,l,d)),y0(t),m}function y0(t){R.H=Tl;var i=Je!==null&&Je.next!==null;if(Zs=0,Nt=Je=Ie=null,Su=!1,_l=0,Qa=null,i)throw Error(r(300));t===null||Ct||(t=t.dependencies,t!==null&&gu(t)&&(Ct=!0))}function v0(t,i,a,l){Ie=t;var d=0;do{if(Ya&&(Qa=null),_l=0,Ya=!1,25<=d)throw Error(r(301));if(d+=1,Nt=Je=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}R.H=ey,m=i(a,l)}while(Ya);return m}function dE(){var t=R.H,i=t.useState()[0];return i=typeof i.then=="function"?bl(i):i,t=t.useState()[0],(Je!==null?Je.memoizedState:null)!==t&&(Ie.flags|=1024),i}function uf(){var t=Au!==0;return Au=0,t}function hf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function df(t){if(Su){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Su=!1}Zs=0,Nt=Je=Ie=null,Ya=!1,_l=Au=0,Qa=null}function rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Ie.memoizedState=Nt=t:Nt=Nt.next=t,Nt}function yt(){if(Je===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var i=Nt===null?Ie.memoizedState:Nt.next;if(i!==null)Nt=i,Je=t;else{if(t===null)throw Ie.alternate===null?Error(r(467)):Error(r(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},Nt===null?Ie.memoizedState=Nt=t:Nt=Nt.next=t}return Nt}function Nu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bl(t){var i=_l;return _l+=1,Qa===null&&(Qa=[]),t=l0(Qa,t,i),i=Ie,(Nt===null?i.memoizedState:Nt.next)===null&&(i=i.alternate,R.H=i===null||i.memoizedState===null?Z0:Ef),t}function Cu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return bl(t);if(t.$$typeof===ee)return Gt(t)}throw Error(r(438,String(t)))}function ff(t){var i=null,a=Ie.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Ie.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(d){return d.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Nu(),Ie.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=j;return i.index++,a}function ei(t,i){return typeof i=="function"?i(t):i}function Ru(t){var i=yt();return mf(i,Je,t)}function mf(t,i,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var d=t.baseQueue,m=l.pending;if(m!==null){if(d!==null){var _=d.next;d.next=m.next,m.next=_}i.baseQueue=d=m,l.pending=null}if(m=t.baseState,d===null)t.memoizedState=m;else{i=d.next;var w=_=null,k=null,K=i,ie=!1;do{var ae=K.lane&-536870913;if(ae!==K.lane?(Me&ae)===ae:(Zs&ae)===ae){var $=K.revertLane;if($===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ae===qa&&(ie=!0);else if((Zs&$)===$){K=K.next,$===qa&&(ie=!0);continue}else ae={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},k===null?(w=k=ae,_=m):k=k.next=ae,Ie.lanes|=$,Hi|=$;ae=K.action,Yr&&a(m,ae),m=K.hasEagerState?K.eagerState:a(m,ae)}else $={lane:ae,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},k===null?(w=k=$,_=m):k=k.next=$,Ie.lanes|=ae,Hi|=ae;K=K.next}while(K!==null&&K!==i);if(k===null?_=m:k.next=w,!xn(m,t.memoizedState)&&(Ct=!0,ie&&(a=Ga,a!==null)))throw a;t.memoizedState=m,t.baseState=_,t.baseQueue=k,l.lastRenderedState=m}return d===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function pf(t){var i=yt(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,d=a.pending,m=i.memoizedState;if(d!==null){a.pending=null;var _=d=d.next;do m=t(m,_.action),_=_.next;while(_!==d);xn(m,i.memoizedState)||(Ct=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,l]}function _0(t,i,a){var l=Ie,d=yt(),m=ze;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!xn((Je||d).memoizedState,a);if(_&&(d.memoizedState=a,Ct=!0),d=d.queue,vf(T0.bind(null,l,d,t),[t]),d.getSnapshot!==i||_||Nt!==null&&Nt.memoizedState.tag&1){if(l.flags|=2048,Xa(9,{destroy:void 0},x0.bind(null,l,d,a,i),null),tt===null)throw Error(r(349));m||(Zs&127)!==0||b0(l,i,a)}return a}function b0(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ie.updateQueue,i===null?(i=Nu(),Ie.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function x0(t,i,a,l){i.value=a,i.getSnapshot=l,w0(i)&&E0(t)}function T0(t,i,a){return a(function(){w0(i)&&E0(t)})}function w0(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!xn(t,a)}catch{return!0}}function E0(t){var i=Ur(t,2);i!==null&&mn(i,t,2)}function gf(t){var i=rn();if(typeof t=="function"){var a=t;if(t=a(),Yr){On(!0);try{a()}finally{On(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:t},i}function S0(t,i,a,l){return t.baseState=a,mf(t,Je,typeof l=="function"?l:ei)}function fE(t,i,a,l,d){if(Ou(t))throw Error(r(485));if(t=i.action,t!==null){var m={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};R.T!==null?a(!0):m.isTransition=!1,l(m),a=i.pending,a===null?(m.next=i.pending=m,A0(i,m)):(m.next=a.next,i.pending=a.next=m)}}function A0(t,i){var a=i.action,l=i.payload,d=t.state;if(i.isTransition){var m=R.T,_={};R.T=_;try{var w=a(d,l),k=R.S;k!==null&&k(_,w),N0(t,i,w)}catch(K){yf(t,i,K)}finally{m!==null&&_.types!==null&&(m.types=_.types),R.T=m}}else try{m=a(d,l),N0(t,i,m)}catch(K){yf(t,i,K)}}function N0(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){C0(t,i,l)},function(l){return yf(t,i,l)}):C0(t,i,a)}function C0(t,i,a){i.status="fulfilled",i.value=a,R0(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,A0(t,a)))}function yf(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,R0(i),i=i.next;while(i!==l)}t.action=null}function R0(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function I0(t,i){return i}function k0(t,i){if(ze){var a=tt.formState;if(a!==null){e:{var l=Ie;if(ze){if(st){t:{for(var d=st,m=Bn;d.nodeType!==8;){if(!m){d=null;break t}if(d=qn(d.nextSibling),d===null){d=null;break t}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){st=qn(d.nextSibling),l=d.data==="F!";break e}}ji(l)}l=!1}l&&(i=a[0])}}return a=rn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:I0,lastRenderedState:i},a.queue=l,a=X0.bind(null,Ie,l),l.dispatch=a,l=gf(!1),m=wf.bind(null,Ie,!1,l.queue),l=rn(),d={state:i,dispatch:null,action:t,pending:null},l.queue=d,a=fE.bind(null,Ie,d,m,a),d.dispatch=a,l.memoizedState=t,[i,a,!1]}function O0(t){var i=yt();return j0(i,Je,t)}function j0(t,i,a){if(i=mf(t,i,I0)[0],t=Ru(ei)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=bl(i)}catch(_){throw _===Fa?_u:_}else l=i;i=yt();var d=i.queue,m=d.dispatch;return a!==i.memoizedState&&(Ie.flags|=2048,Xa(9,{destroy:void 0},mE.bind(null,d,a),null)),[l,m,t]}function mE(t,i){t.action=i}function D0(t){var i=yt(),a=Je;if(a!==null)return j0(i,a,t);yt(),i=i.memoizedState,a=yt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Xa(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Ie.updateQueue,i===null&&(i=Nu(),Ie.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function M0(){return yt().memoizedState}function Iu(t,i,a,l){var d=rn();Ie.flags|=t,d.memoizedState=Xa(1|i,{destroy:void 0},a,l===void 0?null:l)}function ku(t,i,a,l){var d=yt();l=l===void 0?null:l;var m=d.memoizedState.inst;Je!==null&&l!==null&&lf(l,Je.memoizedState.deps)?d.memoizedState=Xa(i,m,a,l):(Ie.flags|=t,d.memoizedState=Xa(1|i,m,a,l))}function V0(t,i){Iu(8390656,8,t,i)}function vf(t,i){ku(2048,8,t,i)}function pE(t){Ie.flags|=4;var i=Ie.updateQueue;if(i===null)i=Nu(),Ie.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function L0(t){var i=yt().memoizedState;return pE({ref:i,nextImpl:t}),function(){if((Ke&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function P0(t,i){return ku(4,2,t,i)}function U0(t,i){return ku(4,4,t,i)}function z0(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function B0(t,i,a){a=a!=null?a.concat([t]):null,ku(4,4,z0.bind(null,i,t),a)}function _f(){}function H0(t,i){var a=yt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&lf(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function q0(t,i){var a=yt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&lf(i,l[1]))return l[0];if(l=t(),Yr){On(!0);try{t()}finally{On(!1)}}return a.memoizedState=[l,i],l}function bf(t,i,a){return a===void 0||(Zs&1073741824)!==0&&(Me&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=Gy(),Ie.lanes|=t,Hi|=t,a)}function G0(t,i,a,l){return xn(a,i)?a:$a.current!==null?(t=bf(t,a,l),xn(t,i)||(Ct=!0),t):(Zs&42)===0||(Zs&1073741824)!==0&&(Me&261930)===0?(Ct=!0,t.memoizedState=a):(t=Gy(),Ie.lanes|=t,Hi|=t,i)}function F0(t,i,a,l,d){var m=se.p;se.p=m!==0&&8>m?m:8;var _=R.T,w={};R.T=w,wf(t,!1,i,a);try{var k=d(),K=R.S;if(K!==null&&K(w,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var ie=uE(k,l);xl(t,i,ie,Nn(t))}else xl(t,i,l,Nn(t))}catch(ae){xl(t,i,{then:function(){},status:"rejected",reason:ae},Nn())}finally{se.p=m,_!==null&&w.types!==null&&(_.types=w.types),R.T=_}}function gE(){}function xf(t,i,a,l){if(t.tag!==5)throw Error(r(476));var d=K0(t).queue;F0(t,d,i,de,a===null?gE:function(){return $0(t),a(l)})}function K0(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:de},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function $0(t){var i=K0(t);i.next===null&&(i=t.alternate.memoizedState),xl(t,i.next.queue,{},Nn())}function Tf(){return Gt(Pl)}function Y0(){return yt().memoizedState}function Q0(){return yt().memoizedState}function yE(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Nn();t=Vi(a);var l=Li(i,t,a);l!==null&&(mn(l,i,a),gl(l,i,a)),i={cache:Xd()},t.payload=i;return}i=i.return}}function vE(t,i,a){var l=Nn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ou(t)?W0(i,a):(a=Ud(t,i,a,l),a!==null&&(mn(a,t,l),J0(a,i,l)))}function X0(t,i,a){var l=Nn();xl(t,i,a,l)}function xl(t,i,a,l){var d={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ou(t))W0(i,d);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var _=i.lastRenderedState,w=m(_,a);if(d.hasEagerState=!0,d.eagerState=w,xn(w,_))return du(t,i,d,0),tt===null&&hu(),!1}catch{}finally{}if(a=Ud(t,i,d,l),a!==null)return mn(a,t,l),J0(a,i,l),!0}return!1}function wf(t,i,a,l){if(l={lane:2,revertLane:tm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ou(t)){if(i)throw Error(r(479))}else i=Ud(t,a,l,2),i!==null&&mn(i,t,2)}function Ou(t){var i=t.alternate;return t===Ie||i!==null&&i===Ie}function W0(t,i){Ya=Su=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function J0(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,qo(t,a)}}var Tl={readContext:Gt,use:Cu,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useLayoutEffect:dt,useInsertionEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useSyncExternalStore:dt,useId:dt,useHostTransitionStatus:dt,useFormState:dt,useActionState:dt,useOptimistic:dt,useMemoCache:dt,useCacheRefresh:dt};Tl.useEffectEvent=dt;var Z0={readContext:Gt,use:Cu,useCallback:function(t,i){return rn().memoizedState=[t,i===void 0?null:i],t},useContext:Gt,useEffect:V0,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Iu(4194308,4,z0.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Iu(4194308,4,t,i)},useInsertionEffect:function(t,i){Iu(4,2,t,i)},useMemo:function(t,i){var a=rn();i=i===void 0?null:i;var l=t();if(Yr){On(!0);try{t()}finally{On(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=rn();if(a!==void 0){var d=a(i);if(Yr){On(!0);try{a(i)}finally{On(!1)}}}else d=i;return l.memoizedState=l.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},l.queue=t,t=t.dispatch=vE.bind(null,Ie,t),[l.memoizedState,t]},useRef:function(t){var i=rn();return t={current:t},i.memoizedState=t},useState:function(t){t=gf(t);var i=t.queue,a=X0.bind(null,Ie,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:_f,useDeferredValue:function(t,i){var a=rn();return bf(a,t,i)},useTransition:function(){var t=gf(!1);return t=F0.bind(null,Ie,t.queue,!0,!1),rn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Ie,d=rn();if(ze){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),tt===null)throw Error(r(349));(Me&127)!==0||b0(l,i,a)}d.memoizedState=a;var m={value:a,getSnapshot:i};return d.queue=m,V0(T0.bind(null,l,m,t),[t]),l.flags|=2048,Xa(9,{destroy:void 0},x0.bind(null,l,m,a,i),null),a},useId:function(){var t=rn(),i=tt.identifierPrefix;if(ze){var a=ks,l=Is;a=(l&~(1<<32-mt(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Au++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=hE++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:Tf,useFormState:k0,useActionState:k0,useOptimistic:function(t){var i=rn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=wf.bind(null,Ie,!0,a),a.dispatch=i,[t,i]},useMemoCache:ff,useCacheRefresh:function(){return rn().memoizedState=yE.bind(null,Ie)},useEffectEvent:function(t){var i=rn(),a={impl:t};return i.memoizedState=a,function(){if((Ke&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Ef={readContext:Gt,use:Cu,useCallback:H0,useContext:Gt,useEffect:vf,useImperativeHandle:B0,useInsertionEffect:P0,useLayoutEffect:U0,useMemo:q0,useReducer:Ru,useRef:M0,useState:function(){return Ru(ei)},useDebugValue:_f,useDeferredValue:function(t,i){var a=yt();return G0(a,Je.memoizedState,t,i)},useTransition:function(){var t=Ru(ei)[0],i=yt().memoizedState;return[typeof t=="boolean"?t:bl(t),i]},useSyncExternalStore:_0,useId:Y0,useHostTransitionStatus:Tf,useFormState:O0,useActionState:O0,useOptimistic:function(t,i){var a=yt();return S0(a,Je,t,i)},useMemoCache:ff,useCacheRefresh:Q0};Ef.useEffectEvent=L0;var ey={readContext:Gt,use:Cu,useCallback:H0,useContext:Gt,useEffect:vf,useImperativeHandle:B0,useInsertionEffect:P0,useLayoutEffect:U0,useMemo:q0,useReducer:pf,useRef:M0,useState:function(){return pf(ei)},useDebugValue:_f,useDeferredValue:function(t,i){var a=yt();return Je===null?bf(a,t,i):G0(a,Je.memoizedState,t,i)},useTransition:function(){var t=pf(ei)[0],i=yt().memoizedState;return[typeof t=="boolean"?t:bl(t),i]},useSyncExternalStore:_0,useId:Y0,useHostTransitionStatus:Tf,useFormState:D0,useActionState:D0,useOptimistic:function(t,i){var a=yt();return Je!==null?S0(a,Je,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:ff,useCacheRefresh:Q0};ey.useEffectEvent=L0;function Sf(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Af={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=Nn(),d=Vi(l);d.payload=i,a!=null&&(d.callback=a),i=Li(t,d,l),i!==null&&(mn(i,t,l),gl(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=Nn(),d=Vi(l);d.tag=1,d.payload=i,a!=null&&(d.callback=a),i=Li(t,d,l),i!==null&&(mn(i,t,l),gl(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Nn(),l=Vi(a);l.tag=2,i!=null&&(l.callback=i),i=Li(t,l,a),i!==null&&(mn(i,t,a),gl(i,t,a))}};function ty(t,i,a,l,d,m,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,_):i.prototype&&i.prototype.isPureReactComponent?!ll(a,l)||!ll(d,m):!0}function ny(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Af.enqueueReplaceState(i,i.state,null)}function Qr(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=T({},a));for(var d in t)a[d]===void 0&&(a[d]=t[d])}return a}function sy(t){uu(t)}function iy(t){console.error(t)}function ry(t){uu(t)}function ju(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function ay(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Nf(t,i,a){return a=Vi(a),a.tag=3,a.payload={element:null},a.callback=function(){ju(t,i)},a}function oy(t){return t=Vi(t),t.tag=3,t}function ly(t,i,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var m=l.value;t.payload=function(){return d(m)},t.callback=function(){ay(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){ay(i,a,l),typeof d!="function"&&(qi===null?qi=new Set([this]):qi.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function _E(t,i,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Ha(i,a,d,!0),a=wn.current,a!==null){switch(a.tag){case 31:case 13:return Hn===null?Fu():a.alternate===null&&ft===0&&(ft=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===bu?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Jf(t,l,d)),!1;case 22:return a.flags|=65536,l===bu?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Jf(t,l,d)),!1}throw Error(r(435,a.tag))}return Jf(t,l,d),Fu(),!1}if(ze)return i=wn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=d,l!==Fd&&(t=Error(r(422),{cause:l}),hl(Pn(t,a)))):(l!==Fd&&(i=Error(r(423),{cause:l}),hl(Pn(i,a))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,l=Pn(l,a),d=Nf(t.stateNode,l,d),nf(t,d),ft!==4&&(ft=2)),!1;var m=Error(r(520),{cause:l});if(m=Pn(m,a),Il===null?Il=[m]:Il.push(m),ft!==4&&(ft=2),i===null)return!0;l=Pn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=d&-d,a.lanes|=t,t=Nf(a.stateNode,l,t),nf(a,t),!1;case 1:if(i=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(qi===null||!qi.has(m))))return a.flags|=65536,d&=-d,a.lanes|=d,d=oy(d),ly(d,t,a,l),nf(a,d),!1}a=a.return}while(a!==null);return!1}var Cf=Error(r(461)),Ct=!1;function Ft(t,i,a,l){i.child=t===null?d0(i,null,a,l):$r(i,t.child,a,l)}function cy(t,i,a,l,d){a=a.render;var m=i.ref;if("ref"in l){var _={};for(var w in l)w!=="ref"&&(_[w]=l[w])}else _=l;return qr(i),l=cf(t,i,a,_,m,d),w=uf(),t!==null&&!Ct?(hf(t,i,d),ti(t,i,d)):(ze&&w&&qd(i),i.flags|=1,Ft(t,i,l,d),i.child)}function uy(t,i,a,l,d){if(t===null){var m=a.type;return typeof m=="function"&&!zd(m)&&m.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=m,hy(t,i,m,l,d)):(t=mu(a.type,null,l,i,i.mode,d),t.ref=i.ref,t.return=i,i.child=t)}if(m=t.child,!Vf(t,d)){var _=m.memoizedProps;if(a=a.compare,a=a!==null?a:ll,a(_,l)&&t.ref===i.ref)return ti(t,i,d)}return i.flags|=1,t=Qs(m,l),t.ref=i.ref,t.return=i,i.child=t}function hy(t,i,a,l,d){if(t!==null){var m=t.memoizedProps;if(ll(m,l)&&t.ref===i.ref)if(Ct=!1,i.pendingProps=l=m,Vf(t,d))(t.flags&131072)!==0&&(Ct=!0);else return i.lanes=t.lanes,ti(t,i,d)}return Rf(t,i,a,l,d)}function dy(t,i,a,l){var d=l.children,m=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=i.child=t.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~m}else l=0,i.child=null;return fy(t,i,m,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&vu(i,m!==null?m.cachePool:null),m!==null?p0(i,m):rf(),g0(i);else return l=i.lanes=536870912,fy(t,i,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(vu(i,m.cachePool),p0(i,m),Ui(),i.memoizedState=null):(t!==null&&vu(i,null),rf(),Ui());return Ft(t,i,d,a),i.child}function wl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function fy(t,i,a,l,d){var m=Jd();return m=m===null?null:{parent:At._currentValue,pool:m},i.memoizedState={baseLanes:a,cachePool:m},t!==null&&vu(i,null),rf(),g0(i),t!==null&&Ha(t,i,l,!0),i.childLanes=d,null}function Du(t,i){return i=Vu({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function my(t,i,a){return $r(i,t.child,null,a),t=Du(i,i.pendingProps),t.flags|=2,En(i),i.memoizedState=null,t}function bE(t,i,a){var l=i.pendingProps,d=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(ze){if(l.mode==="hidden")return t=Du(i,l),i.lanes=536870912,wl(null,t);if(of(i),(t=st)?(t=Av(t,Bn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:ki!==null?{id:Is,overflow:ks}:null,retryLane:536870912,hydrationErrors:null},a=Wg(t),a.return=i,i.child=a,qt=i,st=null)):t=null,t===null)throw ji(i);return i.lanes=536870912,null}return Du(i,l)}var m=t.memoizedState;if(m!==null){var _=m.dehydrated;if(of(i),d)if(i.flags&256)i.flags&=-257,i=my(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(r(558));else if(Ct||Ha(t,i,a,!1),d=(a&t.childLanes)!==0,Ct||d){if(l=tt,l!==null&&(_=Go(l,a),_!==0&&_!==m.retryLane))throw m.retryLane=_,Ur(t,_),mn(l,t,_),Cf;Fu(),i=my(t,i,a)}else t=m.treeContext,st=qn(_.nextSibling),qt=i,ze=!0,Oi=null,Bn=!1,t!==null&&e0(i,t),i=Du(i,l),i.flags|=4096;return i}return t=Qs(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function Mu(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Rf(t,i,a,l,d){return qr(i),a=cf(t,i,a,l,void 0,d),l=uf(),t!==null&&!Ct?(hf(t,i,d),ti(t,i,d)):(ze&&l&&qd(i),i.flags|=1,Ft(t,i,a,d),i.child)}function py(t,i,a,l,d,m){return qr(i),i.updateQueue=null,a=v0(i,l,a,d),y0(t),l=uf(),t!==null&&!Ct?(hf(t,i,m),ti(t,i,m)):(ze&&l&&qd(i),i.flags|=1,Ft(t,i,a,m),i.child)}function gy(t,i,a,l,d){if(qr(i),i.stateNode===null){var m=Pa,_=a.contextType;typeof _=="object"&&_!==null&&(m=Gt(_)),m=new a(l,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Af,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=l,m.state=i.memoizedState,m.refs={},ef(i),_=a.contextType,m.context=typeof _=="object"&&_!==null?Gt(_):Pa,m.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Sf(i,a,_,l),m.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&Af.enqueueReplaceState(m,m.state,null),vl(i,l,m,d),yl(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){m=i.stateNode;var w=i.memoizedProps,k=Qr(a,w);m.props=k;var K=m.context,ie=a.contextType;_=Pa,typeof ie=="object"&&ie!==null&&(_=Gt(ie));var ae=a.getDerivedStateFromProps;ie=typeof ae=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=i.pendingProps!==w,ie||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||K!==_)&&ny(i,m,l,_),Mi=!1;var $=i.memoizedState;m.state=$,vl(i,l,m,d),yl(),K=i.memoizedState,w||$!==K||Mi?(typeof ae=="function"&&(Sf(i,a,ae,l),K=i.memoizedState),(k=Mi||ty(i,a,k,l,$,K,_))?(ie||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=K),m.props=l,m.state=K,m.context=_,l=k):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{m=i.stateNode,tf(t,i),_=i.memoizedProps,ie=Qr(a,_),m.props=ie,ae=i.pendingProps,$=m.context,K=a.contextType,k=Pa,typeof K=="object"&&K!==null&&(k=Gt(K)),w=a.getDerivedStateFromProps,(K=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==ae||$!==k)&&ny(i,m,l,k),Mi=!1,$=i.memoizedState,m.state=$,vl(i,l,m,d),yl();var J=i.memoizedState;_!==ae||$!==J||Mi||t!==null&&t.dependencies!==null&&gu(t.dependencies)?(typeof w=="function"&&(Sf(i,a,w,l),J=i.memoizedState),(ie=Mi||ty(i,a,ie,l,$,J,k)||t!==null&&t.dependencies!==null&&gu(t.dependencies))?(K||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,J,k),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,J,k)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&$===t.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&$===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=J),m.props=l,m.state=J,m.context=k,l=ie):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&$===t.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&$===t.memoizedState||(i.flags|=1024),l=!1)}return m=l,Mu(t,i),l=(i.flags&128)!==0,m||l?(m=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,t!==null&&l?(i.child=$r(i,t.child,null,d),i.child=$r(i,null,a,d)):Ft(t,i,a,d),i.memoizedState=m.state,t=i.child):t=ti(t,i,d),t}function yy(t,i,a,l){return Br(),i.flags|=256,Ft(t,i,a,l),i.child}var If={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kf(t){return{baseLanes:t,cachePool:a0()}}function Of(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=An),t}function vy(t,i,a){var l=i.pendingProps,d=!1,m=(i.flags&128)!==0,_;if((_=m)||(_=t!==null&&t.memoizedState===null?!1:(gt.current&2)!==0),_&&(d=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if(ze){if(d?Pi(i):Ui(),(t=st)?(t=Av(t,Bn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:ki!==null?{id:Is,overflow:ks}:null,retryLane:536870912,hydrationErrors:null},a=Wg(t),a.return=i,i.child=a,qt=i,st=null)):t=null,t===null)throw ji(i);return mm(t)?i.lanes=32:i.lanes=536870912,null}var w=l.children;return l=l.fallback,d?(Ui(),d=i.mode,w=Vu({mode:"hidden",children:w},d),l=zr(l,d,a,null),w.return=i,l.return=i,w.sibling=l,i.child=w,l=i.child,l.memoizedState=kf(a),l.childLanes=Of(t,_,a),i.memoizedState=If,wl(null,l)):(Pi(i),jf(i,w))}var k=t.memoizedState;if(k!==null&&(w=k.dehydrated,w!==null)){if(m)i.flags&256?(Pi(i),i.flags&=-257,i=Df(t,i,a)):i.memoizedState!==null?(Ui(),i.child=t.child,i.flags|=128,i=null):(Ui(),w=l.fallback,d=i.mode,l=Vu({mode:"visible",children:l.children},d),w=zr(w,d,a,null),w.flags|=2,l.return=i,w.return=i,l.sibling=w,i.child=l,$r(i,t.child,null,a),l=i.child,l.memoizedState=kf(a),l.childLanes=Of(t,_,a),i.memoizedState=If,i=wl(null,l));else if(Pi(i),mm(w)){if(_=w.nextSibling&&w.nextSibling.dataset,_)var K=_.dgst;_=K,l=Error(r(419)),l.stack="",l.digest=_,hl({value:l,source:null,stack:null}),i=Df(t,i,a)}else if(Ct||Ha(t,i,a,!1),_=(a&t.childLanes)!==0,Ct||_){if(_=tt,_!==null&&(l=Go(_,a),l!==0&&l!==k.retryLane))throw k.retryLane=l,Ur(t,l),mn(_,t,l),Cf;fm(w)||Fu(),i=Df(t,i,a)}else fm(w)?(i.flags|=192,i.child=t.child,i=null):(t=k.treeContext,st=qn(w.nextSibling),qt=i,ze=!0,Oi=null,Bn=!1,t!==null&&e0(i,t),i=jf(i,l.children),i.flags|=4096);return i}return d?(Ui(),w=l.fallback,d=i.mode,k=t.child,K=k.sibling,l=Qs(k,{mode:"hidden",children:l.children}),l.subtreeFlags=k.subtreeFlags&65011712,K!==null?w=Qs(K,w):(w=zr(w,d,a,null),w.flags|=2),w.return=i,l.return=i,l.sibling=w,i.child=l,wl(null,l),l=i.child,w=t.child.memoizedState,w===null?w=kf(a):(d=w.cachePool,d!==null?(k=At._currentValue,d=d.parent!==k?{parent:k,pool:k}:d):d=a0(),w={baseLanes:w.baseLanes|a,cachePool:d}),l.memoizedState=w,l.childLanes=Of(t,_,a),i.memoizedState=If,wl(t.child,l)):(Pi(i),a=t.child,t=a.sibling,a=Qs(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=a,i.memoizedState=null,a)}function jf(t,i){return i=Vu({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Vu(t,i){return t=Tn(22,t,null,i),t.lanes=0,t}function Df(t,i,a){return $r(i,t.child,null,a),t=jf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function _y(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Yd(t.return,i,a)}function Mf(t,i,a,l,d,m){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d,treeForkCount:m}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=d,_.treeForkCount=m)}function by(t,i,a){var l=i.pendingProps,d=l.revealOrder,m=l.tail;l=l.children;var _=gt.current,w=(_&2)!==0;if(w?(_=_&1|2,i.flags|=128):_&=1,ue(gt,_),Ft(t,i,l,a),l=ze?ul:0,!w&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_y(t,a,i);else if(t.tag===19)_y(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(d){case"forwards":for(a=i.child,d=null;a!==null;)t=a.alternate,t!==null&&Eu(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),Mf(i,!1,d,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(t=d.alternate,t!==null&&Eu(t)===null){i.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}Mf(i,!0,a,null,m,l);break;case"together":Mf(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function ti(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Hi|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Ha(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,a=Qs(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Qs(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Vf(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&gu(t)))}function xE(t,i,a){switch(i.tag){case 3:bt(i,i.stateNode.containerInfo),Di(i,At,t.memoizedState.cache),Br();break;case 27:case 5:kn(i);break;case 4:bt(i,i.stateNode.containerInfo);break;case 10:Di(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,of(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Pi(i),i.flags|=128,null):(a&i.child.childLanes)!==0?vy(t,i,a):(Pi(i),t=ti(t,i,a),t!==null?t.sibling:null);Pi(i);break;case 19:var d=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Ha(t,i,a,!1),l=(a&i.childLanes)!==0),d){if(l)return by(t,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ue(gt,gt.current),l)break;return null;case 22:return i.lanes=0,dy(t,i,a,i.pendingProps);case 24:Di(i,At,t.memoizedState.cache)}return ti(t,i,a)}function xy(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Ct=!0;else{if(!Vf(t,a)&&(i.flags&128)===0)return Ct=!1,xE(t,i,a);Ct=(t.flags&131072)!==0}else Ct=!1,ze&&(i.flags&1048576)!==0&&Zg(i,ul,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=Fr(i.elementType),i.type=t,typeof t=="function")zd(t)?(l=Qr(t,l),i.tag=1,i=gy(null,i,t,l,a)):(i.tag=0,i=Rf(null,i,t,l,a));else{if(t!=null){var d=t.$$typeof;if(d===L){i.tag=11,i=cy(null,i,t,l,a);break e}else if(d===N){i.tag=14,i=uy(null,i,t,l,a);break e}}throw i=P(t)||t,Error(r(306,i,""))}}return i;case 0:return Rf(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,d=Qr(l,i.pendingProps),gy(t,i,l,d,a);case 3:e:{if(bt(i,i.stateNode.containerInfo),t===null)throw Error(r(387));l=i.pendingProps;var m=i.memoizedState;d=m.element,tf(t,i),vl(i,l,null,a);var _=i.memoizedState;if(l=_.cache,Di(i,At,l),l!==m.cache&&Qd(i,[At],a,!0),yl(),l=_.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=yy(t,i,l,a);break e}else if(l!==d){d=Pn(Error(r(424)),i),hl(d),i=yy(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(st=qn(t.firstChild),qt=i,ze=!0,Oi=null,Bn=!0,a=d0(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Br(),l===d){i=ti(t,i,a);break e}Ft(t,i,l,a)}i=i.child}return i;case 26:return Mu(t,i),t===null?(a=Ov(i.type,null,i.pendingProps,null))?i.memoizedState=a:ze||(a=i.type,t=i.pendingProps,l=Ju(Se.current).createElement(a),l[wt]=i,l[Vt]=t,Kt(l,a,t),Et(l),i.stateNode=l):i.memoizedState=Ov(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return kn(i),t===null&&ze&&(l=i.stateNode=Rv(i.type,i.pendingProps,Se.current),qt=i,Bn=!0,d=st,$i(i.type)?(pm=d,st=qn(l.firstChild)):st=d),Ft(t,i,i.pendingProps.children,a),Mu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&ze&&((d=l=st)&&(l=WE(l,i.type,i.pendingProps,Bn),l!==null?(i.stateNode=l,qt=i,st=qn(l.firstChild),Bn=!1,d=!0):d=!1),d||ji(i)),kn(i),d=i.type,m=i.pendingProps,_=t!==null?t.memoizedProps:null,l=m.children,um(d,m)?l=null:_!==null&&um(d,_)&&(i.flags|=32),i.memoizedState!==null&&(d=cf(t,i,dE,null,null,a),Pl._currentValue=d),Mu(t,i),Ft(t,i,l,a),i.child;case 6:return t===null&&ze&&((t=a=st)&&(a=JE(a,i.pendingProps,Bn),a!==null?(i.stateNode=a,qt=i,st=null,t=!0):t=!1),t||ji(i)),null;case 13:return vy(t,i,a);case 4:return bt(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=$r(i,null,l,a):Ft(t,i,l,a),i.child;case 11:return cy(t,i,i.type,i.pendingProps,a);case 7:return Ft(t,i,i.pendingProps,a),i.child;case 8:return Ft(t,i,i.pendingProps.children,a),i.child;case 12:return Ft(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Di(i,i.type,l.value),Ft(t,i,l.children,a),i.child;case 9:return d=i.type._context,l=i.pendingProps.children,qr(i),d=Gt(d),l=l(d),i.flags|=1,Ft(t,i,l,a),i.child;case 14:return uy(t,i,i.type,i.pendingProps,a);case 15:return hy(t,i,i.type,i.pendingProps,a);case 19:return by(t,i,a);case 31:return bE(t,i,a);case 22:return dy(t,i,a,i.pendingProps);case 24:return qr(i),l=Gt(At),t===null?(d=Jd(),d===null&&(d=tt,m=Xd(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=a),d=m),i.memoizedState={parent:l,cache:d},ef(i),Di(i,At,d)):((t.lanes&a)!==0&&(tf(t,i),vl(i,null,null,a),yl()),d=t.memoizedState,m=i.memoizedState,d.parent!==l?(d={parent:l,cache:l},i.memoizedState=d,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=d),Di(i,At,l)):(l=m.cache,Di(i,At,l),l!==d.cache&&Qd(i,[At],a,!0))),Ft(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function ni(t){t.flags|=4}function Lf(t,i,a,l,d){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(d&335544128)===d)if(t.stateNode.complete)t.flags|=8192;else if(Yy())t.flags|=8192;else throw Kr=bu,Zd}else t.flags&=-16777217}function Ty(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Lv(i))if(Yy())t.flags|=8192;else throw Kr=bu,Zd}function Lu(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?qc():536870912,t.lanes|=i,eo|=i)}function El(t,i){if(!ze)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function it(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function TE(t,i,a){var l=i.pendingProps;switch(Gd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(i),null;case 1:return it(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Js(At),nt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ba(i)?ni(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Kd())),it(i),null;case 26:var d=i.type,m=i.memoizedState;return t===null?(ni(i),m!==null?(it(i),Ty(i,m)):(it(i),Lf(i,d,null,l,a))):m?m!==t.memoizedState?(ni(i),it(i),Ty(i,m)):(it(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&ni(i),it(i),Lf(i,d,t,l,a)),null;case 27:if(_a(i),a=Se.current,d=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ni(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return it(i),null}t=fe.current,Ba(i)?t0(i):(t=Rv(d,l,a),i.stateNode=t,ni(i))}return it(i),null;case 5:if(_a(i),d=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ni(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return it(i),null}if(m=fe.current,Ba(i))t0(i);else{var _=Ju(Se.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?_.createElement(d,{is:l.is}):_.createElement(d)}}m[wt]=i,m[Vt]=l;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=m;e:switch(Kt(m,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ni(i)}}return it(i),Lf(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&ni(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(t=Se.current,Ba(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,d=qt,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}t[wt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||vv(t.nodeValue,a)),t||ji(i,!0)}else t=Ju(t).createTextNode(l),t[wt]=i,i.stateNode=t}return it(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(l=Ba(i),a!==null){if(t===null){if(!l)throw Error(r(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[wt]=i}else Br(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;it(i),t=!1}else a=Kd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(En(i),i):(En(i),null);if((i.flags&128)!==0)throw Error(r(558))}return it(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=Ba(i),l!==null&&l.dehydrated!==null){if(t===null){if(!d)throw Error(r(318));if(d=i.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[wt]=i}else Br(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;it(i),d=!1}else d=Kd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return i.flags&256?(En(i),i):(En(i),null)}return En(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=i.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==d&&(l.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),Lu(i,i.updateQueue),it(i),null);case 4:return nt(),t===null&&rm(i.stateNode.containerInfo),it(i),null;case 10:return Js(i.type),it(i),null;case 19:if(ne(gt),l=i.memoizedState,l===null)return it(i),null;if(d=(i.flags&128)!==0,m=l.rendering,m===null)if(d)El(l,!1);else{if(ft!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(m=Eu(t),m!==null){for(i.flags|=128,El(l,!1),t=m.updateQueue,i.updateQueue=t,Lu(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Xg(a,t),a=a.sibling;return ue(gt,gt.current&1|2),ze&&Xs(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&nn()>Hu&&(i.flags|=128,d=!0,El(l,!1),i.lanes=4194304)}else{if(!d)if(t=Eu(m),t!==null){if(i.flags|=128,d=!0,t=t.updateQueue,i.updateQueue=t,Lu(i,t),El(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!ze)return it(i),null}else 2*nn()-l.renderingStartTime>Hu&&a!==536870912&&(i.flags|=128,d=!0,El(l,!1),i.lanes=4194304);l.isBackwards?(m.sibling=i.child,i.child=m):(t=l.last,t!==null?t.sibling=m:i.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=nn(),t.sibling=null,a=gt.current,ue(gt,d?a&1|2:a&1),ze&&Xs(i,l.treeForkCount),t):(it(i),null);case 22:case 23:return En(i),af(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(it(i),i.subtreeFlags&6&&(i.flags|=8192)):it(i),a=i.updateQueue,a!==null&&Lu(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&ne(Gr),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Js(At),it(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function wE(t,i){switch(Gd(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Js(At),nt(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return _a(i),null;case 31:if(i.memoizedState!==null){if(En(i),i.alternate===null)throw Error(r(340));Br()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(En(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Br()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ne(gt),null;case 4:return nt(),null;case 10:return Js(i.type),null;case 22:case 23:return En(i),af(),t!==null&&ne(Gr),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Js(At),null;case 25:return null;default:return null}}function wy(t,i){switch(Gd(i),i.tag){case 3:Js(At),nt();break;case 26:case 27:case 5:_a(i);break;case 4:nt();break;case 31:i.memoizedState!==null&&En(i);break;case 13:En(i);break;case 19:ne(gt);break;case 10:Js(i.type);break;case 22:case 23:En(i),af(),t!==null&&ne(Gr);break;case 24:Js(At)}}function Sl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&t)===t){l=void 0;var m=a.create,_=a.inst;l=m(),_.destroy=l}a=a.next}while(a!==d)}}catch(w){Xe(i,i.return,w)}}function zi(t,i,a){try{var l=i.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var m=d.next;l=m;do{if((l.tag&t)===t){var _=l.inst,w=_.destroy;if(w!==void 0){_.destroy=void 0,d=i;var k=a,K=w;try{K()}catch(ie){Xe(d,k,ie)}}}l=l.next}while(l!==m)}}catch(ie){Xe(i,i.return,ie)}}function Ey(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{m0(i,a)}catch(l){Xe(t,t.return,l)}}}function Sy(t,i,a){a.props=Qr(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Xe(t,i,l)}}function Al(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(d){Xe(t,i,d)}}function Os(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){Xe(t,i,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){Xe(t,i,d)}else a.current=null}function Ay(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){Xe(t,t.return,d)}}function Pf(t,i,a){try{var l=t.stateNode;FE(l,t.type,a,i),l[Vt]=i}catch(d){Xe(t,t.return,d)}}function Ny(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&$i(t.type)||t.tag===4}function Uf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ny(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&$i(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zf(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Zn));else if(l!==4&&(l===27&&$i(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(zf(t,i,a),t=t.sibling;t!==null;)zf(t,i,a),t=t.sibling}function Pu(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&$i(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Pu(t,i,a),t=t.sibling;t!==null;)Pu(t,i,a),t=t.sibling}function Cy(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,d=i.attributes;d.length;)i.removeAttributeNode(d[0]);Kt(i,l,a),i[wt]=t,i[Vt]=a}catch(m){Xe(t,t.return,m)}}var si=!1,Rt=!1,Bf=!1,Ry=typeof WeakSet=="function"?WeakSet:Set,Pt=null;function EE(t,i){if(t=t.containerInfo,lm=rh,t=Bg(t),jd(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var _=0,w=-1,k=-1,K=0,ie=0,ae=t,$=null;t:for(;;){for(var J;ae!==a||d!==0&&ae.nodeType!==3||(w=_+d),ae!==m||l!==0&&ae.nodeType!==3||(k=_+l),ae.nodeType===3&&(_+=ae.nodeValue.length),(J=ae.firstChild)!==null;)$=ae,ae=J;for(;;){if(ae===t)break t;if($===a&&++K===d&&(w=_),$===m&&++ie===l&&(k=_),(J=ae.nextSibling)!==null)break;ae=$,$=ae.parentNode}ae=J}a=w===-1||k===-1?null:{start:w,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(cm={focusedElem:t,selectionRange:a},rh=!1,Pt=i;Pt!==null;)if(i=Pt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Pt=t;else for(;Pt!==null;){switch(i=Pt,m=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)d=t[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=i,d=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var pe=Qr(a.type,d);t=l.getSnapshotBeforeUpdate(pe,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(xe){Xe(a,a.return,xe)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)dm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":dm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=i.sibling,t!==null){t.return=i.return,Pt=t;break}Pt=i.return}}function Iy(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ri(t,a),l&4&&Sl(5,a);break;case 1:if(ri(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(_){Xe(a,a.return,_)}else{var d=Qr(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(d,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){Xe(a,a.return,_)}}l&64&&Ey(a),l&512&&Al(a,a.return);break;case 3:if(ri(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{m0(t,i)}catch(_){Xe(a,a.return,_)}}break;case 27:i===null&&l&4&&Cy(a);case 26:case 5:ri(t,a),i===null&&l&4&&Ay(a),l&512&&Al(a,a.return);break;case 12:ri(t,a);break;case 31:ri(t,a),l&4&&jy(t,a);break;case 13:ri(t,a),l&4&&Dy(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=jE.bind(null,a),ZE(t,a))));break;case 22:if(l=a.memoizedState!==null||si,!l){i=i!==null&&i.memoizedState!==null||Rt,d=si;var m=Rt;si=l,(Rt=i)&&!m?ai(t,a,(a.subtreeFlags&8772)!==0):ri(t,a),si=d,Rt=m}break;case 30:break;default:ri(t,a)}}function ky(t){var i=t.alternate;i!==null&&(t.alternate=null,ky(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Ea(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var lt=null,un=!1;function ii(t,i,a){for(a=a.child;a!==null;)Oy(t,i,a),a=a.sibling}function Oy(t,i,a){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(Qn,a)}catch{}switch(a.tag){case 26:Rt||Os(a,i),ii(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Rt||Os(a,i);var l=lt,d=un;$i(a.type)&&(lt=a.stateNode,un=!1),ii(t,i,a),Ml(a.stateNode),lt=l,un=d;break;case 5:Rt||Os(a,i);case 6:if(l=lt,d=un,lt=null,ii(t,i,a),lt=l,un=d,lt!==null)if(un)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(a.stateNode)}catch(m){Xe(a,i,m)}else try{lt.removeChild(a.stateNode)}catch(m){Xe(a,i,m)}break;case 18:lt!==null&&(un?(t=lt,Ev(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),lo(t)):Ev(lt,a.stateNode));break;case 4:l=lt,d=un,lt=a.stateNode.containerInfo,un=!0,ii(t,i,a),lt=l,un=d;break;case 0:case 11:case 14:case 15:zi(2,a,i),Rt||zi(4,a,i),ii(t,i,a);break;case 1:Rt||(Os(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Sy(a,i,l)),ii(t,i,a);break;case 21:ii(t,i,a);break;case 22:Rt=(l=Rt)||a.memoizedState!==null,ii(t,i,a),Rt=l;break;default:ii(t,i,a)}}function jy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{lo(t)}catch(a){Xe(i,i.return,a)}}}function Dy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{lo(t)}catch(a){Xe(i,i.return,a)}}function SE(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Ry),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Ry),i;default:throw Error(r(435,t.tag))}}function Uu(t,i){var a=SE(t);i.forEach(function(l){if(!a.has(l)){a.add(l);var d=DE.bind(null,t,l);l.then(d,d)}})}function hn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],m=t,_=i,w=_;e:for(;w!==null;){switch(w.tag){case 27:if($i(w.type)){lt=w.stateNode,un=!1;break e}break;case 5:lt=w.stateNode,un=!1;break e;case 3:case 4:lt=w.stateNode.containerInfo,un=!0;break e}w=w.return}if(lt===null)throw Error(r(160));Oy(m,_,d),lt=null,un=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)My(i,t),i=i.sibling}var rs=null;function My(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:hn(i,t),dn(t),l&4&&(zi(3,t,t.return),Sl(3,t),zi(5,t,t.return));break;case 1:hn(i,t),dn(t),l&512&&(Rt||a===null||Os(a,a.return)),l&64&&si&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=rs;if(hn(i,t),dn(t),l&512&&(Rt||a===null||Os(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":m=d.getElementsByTagName("title")[0],(!m||m[vs]||m[wt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(l),d.head.insertBefore(m,d.querySelector("head > title"))),Kt(m,l,a),m[wt]=t,Et(m),l=m;break e;case"link":var _=Mv("link","href",d).get(l+(a.href||""));if(_){for(var w=0;w<_.length;w++)if(m=_[w],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(w,1);break t}}m=d.createElement(l),Kt(m,l,a),d.head.appendChild(m);break;case"meta":if(_=Mv("meta","content",d).get(l+(a.content||""))){for(w=0;w<_.length;w++)if(m=_[w],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(w,1);break t}}m=d.createElement(l),Kt(m,l,a),d.head.appendChild(m);break;default:throw Error(r(468,l))}m[wt]=t,Et(m),l=m}t.stateNode=l}else Vv(d,t.type,t.stateNode);else t.stateNode=Dv(d,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?Vv(d,t.type,t.stateNode):Dv(d,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Pf(t,t.memoizedProps,a.memoizedProps)}break;case 27:hn(i,t),dn(t),l&512&&(Rt||a===null||Os(a,a.return)),a!==null&&l&4&&Pf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(hn(i,t),dn(t),l&512&&(Rt||a===null||Os(a,a.return)),t.flags&32){d=t.stateNode;try{cn(d,"")}catch(pe){Xe(t,t.return,pe)}}l&4&&t.stateNode!=null&&(d=t.memoizedProps,Pf(t,d,a!==null?a.memoizedProps:d)),l&1024&&(Bf=!0);break;case 6:if(hn(i,t),dn(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(pe){Xe(t,t.return,pe)}}break;case 3:if(th=null,d=rs,rs=Zu(i.containerInfo),hn(i,t),rs=d,dn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{lo(i.containerInfo)}catch(pe){Xe(t,t.return,pe)}Bf&&(Bf=!1,Vy(t));break;case 4:l=rs,rs=Zu(t.stateNode.containerInfo),hn(i,t),dn(t),rs=l;break;case 12:hn(i,t),dn(t);break;case 31:hn(i,t),dn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Uu(t,l)));break;case 13:hn(i,t),dn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Bu=nn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Uu(t,l)));break;case 22:d=t.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,K=si,ie=Rt;if(si=K||d,Rt=ie||k,hn(i,t),Rt=ie,si=K,dn(t),l&8192)e:for(i=t.stateNode,i._visibility=d?i._visibility&-2:i._visibility|1,d&&(a===null||k||si||Rt||Xr(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){k=a=i;try{if(m=k.stateNode,d)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{w=k.stateNode;var ae=k.memoizedProps.style,$=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;w.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(pe){Xe(k,k.return,pe)}}}else if(i.tag===6){if(a===null){k=i;try{k.stateNode.nodeValue=d?"":k.memoizedProps}catch(pe){Xe(k,k.return,pe)}}}else if(i.tag===18){if(a===null){k=i;try{var J=k.stateNode;d?Sv(J,!0):Sv(k.stateNode,!1)}catch(pe){Xe(k,k.return,pe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Uu(t,a))));break;case 19:hn(i,t),dn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Uu(t,l)));break;case 30:break;case 21:break;default:hn(i,t),dn(t)}}function dn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(Ny(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var d=a.stateNode,m=Uf(t);Pu(t,m,d);break;case 5:var _=a.stateNode;a.flags&32&&(cn(_,""),a.flags&=-33);var w=Uf(t);Pu(t,w,_);break;case 3:case 4:var k=a.stateNode.containerInfo,K=Uf(t);zf(t,K,k);break;default:throw Error(r(161))}}catch(ie){Xe(t,t.return,ie)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Vy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Vy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function ri(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Iy(t,i.alternate,i),i=i.sibling}function Xr(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:zi(4,i,i.return),Xr(i);break;case 1:Os(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Sy(i,i.return,a),Xr(i);break;case 27:Ml(i.stateNode);case 26:case 5:Os(i,i.return),Xr(i);break;case 22:i.memoizedState===null&&Xr(i);break;case 30:Xr(i);break;default:Xr(i)}t=t.sibling}}function ai(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,d=t,m=i,_=m.flags;switch(m.tag){case 0:case 11:case 15:ai(d,m,a),Sl(4,m);break;case 1:if(ai(d,m,a),l=m,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(K){Xe(l,l.return,K)}if(l=m,d=l.updateQueue,d!==null){var w=l.stateNode;try{var k=d.shared.hiddenCallbacks;if(k!==null)for(d.shared.hiddenCallbacks=null,d=0;d<k.length;d++)f0(k[d],w)}catch(K){Xe(l,l.return,K)}}a&&_&64&&Ey(m),Al(m,m.return);break;case 27:Cy(m);case 26:case 5:ai(d,m,a),a&&l===null&&_&4&&Ay(m),Al(m,m.return);break;case 12:ai(d,m,a);break;case 31:ai(d,m,a),a&&_&4&&jy(d,m);break;case 13:ai(d,m,a),a&&_&4&&Dy(d,m);break;case 22:m.memoizedState===null&&ai(d,m,a),Al(m,m.return);break;case 30:break;default:ai(d,m,a)}i=i.sibling}}function Hf(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&dl(a))}function qf(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&dl(t))}function as(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ly(t,i,a,l),i=i.sibling}function Ly(t,i,a,l){var d=i.flags;switch(i.tag){case 0:case 11:case 15:as(t,i,a,l),d&2048&&Sl(9,i);break;case 1:as(t,i,a,l);break;case 3:as(t,i,a,l),d&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&dl(t)));break;case 12:if(d&2048){as(t,i,a,l),t=i.stateNode;try{var m=i.memoizedProps,_=m.id,w=m.onPostCommit;typeof w=="function"&&w(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(k){Xe(i,i.return,k)}}else as(t,i,a,l);break;case 31:as(t,i,a,l);break;case 13:as(t,i,a,l);break;case 23:break;case 22:m=i.stateNode,_=i.alternate,i.memoizedState!==null?m._visibility&2?as(t,i,a,l):Nl(t,i):m._visibility&2?as(t,i,a,l):(m._visibility|=2,Wa(t,i,a,l,(i.subtreeFlags&10256)!==0||!1)),d&2048&&Hf(_,i);break;case 24:as(t,i,a,l),d&2048&&qf(i.alternate,i);break;default:as(t,i,a,l)}}function Wa(t,i,a,l,d){for(d=d&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=t,_=i,w=a,k=l,K=_.flags;switch(_.tag){case 0:case 11:case 15:Wa(m,_,w,k,d),Sl(8,_);break;case 23:break;case 22:var ie=_.stateNode;_.memoizedState!==null?ie._visibility&2?Wa(m,_,w,k,d):Nl(m,_):(ie._visibility|=2,Wa(m,_,w,k,d)),d&&K&2048&&Hf(_.alternate,_);break;case 24:Wa(m,_,w,k,d),d&&K&2048&&qf(_.alternate,_);break;default:Wa(m,_,w,k,d)}i=i.sibling}}function Nl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,d=l.flags;switch(l.tag){case 22:Nl(a,l),d&2048&&Hf(l.alternate,l);break;case 24:Nl(a,l),d&2048&&qf(l.alternate,l);break;default:Nl(a,l)}i=i.sibling}}var Cl=8192;function Ja(t,i,a){if(t.subtreeFlags&Cl)for(t=t.child;t!==null;)Py(t,i,a),t=t.sibling}function Py(t,i,a){switch(t.tag){case 26:Ja(t,i,a),t.flags&Cl&&t.memoizedState!==null&&h2(a,rs,t.memoizedState,t.memoizedProps);break;case 5:Ja(t,i,a);break;case 3:case 4:var l=rs;rs=Zu(t.stateNode.containerInfo),Ja(t,i,a),rs=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Cl,Cl=16777216,Ja(t,i,a),Cl=l):Ja(t,i,a));break;default:Ja(t,i,a)}}function Uy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Rl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Pt=l,By(l,t)}Uy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)zy(t),t=t.sibling}function zy(t){switch(t.tag){case 0:case 11:case 15:Rl(t),t.flags&2048&&zi(9,t,t.return);break;case 3:Rl(t);break;case 12:Rl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,zu(t)):Rl(t);break;default:Rl(t)}}function zu(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Pt=l,By(l,t)}Uy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:zi(8,i,i.return),zu(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,zu(i));break;default:zu(i)}t=t.sibling}}function By(t,i){for(;Pt!==null;){var a=Pt;switch(a.tag){case 0:case 11:case 15:zi(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:dl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Pt=l;else e:for(a=t;Pt!==null;){l=Pt;var d=l.sibling,m=l.return;if(ky(l),l===a){Pt=null;break e}if(d!==null){d.return=m,Pt=d;break e}Pt=m}}}var AE={getCacheForType:function(t){var i=Gt(At),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return Gt(At).controller.signal}},NE=typeof WeakMap=="function"?WeakMap:Map,Ke=0,tt=null,je=null,Me=0,Qe=0,Sn=null,Bi=!1,Za=!1,Gf=!1,oi=0,ft=0,Hi=0,Wr=0,Ff=0,An=0,eo=0,Il=null,fn=null,Kf=!1,Bu=0,Hy=0,Hu=1/0,qu=null,qi=null,jt=0,Gi=null,to=null,li=0,$f=0,Yf=null,qy=null,kl=0,Qf=null;function Nn(){return(Ke&2)!==0&&Me!==0?Me&-Me:R.T!==null?tm():Gc()}function Gy(){if(An===0)if((Me&536870912)===0||ze){var t=Er;Er<<=1,(Er&3932160)===0&&(Er=262144),An=t}else An=536870912;return t=wn.current,t!==null&&(t.flags|=32),An}function mn(t,i,a){(t===tt&&(Qe===2||Qe===9)||t.cancelPendingCommit!==null)&&(no(t,0),Fi(t,Me,An,!1)),Sr(t,a),((Ke&2)===0||t!==tt)&&(t===tt&&((Ke&2)===0&&(Wr|=a),ft===4&&Fi(t,Me,An,!1)),js(t))}function Fy(t,i,a){if((Ke&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&t.expiredLanes)===0||Xn(t,i),d=l?IE(t,i):Wf(t,i,!0),m=l;do{if(d===0){Za&&!l&&Fi(t,i,0,!1);break}else{if(a=t.current.alternate,m&&!CE(a)){d=Wf(t,i,!1),m=!1;continue}if(d===2){if(m=i,t.errorRecoveryDisabledLanes&m)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var w=t;d=Il;var k=w.current.memoizedState.isDehydrated;if(k&&(no(w,_).flags|=256),_=Wf(w,_,!1),_!==2){if(Gf&&!k){w.errorRecoveryDisabledLanes|=m,Wr|=m,d=4;break e}m=fn,fn=d,m!==null&&(fn===null?fn=m:fn.push.apply(fn,m))}d=_}if(m=!1,d!==2)continue}}if(d===1){no(t,0),Fi(t,i,0,!0);break}e:{switch(l=t,m=d,m){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Fi(l,i,An,!Bi);break e;case 2:fn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(d=Bu+300-nn(),10<d)){if(Fi(l,i,An,!Bi),ps(l,0,!0)!==0)break e;li=i,l.timeoutHandle=Tv(Ky.bind(null,l,a,fn,qu,Kf,i,An,Wr,eo,Bi,m,"Throttled",-0,0),d);break e}Ky(l,a,fn,qu,Kf,i,An,Wr,eo,Bi,m,null,-0,0)}}break}while(!0);js(t)}function Ky(t,i,a,l,d,m,_,w,k,K,ie,ae,$,J){if(t.timeoutHandle=-1,ae=i.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zn},Py(i,m,ae);var pe=(m&62914560)===m?Bu-nn():(m&4194048)===m?Hy-nn():0;if(pe=d2(ae,pe),pe!==null){li=m,t.cancelPendingCommit=pe(ev.bind(null,t,i,m,a,l,d,_,w,k,ie,ae,null,$,J)),Fi(t,m,_,!K);return}}ev(t,i,m,a,l,d,_,w,k)}function CE(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],m=d.getSnapshot;d=d.value;try{if(!xn(m(),d))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Fi(t,i,a,l){i&=~Ff,i&=~Wr,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var d=i;0<d;){var m=31-mt(d),_=1<<m;l[m]=-1,d&=~_}a!==0&&Ar(t,a,i)}function Gu(){return(Ke&6)===0?(Ol(0),!1):!0}function Xf(){if(je!==null){if(Qe===0)var t=je.return;else t=je,Ws=Hr=null,df(t),Ka=null,ml=0,t=je;for(;t!==null;)wy(t.alternate,t),t=t.return;je=null}}function no(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,YE(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),li=0,Xf(),tt=t,je=a=Qs(t.current,null),Me=i,Qe=0,Sn=null,Bi=!1,Za=Xn(t,i),Gf=!1,eo=An=Ff=Wr=Hi=ft=0,fn=Il=null,Kf=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var d=31-mt(l),m=1<<d;i|=t[d],l&=~m}return oi=i,hu(),a}function $y(t,i){Ie=null,R.H=Tl,i===Fa||i===_u?(i=c0(),Qe=3):i===Zd?(i=c0(),Qe=4):Qe=i===Cf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Sn=i,je===null&&(ft=1,ju(t,Pn(i,t.current)))}function Yy(){var t=wn.current;return t===null?!0:(Me&4194048)===Me?Hn===null:(Me&62914560)===Me||(Me&536870912)!==0?t===Hn:!1}function Qy(){var t=R.H;return R.H=Tl,t===null?Tl:t}function Xy(){var t=R.A;return R.A=AE,t}function Fu(){ft=4,Bi||(Me&4194048)!==Me&&wn.current!==null||(Za=!0),(Hi&134217727)===0&&(Wr&134217727)===0||tt===null||Fi(tt,Me,An,!1)}function Wf(t,i,a){var l=Ke;Ke|=2;var d=Qy(),m=Xy();(tt!==t||Me!==i)&&(qu=null,no(t,i)),i=!1;var _=ft;e:do try{if(Qe!==0&&je!==null){var w=je,k=Sn;switch(Qe){case 8:Xf(),_=6;break e;case 3:case 2:case 9:case 6:wn.current===null&&(i=!0);var K=Qe;if(Qe=0,Sn=null,so(t,w,k,K),a&&Za){_=0;break e}break;default:K=Qe,Qe=0,Sn=null,so(t,w,k,K)}}RE(),_=ft;break}catch(ie){$y(t,ie)}while(!0);return i&&t.shellSuspendCounter++,Ws=Hr=null,Ke=l,R.H=d,R.A=m,je===null&&(tt=null,Me=0,hu()),_}function RE(){for(;je!==null;)Wy(je)}function IE(t,i){var a=Ke;Ke|=2;var l=Qy(),d=Xy();tt!==t||Me!==i?(qu=null,Hu=nn()+500,no(t,i)):Za=Xn(t,i);e:do try{if(Qe!==0&&je!==null){i=je;var m=Sn;t:switch(Qe){case 1:Qe=0,Sn=null,so(t,i,m,1);break;case 2:case 9:if(o0(m)){Qe=0,Sn=null,Jy(i);break}i=function(){Qe!==2&&Qe!==9||tt!==t||(Qe=7),js(t)},m.then(i,i);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:o0(m)?(Qe=0,Sn=null,Jy(i)):(Qe=0,Sn=null,so(t,i,m,7));break;case 5:var _=null;switch(je.tag){case 26:_=je.memoizedState;case 5:case 27:var w=je;if(_?Lv(_):w.stateNode.complete){Qe=0,Sn=null;var k=w.sibling;if(k!==null)je=k;else{var K=w.return;K!==null?(je=K,Ku(K)):je=null}break t}}Qe=0,Sn=null,so(t,i,m,5);break;case 6:Qe=0,Sn=null,so(t,i,m,6);break;case 8:Xf(),ft=6;break e;default:throw Error(r(462))}}kE();break}catch(ie){$y(t,ie)}while(!0);return Ws=Hr=null,R.H=l,R.A=d,Ke=a,je!==null?0:(tt=null,Me=0,hu(),ft)}function kE(){for(;je!==null&&!Ad();)Wy(je)}function Wy(t){var i=xy(t.alternate,t,oi);t.memoizedProps=t.pendingProps,i===null?Ku(t):je=i}function Jy(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=py(a,i,i.pendingProps,i.type,void 0,Me);break;case 11:i=py(a,i,i.pendingProps,i.type.render,i.ref,Me);break;case 5:df(i);default:wy(a,i),i=je=Xg(i,oi),i=xy(a,i,oi)}t.memoizedProps=t.pendingProps,i===null?Ku(t):je=i}function so(t,i,a,l){Ws=Hr=null,df(i),Ka=null,ml=0;var d=i.return;try{if(_E(t,d,i,a,Me)){ft=1,ju(t,Pn(a,t.current)),je=null;return}}catch(m){if(d!==null)throw je=d,m;ft=1,ju(t,Pn(a,t.current)),je=null;return}i.flags&32768?(ze||l===1?t=!0:Za||(Me&536870912)!==0?t=!1:(Bi=t=!0,(l===2||l===9||l===3||l===6)&&(l=wn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Zy(i,t)):Ku(i)}function Ku(t){var i=t;do{if((i.flags&32768)!==0){Zy(i,Bi);return}t=i.return;var a=TE(i.alternate,i,oi);if(a!==null){je=a;return}if(i=i.sibling,i!==null){je=i;return}je=i=t}while(i!==null);ft===0&&(ft=5)}function Zy(t,i){do{var a=wE(t.alternate,t);if(a!==null){a.flags&=32767,je=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){je=t;return}je=t=a}while(t!==null);ft=6,je=null}function ev(t,i,a,l,d,m,_,w,k){t.cancelPendingCommit=null;do $u();while(jt!==0);if((Ke&6)!==0)throw Error(r(327));if(i!==null){if(i===t.current)throw Error(r(177));if(m=i.lanes|i.childLanes,m|=Pd,Rd(t,a,m,_,w,k),t===tt&&(je=tt=null,Me=0),to=i,Gi=t,li=a,$f=m,Yf=d,qy=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,ME(xi,function(){return rv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=R.T,R.T=null,d=se.p,se.p=2,_=Ke,Ke|=4;try{EE(t,i,a)}finally{Ke=_,se.p=d,R.T=l}}jt=1,tv(),nv(),sv()}}function tv(){if(jt===1){jt=0;var t=Gi,i=to,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=R.T,R.T=null;var l=se.p;se.p=2;var d=Ke;Ke|=4;try{My(i,t);var m=cm,_=Bg(t.containerInfo),w=m.focusedElem,k=m.selectionRange;if(_!==w&&w&&w.ownerDocument&&zg(w.ownerDocument.documentElement,w)){if(k!==null&&jd(w)){var K=k.start,ie=k.end;if(ie===void 0&&(ie=K),"selectionStart"in w)w.selectionStart=K,w.selectionEnd=Math.min(ie,w.value.length);else{var ae=w.ownerDocument||document,$=ae&&ae.defaultView||window;if($.getSelection){var J=$.getSelection(),pe=w.textContent.length,xe=Math.min(k.start,pe),et=k.end===void 0?xe:Math.min(k.end,pe);!J.extend&&xe>et&&(_=et,et=xe,xe=_);var B=Ug(w,xe),V=Ug(w,et);if(B&&V&&(J.rangeCount!==1||J.anchorNode!==B.node||J.anchorOffset!==B.offset||J.focusNode!==V.node||J.focusOffset!==V.offset)){var F=ae.createRange();F.setStart(B.node,B.offset),J.removeAllRanges(),xe>et?(J.addRange(F),J.extend(V.node,V.offset)):(F.setEnd(V.node,V.offset),J.addRange(F))}}}}for(ae=[],J=w;J=J.parentNode;)J.nodeType===1&&ae.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ae.length;w++){var re=ae[w];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}rh=!!lm,cm=lm=null}finally{Ke=d,se.p=l,R.T=a}}t.current=i,jt=2}}function nv(){if(jt===2){jt=0;var t=Gi,i=to,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=R.T,R.T=null;var l=se.p;se.p=2;var d=Ke;Ke|=4;try{Iy(t,i.alternate,i)}finally{Ke=d,se.p=l,R.T=a}}jt=3}}function sv(){if(jt===4||jt===3){jt=0,Lc();var t=Gi,i=to,a=li,l=qy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?jt=5:(jt=0,to=Gi=null,iv(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(qi=null),Fs(a),i=i.stateNode,Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(Qn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=R.T,d=se.p,se.p=2,R.T=null;try{for(var m=t.onRecoverableError,_=0;_<l.length;_++){var w=l[_];m(w.value,{componentStack:w.stack})}}finally{R.T=i,se.p=d}}(li&3)!==0&&$u(),js(t),d=t.pendingLanes,(a&261930)!==0&&(d&42)!==0?t===Qf?kl++:(kl=0,Qf=t):kl=0,Ol(0)}}function iv(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,dl(i)))}function $u(){return tv(),nv(),sv(),rv()}function rv(){if(jt!==5)return!1;var t=Gi,i=$f;$f=0;var a=Fs(li),l=R.T,d=se.p;try{se.p=32>a?32:a,R.T=null,a=Yf,Yf=null;var m=Gi,_=li;if(jt=0,to=Gi=null,li=0,(Ke&6)!==0)throw Error(r(331));var w=Ke;if(Ke|=4,zy(m.current),Ly(m,m.current,_,a),Ke=w,Ol(0,!1),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(Qn,m)}catch{}return!0}finally{se.p=d,R.T=l,iv(t,i)}}function av(t,i,a){i=Pn(a,i),i=Nf(t.stateNode,i,2),t=Li(t,i,2),t!==null&&(Sr(t,2),js(t))}function Xe(t,i,a){if(t.tag===3)av(t,t,a);else for(;i!==null;){if(i.tag===3){av(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(qi===null||!qi.has(l))){t=Pn(a,t),a=oy(2),l=Li(i,a,2),l!==null&&(ly(a,l,i,t),Sr(l,2),js(l));break}}i=i.return}}function Jf(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new NE;var d=new Set;l.set(i,d)}else d=l.get(i),d===void 0&&(d=new Set,l.set(i,d));d.has(a)||(Gf=!0,d.add(a),t=OE.bind(null,t,i,a),i.then(t,t))}function OE(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,tt===t&&(Me&a)===a&&(ft===4||ft===3&&(Me&62914560)===Me&&300>nn()-Bu?(Ke&2)===0&&no(t,0):Ff|=a,eo===Me&&(eo=0)),js(t)}function ov(t,i){i===0&&(i=qc()),t=Ur(t,i),t!==null&&(Sr(t,i),js(t))}function jE(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),ov(t,a)}function DE(t,i){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),ov(t,a)}function ME(t,i){return Ot(t,i)}var Yu=null,io=null,Zf=!1,Qu=!1,em=!1,Ki=0;function js(t){t!==io&&t.next===null&&(io===null?Yu=io=t:io=io.next=t),Qu=!0,Zf||(Zf=!0,LE())}function Ol(t,i){if(!em&&Qu){em=!0;do for(var a=!1,l=Yu;l!==null;){if(t!==0){var d=l.pendingLanes;if(d===0)var m=0;else{var _=l.suspendedLanes,w=l.pingedLanes;m=(1<<31-mt(42|t)+1)-1,m&=d&~(_&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,hv(l,m))}else m=Me,m=ps(l,l===tt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Xn(l,m)||(a=!0,hv(l,m));l=l.next}while(a);em=!1}}function VE(){lv()}function lv(){Qu=Zf=!1;var t=0;Ki!==0&&$E()&&(t=Ki);for(var i=nn(),a=null,l=Yu;l!==null;){var d=l.next,m=cv(l,i);m===0?(l.next=null,a===null?Yu=d:a.next=d,d===null&&(io=a)):(a=l,(t!==0||(m&3)!==0)&&(Qu=!0)),l=d}jt!==0&&jt!==5||Ol(t),Ki!==0&&(Ki=0)}function cv(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,d=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var _=31-mt(m),w=1<<_,k=d[_];k===-1?((w&a)===0||(w&l)!==0)&&(d[_]=Cd(w,i)):k<=i&&(t.expiredLanes|=w),m&=~w}if(i=tt,a=Me,a=ps(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(Qe===2||Qe===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&bi(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Xn(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&bi(l),Fs(a)){case 2:case 8:a=Ho;break;case 32:a=xi;break;case 268435456:a=Pc;break;default:a=xi}return l=uv.bind(null,t),a=Ot(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&bi(l),t.callbackPriority=2,t.callbackNode=null,2}function uv(t,i){if(jt!==0&&jt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if($u()&&t.callbackNode!==a)return null;var l=Me;return l=ps(t,t===tt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Fy(t,l,i),cv(t,nn()),t.callbackNode!=null&&t.callbackNode===a?uv.bind(null,t):null)}function hv(t,i){if($u())return null;Fy(t,i,!0)}function LE(){QE(function(){(Ke&6)!==0?Ot(Bo,VE):lv()})}function tm(){if(Ki===0){var t=qa;t===0&&(t=fs,fs<<=1,(fs&261888)===0&&(fs=256)),Ki=t}return Ki}function dv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ca(""+t)}function fv(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function PE(t,i,a,l,d){if(i==="submit"&&a&&a.stateNode===d){var m=dv((d[Vt]||null).action),_=l.submitter;_&&(i=(i=_[Vt]||null)?dv(i.formAction):_.getAttribute("formAction"),i!==null&&(m=i,_=null));var w=new As("action","action",null,l,d);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ki!==0){var k=_?fv(d,_):new FormData(d);xf(a,{pending:!0,data:k,method:d.method,action:m},null,k)}}else typeof m=="function"&&(w.preventDefault(),k=_?fv(d,_):new FormData(d),xf(a,{pending:!0,data:k,method:d.method,action:m},m,k))},currentTarget:d}]})}}for(var nm=0;nm<Ld.length;nm++){var sm=Ld[nm],UE=sm.toLowerCase(),zE=sm[0].toUpperCase()+sm.slice(1);is(UE,"on"+zE)}is(Gg,"onAnimationEnd"),is(Fg,"onAnimationIteration"),is(Kg,"onAnimationStart"),is("dblclick","onDoubleClick"),is("focusin","onFocus"),is("focusout","onBlur"),is(nE,"onTransitionRun"),is(sE,"onTransitionStart"),is(iE,"onTransitionCancel"),is($g,"onTransitionEnd"),Ts("onMouseEnter",["mouseout","mouseover"]),Ts("onMouseLeave",["mouseout","mouseover"]),Ts("onPointerEnter",["pointerout","pointerover"]),Ts("onPointerLeave",["pointerout","pointerover"]),xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xs("onBeforeInput",["compositionend","keypress","textInput","paste"]),xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jl));function mv(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],d=l.event;l=l.listeners;e:{var m=void 0;if(i)for(var _=l.length-1;0<=_;_--){var w=l[_],k=w.instance,K=w.currentTarget;if(w=w.listener,k!==m&&d.isPropagationStopped())break e;m=w,d.currentTarget=K;try{m(d)}catch(ie){uu(ie)}d.currentTarget=null,m=k}else for(_=0;_<l.length;_++){if(w=l[_],k=w.instance,K=w.currentTarget,w=w.listener,k!==m&&d.isPropagationStopped())break e;m=w,d.currentTarget=K;try{m(d)}catch(ie){uu(ie)}d.currentTarget=null,m=k}}}}function De(t,i){var a=i[wa];a===void 0&&(a=i[wa]=new Set);var l=t+"__bubble";a.has(l)||(pv(i,t,2,!1),a.add(l))}function im(t,i,a){var l=0;i&&(l|=4),pv(a,t,l,i)}var Xu="_reactListening"+Math.random().toString(36).slice(2);function rm(t){if(!t[Xu]){t[Xu]=!0,Fo.forEach(function(a){a!=="selectionchange"&&(BE.has(a)||im(a,!1,t),im(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Xu]||(i[Xu]=!0,im("selectionchange",!1,i))}}function pv(t,i,a,l){switch(Gv(i)){case 2:var d=p2;break;case 8:d=g2;break;default:d=bm}a=d.bind(null,i,a,t),d=void 0,!kr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),l?d!==void 0?t.addEventListener(i,a,{capture:!0,passive:d}):t.addEventListener(i,a,!0):d!==void 0?t.addEventListener(i,a,{passive:d}):t.addEventListener(i,a,!1)}function am(t,i,a,l,d){var m=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var w=l.stateNode.containerInfo;if(w===d)break;if(_===4)for(_=l.return;_!==null;){var k=_.tag;if((k===3||k===4)&&_.stateNode.containerInfo===d)return;_=_.return}for(;w!==null;){if(_=_s(w),_===null)return;if(k=_.tag,k===5||k===6||k===26||k===27){l=m=_;continue e}w=w.parentNode}}l=l.return}Ni(function(){var K=m,ie=Dn(a),ae=[];e:{var $=Yg.get(t);if($!==void 0){var J=As,pe=t;switch(t){case"keypress":if(jr(a)===0)break e;case"keydown":case"keyup":J=ou;break;case"focusin":pe="focus",J=Mr;break;case"focusout":pe="blur",J=Mr;break;case"beforeblur":case"afterblur":J=Mr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=il;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=Jc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=v;break;case Gg:case Fg:case Kg:J=eu;break;case $g:J=A;break;case"scroll":case"scrollend":J=sl;break;case"wheel":J=W;break;case"copy":case"cut":case"paste":J=tu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Ys;break;case"toggle":case"beforetoggle":J=Re}var xe=(i&4)!==0,et=!xe&&(t==="scroll"||t==="scrollend"),B=xe?$!==null?$+"Capture":null:$;xe=[];for(var V=K,F;V!==null;){var re=V;if(F=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||F===null||B===null||(re=es(V,B),re!=null&&xe.push(Dl(V,re,F))),et)break;V=V.return}0<xe.length&&($=new J($,pe,null,a,ie),ae.push({event:$,listeners:xe}))}}if((i&7)===0){e:{if($=t==="mouseover"||t==="pointerover",J=t==="mouseout"||t==="pointerout",$&&a!==el&&(pe=a.relatedTarget||a.fromElement)&&(_s(pe)||pe[ys]))break e;if((J||$)&&($=ie.window===ie?ie:($=ie.ownerDocument)?$.defaultView||$.parentWindow:window,J?(pe=a.relatedTarget||a.toElement,J=K,pe=pe?_s(pe):null,pe!==null&&(et=c(pe),xe=pe.tag,pe!==et||xe!==5&&xe!==27&&xe!==6)&&(pe=null)):(J=null,pe=K),J!==pe)){if(xe=il,re="onMouseLeave",B="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(xe=Ys,re="onPointerLeave",B="onPointerEnter",V="pointer"),et=J==null?$:_n(J),F=pe==null?$:_n(pe),$=new xe(re,V+"leave",J,a,ie),$.target=et,$.relatedTarget=F,re=null,_s(ie)===K&&(xe=new xe(B,V+"enter",pe,a,ie),xe.target=F,xe.relatedTarget=et,re=xe),et=re,J&&pe)t:{for(xe=HE,B=J,V=pe,F=0,re=B;re;re=xe(re))F++;re=0;for(var _e=V;_e;_e=xe(_e))re++;for(;0<F-re;)B=xe(B),F--;for(;0<re-F;)V=xe(V),re--;for(;F--;){if(B===V||V!==null&&B===V.alternate){xe=B;break t}B=xe(B),V=xe(V)}xe=null}else xe=null;J!==null&&gv(ae,$,J,xe,!1),pe!==null&&et!==null&&gv(ae,et,pe,xe,!0)}}e:{if($=K?_n(K):window,J=$.nodeName&&$.nodeName.toLowerCase(),J==="select"||J==="input"&&$.type==="file")var qe=jg;else if(kg($))if(Dg)qe=Zw;else{qe=Ww;var ye=Xw}else J=$.nodeName,!J||J.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?K&&Na(K.elementType)&&(qe=jg):qe=Jw;if(qe&&(qe=qe(t,K))){Og(ae,qe,a,ie);break e}ye&&ye(t,$,K),t==="focusout"&&K&&$.type==="number"&&K.memoizedProps.value!=null&&Wo($,"number",$.value)}switch(ye=K?_n(K):window,t){case"focusin":(kg(ye)||ye.contentEditable==="true")&&(Ma=ye,Dd=K,cl=null);break;case"focusout":cl=Dd=Ma=null;break;case"mousedown":Md=!0;break;case"contextmenu":case"mouseup":case"dragend":Md=!1,Hg(ae,a,ie);break;case"selectionchange":if(tE)break;case"keydown":case"keyup":Hg(ae,a,ie)}var ke;if(Fe)e:{switch(t){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else Da?Vr(t,a)&&(Ve="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ve="onCompositionStart");Ve&&(Rs&&a.locale!=="ko"&&(Da||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&Da&&(ke=nl()):(Ss=ie,tl="value"in Ss?Ss.value:Ss.textContent,Da=!0)),ye=Wu(K,Ve),0<ye.length&&(Ve=new Cs(Ve,t,null,a,ie),ae.push({event:Ve,listeners:ye}),ke?Ve.data=ke:(ke=ja(a),ke!==null&&(Ve.data=ke)))),(ke=Vn?Kw(t,a):$w(t,a))&&(Ve=Wu(K,"onBeforeInput"),0<Ve.length&&(ye=new Cs("onBeforeInput","beforeinput",null,a,ie),ae.push({event:ye,listeners:Ve}),ye.data=ke)),PE(ae,t,K,a,ie)}mv(ae,i)})}function Dl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Wu(t,i){for(var a=i+"Capture",l=[];t!==null;){var d=t,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=es(t,a),d!=null&&l.unshift(Dl(t,d,m)),d=es(t,i),d!=null&&l.push(Dl(t,d,m))),t.tag===3)return l;t=t.return}return[]}function HE(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function gv(t,i,a,l,d){for(var m=i._reactName,_=[];a!==null&&a!==l;){var w=a,k=w.alternate,K=w.stateNode;if(w=w.tag,k!==null&&k===l)break;w!==5&&w!==26&&w!==27||K===null||(k=K,d?(K=es(a,m),K!=null&&_.unshift(Dl(a,K,k))):d||(K=es(a,m),K!=null&&_.push(Dl(a,K,k)))),a=a.return}_.length!==0&&t.push({event:i,listeners:_})}var qE=/\r\n?/g,GE=/\u0000|\uFFFD/g;function yv(t){return(typeof t=="string"?t:""+t).replace(qE,`
`).replace(GE,"")}function vv(t,i){return i=yv(i),yv(t)===i}function Ze(t,i,a,l,d,m){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||cn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&cn(t,""+l);break;case"className":bn(t,"class",l);break;case"tabIndex":bn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":bn(t,a,l);break;case"style":Zo(t,l,m);break;case"data":if(i!=="object"){bn(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ca(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(i!=="input"&&Ze(t,i,"name",d.name,d,null),Ze(t,i,"formEncType",d.formEncType,d,null),Ze(t,i,"formMethod",d.formMethod,d,null),Ze(t,i,"formTarget",d.formTarget,d,null)):(Ze(t,i,"encType",d.encType,d,null),Ze(t,i,"method",d.method,d,null),Ze(t,i,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ca(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Zn);break;case"onScroll":l!=null&&De("scroll",t);break;case"onScrollEnd":l!=null&&De("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ca(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":De("beforetoggle",t),De("toggle",t),Sa(t,"popover",l);break;case"xlinkActuate":St(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":St(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":St(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":St(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":St(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":St(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":St(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":St(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":St(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Sa(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Wc.get(a)||a,Sa(t,a,l))}}function om(t,i,a,l,d,m){switch(a){case"style":Zo(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?cn(t,l):(typeof l=="number"||typeof l=="bigint")&&cn(t,""+l);break;case"onScroll":l!=null&&De("scroll",t);break;case"onScrollEnd":l!=null&&De("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Zn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ko.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),i=a.slice(2,d?a.length-7:void 0),m=t[Vt]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(i,m,d),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,d);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Sa(t,a,l)}}}function Kt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":De("error",t),De("load",t);var l=!1,d=!1,m;for(m in a)if(a.hasOwnProperty(m)){var _=a[m];if(_!=null)switch(m){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Ze(t,i,m,_,a,null)}}d&&Ze(t,i,"srcSet",a.srcSet,a,null),l&&Ze(t,i,"src",a.src,a,null);return;case"input":De("invalid",t);var w=m=_=d=null,k=null,K=null;for(l in a)if(a.hasOwnProperty(l)){var ie=a[l];if(ie!=null)switch(l){case"name":d=ie;break;case"type":_=ie;break;case"checked":k=ie;break;case"defaultChecked":K=ie;break;case"value":m=ie;break;case"defaultValue":w=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,i));break;default:Ze(t,i,l,ie,a,null)}}Yc(t,m,w,k,K,_,d,!1);return;case"select":De("invalid",t),l=_=m=null;for(d in a)if(a.hasOwnProperty(d)&&(w=a[d],w!=null))switch(d){case"value":m=w;break;case"defaultValue":_=w;break;case"multiple":l=w;default:Ze(t,i,d,w,a,null)}i=m,a=_,t.multiple=!!l,i!=null?wi(t,!!l,i,!1):a!=null&&wi(t,!!l,a,!0);return;case"textarea":De("invalid",t),m=d=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(w=a[_],w!=null))switch(_){case"value":l=w;break;case"defaultValue":d=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:Ze(t,i,_,w,a,null)}Ei(t,l,d,m);return;case"option":for(k in a)if(a.hasOwnProperty(k)&&(l=a[k],l!=null))switch(k){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ze(t,i,k,l,a,null)}return;case"dialog":De("beforetoggle",t),De("toggle",t),De("cancel",t),De("close",t);break;case"iframe":case"object":De("load",t);break;case"video":case"audio":for(l=0;l<jl.length;l++)De(jl[l],t);break;case"image":De("error",t),De("load",t);break;case"details":De("toggle",t);break;case"embed":case"source":case"link":De("error",t),De("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in a)if(a.hasOwnProperty(K)&&(l=a[K],l!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Ze(t,i,K,l,a,null)}return;default:if(Na(i)){for(ie in a)a.hasOwnProperty(ie)&&(l=a[ie],l!==void 0&&om(t,i,ie,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&Ze(t,i,w,l,a,null))}function FE(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,_=null,w=null,k=null,K=null,ie=null;for(J in a){var ae=a[J];if(a.hasOwnProperty(J)&&ae!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":k=ae;default:l.hasOwnProperty(J)||Ze(t,i,J,null,l,ae)}}for(var $ in l){var J=l[$];if(ae=a[$],l.hasOwnProperty($)&&(J!=null||ae!=null))switch($){case"type":m=J;break;case"name":d=J;break;case"checked":K=J;break;case"defaultChecked":ie=J;break;case"value":_=J;break;case"defaultValue":w=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,i));break;default:J!==ae&&Ze(t,i,$,J,l,ae)}}Aa(t,_,w,k,K,ie,m,d);return;case"select":J=_=w=$=null;for(m in a)if(k=a[m],a.hasOwnProperty(m)&&k!=null)switch(m){case"value":break;case"multiple":J=k;default:l.hasOwnProperty(m)||Ze(t,i,m,null,l,k)}for(d in l)if(m=l[d],k=a[d],l.hasOwnProperty(d)&&(m!=null||k!=null))switch(d){case"value":$=m;break;case"defaultValue":w=m;break;case"multiple":_=m;default:m!==k&&Ze(t,i,d,m,l,k)}i=w,a=_,l=J,$!=null?wi(t,!!a,$,!1):!!l!=!!a&&(i!=null?wi(t,!!a,i,!0):wi(t,!!a,a?[]:"",!1));return;case"textarea":J=$=null;for(w in a)if(d=a[w],a.hasOwnProperty(w)&&d!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Ze(t,i,w,null,l,d)}for(_ in l)if(d=l[_],m=a[_],l.hasOwnProperty(_)&&(d!=null||m!=null))switch(_){case"value":$=d;break;case"defaultValue":J=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==m&&Ze(t,i,_,d,l,m)}Qc(t,$,J);return;case"option":for(var pe in a)if($=a[pe],a.hasOwnProperty(pe)&&$!=null&&!l.hasOwnProperty(pe))switch(pe){case"selected":t.selected=!1;break;default:Ze(t,i,pe,null,l,$)}for(k in l)if($=l[k],J=a[k],l.hasOwnProperty(k)&&$!==J&&($!=null||J!=null))switch(k){case"selected":t.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:Ze(t,i,k,$,l,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in a)$=a[xe],a.hasOwnProperty(xe)&&$!=null&&!l.hasOwnProperty(xe)&&Ze(t,i,xe,null,l,$);for(K in l)if($=l[K],J=a[K],l.hasOwnProperty(K)&&$!==J&&($!=null||J!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,i));break;default:Ze(t,i,K,$,l,J)}return;default:if(Na(i)){for(var et in a)$=a[et],a.hasOwnProperty(et)&&$!==void 0&&!l.hasOwnProperty(et)&&om(t,i,et,void 0,l,$);for(ie in l)$=l[ie],J=a[ie],!l.hasOwnProperty(ie)||$===J||$===void 0&&J===void 0||om(t,i,ie,$,l,J);return}}for(var B in a)$=a[B],a.hasOwnProperty(B)&&$!=null&&!l.hasOwnProperty(B)&&Ze(t,i,B,null,l,$);for(ae in l)$=l[ae],J=a[ae],!l.hasOwnProperty(ae)||$===J||$==null&&J==null||Ze(t,i,ae,$,l,J)}function _v(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function KE(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var d=a[l],m=d.transferSize,_=d.initiatorType,w=d.duration;if(m&&w&&_v(_)){for(_=0,w=d.responseEnd,l+=1;l<a.length;l++){var k=a[l],K=k.startTime;if(K>w)break;var ie=k.transferSize,ae=k.initiatorType;ie&&_v(ae)&&(k=k.responseEnd,_+=ie*(k<w?1:(w-K)/(k-K)))}if(--l,i+=8*(m+_)/(d.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var lm=null,cm=null;function Ju(t){return t.nodeType===9?t:t.ownerDocument}function bv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xv(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function um(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var hm=null;function $E(){var t=window.event;return t&&t.type==="popstate"?t===hm?!1:(hm=t,!0):(hm=null,!1)}var Tv=typeof setTimeout=="function"?setTimeout:void 0,YE=typeof clearTimeout=="function"?clearTimeout:void 0,wv=typeof Promise=="function"?Promise:void 0,QE=typeof queueMicrotask=="function"?queueMicrotask:typeof wv<"u"?function(t){return wv.resolve(null).then(t).catch(XE)}:Tv;function XE(t){setTimeout(function(){throw t})}function $i(t){return t==="head"}function Ev(t,i){var a=i,l=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(d),lo(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Ml(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Ml(a);for(var m=a.firstChild;m;){var _=m.nextSibling,w=m.nodeName;m[vs]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=_}}else a==="body"&&Ml(t.ownerDocument.body);a=d}while(a);lo(i)}function Sv(t,i){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function dm(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":dm(a),Ea(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function WE(t,i,a,l){for(;t.nodeType===1;){var d=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[vs])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=qn(t.nextSibling),t===null)break}return null}function JE(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=qn(t.nextSibling),t===null))return null;return t}function Av(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=qn(t.nextSibling),t===null))return null;return t}function fm(t){return t.data==="$?"||t.data==="$~"}function mm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function ZE(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function qn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var pm=null;function Nv(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return qn(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function Cv(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function Rv(t,i,a){switch(i=Ju(a),t){case"html":if(t=i.documentElement,!t)throw Error(r(452));return t;case"head":if(t=i.head,!t)throw Error(r(453));return t;case"body":if(t=i.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Ml(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Ea(t)}var Gn=new Map,Iv=new Set;function Zu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ci=se.d;se.d={f:e2,r:t2,D:n2,C:s2,L:i2,m:r2,X:o2,S:a2,M:l2};function e2(){var t=ci.f(),i=Gu();return t||i}function t2(t){var i=jn(t);i!==null&&i.tag===5&&i.type==="form"?$0(i):ci.r(t)}var ro=typeof document>"u"?null:document;function kv(t,i,a){var l=ro;if(l&&typeof i=="string"&&i){var d=ln(i);d='link[rel="'+t+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),Iv.has(d)||(Iv.add(d),t={rel:t,crossOrigin:a,href:i},l.querySelector(d)===null&&(i=l.createElement("link"),Kt(i,"link",t),Et(i),l.head.appendChild(i)))}}function n2(t){ci.D(t),kv("dns-prefetch",t,null)}function s2(t,i){ci.C(t,i),kv("preconnect",t,i)}function i2(t,i,a){ci.L(t,i,a);var l=ro;if(l&&t&&i){var d='link[rel="preload"][as="'+ln(i)+'"]';i==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+ln(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+ln(a.imageSizes)+'"]')):d+='[href="'+ln(t)+'"]';var m=d;switch(i){case"style":m=ao(t);break;case"script":m=oo(t)}Gn.has(m)||(t=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Gn.set(m,t),l.querySelector(d)!==null||i==="style"&&l.querySelector(Vl(m))||i==="script"&&l.querySelector(Ll(m))||(i=l.createElement("link"),Kt(i,"link",t),Et(i),l.head.appendChild(i)))}}function r2(t,i){ci.m(t,i);var a=ro;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",d='link[rel="modulepreload"][as="'+ln(l)+'"][href="'+ln(t)+'"]',m=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=oo(t)}if(!Gn.has(m)&&(t=T({rel:"modulepreload",href:t},i),Gn.set(m,t),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ll(m)))return}l=a.createElement("link"),Kt(l,"link",t),Et(l),a.head.appendChild(l)}}}function a2(t,i,a){ci.S(t,i,a);var l=ro;if(l&&t){var d=bs(l).hoistableStyles,m=ao(t);i=i||"default";var _=d.get(m);if(!_){var w={loading:0,preload:null};if(_=l.querySelector(Vl(m)))w.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Gn.get(m))&&gm(t,a);var k=_=l.createElement("link");Et(k),Kt(k,"link",t),k._p=new Promise(function(K,ie){k.onload=K,k.onerror=ie}),k.addEventListener("load",function(){w.loading|=1}),k.addEventListener("error",function(){w.loading|=2}),w.loading|=4,eh(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:w},d.set(m,_)}}}function o2(t,i){ci.X(t,i);var a=ro;if(a&&t){var l=bs(a).hoistableScripts,d=oo(t),m=l.get(d);m||(m=a.querySelector(Ll(d)),m||(t=T({src:t,async:!0},i),(i=Gn.get(d))&&ym(t,i),m=a.createElement("script"),Et(m),Kt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(d,m))}}function l2(t,i){ci.M(t,i);var a=ro;if(a&&t){var l=bs(a).hoistableScripts,d=oo(t),m=l.get(d);m||(m=a.querySelector(Ll(d)),m||(t=T({src:t,async:!0,type:"module"},i),(i=Gn.get(d))&&ym(t,i),m=a.createElement("script"),Et(m),Kt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(d,m))}}function Ov(t,i,a,l){var d=(d=Se.current)?Zu(d):null;if(!d)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=ao(a.href),a=bs(d).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=ao(a.href);var m=bs(d).hoistableStyles,_=m.get(t);if(_||(d=d.ownerDocument||d,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,_),(m=d.querySelector(Vl(t)))&&!m._p&&(_.instance=m,_.state.loading=5),Gn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Gn.set(t,a),m||c2(d,t,a,_.state))),i&&l===null)throw Error(r(528,""));return _}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=oo(a),a=bs(d).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function ao(t){return'href="'+ln(t)+'"'}function Vl(t){return'link[rel="stylesheet"]['+t+"]"}function jv(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function c2(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Kt(i,"link",a),Et(i),t.head.appendChild(i))}function oo(t){return'[src="'+ln(t)+'"]'}function Ll(t){return"script[async]"+t}function Dv(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+ln(a.href)+'"]');if(l)return i.instance=l,Et(l),l;var d=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Et(l),Kt(l,"style",d),eh(l,a.precedence,t),i.instance=l;case"stylesheet":d=ao(a.href);var m=t.querySelector(Vl(d));if(m)return i.state.loading|=4,i.instance=m,Et(m),m;l=jv(a),(d=Gn.get(d))&&gm(l,d),m=(t.ownerDocument||t).createElement("link"),Et(m);var _=m;return _._p=new Promise(function(w,k){_.onload=w,_.onerror=k}),Kt(m,"link",l),i.state.loading|=4,eh(m,a.precedence,t),i.instance=m;case"script":return m=oo(a.src),(d=t.querySelector(Ll(m)))?(i.instance=d,Et(d),d):(l=a,(d=Gn.get(m))&&(l=T({},a),ym(l,d)),t=t.ownerDocument||t,d=t.createElement("script"),Et(d),Kt(d,"link",l),t.head.appendChild(d),i.instance=d);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,eh(l,a.precedence,t));return i.instance}function eh(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,m=d,_=0;_<l.length;_++){var w=l[_];if(w.dataset.precedence===i)m=w;else if(m!==d)break}m?m.parentNode.insertBefore(t,m.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function gm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function ym(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var th=null;function Mv(t,i,a){if(th===null){var l=new Map,d=th=new Map;d.set(a,l)}else d=th,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),d=0;d<a.length;d++){var m=a[d];if(!(m[vs]||m[wt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(i)||"";_=t+_;var w=l.get(_);w?w.push(m):l.set(_,[m])}}return l}function Vv(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function u2(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Lv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function h2(t,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=ao(l.href),m=i.querySelector(Vl(d));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=nh.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=m,Et(m);return}m=i.ownerDocument||i,l=jv(l),(d=Gn.get(d))&&gm(l,d),m=m.createElement("link"),Et(m);var _=m;_._p=new Promise(function(w,k){_.onload=w,_.onerror=k}),Kt(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=nh.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var vm=0;function d2(t,i){return t.stylesheets&&t.count===0&&ih(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&ih(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+i);0<t.imgBytes&&vm===0&&(vm=62500*KE());var d=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&ih(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>vm?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function nh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ih(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var sh=null;function ih(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,sh=new Map,i.forEach(f2,t),sh=null,nh.call(t))}function f2(t,i){if(!(i.state.loading&4)){var a=sh.get(t);if(a)var l=a.get(null);else{a=new Map,sh.set(t,a);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var _=d[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}d=i.instance,_=d.getAttribute("data-precedence"),m=a.get(_)||l,m===l&&a.set(null,d),a.set(_,d),this.count++,l=nh.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),m?m.parentNode.insertBefore(d,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),i.state.loading|=4}}var Pl={$$typeof:ee,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function m2(t,i,a,l,d,m,_,w,k){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gs(0),this.hiddenUpdates=gs(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Pv(t,i,a,l,d,m,_,w,k,K,ie,ae){return t=new m2(t,i,a,_,k,K,ie,ae,w),i=1,m===!0&&(i|=24),m=Tn(3,null,null,i),t.current=m,m.stateNode=t,i=Xd(),i.refCount++,t.pooledCache=i,i.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:i},ef(m),t}function Uv(t){return t?(t=Pa,t):Pa}function zv(t,i,a,l,d,m){d=Uv(d),l.context===null?l.context=d:l.pendingContext=d,l=Vi(i),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=Li(t,l,i),a!==null&&(mn(a,t,i),gl(a,t,i))}function Bv(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function _m(t,i){Bv(t,i),(t=t.alternate)&&Bv(t,i)}function Hv(t){if(t.tag===13||t.tag===31){var i=Ur(t,67108864);i!==null&&mn(i,t,67108864),_m(t,67108864)}}function qv(t){if(t.tag===13||t.tag===31){var i=Nn();i=Nr(i);var a=Ur(t,i);a!==null&&mn(a,t,i),_m(t,i)}}var rh=!0;function p2(t,i,a,l){var d=R.T;R.T=null;var m=se.p;try{se.p=2,bm(t,i,a,l)}finally{se.p=m,R.T=d}}function g2(t,i,a,l){var d=R.T;R.T=null;var m=se.p;try{se.p=8,bm(t,i,a,l)}finally{se.p=m,R.T=d}}function bm(t,i,a,l){if(rh){var d=xm(l);if(d===null)am(t,i,l,ah,a),Fv(t,l);else if(v2(d,t,i,a,l))l.stopPropagation();else if(Fv(t,l),i&4&&-1<y2.indexOf(t)){for(;d!==null;){var m=jn(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=ms(m.pendingLanes);if(_!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;_;){var k=1<<31-mt(_);w.entanglements[1]|=k,_&=~k}js(m),(Ke&6)===0&&(Hu=nn()+500,Ol(0))}}break;case 31:case 13:w=Ur(m,2),w!==null&&mn(w,m,2),Gu(),_m(m,2)}if(m=xm(l),m===null&&am(t,i,l,ah,a),m===d)break;d=m}d!==null&&l.stopPropagation()}else am(t,i,l,null,a)}}function xm(t){return t=Dn(t),Tm(t)}var ah=null;function Tm(t){if(ah=null,t=_s(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=u(i),t!==null)return t;t=null}else if(a===31){if(t=p(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return ah=t,null}function Gv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wr()){case Bo:return 2;case Ho:return 8;case xi:case Nd:return 32;case Pc:return 268435456;default:return 32}default:return 32}}var wm=!1,Yi=null,Qi=null,Xi=null,Ul=new Map,zl=new Map,Wi=[],y2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fv(t,i){switch(t){case"focusin":case"focusout":Yi=null;break;case"dragenter":case"dragleave":Qi=null;break;case"mouseover":case"mouseout":Xi=null;break;case"pointerover":case"pointerout":Ul.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":zl.delete(i.pointerId)}}function Bl(t,i,a,l,d,m){return t===null||t.nativeEvent!==m?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[d]},i!==null&&(i=jn(i),i!==null&&Hv(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),t)}function v2(t,i,a,l,d){switch(i){case"focusin":return Yi=Bl(Yi,t,i,a,l,d),!0;case"dragenter":return Qi=Bl(Qi,t,i,a,l,d),!0;case"mouseover":return Xi=Bl(Xi,t,i,a,l,d),!0;case"pointerover":var m=d.pointerId;return Ul.set(m,Bl(Ul.get(m)||null,t,i,a,l,d)),!0;case"gotpointercapture":return m=d.pointerId,zl.set(m,Bl(zl.get(m)||null,t,i,a,l,d)),!0}return!1}function Kv(t){var i=_s(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=u(a),i!==null){t.blockedOn=i,Wn(t.priority,function(){qv(a)});return}}else if(i===31){if(i=p(a),i!==null){t.blockedOn=i,Wn(t.priority,function(){qv(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function oh(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=xm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);el=l,a.target.dispatchEvent(l),el=null}else return i=jn(a),i!==null&&Hv(i),t.blockedOn=a,!1;i.shift()}return!0}function $v(t,i,a){oh(t)&&a.delete(i)}function _2(){wm=!1,Yi!==null&&oh(Yi)&&(Yi=null),Qi!==null&&oh(Qi)&&(Qi=null),Xi!==null&&oh(Xi)&&(Xi=null),Ul.forEach($v),zl.forEach($v)}function lh(t,i){t.blockedOn===i&&(t.blockedOn=null,wm||(wm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,_2)))}var ch=null;function Yv(t){ch!==t&&(ch=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){ch===t&&(ch=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],d=t[i+2];if(typeof l!="function"){if(Tm(l||a)===null)continue;break}var m=jn(a);m!==null&&(t.splice(i,3),i-=3,xf(m,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function lo(t){function i(k){return lh(k,t)}Yi!==null&&lh(Yi,t),Qi!==null&&lh(Qi,t),Xi!==null&&lh(Xi,t),Ul.forEach(i),zl.forEach(i);for(var a=0;a<Wi.length;a++){var l=Wi[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Wi.length&&(a=Wi[0],a.blockedOn===null);)Kv(a),a.blockedOn===null&&Wi.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],m=a[l+1],_=d[Vt]||null;if(typeof m=="function")_||Yv(a);else if(_){var w=null;if(m&&m.hasAttribute("formAction")){if(d=m,_=m[Vt]||null)w=_.formAction;else if(Tm(d)!==null)continue}else w=_.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),Yv(a)}}}function Qv(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return d=_})},focusReset:"manual",scroll:"manual"})}function i(){d!==null&&(d(),d=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),d!==null&&(d(),d=null)}}}function Em(t){this._internalRoot=t}uh.prototype.render=Em.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=Nn();zv(a,l,t,i,null,null)},uh.prototype.unmount=Em.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;zv(t.current,2,null,t,null,null),Gu(),i[ys]=null}};function uh(t){this._internalRoot=t}uh.prototype.unstable_scheduleHydration=function(t){if(t){var i=Gc();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Wi.length&&i!==0&&i<Wi[a].priority;a++);Wi.splice(a,0,t),a===0&&Kv(t)}};var Xv=e.version;if(Xv!=="19.2.3")throw Error(r(527,Xv,"19.2.3"));se.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=y(i),t=t!==null?x(t):null,t=t===null?null:t.stateNode,t};var b2={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hh.isDisabled&&hh.supportsFiber)try{Qn=hh.inject(b2),Bt=hh}catch{}}return ql.createRoot=function(t,i){if(!o(t))throw Error(r(299));var a=!1,l="",d=sy,m=iy,_=ry;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=Pv(t,1,!1,null,null,a,l,null,d,m,_,Qv),t[ys]=i.current,rm(t),new Em(i)},ql.hydrateRoot=function(t,i,a){if(!o(t))throw Error(r(299));var l=!1,d="",m=sy,_=iy,w=ry,k=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(k=a.formState)),i=Pv(t,1,!0,i,a??null,l,d,k,m,_,w,Qv),i.context=Uv(null),a=i.current,l=Nn(),l=Nr(l),d=Vi(l),d.callback=null,Li(a,d,l),a=l,i.current.lanes=a,Sr(i,a),js(i),t[ys]=i.current,rm(t),new uh(i)},ql.version="19.2.3",ql}var a_;function I2(){if(a_)return Nm.exports;a_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Nm.exports=R2(),Nm.exports}var k2=I2();const O2=_x(k2);var Ds;(function(s){s.STRING="string",s.NUMBER="number",s.INTEGER="integer",s.BOOLEAN="boolean",s.ARRAY="array",s.OBJECT="object"})(Ds||(Ds={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var o_;(function(s){s.LANGUAGE_UNSPECIFIED="language_unspecified",s.PYTHON="python"})(o_||(o_={}));var l_;(function(s){s.OUTCOME_UNSPECIFIED="outcome_unspecified",s.OUTCOME_OK="outcome_ok",s.OUTCOME_FAILED="outcome_failed",s.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(l_||(l_={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_=["user","model","function","system"];var u_;(function(s){s.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",s.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",s.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",s.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",s.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",s.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(u_||(u_={}));var h_;(function(s){s.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",s.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",s.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",s.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",s.BLOCK_NONE="BLOCK_NONE"})(h_||(h_={}));var d_;(function(s){s.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",s.NEGLIGIBLE="NEGLIGIBLE",s.LOW="LOW",s.MEDIUM="MEDIUM",s.HIGH="HIGH"})(d_||(d_={}));var f_;(function(s){s.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",s.SAFETY="SAFETY",s.OTHER="OTHER"})(f_||(f_={}));var ec;(function(s){s.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",s.STOP="STOP",s.MAX_TOKENS="MAX_TOKENS",s.SAFETY="SAFETY",s.RECITATION="RECITATION",s.LANGUAGE="LANGUAGE",s.BLOCKLIST="BLOCKLIST",s.PROHIBITED_CONTENT="PROHIBITED_CONTENT",s.SPII="SPII",s.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",s.OTHER="OTHER"})(ec||(ec={}));var m_;(function(s){s.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",s.RETRIEVAL_QUERY="RETRIEVAL_QUERY",s.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",s.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",s.CLASSIFICATION="CLASSIFICATION",s.CLUSTERING="CLUSTERING"})(m_||(m_={}));var p_;(function(s){s.MODE_UNSPECIFIED="MODE_UNSPECIFIED",s.AUTO="AUTO",s.ANY="ANY",s.NONE="NONE"})(p_||(p_={}));var g_;(function(s){s.MODE_UNSPECIFIED="MODE_UNSPECIFIED",s.MODE_DYNAMIC="MODE_DYNAMIC"})(g_||(g_={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class co extends en{constructor(e,n){super(e),this.response=n}}class bx extends en{constructor(e,n,r,o){super(e),this.status=n,this.statusText=r,this.errorDetails=o}}class or extends en{}class xx extends en{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2="https://generativelanguage.googleapis.com",D2="v1beta",M2="0.24.1",V2="genai-js";var ia;(function(s){s.GENERATE_CONTENT="generateContent",s.STREAM_GENERATE_CONTENT="streamGenerateContent",s.COUNT_TOKENS="countTokens",s.EMBED_CONTENT="embedContent",s.BATCH_EMBED_CONTENTS="batchEmbedContents"})(ia||(ia={}));class L2{constructor(e,n,r,o,c){this.model=e,this.task=n,this.apiKey=r,this.stream=o,this.requestOptions=c}toString(){var e,n;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||D2;let c=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||j2}/${r}/${this.model}:${this.task}`;return this.stream&&(c+="?alt=sse"),c}}function P2(s){const e=[];return s!=null&&s.apiClient&&e.push(s.apiClient),e.push(`${V2}/${M2}`),e.join(" ")}async function U2(s){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",P2(s.requestOptions)),n.append("x-goog-api-key",s.apiKey);let r=(e=s.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(o){throw new or(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${o.message}`)}for(const[o,c]of r.entries()){if(o==="x-goog-api-key")throw new or(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new or(`Header name ${o} can only be set using the apiClient field`);n.append(o,c)}}return n}async function z2(s,e,n,r,o,c){const u=new L2(s,e,n,r,c);return{url:u.toString(),fetchOptions:Object.assign(Object.assign({},G2(c)),{method:"POST",headers:await U2(u),body:o})}}async function wc(s,e,n,r,o,c={},u=fetch){const{url:p,fetchOptions:g}=await z2(s,e,n,r,o,c);return B2(p,g,u)}async function B2(s,e,n=fetch){let r;try{r=await n(s,e)}catch(o){H2(o,s)}return r.ok||await q2(r,s),r}function H2(s,e){let n=s;throw n.name==="AbortError"?(n=new xx(`Request aborted when fetching ${e.toString()}: ${s.message}`),n.stack=s.stack):s instanceof bx||s instanceof or||(n=new en(`Error fetching from ${e.toString()}: ${s.message}`),n.stack=s.stack),n}async function q2(s,e){let n="",r;try{const o=await s.json();n=o.error.message,o.error.details&&(n+=` ${JSON.stringify(o.error.details)}`,r=o.error.details)}catch{}throw new bx(`Error fetching from ${e.toString()}: [${s.status} ${s.statusText}] ${n}`,s.status,s.statusText,r)}function G2(s){const e={};if((s==null?void 0:s.signal)!==void 0||(s==null?void 0:s.timeout)>=0){const n=new AbortController;(s==null?void 0:s.timeout)>=0&&setTimeout(()=>n.abort(),s.timeout),s!=null&&s.signal&&s.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(s){return s.text=()=>{if(s.candidates&&s.candidates.length>0){if(s.candidates.length>1&&console.warn(`This response had ${s.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),xh(s.candidates[0]))throw new co(`${er(s)}`,s);return F2(s)}else if(s.promptFeedback)throw new co(`Text not available. ${er(s)}`,s);return""},s.functionCall=()=>{if(s.candidates&&s.candidates.length>0){if(s.candidates.length>1&&console.warn(`This response had ${s.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),xh(s.candidates[0]))throw new co(`${er(s)}`,s);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),y_(s)[0]}else if(s.promptFeedback)throw new co(`Function call not available. ${er(s)}`,s)},s.functionCalls=()=>{if(s.candidates&&s.candidates.length>0){if(s.candidates.length>1&&console.warn(`This response had ${s.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),xh(s.candidates[0]))throw new co(`${er(s)}`,s);return y_(s)}else if(s.promptFeedback)throw new co(`Function call not available. ${er(s)}`,s)},s}function F2(s){var e,n,r,o;const c=[];if(!((n=(e=s.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const u of(o=(r=s.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)u.text&&c.push(u.text),u.executableCode&&c.push("\n```"+u.executableCode.language+`
`+u.executableCode.code+"\n```\n"),u.codeExecutionResult&&c.push("\n```\n"+u.codeExecutionResult.output+"\n```\n");return c.length>0?c.join(""):""}function y_(s){var e,n,r,o;const c=[];if(!((n=(e=s.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const u of(o=(r=s.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)u.functionCall&&c.push(u.functionCall);if(c.length>0)return c}const K2=[ec.RECITATION,ec.SAFETY,ec.LANGUAGE];function xh(s){return!!s.finishReason&&K2.includes(s.finishReason)}function er(s){var e,n,r;let o="";if((!s.candidates||s.candidates.length===0)&&s.promptFeedback)o+="Response was blocked",!((e=s.promptFeedback)===null||e===void 0)&&e.blockReason&&(o+=` due to ${s.promptFeedback.blockReason}`),!((n=s.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(o+=`: ${s.promptFeedback.blockReasonMessage}`);else if(!((r=s.candidates)===null||r===void 0)&&r[0]){const c=s.candidates[0];xh(c)&&(o+=`Candidate was blocked due to ${c.finishReason}`,c.finishMessage&&(o+=`: ${c.finishMessage}`))}return o}function hc(s){return this instanceof hc?(this.v=s,this):new hc(s)}function $2(s,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(s,e||[]),o,c=[];return o={},u("next"),u("throw"),u("return"),o[Symbol.asyncIterator]=function(){return this},o;function u(S){r[S]&&(o[S]=function(O){return new Promise(function(q,Z){c.push([S,O,q,Z])>1||p(S,O)})})}function p(S,O){try{g(r[S](O))}catch(q){T(c[0][3],q)}}function g(S){S.value instanceof hc?Promise.resolve(S.value.v).then(y,x):T(c[0][2],S)}function y(S){p("next",S)}function x(S){p("throw",S)}function T(S,O){S(O),c.shift(),c.length&&p(c[0][0],c[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Y2(s){const e=s.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=W2(e),[r,o]=n.tee();return{stream:X2(r),response:Q2(o)}}async function Q2(s){const e=[],n=s.getReader();for(;;){const{done:r,value:o}=await n.read();if(r)return kp(J2(e));e.push(o)}}function X2(s){return $2(this,arguments,function*(){const n=s.getReader();for(;;){const{value:r,done:o}=yield hc(n.read());if(o)break;yield yield hc(kp(r))}})}function W2(s){const e=s.getReader();return new ReadableStream({start(r){let o="";return c();function c(){return e.read().then(({value:u,done:p})=>{if(p){if(o.trim()){r.error(new en("Failed to parse stream"));return}r.close();return}o+=u;let g=o.match(v_),y;for(;g;){try{y=JSON.parse(g[1])}catch{r.error(new en(`Error parsing JSON response: "${g[1]}"`));return}r.enqueue(y),o=o.substring(g[0].length),g=o.match(v_)}return c()}).catch(u=>{let p=u;throw p.stack=u.stack,p.name==="AbortError"?p=new xx("Request aborted when reading from the stream"):p=new en("Error reading from the stream"),p})}}})}function J2(s){const e=s[s.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const r of s){if(r.candidates){let o=0;for(const c of r.candidates)if(n.candidates||(n.candidates=[]),n.candidates[o]||(n.candidates[o]={index:o}),n.candidates[o].citationMetadata=c.citationMetadata,n.candidates[o].groundingMetadata=c.groundingMetadata,n.candidates[o].finishReason=c.finishReason,n.candidates[o].finishMessage=c.finishMessage,n.candidates[o].safetyRatings=c.safetyRatings,c.content&&c.content.parts){n.candidates[o].content||(n.candidates[o].content={role:c.content.role||"user",parts:[]});const u={};for(const p of c.content.parts)p.text&&(u.text=p.text),p.functionCall&&(u.functionCall=p.functionCall),p.executableCode&&(u.executableCode=p.executableCode),p.codeExecutionResult&&(u.codeExecutionResult=p.codeExecutionResult),Object.keys(u).length===0&&(u.text=""),n.candidates[o].content.parts.push(u)}o++}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tx(s,e,n,r){const o=await wc(e,ia.STREAM_GENERATE_CONTENT,s,!0,JSON.stringify(n),r);return Y2(o)}async function wx(s,e,n,r){const c=await(await wc(e,ia.GENERATE_CONTENT,s,!1,JSON.stringify(n),r)).json();return{response:kp(c)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(s){if(s!=null){if(typeof s=="string")return{role:"system",parts:[{text:s}]};if(s.text)return{role:"system",parts:[s]};if(s.parts)return s.role?s:{role:"system",parts:s.parts}}}function dc(s){let e=[];if(typeof s=="string")e=[{text:s}];else for(const n of s)typeof n=="string"?e.push({text:n}):e.push(n);return Z2(e)}function Z2(s){const e={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,o=!1;for(const c of s)"functionResponse"in c?(n.parts.push(c),o=!0):(e.parts.push(c),r=!0);if(r&&o)throw new en("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!o)throw new en("No content is provided for sending chat message.");return r?e:n}function eS(s,e){var n;let r={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const o=s.generateContentRequest!=null;if(s.contents){if(o)throw new or("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=s.contents}else if(o)r=Object.assign(Object.assign({},r),s.generateContentRequest);else{const c=dc(s);r.contents=[c]}return{generateContentRequest:r}}function __(s){let e;return s.contents?e=s:e={contents:[dc(s)]},s.systemInstruction&&(e.systemInstruction=Ex(s.systemInstruction)),e}function tS(s){return typeof s=="string"||Array.isArray(s)?{content:dc(s)}:s}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],nS={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function sS(s){let e=!1;for(const n of s){const{role:r,parts:o}=n;if(!e&&r!=="user")throw new en(`First content should be with role 'user', got ${r}`);if(!c_.includes(r))throw new en(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(c_)}`);if(!Array.isArray(o))throw new en("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new en("Each Content should have at least one part");const c={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const p of o)for(const g of b_)g in p&&(c[g]+=1);const u=nS[r];for(const p of b_)if(!u.includes(p)&&c[p]>0)throw new en(`Content with role '${r}' can't contain '${p}' part`);e=!0}}function x_(s){var e;if(s.candidates===void 0||s.candidates.length===0)return!1;const n=(e=s.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const r of n.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="SILENT_ERROR";class iS{constructor(e,n,r,o={}){this.model=n,this.params=r,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r!=null&&r.history&&(sS(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var r,o,c,u,p,g;await this._sendPromise;const y=dc(e),x={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(c=this.params)===null||c===void 0?void 0:c.tools,toolConfig:(u=this.params)===null||u===void 0?void 0:u.toolConfig,systemInstruction:(p=this.params)===null||p===void 0?void 0:p.systemInstruction,cachedContent:(g=this.params)===null||g===void 0?void 0:g.cachedContent,contents:[...this._history,y]},T=Object.assign(Object.assign({},this._requestOptions),n);let S;return this._sendPromise=this._sendPromise.then(()=>wx(this._apiKey,this.model,x,T)).then(O=>{var q;if(x_(O.response)){this._history.push(y);const Z=Object.assign({parts:[],role:"model"},(q=O.response.candidates)===null||q===void 0?void 0:q[0].content);this._history.push(Z)}else{const Z=er(O.response);Z&&console.warn(`sendMessage() was unsuccessful. ${Z}. Inspect response object for details.`)}S=O}).catch(O=>{throw this._sendPromise=Promise.resolve(),O}),await this._sendPromise,S}async sendMessageStream(e,n={}){var r,o,c,u,p,g;await this._sendPromise;const y=dc(e),x={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(c=this.params)===null||c===void 0?void 0:c.tools,toolConfig:(u=this.params)===null||u===void 0?void 0:u.toolConfig,systemInstruction:(p=this.params)===null||p===void 0?void 0:p.systemInstruction,cachedContent:(g=this.params)===null||g===void 0?void 0:g.cachedContent,contents:[...this._history,y]},T=Object.assign(Object.assign({},this._requestOptions),n),S=Tx(this._apiKey,this.model,x,T);return this._sendPromise=this._sendPromise.then(()=>S).catch(O=>{throw new Error(T_)}).then(O=>O.response).then(O=>{if(x_(O)){this._history.push(y);const q=Object.assign({},O.candidates[0].content);q.role||(q.role="model"),this._history.push(q)}else{const q=er(O);q&&console.warn(`sendMessageStream() was unsuccessful. ${q}. Inspect response object for details.`)}}).catch(O=>{O.message!==T_&&console.error(O)}),S}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rS(s,e,n,r){return(await wc(e,ia.COUNT_TOKENS,s,!1,JSON.stringify(n),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aS(s,e,n,r){return(await wc(e,ia.EMBED_CONTENT,s,!1,JSON.stringify(n),r)).json()}async function oS(s,e,n,r){const o=n.requests.map(u=>Object.assign(Object.assign({},u),{model:e}));return(await wc(e,ia.BATCH_EMBED_CONTENTS,s,!1,JSON.stringify({requests:o}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,n,r={}){this.apiKey=e,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=Ex(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var r;const o=__(e),c=Object.assign(Object.assign({},this._requestOptions),n);return wx(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),c)}async generateContentStream(e,n={}){var r;const o=__(e),c=Object.assign(Object.assign({},this._requestOptions),n);return Tx(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),c)}startChat(e){var n;return new iS(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const r=eS(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),n);return rS(this.apiKey,this.model,r,o)}async embedContent(e,n={}){const r=tS(e),o=Object.assign(Object.assign({},this._requestOptions),n);return aS(this.apiKey,this.model,r,o)}async batchEmbedContents(e,n={}){const r=Object.assign(Object.assign({},this._requestOptions),n);return oS(this.apiKey,this.model,e,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new en("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new w_(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,r){if(!e.name)throw new or("Cached content must contain a `name` field.");if(!e.model)throw new or("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const u of o)if(n!=null&&n[u]&&e[u]&&(n==null?void 0:n[u])!==e[u]){if(u==="model"){const p=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,g=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(p===g)continue}throw new or(`Different value for "${u}" specified in modelParams (${n[u]}) and cachedContent (${e[u]})`)}const c=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new w_(this.apiKey,c,r)}}const km={},lS=["gemini-flash-latest","gemini-1.5-flash","gemini-2.0-flash-lite-preview-02-05","gemini-2.5-flash","gemini-2.0-flash-lite-001","gemini-2.0-flash","gemini-2.5-pro"];let ep=[];const tp=s=>{ep=s.filter(e=>e.trim()!=="")},cS=s=>{let e=[];s&&(e=s.split(/[\n,]+/).map(r=>r.trim()).filter(r=>r));const n=km==null?void 0:km.VITE_GEMINI_API_KEY;if(n){const r=n.split(",").map(o=>o.trim()).filter(o=>o);e=[...e,...r]}return ep.length>0&&(e=[...e,...ep]),[...new Set(e)]},da=async(s,e)=>{const n=cS(s);if(n.length===0)throw new Error("No API Keys provided. Please configure VITE_GEMINI_API_KEY or enter a key.");let r;for(const o of n){const c=new sd(o);for(const u of lS)try{const p=c.getGenerativeModel({model:u});return await e(p)}catch(p){console.warn(`Failed: Key(...${o.slice(-4)}) Model(${u}) error: ${p.message}`),r=p}}throw r||new Error("All keys and models failed to generate content.")},uS=async(s,e)=>da(e,async n=>{const r=`
        c ton b "Kch bn i th" sau v phn tch theo quy tc:
        Kch bn: """${s}"""

        Mc tiu: Rt ra khung xng cu trc cm xc (Hook, Build-up, Value/Twist, CTA).
        
        Yu cu:
        1. Xc nh ranh gii phn theo chc nng cm xc.
        2. Vi tng phn m t: Ni dung chnh, Cm xc ch o, Cch truyn ti cm xc, L do hiu qu.
        3. Rt ra: 3 yu t ct li, c im ngn ng & tit tu (5-8 im), 3 pattern cm xc.
        
        Rng buc: Khng thm nhn vt/bi cnh ngoi script. Khng nh gi cm tnh. 
        KT THC BNG MT ON RING BIT C TIU  "PHONG CCH I TH" lit k cc c im phong cch  bc sau s dng.
      `;return(await n.generateContent(r)).response.text()}),hS=async(s,e)=>da(e,async n=>{const r=`
        Da trn kt qu phn tch khung xng sau:
        """${s}"""
        
        Nhim v: Sng to ra 5  tng ni dung video mi, gi nguyn "linh hn cm xc" ca kch bn gc.
        
        Mi  tng gm:
        - Tiu  ngn
        - M t ni dung (3-5 cu)
        - Nhn vt/Bi cnh
        - Gi tr ni bt (Cm xc/Thc tin)
        - Kh nng lan truyn

        Response must be a valid JSON array matching the schema:
        [{ "id": number, "title": string, "description": string, "charactersContext": string, "highlightValue": string, "viralPotential": string }]
      `,o=await n.generateContent({contents:[{role:"user",parts:[{text:r}]}],generationConfig:{responseMimeType:"application/json"}});return JSON.parse(o.response.text())}),dS=async(s,e,n,r)=>da(r,async o=>{const c=`
        Xy dng dn  chi tit da trn:
        - Khung xng gc: """${s}"""
        -  tng chn: """${JSON.stringify(e)}"""
        - Tng s t mc tiu: ${n}

        Cu trc: Gi nguyn form gc (Hook -> Build-up -> Value/Twist -> CTA).
        Yu cu: Vi mi phn nu r: Mc tiu, Cm xc chnh, Ni dung trin khai, Lin kt trc-sau, S t phn b.
      `;return(await o.generateContent(c)).response.text()}),fS=async(s,e,n)=>da(n,async r=>{const o=`
        Vit li thoi kch bn hon chnh (voice-ready) da trn dn  v phong cch sau:
        - Dn : """${s}"""
        - Phong cch m phng: """${e}"""

        QUY TC NGHIM NGT:
        1. Ch tr v li thoi sch 100%. Khng tiu , khng ch thch, khng ngoc ( ), khng nhc nn.
        2. Vit lin mch theo th t Hook -> Build-up -> Value/Twist -> CTA.
      `;return(await r.generateContent(o)).response.text()}),mS=async(s,e,n)=>da(n,async r=>{const o=`
        Da trn kch bn video sau:
        """${s}"""
        
        Hy chn ra 1 phong cch hnh nh ph hp nht t danh sch sau:
        ${e.join(", ")}
        
        Ch tr v duy nht tn ID ca phong cch , khng gii thch g thm.
      `;return(await r.generateContent(o)).response.text().trim()}),pS=async(s,e,n)=>da(n,async r=>{const o=`
        Da trn kch bn sau v phong cch hnh nh [${e}]:
        Kch bn: """${s}"""
        
        Hy thit k chi tit cc nhn vt xut hin trong kch bn. Nu kch bn khng m t r, hy t sng to chi tit  m bo tnh thm m v ng b.
        
        QUY TC BT BUC: 
        1. Phn "bodyType" (Dng ngi): Ghi CC K NGN GN (v d: "Cao gy", "Mp mp", "Cn i", "Vm v").
        2. Phn "facialDetails" (c im khun mt): 
           - Nu kch bn thiu, hy t thm cho y  nhng phi M T GN GNG, KHNG LNG NHNG, KHNG VN HOA. 
           - CH C M T TRNG THI BNH THNG/TRUNG TNH (Neutral expression).
           - TUYT I KHNG a vo cm xc hay tnh hung c th (v d: KHNG ghi "ang khc", "mt lm lem", "ci nham him"). Ch m t cu trc vt l (mt, mi, ming, da, tc...).

        Tr v nh dng JSON mng cc i tng:
        - name: Tn nhn vt
        - gender: Gii tnh
        - country: Quc gia/Chng tc
        - age:  tui
        - bodyType: Dng ngi (ngn gn nht c th)
        - facialDetails: c im chi tit khun mt (cu trc vt l, gn gng, khng cm xc)
      `,c=await r.generateContent({contents:[{role:"user",parts:[{text:o}]}],generationConfig:{responseMimeType:"application/json"}});return JSON.parse(c.response.text())}),gS=async(s,e,n,r)=>da(r,async o=>{const c=n.map(g=>`[Nhn vt: ${g.name} | Gii tnh: ${g.gender} | Quc gia: ${g.country} | Tui: ${g.age} | Dng ngi: ${g.bodyType} | Khun mt: ${g.facialDetails}]`).join(`
`),u=`
        Bn l mt CHUYN GIA PHN TCH TNH HUNG v o din hnh nh i ti.
        Nhim v: Phn tch kch bn sau  trch xut cc hnh ng quay (Shot Action).

        Kch bn: """${s}"""
        
        THNG TIN NHN VT GC (BT BUC PHI SAO CHP CHNH XC KHI NHC N):
        ${c}

        NGUYN TC PHN TCH TNH HUNG (SITUATIONAL ANALYSIS):
        1. QUAN ST NG CNH: Da vo ni dung lin trc (nu c) v lin sau ca mi hnh ng, hy suy lun logic xem nhn vt no ANG C MT trong cnh .
        2. D ON NHN VT: Nu kch bn khng nhc tn nhng logic tnh hung cho thy nhn vt  phi   (v d: ang i thoi, ang ng cnh), BT BUC phi a h vo.
        3. HIN TH TRONG 'ACTION': Trong trng 'action' (M t ngn hnh ng), hy lit k tn cc nhn vt c mt u tin, sau  n m t hnh ng.

        QUY TC TO PROMPT (Strict Compliance - Rules Override All):

        1. [VISUAL STYLE]: Lun bt u bng phong cch: [${e}].

        2. [Bi cnh] (Context Memory):
           - Nu kch bn khng nu r, hy thm chi tit (bn gh,  vt, b cc...).
           - QUAN TRNG: Ghi nh bi cnh. Nu cha i cnh, DNG LI m t bi cnh c. Nu i cnh, thit lp bi cnh mi chi tit v ghi nh cho cc shot sau.

        3. [QUY TC] (Safety & Quality):
           - Lun thm vo prompt: [NO duplication, NO mutation, NO anatomical distortion, Any violation of anatomy rules is forbidden]

        4. [CAMERA]: Gc my, chuyn ng my (Cinematic wording).

        5. [ACTION] (Character Consistency):
           - Khi nhc n nhn vt no, BT BUC COPY NGUYN VN "c im nhn vt" (Gii tnh, Tui, Dng, Khun mt) t thng tin gc vo prompt.
           - TUYT I KHNG ghi tt, KHNG tm tt, KHNG dng "nh trn". Phi copy full.
           - Nu shot c nhn vt khc, cng copy full c im ca h vo.

        6. [Trang Phc] (Costume Memory):
           - Nu kch bn khng nu, t thm v ghi r mu sc.
           - QUAN TRNG: Gi nguyn trang phc xuyn sut cc shot nu cha i thi gian/cnh.

        7. [AUDIO/VOICE  LIP SYNC]:
           - Cu trc: [Tn nhn vt ni: "Li thoi trong Master Transcript"] (nu c thoi).
           - Nu khng thoi: b qua.

        8. [SPEECH SYNC]:
           - Nu c li thoi  mc trn, BT BUC ghi tag: [Chuyn ng ming nhn vt ng b vi li thoi].

        9. [TECHNICAL]: nh sng, mu sc (Lighting, Color).

        CU TRC PROMPT VIDEO (Video Motion Ai Prompt - Output String):
        [${e}], [Bi cnh chi tit], [NO duplication, NO mutation, NO anatomical distortion, Any violation of anatomy rules is forbidden], [CAMERA], [ACTION: Tn NV + (c im Full Copy) + Hnh ng. ${n.length===1?"The scene contains EXACTLY ONE character":"Check logic"}], [Trang phc], [AUDIO/VOICE  LIP SYNC], [SPEECH SYNC], [TECHNICAL]

        TR V JSON Array cc object:
        - action: [Tn cc NV c mt]: [M t hnh ng]
        - voiceText: Li thoi (nu c)
        - motionPrompt: Prompt video (Tun th cu trc trn)
      `,p=await o.generateContent({contents:[{role:"user",parts:[{text:u}]}],generationConfig:{responseMimeType:"application/json"}});return JSON.parse(p.response.text())}),yS=({userId:s})=>{const[e,n]=le.useState(!1),[r,o]=le.useState(!1),[c,u]=le.useState({gemini:"",chatgpt:"",openrouter:""}),[p,g]=le.useState(!1),y=U=>{try{return btoa(U)}catch{return U}},x=U=>{try{return atob(U)}catch{return U}},T=`app_api_keys_${s}`;le.useEffect(()=>{const U=localStorage.getItem(T);if(!U){u({gemini:"",chatgpt:"",openrouter:""}),tp([]);return}if(U)try{const X=JSON.parse(U),Y={gemini:x(X.gemini||""),chatgpt:x(X.chatgpt||""),openrouter:x(X.openrouter||"")};u(Y),Y.gemini&&S(Y.gemini)}catch(X){console.error("Failed to parse keys",X)}},[s]);const S=U=>{const X=U.split(`
`).map(Y=>Y.trim()).filter(Y=>Y!=="");tp(X)},O=()=>{if(!(c.gemini.trim()!==""||c.chatgpt.trim()!==""||c.openrouter.trim()!=="")){alert("Li: Bn phi nhp t nht 1 API Key vo mt trong 3 mc  tip tc!");return}const X={gemini:y(c.gemini),chatgpt:y(c.chatgpt),openrouter:y(c.openrouter)};localStorage.setItem(T,JSON.stringify(X)),c.gemini&&S(c.gemini),g(!0),setTimeout(()=>g(!1),3e3)},q=(U,X)=>{u(Y=>({...Y,[U]:X}))},Z=()=>f.jsx("div",{className:"absolute inset-0 bg-slate-900/90 backdrop-blur-sm flex items-center justify-center cursor-pointer z-10 rounded-lg border border-slate-700/50",onClick:()=>o(!0),children:f.jsxs("span",{className:"text-slate-400 text-xs font-medium flex items-center gap-2",children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}),"Click to Show Keys"]})});return f.jsxs("div",{className:"w-full bg-[#0f172a] border-b border-white/10 relative z-[200]",children:[f.jsxs("div",{className:"px-6 py-2 flex items-center justify-between cursor-pointer hover:bg-white/5 transition-all text-xs font-bold uppercase tracking-widest text-slate-400",onClick:()=>n(!e),children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{className:`w-4 h-4 transition-transform ${e?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})}),f.jsxs("span",{children:["API Configuration Manager",f.jsxs("span",{className:"ml-2 text-indigo-400 normal-case tracking-normal opacity-70",children:["(User: ",s.replace("user_","Account ")," - ",r?"Visible":"Hidden",")"]}),p&&f.jsx("span",{className:"text-emerald-400 ml-4 animate-in fade-in slide-in-from-left-2 normal-case tracking-normal",children:" Saved!"})]})]}),f.jsxs("div",{className:"flex gap-4 items-center",children:[f.jsx("button",{onClick:U=>{U.stopPropagation(),o(!r)},className:"text-[10px] bg-slate-800 px-2 py-1 rounded hover:bg-slate-700 transition",children:r?"Hide Keys":"Show Keys"}),f.jsxs("div",{className:"flex gap-4 opacity-50",children:[f.jsxs("span",{children:["Gemini: ",c.gemini?c.gemini.split(`
`).filter(U=>U.trim()).length:0]}),f.jsx("span",{className:"opacity-30",children:"|"}),f.jsxs("span",{children:["GPT: ",c.chatgpt?c.chatgpt.split(`
`).filter(U=>U.trim()).length:0]}),f.jsx("span",{className:"opacity-30",children:"|"}),f.jsxs("span",{children:["OR: ",c.openrouter?c.openrouter.split(`
`).filter(U=>U.trim()).length:0]})]})]})]}),e&&f.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-3 gap-6 animate-in slide-in-from-top-2 duration-300 bg-black/20",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-[10px] uppercase font-black text-indigo-400 tracking-widest",children:"Google Gemini Keys"}),f.jsxs("div",{className:"relative group",children:[!r&&f.jsx(Z,{}),f.jsx("textarea",{value:c.gemini,onChange:U=>q("gemini",U.target.value),placeholder:`AIzaSy...
AIzaSy...`,rows:4,disabled:!r,className:`w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white text-xs font-mono focus:border-indigo-500 focus:ring-1 outline-none transition-all resize-y ${r?"":"blur-sm select-none"}`})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-[10px] uppercase font-black text-emerald-400 tracking-widest",children:"ChatGPT Keys"}),f.jsxs("div",{className:"relative group",children:[!r&&f.jsx(Z,{}),f.jsx("textarea",{value:c.chatgpt,onChange:U=>q("chatgpt",U.target.value),placeholder:`sk-...
sk-...`,rows:4,disabled:!r,className:`w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white text-xs font-mono focus:border-emerald-500 focus:ring-1 outline-none transition-all resize-y ${r?"":"blur-sm select-none"}`})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-[10px] uppercase font-black text-rose-400 tracking-widest",children:"OpenRouter Keys"}),f.jsxs("div",{className:"relative group",children:[!r&&f.jsx(Z,{}),f.jsx("textarea",{value:c.openrouter,onChange:U=>q("openrouter",U.target.value),placeholder:`sk-or-...
sk-or-...`,rows:4,disabled:!r,className:`w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white text-xs font-mono focus:border-rose-500 focus:ring-1 outline-none transition-all resize-y ${r?"":"blur-sm select-none"}`})]})]}),f.jsxs("div",{className:"md:col-span-3 flex flex-col md:flex-row items-center justify-between mt-2 gap-4",children:[f.jsxs("p",{className:"text-[10px] text-slate-500 italic text-center md:text-left",children:["* Bo mt: Key lu ring cho ti khon ",f.jsx("b",{children:s}),". ",f.jsx("br",{}),"H thng t ng xoay vng key khi chy."]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:async()=>{const U=c.gemini.split(`
`).map(Y=>Y.trim()).filter(Y=>Y!=="");if(U.length===0){alert("Vui lng nhp v LU t nht 1 API Key Gemini trc khi test!");return}const X=U[0];try{const ee=await(await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${X}`)).json();if(ee.error)alert(`Li: ${ee.error.message}`);else if(ee.models){const L=ee.models.map(H=>H.name.replace("models/","")).slice(0,10).join(", ");alert(`Kt ni OK! C ${ee.models.length} models:
${L}`)}else alert("Phn hi l: "+JSON.stringify(ee))}catch(Y){alert("Li mng: "+Y.message)}},className:"bg-blue-600/20 text-blue-400 font-bold uppercase text-xs px-6 py-3 rounded-xl hover:bg-blue-600/30 transition-all border border-blue-600/30",children:"Test Local"}),f.jsx("button",{onClick:O,className:"bg-white text-slate-900 font-black uppercase text-xs px-8 py-3 rounded-xl hover:bg-slate-200 active:scale-95 transition-all shadow-lg flex items-center gap-2",children:"Lu cu hnh (Save)"})]})]})]})]})},vS=()=>{};var E_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=function(s){const e=[];let n=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},_S=function(s){const e=[];let n=0,r=0;for(;n<s.length;){const o=s[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=s[n++];e[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=s[n++],u=s[n++],p=s[n++],g=((o&7)<<18|(c&63)<<12|(u&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const c=s[n++],u=s[n++];e[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|u&63)}}return e.join("")},Ax={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const c=s[o],u=o+1<s.length,p=u?s[o+1]:0,g=o+2<s.length,y=g?s[o+2]:0,x=c>>2,T=(c&3)<<4|p>>4;let S=(p&15)<<2|y>>6,O=y&63;g||(O=64,u||(S=64)),r.push(n[x],n[T],n[S],n[O])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Sx(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):_S(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const c=n[s.charAt(o++)],p=o<s.length?n[s.charAt(o)]:0;++o;const y=o<s.length?n[s.charAt(o)]:64;++o;const T=o<s.length?n[s.charAt(o)]:64;if(++o,c==null||p==null||y==null||T==null)throw new bS;const S=c<<2|p>>4;if(r.push(S),y!==64){const O=p<<4&240|y>>2;if(r.push(O),T!==64){const q=y<<6&192|T;r.push(q)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class bS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xS=function(s){const e=Sx(s);return Ax.encodeByteArray(e,!0)},Oh=function(s){return xS(s).replace(/\./g,"")},Nx=function(s){try{return Ax.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=()=>TS().__FIREBASE_DEFAULTS__,ES=()=>{if(typeof process>"u"||typeof E_>"u")return;const s=E_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},SS=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Nx(s[1]);return e&&JSON.parse(e)},id=()=>{try{return vS()||wS()||ES()||SS()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Cx=s=>{var e,n;return(n=(e=id())==null?void 0:e.emulatorHosts)==null?void 0:n[s]},Rx=s=>{const e=Cx(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ix=()=>{var s;return(s=id())==null?void 0:s.config},kx=s=>{var e;return(e=id())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Op(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Oh(JSON.stringify(n)),Oh(JSON.stringify(u)),""].join(".")}const tc={};function NS(){const s={prod:[],emulator:[]};for(const e of Object.keys(tc))tc[e]?s.emulator.push(e):s.prod.push(e);return s}function CS(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let S_=!1;function jp(s,e){if(typeof window>"u"||typeof document>"u"||!_r(window.location.host)||tc[s]===e||tc[s]||S_)return;tc[s]=e;function n(S){return`__firebase__banner__${S}`}const r="__firebase__banner",c=NS().prod.length>0;function u(){const S=document.getElementById(r);S&&S.remove()}function p(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,O){S.setAttribute("width","24"),S.setAttribute("id",O),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function y(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{S_=!0,u()},S}function x(S,O){S.setAttribute("id",O),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=CS(r),O=n("text"),q=document.getElementById(O)||document.createElement("span"),Z=n("learnmore"),U=document.getElementById(Z)||document.createElement("a"),X=n("preprendIcon"),Y=document.getElementById(X)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const ee=S.element;p(ee),x(U,Z);const L=y();g(Y,X),ee.append(Y,q,U,L),document.body.appendChild(ee)}c?(q.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function IS(){var e;const s=(e=id())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jx(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function OS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jS(){const s=tn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function DS(){return!IS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Dx(){try{return typeof indexedDB=="object"}catch{return!1}}function Mx(){return new Promise((s,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)==null?void 0:c.message)||"")}}catch(n){e(n)}})}function MS(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS="FirebaseError";class Yn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=VS,Object.setPrototypeOf(this,Yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fa.prototype.create)}}class fa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],u=c?LS(c,r):"Error",p=`${this.serviceName}: ${u} (${o}).`;return new Yn(o,p,r)}}function LS(s,e){return s.replace(PS,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const PS=/\{\$([^}]+)}/g;function US(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function dr(s,e){if(s===e)return!0;const n=Object.keys(s),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const c=s[o],u=e[o];if(A_(c)&&A_(u)){if(!dr(c,u))return!1}else if(c!==u)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function A_(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(s){const e=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $l(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,c]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function Yl(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function zS(s,e){const n=new BS(s,e);return n.subscribe.bind(n)}class BS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");HS(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=Om),o.error===void 0&&(o.error=Om),o.complete===void 0&&(o.complete=Om);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HS(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function Om(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=1e3,GS=2,FS=14400*1e3,KS=.5;function N_(s,e=qS,n=GS){const r=e*Math.pow(n,s),o=Math.round(KS*r*(Math.random()-.5)*2);return Math.min(FS,r+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(s){return s&&s._delegate?s._delegate:s}class $n{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new AS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QS(e))try{this.getOrInitializeService({instanceIdentifier:Jr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(e=Jr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Jr){return this.instances.has(e)}getOptions(e=Jr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,u]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);r===p&&u.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const c=this.instances.get(r);return c&&e(c,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:YS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Jr){return this.component?this.component.multipleInstances?e:Jr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function YS(s){return s===Jr?void 0:s}function QS(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $S(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Le||(Le={}));const WS={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},JS=Le.INFO,ZS={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},eA=(s,e,...n)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=ZS[e];if(o)console[o](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rd{constructor(e){this.name=e,this._logLevel=JS,this._logHandler=eA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?WS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const tA=(s,e)=>e.some(n=>s instanceof n);let C_,R_;function nA(){return C_||(C_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sA(){return R_||(R_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Vx=new WeakMap,np=new WeakMap,Lx=new WeakMap,jm=new WeakMap,Dp=new WeakMap;function iA(s){const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("success",c),s.removeEventListener("error",u)},c=()=>{n(lr(s.result)),o()},u=()=>{r(s.error),o()};s.addEventListener("success",c),s.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&Vx.set(n,s)}).catch(()=>{}),Dp.set(e,s),e}function rA(s){if(np.has(s))return;const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",u),s.removeEventListener("abort",u)},c=()=>{n(),o()},u=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",c),s.addEventListener("error",u),s.addEventListener("abort",u)});np.set(s,e)}let sp={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return np.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Lx.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return lr(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function aA(s){sp=s(sp)}function oA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=s.call(Dm(this),e,...n);return Lx.set(r,e.sort?e.sort():[e]),lr(r)}:sA().includes(s)?function(...e){return s.apply(Dm(this),e),lr(Vx.get(this))}:function(...e){return lr(s.apply(Dm(this),e))}}function lA(s){return typeof s=="function"?oA(s):(s instanceof IDBTransaction&&rA(s),tA(s,nA())?new Proxy(s,sp):s)}function lr(s){if(s instanceof IDBRequest)return iA(s);if(jm.has(s))return jm.get(s);const e=lA(s);return e!==s&&(jm.set(s,e),Dp.set(e,s)),e}const Dm=s=>Dp.get(s);function Px(s,e,{blocked:n,upgrade:r,blocking:o,terminated:c}={}){const u=indexedDB.open(s,e),p=lr(u);return r&&u.addEventListener("upgradeneeded",g=>{r(lr(u.result),g.oldVersion,g.newVersion,lr(u.transaction),g)}),n&&u.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const cA=["get","getKey","getAll","getAllKeys","count"],uA=["put","add","delete","clear"],Mm=new Map;function I_(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Mm.get(e))return Mm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=uA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||cA.includes(n)))return;const c=async function(u,...p){const g=this.transaction(u,o?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),o&&g.done]))[0]};return Mm.set(e,c),c}aA(s=>({...s,get:(e,n,r)=>I_(e,n)||s.get(e,n,r),has:(e,n)=>!!I_(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(dA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function dA(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ip="@firebase/app",k_="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi=new rd("@firebase/app"),fA="@firebase/app-compat",mA="@firebase/analytics-compat",pA="@firebase/analytics",gA="@firebase/app-check-compat",yA="@firebase/app-check",vA="@firebase/auth",_A="@firebase/auth-compat",bA="@firebase/database",xA="@firebase/data-connect",TA="@firebase/database-compat",wA="@firebase/functions",EA="@firebase/functions-compat",SA="@firebase/installations",AA="@firebase/installations-compat",NA="@firebase/messaging",CA="@firebase/messaging-compat",RA="@firebase/performance",IA="@firebase/performance-compat",kA="@firebase/remote-config",OA="@firebase/remote-config-compat",jA="@firebase/storage",DA="@firebase/storage-compat",MA="@firebase/firestore",VA="@firebase/ai",LA="@firebase/firestore-compat",PA="firebase",UA="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="[DEFAULT]",zA={[ip]:"fire-core",[fA]:"fire-core-compat",[pA]:"fire-analytics",[mA]:"fire-analytics-compat",[yA]:"fire-app-check",[gA]:"fire-app-check-compat",[vA]:"fire-auth",[_A]:"fire-auth-compat",[bA]:"fire-rtdb",[xA]:"fire-data-connect",[TA]:"fire-rtdb-compat",[wA]:"fire-fn",[EA]:"fire-fn-compat",[SA]:"fire-iid",[AA]:"fire-iid-compat",[NA]:"fire-fcm",[CA]:"fire-fcm-compat",[RA]:"fire-perf",[IA]:"fire-perf-compat",[kA]:"fire-rc",[OA]:"fire-rc-compat",[jA]:"fire-gcs",[DA]:"fire-gcs-compat",[MA]:"fire-fst",[LA]:"fire-fst-compat",[VA]:"fire-vertex","fire-js":"fire-js",[PA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh=new Map,BA=new Map,ap=new Map;function O_(s,e){try{s.container.addComponent(e)}catch(n){pi.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function us(s){const e=s.name;if(ap.has(e))return pi.debug(`There were multiple attempts to register component ${e}.`),!1;ap.set(e,s);for(const n of jh.values())O_(n,s);for(const n of BA.values())O_(n,s);return!0}function br(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function Cn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cr=new fa("app","Firebase",HA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $n("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=UA;function Ux(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const r={name:rp,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw cr.create("bad-app-name",{appName:String(o)});if(n||(n=Ix()),!n)throw cr.create("no-options");const c=jh.get(o);if(c){if(dr(n,c.options)&&dr(r,c.config))return c;throw cr.create("duplicate-app",{appName:o})}const u=new XS(o);for(const g of ap.values())u.addComponent(g);const p=new qA(n,r,u);return jh.set(o,p),p}function ad(s=rp){const e=jh.get(s);if(!e&&s===rp&&Ix())return Ux();if(!e)throw cr.create("no-app",{appName:s});return e}function yn(s,e,n){let r=zA[s]??s;n&&(r+=`-${n}`);const o=r.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const u=[`Unable to register library "${r}" with version "${e}":`];o&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pi.warn(u.join(" "));return}us(new $n(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA="firebase-heartbeat-database",FA=1,fc="firebase-heartbeat-store";let Vm=null;function zx(){return Vm||(Vm=Px(GA,FA,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(fc)}catch(n){console.warn(n)}}}}).catch(s=>{throw cr.create("idb-open",{originalErrorMessage:s.message})})),Vm}async function KA(s){try{const n=(await zx()).transaction(fc),r=await n.objectStore(fc).get(Bx(s));return await n.done,r}catch(e){if(e instanceof Yn)pi.warn(e.message);else{const n=cr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pi.warn(n.message)}}}async function j_(s,e){try{const r=(await zx()).transaction(fc,"readwrite");await r.objectStore(fc).put(e,Bx(s)),await r.done}catch(n){if(n instanceof Yn)pi.warn(n.message);else{const r=cr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});pi.warn(r.message)}}}function Bx(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=1024,YA=30;class QA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new WA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=D_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(u=>u.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>YA){const u=JA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){pi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=D_(),{heartbeatsToSend:r,unsentEntries:o}=XA(this._heartbeatsCache.heartbeats),c=Oh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return pi.warn(n),""}}}function D_(){return new Date().toISOString().substring(0,10)}function XA(s,e=$A){const n=[];let r=s.slice();for(const o of s){const c=n.find(u=>u.agent===o.agent);if(c){if(c.dates.push(o.date),M_(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),M_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class WA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Dx()?Mx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await KA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return j_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return j_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function M_(s){return Oh(JSON.stringify({version:2,heartbeats:s})).length}function JA(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(s){us(new $n("platform-logger",e=>new hA(e),"PRIVATE")),us(new $n("heartbeat",e=>new QA(e),"PRIVATE")),yn(ip,k_,s),yn(ip,k_,"esm2020"),yn("fire-js","")}ZA("");function Hx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eN=Hx,qx=new fa("auth","Firebase",Hx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh=new rd("@firebase/auth");function tN(s,...e){Dh.logLevel<=Le.WARN&&Dh.warn(`Auth (${ma}): ${s}`,...e)}function Th(s,...e){Dh.logLevel<=Le.ERROR&&Dh.error(`Auth (${ma}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(s,...e){throw Mp(s,...e)}function Ls(s,...e){return Mp(s,...e)}function Gx(s,e,n){const r={...eN(),[e]:n};return new fa("auth","Firebase",r).create(e,{appName:s.name})}function di(s){return Gx(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mp(s,...e){if(typeof s!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return qx.create(s,...e)}function we(s,e,...n){if(!s)throw Mp(e,...n)}function ui(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Th(e),new Error(e)}function gi(s,e){s||ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function nN(){return V_()==="http:"||V_()==="https:"}function V_(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nN()||jx()||"connection"in navigator)?navigator.onLine:!0}function iN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,n){this.shortDelay=e,this.longDelay=n,gi(n>e,"Short delay should be less than long delay!"),this.isMobile=RS()||OS()}get(){return sN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(s,e){gi(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oN=new Sc(3e4,6e4);function _i(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Gs(s,e,n,r,o={}){return Kx(s,o,async()=>{let c={},u={};r&&(e==="GET"?u=r:c={body:JSON.stringify(r)});const p=Ec({key:s.config.apiKey,...u}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...c};return kS()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&_r(s.emulatorConfig.host)&&(y.credentials="include"),Fx.fetch()(await $x(s,s.config.apiHost,n,p),y)})}async function Kx(s,e,n){s._canInitEmulator=!1;const r={...rN,...e};try{const o=new cN(s),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const u=await c.json();if("needConfirmation"in u)throw dh(s,"account-exists-with-different-credential",u);if(c.ok&&!("errorMessage"in u))return u;{const p=c.ok?u.errorMessage:u.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw dh(s,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw dh(s,"email-already-in-use",u);if(g==="USER_DISABLED")throw dh(s,"user-disabled",u);const x=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Gx(s,x,y);hs(s,x)}}catch(o){if(o instanceof Yn)throw o;hs(s,"network-request-failed",{message:String(o)})}}async function Ac(s,e,n,r,o={}){const c=await Gs(s,e,n,r,o);return"mfaPendingCredential"in c&&hs(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function $x(s,e,n,r){const o=`${e}${n}?${r}`,c=s,u=c.config.emulator?Vp(s.config,o):`${s.config.apiScheme}://${o}`;return aN.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(u).toString():u}function lN(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ls(this.auth,"network-request-failed")),oN.get())})}}function dh(s,e,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=Ls(s,e,r);return o.customData._tokenResponse=n,o}function L_(s){return s!==void 0&&s.enterprise!==void 0}class uN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return lN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function hN(s,e){return Gs(s,"GET","/v2/recaptchaConfig",_i(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(s,e){return Gs(s,"POST","/v1/accounts:delete",e)}async function Mh(s,e){return Gs(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fN(s,e=!1){const n=_t(s),r=await n.getIdToken(e),o=Lp(r);we(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,u=c==null?void 0:c.sign_in_provider;return{claims:o,token:r,authTime:nc(Lm(o.auth_time)),issuedAtTime:nc(Lm(o.iat)),expirationTime:nc(Lm(o.exp)),signInProvider:u||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Lm(s){return Number(s)*1e3}function Lp(s){const[e,n,r]=s.split(".");if(e===void 0||n===void 0||r===void 0)return Th("JWT malformed, contained fewer than 3 sections"),null;try{const o=Nx(n);return o?JSON.parse(o):(Th("Failed to decode base64 JWT payload"),null)}catch(o){return Th("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function P_(s){const e=Lp(s);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eo(s,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Yn&&mN(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function mN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=nc(this.lastLoginAt),this.creationTime=nc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vh(s){var T;const e=s.auth,n=await s.getIdToken(),r=await Eo(s,Mh(e,{idToken:n}));we(r==null?void 0:r.users.length,e,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const c=(T=o.providerUserInfo)!=null&&T.length?Yx(o.providerUserInfo):[],u=yN(s.providerData,c),p=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!(u!=null&&u.length),y=p?g:!1,x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new lp(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(s,x)}async function gN(s){const e=_t(s);await Vh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yN(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function Yx(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vN(s,e){const n=await Kx(s,{},async()=>{const r=Ec({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=s.config,u=await $x(s,o,"/v1/token",`key=${c}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:r};return s.emulatorConfig&&_r(s.emulatorConfig.host)&&(g.credentials="include"),Fx.fetch()(u,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _N(s,e){return Gs(s,"POST","/v2/accounts:revokeToken",_i(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):P_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){we(e.length!==0,"internal-error");const n=P_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:c}=await vN(e,n);this.updateTokensAndExpiration(r,o,Number(c))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:c}=n,u=new vo;return r&&(we(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),o&&(we(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),c&&(we(typeof c=="number","internal-error",{appName:e}),u.expirationTime=c),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vo,this.toJSON())}_performRefresh(){return ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(s,e){we(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class os{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new pN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new lp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Eo(this,this.stsTokenManager.getToken(this.auth,e));return we(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return fN(this,e)}reload(){return gN(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new os({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Vh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cn(this.auth.app))return Promise.reject(di(this.auth));const e=await this.getIdToken();return await Eo(this,dN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,u=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,x=n.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:O,providerData:q,stsTokenManager:Z}=n;we(T&&Z,e,"internal-error");const U=vo.fromJSON(this.name,Z);we(typeof T=="string",e,"internal-error"),Zi(r,e.name),Zi(o,e.name),we(typeof S=="boolean",e,"internal-error"),we(typeof O=="boolean",e,"internal-error"),Zi(c,e.name),Zi(u,e.name),Zi(p,e.name),Zi(g,e.name),Zi(y,e.name),Zi(x,e.name);const X=new os({uid:T,auth:e,email:o,emailVerified:S,displayName:r,isAnonymous:O,photoURL:u,phoneNumber:c,tenantId:p,stsTokenManager:U,createdAt:y,lastLoginAt:x});return q&&Array.isArray(q)&&(X.providerData=q.map(Y=>({...Y}))),g&&(X._redirectEventId=g),X}static async _fromIdTokenResponse(e,n,r=!1){const o=new vo;o.updateFromServerResponse(n);const c=new os({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Vh(c),c}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];we(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?Yx(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),p=new vo;p.updateFromIdToken(r);const g=new os({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:u}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new lp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=new Map;function hi(s){gi(s instanceof Function,"Expected a class definition");let e=U_.get(s);return e?(gi(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,U_.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Qx.type="NONE";const z_=Qx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(s,e,n){return`firebase:${s}:${e}:${n}`}class _o{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:c}=this.auth;this.fullUserKey=wh(this.userKey,o.apiKey,c),this.fullPersistenceKey=wh("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Mh(this.auth,{idToken:e}).catch(()=>{});return n?os._fromGetAccountInfoResponse(this.auth,n,e):null}return os._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new _o(hi(z_),e,r);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||hi(z_);const u=wh(r,e.config.apiKey,e.name);let p=null;for(const y of n)try{const x=await y._get(u);if(x){let T;if(typeof x=="string"){const S=await Mh(e,{idToken:x}).catch(()=>{});if(!S)break;T=await os._fromGetAccountInfoResponse(e,S,x)}else T=os._fromJSON(e,x);y!==c&&(p=T),c=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new _o(c,e,r):(c=g[0],p&&await c._set(u,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(u)}catch{}})),new _o(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Zx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Xx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(t1(e))return"Blackberry";if(n1(e))return"Webos";if(Wx(e))return"Safari";if((e.includes("chrome/")||Jx(e))&&!e.includes("edge/"))return"Chrome";if(e1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Xx(s=tn()){return/firefox\//i.test(s)}function Wx(s=tn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Jx(s=tn()){return/crios\//i.test(s)}function Zx(s=tn()){return/iemobile/i.test(s)}function e1(s=tn()){return/android/i.test(s)}function t1(s=tn()){return/blackberry/i.test(s)}function n1(s=tn()){return/webos/i.test(s)}function Pp(s=tn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function bN(s=tn()){var e;return Pp(s)&&!!((e=window.navigator)!=null&&e.standalone)}function xN(){return jS()&&document.documentMode===10}function s1(s=tn()){return Pp(s)||e1(s)||n1(s)||t1(s)||/windows phone/i.test(s)||Zx(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(s,e=[]){let n;switch(s){case"Browser":n=B_(tn());break;case"Worker":n=`${B_(tn())}-${s}`;break;default:n=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ma}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=c=>new Promise((u,p)=>{try{const g=e(c);u(g)}catch(g){p(g)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wN(s,e={}){return Gs(s,"GET","/v2/passwordPolicy",_i(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=6;class SN{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??EN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new H_(this),this.idTokenSubscription=new H_(this),this.beforeStateQueue=new TN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=hi(n)),this._initializationPromise=this.queue(async()=>{var r,o,c;if(!this._deleted&&(this.persistenceManager=await _o.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Mh(this,{idToken:e}),r=await os._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(Cn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(p,p))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(c=this.redirectUser)==null?void 0:c._redirectEventId,p=r==null?void 0:r._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===p)&&(g!=null&&g.user)&&(r=g.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Cn(this.app))return Promise.reject(di(this));const n=e?_t(e):null;return n&&we(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Cn(this.app)?Promise.reject(di(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Cn(this.app)?Promise.reject(di(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wN(this),n=new SN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await _N(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&hi(e)||this._popupRedirectResolver;we(n,this,"argument-error"),this.redirectPersistenceManager=await _o.create(this,[hi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let u=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(p,this,"internal-error"),p.then(()=>{u||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,r,o);return()=>{u=!0,g()}}else{const g=e.addObserver(n);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=i1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&tN(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function xr(s){return _t(s)}class H_{constructor(e){this.auth=e,this.observer=null,this.addObserver=zS(n=>this.observer=n)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let od={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NN(s){od=s}function r1(s){return od.loadJS(s)}function CN(){return od.recaptchaEnterpriseScript}function RN(){return od.gapiScript}function IN(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class kN{constructor(){this.enterprise=new ON}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class ON{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const jN="recaptcha-enterprise",a1="NO_RECAPTCHA";class DN{constructor(e){this.type=jN,this.auth=xr(e)}async verify(e="verify",n=!1){async function r(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(u,p)=>{hN(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new uN(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,u(y.siteKey)}}).catch(g=>{p(g)})})}function o(c,u,p){const g=window.grecaptcha;L_(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(y=>{u(y)}).catch(()=>{u(a1)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new kN().execute("siteKey",{action:"verify"}):new Promise((c,u)=>{r(this.auth).then(p=>{if(!n&&L_(window.grecaptcha))o(p,c,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let g=CN();g.length!==0&&(g+=p),r1(g).then(()=>{o(p,c,u)}).catch(y=>{u(y)})}}).catch(p=>{u(p)})})}}async function q_(s,e,n,r=!1,o=!1){const c=new DN(s);let u;if(o)u=a1;else try{u=await c.verify(n)}catch{u=await c.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:u}):Object.assign(p,{captchaResponse:u}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Lh(s,e,n,r,o){var c;if((c=s._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await q_(s,e,n,n==="getOobCode");return r(s,u)}else return r(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await q_(s,e,n,n==="getOobCode");return r(s,p)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(s,e){const n=br(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(dr(c,e??{}))return o;hs(o,"already-initialized")}return n.initialize({options:e})}function VN(s,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(hi);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function LN(s,e,n){const r=xr(s);we(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,c=o1(e),{host:u,port:p}=PN(e),g=p===null?"":`:${p}`,y={url:`${c}//${u}${g}/`},x=Object.freeze({host:u,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){we(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),we(dr(y,r.config.emulator)&&dr(x,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=x,r.settings.appVerificationDisabledForTesting=!0,_r(u)?(Op(`${c}//${u}${g}`),jp("Auth",!0)):UN()}function o1(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function PN(s){const e=o1(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const c=o[1];return{host:c,port:G_(r.substr(c.length+1))}}else{const[c,u]=r.split(":");return{host:c,port:G_(u)}}}function G_(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function UN(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ui("not implemented")}_getIdTokenResponse(e){return ui("not implemented")}_linkToIdToken(e,n){return ui("not implemented")}_getReauthenticationResolver(e){return ui("not implemented")}}async function zN(s,e){return Gs(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BN(s,e){return Ac(s,"POST","/v1/accounts:signInWithPassword",_i(s,e))}async function HN(s,e){return Gs(s,"POST","/v1/accounts:sendOobCode",_i(s,e))}async function qN(s,e){return HN(s,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(s,e){return Ac(s,"POST","/v1/accounts:signInWithEmailLink",_i(s,e))}async function FN(s,e){return Ac(s,"POST","/v1/accounts:signInWithEmailLink",_i(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc extends Up{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new mc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new mc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lh(e,n,"signInWithPassword",BN);case"emailLink":return GN(e,{email:this._email,oobCode:this._password});default:hs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lh(e,r,"signUpPassword",zN);case"emailLink":return FN(e,{idToken:n,email:this._email,oobCode:this._password});default:hs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bo(s,e){return Ac(s,"POST","/v1/accounts:signInWithIdp",_i(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN="http://localhost";class ra extends Up{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ra(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...c}=n;if(!r||!o)return null;const u=new ra(r,o);return u.idToken=c.idToken||void 0,u.accessToken=c.accessToken||void 0,u.secret=c.secret,u.nonce=c.nonce,u.pendingToken=c.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return bo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,bo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,bo(e,n)}buildRequest(){const e={requestUri:KN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ec(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function YN(s){const e=$l(Yl(s)).link,n=e?$l(Yl(e)).deep_link_id:null,r=$l(Yl(s)).deep_link_id;return(r?$l(Yl(r)).link:null)||r||n||e||s}class zp{constructor(e){const n=$l(Yl(e)),r=n.apiKey??null,o=n.oobCode??null,c=$N(n.mode??null);we(r&&o&&c,"argument-error"),this.apiKey=r,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=YN(e);try{return new zp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(){this.providerId=ko.PROVIDER_ID}static credential(e,n){return mc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=zp.parseLink(n);return we(r,"argument-error"),mc._fromEmailAndCode(e,r.code,r.tenantId)}}ko.PROVIDER_ID="password";ko.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ko.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc extends l1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends Nc{constructor(){super("facebook.com")}static credential(e){return ra._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tr.credential(e.oauthAccessToken)}catch{return null}}}tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends Nc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ra._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return nr.credential(n,r)}catch{return null}}}nr.GOOGLE_SIGN_IN_METHOD="google.com";nr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends Nc{constructor(){super("github.com")}static credential(e){return ra._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sr.credential(e.oauthAccessToken)}catch{return null}}}sr.GITHUB_SIGN_IN_METHOD="github.com";sr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends Nc{constructor(){super("twitter.com")}static credential(e,n){return ra._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ir.credential(n,r)}catch{return null}}}ir.TWITTER_SIGN_IN_METHOD="twitter.com";ir.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(s,e){return Ac(s,"POST","/v1/accounts:signUp",_i(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const c=await os._fromIdTokenResponse(e,r,o),u=F_(r);return new aa({user:c,providerId:u,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=F_(r);return new aa({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function F_(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph extends Yn{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Ph.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new Ph(e,n,r,o)}}function c1(s,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Ph._fromErrorAndOperation(s,c,e,r):c})}async function XN(s,e,n=!1){const r=await Eo(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return aa._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WN(s,e,n=!1){const{auth:r}=s;if(Cn(r.app))return Promise.reject(di(r));const o="reauthenticate";try{const c=await Eo(s,c1(r,o,e,s),n);we(c.idToken,r,"internal-error");const u=Lp(c.idToken);we(u,r,"internal-error");const{sub:p}=u;return we(s.uid===p,r,"user-mismatch"),aa._forOperation(s,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&hs(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u1(s,e,n=!1){if(Cn(s.app))return Promise.reject(di(s));const r="signIn",o=await c1(s,r,e),c=await aa._fromIdTokenResponse(s,r,o);return n||await s._updateCurrentUser(c.user),c}async function JN(s,e){return u1(xr(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h1(s){const e=xr(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ZN(s,e,n){const r=xr(s);await Lh(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",qN)}async function eC(s,e,n){if(Cn(s.app))return Promise.reject(di(s));const r=xr(s),u=await Lh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",QN).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&h1(s),g}),p=await aa._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(p.user),p}function tC(s,e,n){return Cn(s.app)?Promise.reject(di(s)):JN(_t(s),ko.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&h1(s),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nC(s,e){return Gs(s,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sC(s,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=_t(s),c={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},u=await Eo(r,nC(r.auth,c));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const p=r.providerData.find(({providerId:g})=>g==="password");p&&(p.displayName=r.displayName,p.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function iC(s,e,n,r){return _t(s).onIdTokenChanged(e,n,r)}function rC(s,e,n){return _t(s).beforeAuthStateChanged(e,n)}function aC(s,e,n,r){return _t(s).onAuthStateChanged(e,n,r)}function oC(s){return _t(s).signOut()}const Uh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Uh,"1"),this.storage.removeItem(Uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=1e3,cC=10;class f1 extends d1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=s1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,p,g)=>{this.notifyListeners(u,g)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(r);!n&&this.localCache[r]===u||this.notifyListeners(r,u)},c=this.storage.getItem(r);xN()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,cC):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},lC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}f1.type="LOCAL";const uC=f1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1 extends d1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}m1.type="SESSION";const p1=m1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new ld(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:c}=n.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const p=Array.from(u).map(async y=>y(n.origin,c)),g=await hC(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ld.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(s="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,u;return new Promise((p,g)=>{const y=Bp("",20);o.port1.start();const x=setTimeout(()=>{g(new Error("unsupported_event"))},r);u={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(x),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(S.data.response);break;default:clearTimeout(x),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(){return window}function fC(s){Ps().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(){return typeof Ps().WorkerGlobalScope<"u"&&typeof Ps().importScripts=="function"}async function mC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pC(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function gC(){return g1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1="firebaseLocalStorageDb",yC=1,zh="firebaseLocalStorage",v1="fbase_key";class Cc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function cd(s,e){return s.transaction([zh],e?"readwrite":"readonly").objectStore(zh)}function vC(){const s=indexedDB.deleteDatabase(y1);return new Cc(s).toPromise()}function cp(){const s=indexedDB.open(y1,yC);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(zh,{keyPath:v1})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(zh)?e(r):(r.close(),await vC(),e(await cp()))})})}async function K_(s,e,n){const r=cd(s,!0).put({[v1]:e,value:n});return new Cc(r).toPromise()}async function _C(s,e){const n=cd(s,!1).get(e),r=await new Cc(n).toPromise();return r===void 0?null:r.value}function $_(s,e){const n=cd(s,!0).delete(e);return new Cc(n).toPromise()}const bC=800,xC=3;class _1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>xC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return g1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ld._getInstance(gC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await mC(),!this.activeServiceWorker)return;this.sender=new dC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||pC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cp();return await K_(e,Uh,"1"),await $_(e,Uh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>K_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>_C(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=cd(o,!1).getAll();return new Cc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_1.type="LOCAL";const TC=_1;new Sc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(s,e){return e?hi(e):(we(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp extends Up{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return bo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function EC(s){return u1(s.auth,new Hp(s),s.bypassAuthState)}function SC(s){const{auth:e,user:n}=s;return we(n,e,"internal-error"),WN(n,new Hp(s),s.bypassAuthState)}async function AC(s){const{auth:e,user:n}=s;return we(n,e,"internal-error"),XN(n,new Hp(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,n,r,o,c=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:c,error:u,type:p}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return EC;case"linkViaPopup":case"linkViaRedirect":return AC;case"reauthViaPopup":case"reauthViaRedirect":return SC;default:hs(this.auth,"internal-error")}}resolve(e){gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=new Sc(2e3,1e4);class yo extends b1{constructor(e,n,r,o,c){super(e,n,o,c),this.provider=r,this.authWindow=null,this.pollId=null,yo.currentPopupAction&&yo.currentPopupAction.cancel(),yo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){gi(this.filter.length===1,"Popup operations only handle one event");const e=Bp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ls(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ls(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ls(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,NC.get())};e()}}yo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC="pendingRedirect",Eh=new Map;class RC extends b1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Eh.get(this.auth._key());if(!e){try{const r=await IC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Eh.set(this.auth._key(),e)}return this.bypassAuthState||Eh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IC(s,e){const n=jC(e),r=OC(s);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function kC(s,e){Eh.set(s._key(),e)}function OC(s){return hi(s._redirectPersistence)}function jC(s){return wh(CC,s.config.apiKey,s.name)}async function DC(s,e,n=!1){if(Cn(s.app))return Promise.reject(di(s));const r=xr(s),o=wC(r,e),u=await new RC(r,o,n).execute();return u&&!n&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=600*1e3;class VC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!x1(e)){const o=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ls(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=MC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Y_(e))}saveEventToCache(e){this.cachedEventUids.add(Y_(e)),this.lastProcessedEventTime=Date.now()}}function Y_(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function x1({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function LC(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return x1(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PC(s,e={}){return Gs(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zC=/^https?/;async function BC(s){if(s.config.emulator)return;const{authorizedDomains:e}=await PC(s);for(const n of e)try{if(HC(n))return}catch{}hs(s,"unauthorized-domain")}function HC(s){const e=op(),{protocol:n,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const u=new URL(s);return u.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===r}if(!zC.test(n))return!1;if(UC.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=new Sc(3e4,6e4);function Q_(){const s=Ps().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function GC(s){return new Promise((e,n)=>{var o,c,u;function r(){Q_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Q_(),n(Ls(s,"network-request-failed"))},timeout:qC.get()})}if((c=(o=Ps().gapi)==null?void 0:o.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((u=Ps().gapi)!=null&&u.load)r();else{const p=IN("iframefcb");return Ps()[p]=()=>{gapi.load?r():n(Ls(s,"network-request-failed"))},r1(`${RN()}?onload=${p}`).catch(g=>n(g))}}).catch(e=>{throw Sh=null,e})}let Sh=null;function FC(s){return Sh=Sh||GC(s),Sh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=new Sc(5e3,15e3),$C="__/auth/iframe",YC="emulator/auth/iframe",QC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WC(s){const e=s.config;we(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Vp(e,YC):`https://${s.config.authDomain}/${$C}`,r={apiKey:e.apiKey,appName:s.name,v:ma},o=XC.get(s.config.apiHost);o&&(r.eid=o);const c=s._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${Ec(r).slice(1)}`}async function JC(s){const e=await FC(s),n=Ps().gapi;return we(n,s,"internal-error"),e.open({where:document.body,url:WC(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QC,dontclear:!0},r=>new Promise(async(o,c)=>{await r.restyle({setHideOnLeave:!1});const u=Ls(s,"network-request-failed"),p=Ps().setTimeout(()=>{c(u)},KC.get());function g(){Ps().clearTimeout(p),o(r)}r.ping(g).then(g,()=>{c(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eR=500,tR=600,nR="_blank",sR="http://localhost";class X_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function iR(s,e,n,r=eR,o=tR){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const g={...ZC,width:r.toString(),height:o.toString(),top:c,left:u},y=tn().toLowerCase();n&&(p=Jx(y)?nR:n),Xx(y)&&(e=e||sR,g.scrollbars="yes");const x=Object.entries(g).reduce((S,[O,q])=>`${S}${O}=${q},`,"");if(bN(y)&&p!=="_self")return rR(e||"",p),new X_(null);const T=window.open(e||"",p,x);we(T,s,"popup-blocked");try{T.focus()}catch{}return new X_(T)}function rR(s,e){const n=document.createElement("a");n.href=s,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR="__/auth/handler",oR="emulator/auth/handler",lR=encodeURIComponent("fac");async function W_(s,e,n,r,o,c){we(s.config.authDomain,s,"auth-domain-config-required"),we(s.config.apiKey,s,"invalid-api-key");const u={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:ma,eventId:o};if(e instanceof l1){e.setDefaultLanguage(s.languageCode),u.providerId=e.providerId||"",US(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,T]of Object.entries({}))u[x]=T}if(e instanceof Nc){const x=e.getScopes().filter(T=>T!=="");x.length>0&&(u.scopes=x.join(","))}s.tenantId&&(u.tid=s.tenantId);const p=u;for(const x of Object.keys(p))p[x]===void 0&&delete p[x];const g=await s._getAppCheckToken(),y=g?`#${lR}=${encodeURIComponent(g)}`:"";return`${cR(s)}?${Ec(p).slice(1)}${y}`}function cR({config:s}){return s.emulator?Vp(s,oR):`https://${s.authDomain}/${aR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm="webStorageSupport";class uR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=p1,this._completeRedirectFn=DC,this._overrideRedirectResult=kC}async _openPopup(e,n,r,o){var u;gi((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const c=await W_(e,n,r,op(),o);return iR(e,c,Bp())}async _openRedirect(e,n,r,o){await this._originValidation(e);const c=await W_(e,n,r,op(),o);return fC(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(gi(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await JC(e),r=new VC(e);return n.register("authEvent",o=>(we(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Pm,{type:Pm},o=>{var u;const c=(u=o==null?void 0:o[0])==null?void 0:u[Pm];c!==void 0&&n(!!c),hs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=BC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return s1()||Wx()||Pp()}}const hR=uR;var J_="@firebase/auth",Z_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mR(s){us(new $n("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:u,authDomain:p}=r.options;we(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:u,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:i1(s)},y=new AN(r,o,c,g);return VN(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),us(new $n("auth-internal",e=>{const n=xr(e.getProvider("auth").getImmediate());return(r=>new dR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),yn(J_,Z_,fR(s)),yn(J_,Z_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=300,gR=kx("authIdTokenMaxAge")||pR;let eb=null;const yR=s=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>gR)return;const o=n==null?void 0:n.token;eb!==o&&(eb=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function vR(s=ad()){const e=br(s,"auth");if(e.isInitialized())return e.getImmediate();const n=MN(s,{popupRedirectResolver:hR,persistence:[TC,uC,p1]}),r=kx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const u=yR(c.toString());rC(n,u,()=>u(n.currentUser)),iC(n,p=>u(p))}}const o=Cx("auth");return o&&LN(n,`http://${o}`),n}function _R(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}NN({loadJS(s){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const c=Ls("internal-error");c.customData=o,n(c)},r.type="text/javascript",r.charset="UTF-8",_R().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mR("Browser");var tb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ur,T1;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,E){function C(){}C.prototype=E.prototype,N.F=E.prototype,N.prototype=new C,N.prototype.constructor=N,N.D=function(j,D,z){for(var I=Array(arguments.length-2),P=2;P<arguments.length;P++)I[P-2]=arguments[P];return E.prototype[D].apply(j,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,E,C){C||(C=0);const j=Array(16);if(typeof E=="string")for(var D=0;D<16;++D)j[D]=E.charCodeAt(C++)|E.charCodeAt(C++)<<8|E.charCodeAt(C++)<<16|E.charCodeAt(C++)<<24;else for(D=0;D<16;++D)j[D]=E[C++]|E[C++]<<8|E[C++]<<16|E[C++]<<24;E=N.g[0],C=N.g[1],D=N.g[2];let z=N.g[3],I;I=E+(z^C&(D^z))+j[0]+3614090360&4294967295,E=C+(I<<7&4294967295|I>>>25),I=z+(D^E&(C^D))+j[1]+3905402710&4294967295,z=E+(I<<12&4294967295|I>>>20),I=D+(C^z&(E^C))+j[2]+606105819&4294967295,D=z+(I<<17&4294967295|I>>>15),I=C+(E^D&(z^E))+j[3]+3250441966&4294967295,C=D+(I<<22&4294967295|I>>>10),I=E+(z^C&(D^z))+j[4]+4118548399&4294967295,E=C+(I<<7&4294967295|I>>>25),I=z+(D^E&(C^D))+j[5]+1200080426&4294967295,z=E+(I<<12&4294967295|I>>>20),I=D+(C^z&(E^C))+j[6]+2821735955&4294967295,D=z+(I<<17&4294967295|I>>>15),I=C+(E^D&(z^E))+j[7]+4249261313&4294967295,C=D+(I<<22&4294967295|I>>>10),I=E+(z^C&(D^z))+j[8]+1770035416&4294967295,E=C+(I<<7&4294967295|I>>>25),I=z+(D^E&(C^D))+j[9]+2336552879&4294967295,z=E+(I<<12&4294967295|I>>>20),I=D+(C^z&(E^C))+j[10]+4294925233&4294967295,D=z+(I<<17&4294967295|I>>>15),I=C+(E^D&(z^E))+j[11]+2304563134&4294967295,C=D+(I<<22&4294967295|I>>>10),I=E+(z^C&(D^z))+j[12]+1804603682&4294967295,E=C+(I<<7&4294967295|I>>>25),I=z+(D^E&(C^D))+j[13]+4254626195&4294967295,z=E+(I<<12&4294967295|I>>>20),I=D+(C^z&(E^C))+j[14]+2792965006&4294967295,D=z+(I<<17&4294967295|I>>>15),I=C+(E^D&(z^E))+j[15]+1236535329&4294967295,C=D+(I<<22&4294967295|I>>>10),I=E+(D^z&(C^D))+j[1]+4129170786&4294967295,E=C+(I<<5&4294967295|I>>>27),I=z+(C^D&(E^C))+j[6]+3225465664&4294967295,z=E+(I<<9&4294967295|I>>>23),I=D+(E^C&(z^E))+j[11]+643717713&4294967295,D=z+(I<<14&4294967295|I>>>18),I=C+(z^E&(D^z))+j[0]+3921069994&4294967295,C=D+(I<<20&4294967295|I>>>12),I=E+(D^z&(C^D))+j[5]+3593408605&4294967295,E=C+(I<<5&4294967295|I>>>27),I=z+(C^D&(E^C))+j[10]+38016083&4294967295,z=E+(I<<9&4294967295|I>>>23),I=D+(E^C&(z^E))+j[15]+3634488961&4294967295,D=z+(I<<14&4294967295|I>>>18),I=C+(z^E&(D^z))+j[4]+3889429448&4294967295,C=D+(I<<20&4294967295|I>>>12),I=E+(D^z&(C^D))+j[9]+568446438&4294967295,E=C+(I<<5&4294967295|I>>>27),I=z+(C^D&(E^C))+j[14]+3275163606&4294967295,z=E+(I<<9&4294967295|I>>>23),I=D+(E^C&(z^E))+j[3]+4107603335&4294967295,D=z+(I<<14&4294967295|I>>>18),I=C+(z^E&(D^z))+j[8]+1163531501&4294967295,C=D+(I<<20&4294967295|I>>>12),I=E+(D^z&(C^D))+j[13]+2850285829&4294967295,E=C+(I<<5&4294967295|I>>>27),I=z+(C^D&(E^C))+j[2]+4243563512&4294967295,z=E+(I<<9&4294967295|I>>>23),I=D+(E^C&(z^E))+j[7]+1735328473&4294967295,D=z+(I<<14&4294967295|I>>>18),I=C+(z^E&(D^z))+j[12]+2368359562&4294967295,C=D+(I<<20&4294967295|I>>>12),I=E+(C^D^z)+j[5]+4294588738&4294967295,E=C+(I<<4&4294967295|I>>>28),I=z+(E^C^D)+j[8]+2272392833&4294967295,z=E+(I<<11&4294967295|I>>>21),I=D+(z^E^C)+j[11]+1839030562&4294967295,D=z+(I<<16&4294967295|I>>>16),I=C+(D^z^E)+j[14]+4259657740&4294967295,C=D+(I<<23&4294967295|I>>>9),I=E+(C^D^z)+j[1]+2763975236&4294967295,E=C+(I<<4&4294967295|I>>>28),I=z+(E^C^D)+j[4]+1272893353&4294967295,z=E+(I<<11&4294967295|I>>>21),I=D+(z^E^C)+j[7]+4139469664&4294967295,D=z+(I<<16&4294967295|I>>>16),I=C+(D^z^E)+j[10]+3200236656&4294967295,C=D+(I<<23&4294967295|I>>>9),I=E+(C^D^z)+j[13]+681279174&4294967295,E=C+(I<<4&4294967295|I>>>28),I=z+(E^C^D)+j[0]+3936430074&4294967295,z=E+(I<<11&4294967295|I>>>21),I=D+(z^E^C)+j[3]+3572445317&4294967295,D=z+(I<<16&4294967295|I>>>16),I=C+(D^z^E)+j[6]+76029189&4294967295,C=D+(I<<23&4294967295|I>>>9),I=E+(C^D^z)+j[9]+3654602809&4294967295,E=C+(I<<4&4294967295|I>>>28),I=z+(E^C^D)+j[12]+3873151461&4294967295,z=E+(I<<11&4294967295|I>>>21),I=D+(z^E^C)+j[15]+530742520&4294967295,D=z+(I<<16&4294967295|I>>>16),I=C+(D^z^E)+j[2]+3299628645&4294967295,C=D+(I<<23&4294967295|I>>>9),I=E+(D^(C|~z))+j[0]+4096336452&4294967295,E=C+(I<<6&4294967295|I>>>26),I=z+(C^(E|~D))+j[7]+1126891415&4294967295,z=E+(I<<10&4294967295|I>>>22),I=D+(E^(z|~C))+j[14]+2878612391&4294967295,D=z+(I<<15&4294967295|I>>>17),I=C+(z^(D|~E))+j[5]+4237533241&4294967295,C=D+(I<<21&4294967295|I>>>11),I=E+(D^(C|~z))+j[12]+1700485571&4294967295,E=C+(I<<6&4294967295|I>>>26),I=z+(C^(E|~D))+j[3]+2399980690&4294967295,z=E+(I<<10&4294967295|I>>>22),I=D+(E^(z|~C))+j[10]+4293915773&4294967295,D=z+(I<<15&4294967295|I>>>17),I=C+(z^(D|~E))+j[1]+2240044497&4294967295,C=D+(I<<21&4294967295|I>>>11),I=E+(D^(C|~z))+j[8]+1873313359&4294967295,E=C+(I<<6&4294967295|I>>>26),I=z+(C^(E|~D))+j[15]+4264355552&4294967295,z=E+(I<<10&4294967295|I>>>22),I=D+(E^(z|~C))+j[6]+2734768916&4294967295,D=z+(I<<15&4294967295|I>>>17),I=C+(z^(D|~E))+j[13]+1309151649&4294967295,C=D+(I<<21&4294967295|I>>>11),I=E+(D^(C|~z))+j[4]+4149444226&4294967295,E=C+(I<<6&4294967295|I>>>26),I=z+(C^(E|~D))+j[11]+3174756917&4294967295,z=E+(I<<10&4294967295|I>>>22),I=D+(E^(z|~C))+j[2]+718787259&4294967295,D=z+(I<<15&4294967295|I>>>17),I=C+(z^(D|~E))+j[9]+3951481745&4294967295,N.g[0]=N.g[0]+E&4294967295,N.g[1]=N.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+z&4294967295}r.prototype.v=function(N,E){E===void 0&&(E=N.length);const C=E-this.blockSize,j=this.C;let D=this.h,z=0;for(;z<E;){if(D==0)for(;z<=C;)o(this,N,z),z+=this.blockSize;if(typeof N=="string"){for(;z<E;)if(j[D++]=N.charCodeAt(z++),D==this.blockSize){o(this,j),D=0;break}}else for(;z<E;)if(j[D++]=N[z++],D==this.blockSize){o(this,j),D=0;break}}this.h=D,this.o+=E},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var E=1;E<N.length-8;++E)N[E]=0;E=this.o*8;for(var C=N.length-8;C<N.length;++C)N[C]=E&255,E/=256;for(this.v(N),N=Array(16),E=0,C=0;C<4;++C)for(let j=0;j<32;j+=8)N[E++]=this.g[C]>>>j&255;return N};function c(N,E){var C=p;return Object.prototype.hasOwnProperty.call(C,N)?C[N]:C[N]=E(N)}function u(N,E){this.h=E;const C=[];let j=!0;for(let D=N.length-1;D>=0;D--){const z=N[D]|0;j&&z==E||(C[D]=z,j=!1)}this.g=C}var p={};function g(N){return-128<=N&&N<128?c(N,function(E){return new u([E|0],E<0?-1:0)}):new u([N|0],N<0?-1:0)}function y(N){if(isNaN(N)||!isFinite(N))return T;if(N<0)return U(y(-N));const E=[];let C=1;for(let j=0;N>=C;j++)E[j]=N/C|0,C*=4294967296;return new u(E,0)}function x(N,E){if(N.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(N.charAt(0)=="-")return U(x(N.substring(1),E));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=y(Math.pow(E,8));let j=T;for(let z=0;z<N.length;z+=8){var D=Math.min(8,N.length-z);const I=parseInt(N.substring(z,z+D),E);D<8?(D=y(Math.pow(E,D)),j=j.j(D).add(y(I))):(j=j.j(C),j=j.add(y(I)))}return j}var T=g(0),S=g(1),O=g(16777216);s=u.prototype,s.m=function(){if(Z(this))return-U(this).m();let N=0,E=1;for(let C=0;C<this.g.length;C++){const j=this.i(C);N+=(j>=0?j:4294967296+j)*E,E*=4294967296}return N},s.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(q(this))return"0";if(Z(this))return"-"+U(this).toString(N);const E=y(Math.pow(N,6));var C=this;let j="";for(;;){const D=L(C,E).g;C=X(C,D.j(E));let z=((C.g.length>0?C.g[0]:C.h)>>>0).toString(N);if(C=D,q(C))return z+j;for(;z.length<6;)z="0"+z;j=z+j}},s.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function q(N){if(N.h!=0)return!1;for(let E=0;E<N.g.length;E++)if(N.g[E]!=0)return!1;return!0}function Z(N){return N.h==-1}s.l=function(N){return N=X(this,N),Z(N)?-1:q(N)?0:1};function U(N){const E=N.g.length,C=[];for(let j=0;j<E;j++)C[j]=~N.g[j];return new u(C,~N.h).add(S)}s.abs=function(){return Z(this)?U(this):this},s.add=function(N){const E=Math.max(this.g.length,N.g.length),C=[];let j=0;for(let D=0;D<=E;D++){let z=j+(this.i(D)&65535)+(N.i(D)&65535),I=(z>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);j=I>>>16,z&=65535,I&=65535,C[D]=I<<16|z}return new u(C,C[C.length-1]&-2147483648?-1:0)};function X(N,E){return N.add(U(E))}s.j=function(N){if(q(this)||q(N))return T;if(Z(this))return Z(N)?U(this).j(U(N)):U(U(this).j(N));if(Z(N))return U(this.j(U(N)));if(this.l(O)<0&&N.l(O)<0)return y(this.m()*N.m());const E=this.g.length+N.g.length,C=[];for(var j=0;j<2*E;j++)C[j]=0;for(j=0;j<this.g.length;j++)for(let D=0;D<N.g.length;D++){const z=this.i(j)>>>16,I=this.i(j)&65535,P=N.i(D)>>>16,Q=N.i(D)&65535;C[2*j+2*D]+=I*Q,Y(C,2*j+2*D),C[2*j+2*D+1]+=z*Q,Y(C,2*j+2*D+1),C[2*j+2*D+1]+=I*P,Y(C,2*j+2*D+1),C[2*j+2*D+2]+=z*P,Y(C,2*j+2*D+2)}for(N=0;N<E;N++)C[N]=C[2*N+1]<<16|C[2*N];for(N=E;N<2*E;N++)C[N]=0;return new u(C,0)};function Y(N,E){for(;(N[E]&65535)!=N[E];)N[E+1]+=N[E]>>>16,N[E]&=65535,E++}function ee(N,E){this.g=N,this.h=E}function L(N,E){if(q(E))throw Error("division by zero");if(q(N))return new ee(T,T);if(Z(N))return E=L(U(N),E),new ee(U(E.g),U(E.h));if(Z(E))return E=L(N,U(E)),new ee(U(E.g),E.h);if(N.g.length>30){if(Z(N)||Z(E))throw Error("slowDivide_ only works with positive integers.");for(var C=S,j=E;j.l(N)<=0;)C=H(C),j=H(j);var D=te(C,1),z=te(j,1);for(j=te(j,2),C=te(C,2);!q(j);){var I=z.add(j);I.l(N)<=0&&(D=D.add(C),z=I),j=te(j,1),C=te(C,1)}return E=X(N,D.j(E)),new ee(D,E)}for(D=T;N.l(E)>=0;){for(C=Math.max(1,Math.floor(N.m()/E.m())),j=Math.ceil(Math.log(C)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),z=y(C),I=z.j(E);Z(I)||I.l(N)>0;)C-=j,z=y(C),I=z.j(E);q(z)&&(z=S),D=D.add(z),N=X(N,I)}return new ee(D,N)}s.B=function(N){return L(this,N).h},s.and=function(N){const E=Math.max(this.g.length,N.g.length),C=[];for(let j=0;j<E;j++)C[j]=this.i(j)&N.i(j);return new u(C,this.h&N.h)},s.or=function(N){const E=Math.max(this.g.length,N.g.length),C=[];for(let j=0;j<E;j++)C[j]=this.i(j)|N.i(j);return new u(C,this.h|N.h)},s.xor=function(N){const E=Math.max(this.g.length,N.g.length),C=[];for(let j=0;j<E;j++)C[j]=this.i(j)^N.i(j);return new u(C,this.h^N.h)};function H(N){const E=N.g.length+1,C=[];for(let j=0;j<E;j++)C[j]=N.i(j)<<1|N.i(j-1)>>>31;return new u(C,N.h)}function te(N,E){const C=E>>5;E%=32;const j=N.g.length-C,D=[];for(let z=0;z<j;z++)D[z]=E>0?N.i(z+C)>>>E|N.i(z+C+1)<<32-E:N.i(z+C);return new u(D,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,T1=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=x,ur=u}).apply(typeof tb<"u"?tb:typeof self<"u"?self:typeof window<"u"?window:{});var fh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var w1,Ql,E1,Ah,up,S1,A1,N1;(function(){var s,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof fh=="object"&&fh];for(var v=0;v<h.length;++v){var b=h[v];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function o(h,v){if(v)e:{var b=r;h=h.split(".");for(var A=0;A<h.length-1;A++){var G=h[A];if(!(G in b))break e;b=b[G]}h=h[h.length-1],A=b[h],v=v(A),v!=A&&v!=null&&e(b,h,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(v){var b=[],A;for(A in v)Object.prototype.hasOwnProperty.call(v,A)&&b.push([A,v[A]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function p(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function g(h,v,b){return h.call.apply(h.bind,arguments)}function y(h,v,b){return y=g,y.apply(null,arguments)}function x(h,v){var b=Array.prototype.slice.call(arguments,1);return function(){var A=b.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function T(h,v){function b(){}b.prototype=v.prototype,h.Z=v.prototype,h.prototype=new b,h.prototype.constructor=h,h.Ob=function(A,G,W){for(var he=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)he[Re-2]=arguments[Re];return v.prototype[G].apply(A,he)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function O(h){const v=h.length;if(v>0){const b=Array(v);for(let A=0;A<v;A++)b[A]=h[A];return b}return[]}function q(h,v){for(let A=1;A<arguments.length;A++){const G=arguments[A];var b=typeof G;if(b=b!="object"?b:G?Array.isArray(G)?"array":b:"null",b=="array"||b=="object"&&typeof G.length=="number"){b=h.length||0;const W=G.length||0;h.length=b+W;for(let he=0;he<W;he++)h[b+he]=G[he]}else h.push(G)}}class Z{constructor(v,b){this.i=v,this.j=b,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function U(h){u.setTimeout(()=>{throw h},0)}function X(){var h=N;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class Y{constructor(){this.h=this.g=null}add(v,b){const A=ee.get();A.set(v,b),this.h?this.h.next=A:this.g=A,this.h=A}}var ee=new Z(()=>new L,h=>h.reset());class L{constructor(){this.next=this.g=this.h=null}set(v,b){this.h=v,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let H,te=!1,N=new Y,E=()=>{const h=Promise.resolve(void 0);H=()=>{h.then(C)}};function C(){for(var h;h=X();){try{h.h.call(h.g)}catch(b){U(b)}var v=ee;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}te=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};u.addEventListener("test",b,v),u.removeEventListener("test",b,v)}catch{}return h})();function I(h){return/^[\s\xa0]*$/.test(h)}function P(h,v){D.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}T(P,D),P.prototype.init=function(h,v){const b=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(b=="mouseover"?v=h.fromElement:b=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&P.Z.h.call(this)},P.prototype.h=function(){P.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Q="closure_listenable_"+(Math.random()*1e6|0),R=0;function se(h,v,b,A,G){this.listener=h,this.proxy=null,this.src=v,this.type=b,this.capture=!!A,this.ha=G,this.key=++R,this.da=this.fa=!1}function de(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ge(h,v,b){for(const A in h)v.call(b,h[A],A,h)}function Be(h,v){for(const b in h)v.call(void 0,h[b],b,h)}function M(h){const v={};for(const b in h)v[b]=h[b];return v}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(h,v){let b,A;for(let G=1;G<arguments.length;G++){A=arguments[G];for(b in A)h[b]=A[b];for(let W=0;W<ne.length;W++)b=ne[W],Object.prototype.hasOwnProperty.call(A,b)&&(h[b]=A[b])}}function fe(h){this.src=h,this.g={},this.h=0}fe.prototype.add=function(h,v,b,A,G){const W=h.toString();h=this.g[W],h||(h=this.g[W]=[],this.h++);const he=Se(h,v,A,G);return he>-1?(v=h[he],b||(v.fa=!1)):(v=new se(v,this.src,W,!!A,G),v.fa=b,h.push(v)),v};function Te(h,v){const b=v.type;if(b in h.g){var A=h.g[b],G=Array.prototype.indexOf.call(A,v,void 0),W;(W=G>=0)&&Array.prototype.splice.call(A,G,1),W&&(de(v),h.g[b].length==0&&(delete h.g[b],h.h--))}}function Se(h,v,b,A){for(let G=0;G<h.length;++G){const W=h[G];if(!W.da&&W.listener==v&&W.capture==!!b&&W.ha==A)return G}return-1}var Oe="closure_lm_"+(Math.random()*1e6|0),bt={};function nt(h,v,b,A,G){if(Array.isArray(v)){for(let W=0;W<v.length;W++)nt(h,v[W],b,A,G);return null}return b=zo(b),h&&h[Q]?h.J(v,b,p(A)?!!A.capture:!1,G):kn(h,v,b,!1,A,G)}function kn(h,v,b,A,G,W){if(!v)throw Error("Invalid event type");const he=p(G)?!!G.capture:!!G;let Re=Tr(h);if(Re||(h[Oe]=Re=new fe(h)),b=Re.add(v,b,A,he,W),b.proxy)return b;if(A=_a(),b.proxy=A,A.src=h,A.listener=b,h.addEventListener)z||(G=he),G===void 0&&(G=!1),h.addEventListener(v.toString(),A,G);else if(h.attachEvent)h.attachEvent(ds(v.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return b}function _a(){function h(b){return v.call(h.src,h.listener,b)}const v=Po;return h}function ba(h,v,b,A,G){if(Array.isArray(v))for(var W=0;W<v.length;W++)ba(h,v[W],b,A,G);else A=p(A)?!!A.capture:!!A,b=zo(b),h&&h[Q]?(h=h.i,W=String(v).toString(),W in h.g&&(v=h.g[W],b=Se(v,b,A,G),b>-1&&(de(v[b]),Array.prototype.splice.call(v,b,1),v.length==0&&(delete h.g[W],h.h--)))):h&&(h=Tr(h))&&(v=h.g[v.toString()],h=-1,v&&(h=Se(v,b,A,G)),(b=h>-1?v[h]:null)&&xa(b))}function xa(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Q])Te(v.i,h);else{var b=h.type,A=h.proxy;v.removeEventListener?v.removeEventListener(b,A,h.capture):v.detachEvent?v.detachEvent(ds(b),A):v.addListener&&v.removeListener&&v.removeListener(A),(b=Tr(v))?(Te(b,h),b.h==0&&(b.src=null,v[Oe]=null)):de(h)}}}function ds(h){return h in bt?bt[h]:bt[h]="on"+h}function Po(h,v){if(h.da)h=!0;else{v=new P(v,this);const b=h.listener,A=h.ha||h.src;h.fa&&xa(h),h=b.call(A,v)}return h}function Tr(h){return h=h[Oe],h instanceof fe?h:null}var Uo="__closure_events_fn_"+(Math.random()*1e9>>>0);function zo(h){return typeof h=="function"?h:(h[Uo]||(h[Uo]=function(v){return h.handleEvent(v)}),h[Uo])}function xt(){j.call(this),this.i=new fe(this),this.M=this,this.G=null}T(xt,j),xt.prototype[Q]=!0,xt.prototype.removeEventListener=function(h,v,b,A){ba(this,h,v,b,A)};function Ot(h,v){var b,A=h.G;if(A)for(b=[];A;A=A.G)b.push(A);if(h=h.M,A=v.type||v,typeof v=="string")v=new D(v,h);else if(v instanceof D)v.target=v.target||h;else{var G=v;v=new D(A,h),ue(v,G)}G=!0;let W,he;if(b)for(he=b.length-1;he>=0;he--)W=v.g=b[he],G=bi(W,A,!0,v)&&G;if(W=v.g=h,G=bi(W,A,!0,v)&&G,G=bi(W,A,!1,v)&&G,b)for(he=0;he<b.length;he++)W=v.g=b[he],G=bi(W,A,!1,v)&&G}xt.prototype.N=function(){if(xt.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const b=h.g[v];for(let A=0;A<b.length;A++)de(b[A]);delete h.g[v],h.h--}}this.G=null},xt.prototype.J=function(h,v,b,A){return this.i.add(String(h),v,!1,b,A)},xt.prototype.K=function(h,v,b,A){return this.i.add(String(h),v,!0,b,A)};function bi(h,v,b,A){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let G=!0;for(let W=0;W<v.length;++W){const he=v[W];if(he&&!he.da&&he.capture==b){const Re=he.listener,pt=he.ha||he.src;he.fa&&Te(h.i,he),G=Re.call(pt,A)!==!1&&G}}return G&&!A.defaultPrevented}function Ad(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:u.setTimeout(h,v||0)}function Lc(h){h.g=Ad(()=>{h.g=null,h.i&&(h.i=!1,Lc(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class nn extends j{constructor(v,b){super(),this.m=v,this.l=b,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Lc(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wr(h){j.call(this),this.h=h,this.g={}}T(wr,j);var Bo=[];function Ho(h){ge(h.g,function(v,b){this.g.hasOwnProperty(b)&&xa(v)},h),h.g={}}wr.prototype.N=function(){wr.Z.N.call(this),Ho(this)},wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xi=u.JSON.stringify,Nd=u.JSON.parse,Pc=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function Uc(){}function zc(){}var Qn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Bt(){D.call(this,"d")}T(Bt,D);function On(){D.call(this,"c")}T(On,D);var mt={},Bc=null;function Ta(){return Bc=Bc||new xt}mt.Ia="serverreachability";function Hc(h){D.call(this,mt.Ia,h)}T(Hc,D);function fs(h){const v=Ta();Ot(v,new Hc(v))}mt.STAT_EVENT="statevent";function Er(h,v){D.call(this,mt.STAT_EVENT,h),this.stat=v}T(Er,D);function Tt(h){const v=Ta();Ot(v,new Er(v,h))}mt.Ja="timingevent";function ms(h,v){D.call(this,mt.Ja,h),this.size=v}T(ms,D);function ps(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},v)}function Xn(){this.g=!0}Xn.prototype.ua=function(){this.g=!1};function Cd(h,v,b,A,G,W){h.info(function(){if(h.g)if(W){var he="",Re=W.split("&");for(let Fe=0;Fe<Re.length;Fe++){var pt=Re[Fe].split("=");if(pt.length>1){const ot=pt[0];pt=pt[1];const Vn=ot.split("_");he=Vn.length>=2&&Vn[1]=="type"?he+(ot+"="+pt+"&"):he+(ot+"=redacted&")}}}else he=null;else he=W;return"XMLHTTP REQ ("+A+") [attempt "+G+"]: "+v+`
`+b+`
`+he})}function qc(h,v,b,A,G,W,he){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+G+"]: "+v+`
`+b+`
`+W+" "+he})}function gs(h,v,b,A){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Rd(h,b)+(A?" "+A:"")})}function Sr(h,v){h.info(function(){return"TIMEOUT: "+v})}Xn.prototype.info=function(){};function Rd(h,v){if(!h.g)return v;if(!v)return null;try{const W=JSON.parse(v);if(W){for(h=0;h<W.length;h++)if(Array.isArray(W[h])){var b=W[h];if(!(b.length<2)){var A=b[1];if(Array.isArray(A)&&!(A.length<1)){var G=A[0];if(G!="noop"&&G!="stop"&&G!="close")for(let he=1;he<A.length;he++)A[he]=""}}}}return xi(W)}catch{return v}}var Ar={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},qo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Go;function Nr(){}T(Nr,Uc),Nr.prototype.g=function(){return new XMLHttpRequest},Go=new Nr;function Fs(h){return encodeURIComponent(String(h))}function Gc(h){var v=1;h=h.split(":");const b=[];for(;v>0&&h.length;)b.push(h.shift()),v--;return h.length&&b.push(h.join(":")),b}function Wn(h,v,b,A){this.j=h,this.i=v,this.l=b,this.S=A||1,this.V=new wr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Jn}function Jn(){this.i=null,this.g="",this.h=!1}var wt={},Vt={};function ys(h,v,b){h.M=1,h.A=Cr(St(v)),h.u=b,h.R=!0,wa(h,null)}function wa(h,v){h.F=Date.now(),vs(h),h.B=St(h.A);var b=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),Na(b.i,"t",A),h.C=0,b=h.j.L,h.h=new Jn,h.g=ru(h.j,b?v:null,!h.u),h.P>0&&(h.O=new nn(y(h.Y,h,h.g),h.P)),v=h.V,b=h.g,A=h.ba;var G="readystatechange";Array.isArray(G)||(G&&(Bo[0]=G.toString()),G=Bo);for(let W=0;W<G.length;W++){const he=nt(b,G[W],A||v.handleEvent,!1,v.h||v);if(!he)break;v.g[he.key]=he}v=h.J?M(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),fs(),Cd(h.i,h.v,h.B,h.l,h.S,h.u)}Wn.prototype.ba=function(h){h=h.target;const v=this.O;v&&ts(h)==3?v.j():this.Y(h)},Wn.prototype.Y=function(h){try{if(h==this.g)e:{const Re=ts(this.g),pt=this.g.ya(),Fe=this.g.ca();if(!(Re<3)&&(Re!=3||this.g&&(this.h.h||this.g.la()||Ht(this.g)))){this.K||Re!=4||pt==7||(pt==8||Fe<=0?fs(3):fs(2)),_s(this);var v=this.g.ca();this.X=v;var b=Id(this);if(this.o=v==200,qc(this.i,this.v,this.B,this.l,this.S,Re,v),this.o){if(this.U&&!this.L){t:{if(this.g){var A,G=this.g;if((A=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(A)){var W=A;break t}}W=null}if(h=W)gs(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,bs(this,h);else{this.o=!1,this.m=3,Tt(12),_n(this),jn(this);break e}}if(this.R){h=!0;let ot;for(;!this.K&&this.C<b.length;)if(ot=Kc(this,b),ot==Vt){Re==4&&(this.m=4,Tt(14),h=!1),gs(this.i,this.l,null,"[Incomplete Response]");break}else if(ot==wt){this.m=4,Tt(15),gs(this.i,this.l,b,"[Invalid Chunk]"),h=!1;break}else gs(this.i,this.l,ot,null),bs(this,ot);if(Fc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||b.length!=0||this.h.h||(this.m=1,Tt(16),h=!1),this.o=this.o&&h,!h)gs(this.i,this.l,b,"[Invalid Chunked Response]"),_n(this),jn(this);else if(b.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),rl(he),he.P=!0,Tt(11))}}else gs(this.i,this.l,b,null),bs(this,b);Re==4&&_n(this),this.o&&!this.K&&(Re==4?tu(this.j,this):(this.o=!1,vs(this)))}else $s(this.g),v==400&&b.indexOf("Unknown SID")>0?(this.m=3,Tt(12)):(this.m=0,Tt(13)),_n(this),jn(this)}}}catch{}finally{}};function Id(h){if(!Fc(h))return h.g.la();const v=Ht(h.g);if(v==="")return"";let b="";const A=v.length,G=ts(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return _n(h),jn(h),"";h.h.i=new u.TextDecoder}for(let W=0;W<A;W++)h.h.h=!0,b+=h.h.i.decode(v[W],{stream:!(G&&W==A-1)});return v.length=0,h.h.g+=b,h.C=0,h.h.g}function Fc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Kc(h,v){var b=h.C,A=v.indexOf(`
`,b);return A==-1?Vt:(b=Number(v.substring(b,A)),isNaN(b)?wt:(A+=1,A+b>v.length?Vt:(v=v.slice(A,A+b),h.C=A+b,v)))}Wn.prototype.cancel=function(){this.K=!0,_n(this)};function vs(h){h.T=Date.now()+h.H,Ea(h,h.H)}function Ea(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=ps(y(h.aa,h),v)}function _s(h){h.D&&(u.clearTimeout(h.D),h.D=null)}Wn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Sr(this.i,this.B),this.M!=2&&(fs(),Tt(17)),_n(this),this.m=2,jn(this)):Ea(this,this.T-h)};function jn(h){h.j.I==0||h.K||tu(h.j,h)}function _n(h){_s(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,Ho(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function bs(h,v){try{var b=h.j;if(b.I!=0&&(b.g==h||Ts(b.h,h))){if(!h.L&&Ts(b.h,h)&&b.I==3){try{var A=b.Ba.g.parse(v)}catch{A=null}if(Array.isArray(A)&&A.length==3){var G=A;if(G[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<h.F)Oa(b),Ri(b);else break e;Mr(b),Tt(18)}}else b.xa=G[1],0<b.xa-b.K&&G[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=ps(y(b.Va,b),6e3));xs(b.h)<=1&&b.ta&&(b.ta=void 0)}else Cs(b,11)}else if((h.L||b.g==h)&&Oa(b),!I(v))for(G=b.Ba.g.parse(v),v=0;v<G.length;v++){let Fe=G[v];const ot=Fe[0];if(!(ot<=b.K))if(b.K=ot,Fe=Fe[1],b.I==2)if(Fe[0]=="c"){b.M=Fe[1],b.ba=Fe[2];const Vn=Fe[3];Vn!=null&&(b.ka=Vn,b.j.info("VER="+b.ka));const Rs=Fe[4];Rs!=null&&(b.za=Rs,b.j.info("SVER="+b.za));const ns=Fe[5];ns!=null&&typeof ns=="number"&&ns>0&&(A=1.5*ns,b.O=A,b.j.info("backChannelRequestTimeoutMs_="+A)),A=b;const ss=h.g;if(ss){const Vr=ss.g?ss.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vr){var W=A.h;W.g||Vr.indexOf("spdy")==-1&&Vr.indexOf("quic")==-1&&Vr.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&($o(W,W.h),W.h=null))}if(A.G){const ja=ss.g?ss.g.getResponseHeader("X-HTTP-Session-Id"):null;ja&&(A.wa=ja,Ye(A.J,A.G,ja))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-h.F,b.j.info("Handshake RTT: "+b.T+"ms")),A=b;var he=h;if(A.na=iu(A,A.L?A.ba:null,A.W),he.L){Yo(A.h,he);var Re=he,pt=A.O;pt&&(Re.H=pt),Re.D&&(_s(Re),vs(Re)),A.g=he}else Zc(A);b.i.length>0&&Ns(b)}else Fe[0]!="stop"&&Fe[0]!="close"||Cs(b,7);else b.I==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?Cs(b,7):sl(b):Fe[0]!="noop"&&b.l&&b.l.qa(Fe),b.A=0)}}fs(4)}catch{}}var Et=class{constructor(h,v){this.g=h,this.map=v}};function Fo(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ko(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function xs(h){return h.h?1:h.g?h.g.size:0}function Ts(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function $o(h,v){h.g?h.g.add(v):h.h=v}function Yo(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Fo.prototype.cancel=function(){if(this.i=Qo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Qo(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const b of h.g.values())v=v.concat(b.G);return v}return O(h.i)}var $c=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sa(h,v){if(h){h=h.split("&");for(let b=0;b<h.length;b++){const A=h[b].indexOf("=");let G,W=null;A>=0?(G=h[b].substring(0,A),W=h[b].substring(A+1)):G=h[b],v(G,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function bn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof bn?(this.l=h.l,Lt(this,h.j),this.o=h.o,this.g=h.g,Ti(this,h.u),this.h=h.h,Xo(this,Wc(h.i)),this.m=h.m):h&&(v=String(h).match($c))?(this.l=!1,Lt(this,v[1]||"",!0),this.o=ws(v[2]||""),this.g=ws(v[3]||"",!0),Ti(this,v[4]),this.h=ws(v[5]||"",!0),Xo(this,v[6]||"",!0),this.m=ws(v[7]||"")):(this.l=!1,this.i=new Ei(null,this.l))}bn.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(Rr(v,Aa,!0),":");var b=this.g;return(b||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Rr(v,Aa,!0),"@"),h.push(Fs(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&h.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(Rr(b,b.charAt(0)=="/"?Wo:Yc,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",Rr(b,Qc)),h.join("")},bn.prototype.resolve=function(h){const v=St(this);let b=!!h.j;b?Lt(v,h.j):b=!!h.o,b?v.o=h.o:b=!!h.g,b?v.g=h.g:b=h.u!=null;var A=h.h;if(b)Ti(v,h.u);else if(b=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var G=v.h.lastIndexOf("/");G!=-1&&(A=v.h.slice(0,G+1)+A)}if(G=A,G==".."||G==".")A="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){A=G.lastIndexOf("/",0)==0,G=G.split("/");const W=[];for(let he=0;he<G.length;){const Re=G[he++];Re=="."?A&&he==G.length&&W.push(""):Re==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),A&&he==G.length&&W.push("")):(W.push(Re),A=!0)}A=W.join("/")}else A=G}return b?v.h=A:b=h.i.toString()!=="",b?Xo(v,Wc(h.i)):b=!!h.m,b&&(v.m=h.m),v};function St(h){return new bn(h)}function Lt(h,v,b){h.j=b?ws(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Ti(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function Xo(h,v,b){v instanceof Ei?(h.i=v,Ca(h.i,h.l)):(b||(v=Rr(v,wi)),h.i=new Ei(v,h.l))}function Ye(h,v,b){h.i.set(v,b)}function Cr(h){return Ye(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function ws(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Rr(h,v,b){return typeof h=="string"?(h=encodeURI(h).replace(v,ln),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ln(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Aa=/[#\/\?@]/g,Yc=/[#\?:]/g,Wo=/[#\?]/g,wi=/[#\?@]/g,Qc=/#/g;function Ei(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function cn(h){h.g||(h.g=new Map,h.h=0,h.i&&Sa(h.i,function(v,b){h.add(decodeURIComponent(v.replace(/\+/g," ")),b)}))}s=Ei.prototype,s.add=function(h,v){cn(this),this.i=null,h=Si(this,h);let b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(v),this.h+=1,this};function Xc(h,v){cn(h),v=Si(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Jo(h,v){return cn(h),v=Si(h,v),h.g.has(v)}s.forEach=function(h,v){cn(this),this.g.forEach(function(b,A){b.forEach(function(G){h.call(v,G,A,this)},this)},this)};function Zo(h,v){cn(h);let b=[];if(typeof v=="string")Jo(h,v)&&(b=b.concat(h.g.get(Si(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)b=b.concat(h[v]);return b}s.set=function(h,v){return cn(this),this.i=null,h=Si(this,h),Jo(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},s.get=function(h,v){return h?(h=Zo(this,h),h.length>0?String(h[0]):v):v};function Na(h,v,b){Xc(h,v),b.length>0&&(h.i=null,h.g.set(Si(h,v),O(b)),h.h+=b.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let A=0;A<v.length;A++){var b=v[A];const G=Fs(b);b=Zo(this,b);for(let W=0;W<b.length;W++){let he=G;b[W]!==""&&(he+="="+Fs(b[W])),h.push(he)}}return this.i=h.join("&")};function Wc(h){const v=new Ei;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function Si(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Ca(h,v){v&&!h.j&&(cn(h),h.i=null,h.g.forEach(function(b,A){const G=A.toLowerCase();A!=G&&(Xc(this,A),Na(this,G,b))},h)),h.j=v}function Zn(h,v){const b=new Xn;if(u.Image){const A=new Image;A.onload=x(Dn,b,"TestLoadImage: loaded",!0,v,A),A.onerror=x(Dn,b,"TestLoadImage: error",!1,v,A),A.onabort=x(Dn,b,"TestLoadImage: abort",!1,v,A),A.ontimeout=x(Dn,b,"TestLoadImage: timeout",!1,v,A),u.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else v(!1)}function el(h,v){const b=new Xn,A=new AbortController,G=setTimeout(()=>{A.abort(),Dn(b,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:A.signal}).then(W=>{clearTimeout(G),W.ok?Dn(b,"TestPingServer: ok",!0,v):Dn(b,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(G),Dn(b,"TestPingServer: error",!1,v)})}function Dn(h,v,b,A,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),A(b)}catch{}}function Ai(){this.g=new Pc}function Es(h){this.i=h.Sb||null,this.h=h.ab||!1}T(Es,Uc),Es.prototype.g=function(){return new Ir(this.i,this.h)};function Ir(h,v){xt.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Ir,xt),s=Ir.prototype,s.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,es(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||u).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ni(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,es(this)),this.g&&(this.readyState=3,es(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ra(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ra(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?Ni(this):es(this),this.readyState==3&&Ra(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Ni(this))},s.Na=function(h){this.g&&(this.response=h,Ni(this))},s.ga=function(){this.g&&Ni(this)};function Ni(h){h.readyState=4,h.l=null,h.j=null,h.B=null,es(h)}s.setRequestHeader=function(h,v){this.A.append(h,v)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var b=v.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=v.next();return h.join(`\r
`)};function es(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ir.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Mn(h){let v="";return ge(h,function(b,A){v+=A,v+=":",v+=b,v+=`\r
`}),v}function kr(h,v,b){e:{for(A in b){var A=!1;break e}A=!0}A||(b=Mn(b),typeof h=="string"?b!=null&&Fs(b):Ye(h,v,b))}function We(h){xt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(We,xt);var Ss=/^https?$/i,tl=["POST","PUT"];s=We.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,v,b,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Go.g(),this.g.onreadystatechange=S(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(W){Or(this,W);return}if(h=b||"",b=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var G in A)b.set(G,A[G]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const W of A.keys())b.set(W,A.get(W));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(b.keys()).find(W=>W.toLowerCase()=="content-type"),G=u.FormData&&h instanceof u.FormData,!(Array.prototype.indexOf.call(tl,v,void 0)>=0)||A||G||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,he]of b)this.g.setRequestHeader(W,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(W){Or(this,W)}};function Or(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,nl(h),Ks(h)}function nl(h){h.A||(h.A=!0,Ot(h,"complete"),Ot(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ot(this,"complete"),Ot(this,"abort"),Ks(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ks(this,!0)),We.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?jr(this):this.Xa())},s.Xa=function(){jr(this)};function jr(h){if(h.h&&typeof c<"u"){if(h.v&&ts(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ot(h,"readystatechange"),ts(h)==4){h.h=!1;try{const W=h.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var b;if(!(b=v)){var A;if(A=W===0){let he=String(h.D).match($c)[1]||null;!he&&u.self&&u.self.location&&(he=u.self.location.protocol.slice(0,-1)),A=!Ss.test(he?he.toLowerCase():"")}b=A}if(b)Ot(h,"complete"),Ot(h,"success");else{h.o=6;try{var G=ts(h)>2?h.g.statusText:""}catch{G=""}h.l=G+" ["+h.ca()+"]",nl(h)}}finally{Ks(h)}}}}function Ks(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const b=h.g;h.g=null,v||Ot(h,"ready");try{b.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function ts(h){return h.g?h.g.readyState:0}s.ca=function(){try{return ts(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Nd(v)}};function Ht(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function $s(h){const v={};h=(h.g&&ts(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(I(h[A]))continue;var b=Gc(h[A]);const G=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const W=v[G]||[];v[G]=W,W.push(b)}Be(v,function(A){return A.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function As(h,v,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||v}function Ci(h){this.za=0,this.i=[],this.j=new Xn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=As("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=As("baseRetryDelayMs",5e3,h),this.Za=As("retryDelaySeedMs",1e4,h),this.Ta=As("forwardChannelMaxRetries",2,h),this.va=As("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Fo(h&&h.concurrentRequestLimit),this.Ba=new Ai,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ci.prototype,s.ka=8,s.I=1,s.connect=function(h,v,b,A){Tt(0),this.W=h,this.H=v||{},b&&A!==void 0&&(this.H.OSID=b,this.H.OAID=A),this.F=this.X,this.J=iu(this,null,this.W),Ns(this)};function sl(h){if(Ia(h),h.I==3){var v=h.V++,b=St(h.J);if(Ye(b,"SID",h.M),Ye(b,"RID",v),Ye(b,"TYPE","terminate"),Dr(h,b),v=new Wn(h,h.j,v),v.M=2,v.A=Cr(St(b)),b=!1,u.navigator&&u.navigator.sendBeacon)try{b=u.navigator.sendBeacon(v.A.toString(),"")}catch{}!b&&u.Image&&(new Image().src=v.A,b=!0),b||(v.g=ru(v.j,null),v.g.ea(v.A)),v.F=Date.now(),vs(v)}su(h)}function Ri(h){h.g&&(rl(h),h.g.cancel(),h.g=null)}function Ia(h){Ri(h),h.v&&(u.clearTimeout(h.v),h.v=null),Oa(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&u.clearTimeout(h.m),h.m=null)}function Ns(h){if(!Ko(h.h)&&!h.m){h.m=!0;var v=h.Ea;H||E(),te||(H(),te=!0),N.add(v,h),h.D=0}}function ka(h,v){return xs(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=ps(y(h.Ea,h,v),nu(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const G=new Wn(this,this.j,h);let W=this.o;if(this.U&&(W?(W=M(W),ue(W,this.U)):W=this.U),this.u!==null||this.R||(G.J=W,W=null),this.S)e:{for(var v=0,b=0;b<this.i.length;b++){t:{var A=this.i[b];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(v+=A,v>4096){v=b;break e}if(v===4096||b===this.i.length-1){v=b+1;break e}}v=1e3}else v=1e3;v=Jc(this,G,v),b=St(this.J),Ye(b,"RID",h),Ye(b,"CVER",22),this.G&&Ye(b,"X-HTTP-Session-Id",this.G),Dr(this,b),W&&(this.R?v="headers="+Fs(Mn(W))+"&"+v:this.u&&kr(b,this.u,W)),$o(this.h,G),this.Ra&&Ye(b,"TYPE","init"),this.S?(Ye(b,"$req",v),Ye(b,"SID","null"),G.U=!0,ys(G,b,null)):ys(G,b,v),this.I=2}}else this.I==3&&(h?il(this,h):this.i.length==0||Ko(this.h)||il(this))};function il(h,v){var b;v?b=v.l:b=h.V++;const A=St(h.J);Ye(A,"SID",h.M),Ye(A,"RID",b),Ye(A,"AID",h.K),Dr(h,A),h.u&&h.o&&kr(A,h.u,h.o),b=new Wn(h,h.j,b,h.D+1),h.u===null&&(b.J=h.o),v&&(h.i=v.G.concat(h.i)),v=Jc(h,b,1e3),b.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),$o(h.h,b),ys(b,A,v)}function Dr(h,v){h.H&&ge(h.H,function(b,A){Ye(v,A,b)}),h.l&&ge({},function(b,A){Ye(v,A,b)})}function Jc(h,v,b){b=Math.min(h.i.length,b);const A=h.l?y(h.l.Ka,h.l,h):null;e:{var G=h.i;let Re=-1;for(;;){const pt=["count="+b];Re==-1?b>0?(Re=G[0].g,pt.push("ofs="+Re)):Re=0:pt.push("ofs="+Re);let Fe=!0;for(let ot=0;ot<b;ot++){var W=G[ot].g;const Vn=G[ot].map;if(W-=Re,W<0)Re=Math.max(0,G[ot].g-100),Fe=!1;else try{W="req"+W+"_"||"";try{var he=Vn instanceof Map?Vn:Object.entries(Vn);for(const[Rs,ns]of he){let ss=ns;p(ns)&&(ss=xi(ns)),pt.push(W+Rs+"="+encodeURIComponent(ss))}}catch(Rs){throw pt.push(W+"type="+encodeURIComponent("_badmap")),Rs}}catch{A&&A(Vn)}}if(Fe){he=pt.join("&");break e}}he=void 0}return h=h.i.splice(0,b),v.G=h,he}function Zc(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;H||E(),te||(H(),te=!0),N.add(v,h),h.A=0}}function Mr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=ps(y(h.Da,h),nu(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,eu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=ps(y(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tt(10),Ri(this),eu(this))};function rl(h){h.B!=null&&(u.clearTimeout(h.B),h.B=null)}function eu(h){h.g=new Wn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=St(h.na);Ye(v,"RID","rpc"),Ye(v,"SID",h.M),Ye(v,"AID",h.K),Ye(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ye(v,"TO",h.ia),Ye(v,"TYPE","xmlhttp"),Dr(h,v),h.u&&h.o&&kr(v,h.u,h.o),h.O&&(h.g.H=h.O);var b=h.g;h=h.ba,b.M=1,b.A=Cr(St(v)),b.u=null,b.R=!0,wa(b,h)}s.Va=function(){this.C!=null&&(this.C=null,Ri(this),Mr(this),Tt(19))};function Oa(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function tu(h,v){var b=null;if(h.g==v){Oa(h),rl(h),h.g=null;var A=2}else if(Ts(h.h,v))b=v.G,Yo(h.h,v),A=1;else return;if(h.I!=0){if(v.o)if(A==1){b=v.u?v.u.length:0,v=Date.now()-v.F;var G=h.D;A=Ta(),Ot(A,new ms(A,b)),Ns(h)}else Zc(h);else if(G=v.m,G==3||G==0&&v.X>0||!(A==1&&ka(h,v)||A==2&&Mr(h)))switch(b&&b.length>0&&(v=h.h,v.i=v.i.concat(b)),G){case 1:Cs(h,5);break;case 4:Cs(h,10);break;case 3:Cs(h,6);break;default:Cs(h,2)}}}function nu(h,v){let b=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(b*=2),b*v}function Cs(h,v){if(h.j.info("Error code "+v),v==2){var b=y(h.bb,h),A=h.Ua;const G=!A;A=new bn(A||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Lt(A,"https"),Cr(A),G?Zn(A.toString(),b):el(A.toString(),b)}else Tt(2);h.I=0,h.l&&h.l.pa(v),su(h),Ia(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function su(h){if(h.I=0,h.ja=[],h.l){const v=Qo(h.h);(v.length!=0||h.i.length!=0)&&(q(h.ja,v),q(h.ja,h.i),h.h.i.length=0,O(h.i),h.i.length=0),h.l.oa()}}function iu(h,v,b){var A=b instanceof bn?St(b):new bn(b);if(A.g!="")v&&(A.g=v+"."+A.g),Ti(A,A.u);else{var G=u.location;A=G.protocol,v=v?v+"."+G.hostname:G.hostname,G=+G.port;const W=new bn(null);A&&Lt(W,A),v&&(W.g=v),G&&Ti(W,G),b&&(W.h=b),A=W}return b=h.G,v=h.wa,b&&v&&Ye(A,b,v),Ye(A,"VER",h.ka),Dr(h,A),A}function ru(h,v,b){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new We(new Es({ab:b})):new We(h.ma),v.Fa(h.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function au(){}s=au.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Ii(){}Ii.prototype.g=function(h,v){return new sn(h,v)};function sn(h,v){xt.call(this),this.g=new Ci(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!I(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!I(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Ys(this)}T(sn,xt),sn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){sl(this.g)},sn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.v&&(b={},b.__data__=xi(h),h=b);v.i.push(new Et(v.Ya++,h)),v.I==3&&Ns(v)},sn.prototype.N=function(){this.g.l=null,delete this.j,sl(this.g),delete this.g,sn.Z.N.call(this)};function ou(h){Bt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const b in v){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}T(ou,Bt);function lu(){On.call(this),this.status=1}T(lu,On);function Ys(h){this.g=h}T(Ys,au),Ys.prototype.ra=function(){Ot(this.g,"a")},Ys.prototype.qa=function(h){Ot(this.g,new ou(h))},Ys.prototype.pa=function(h){Ot(this.g,new lu)},Ys.prototype.oa=function(){Ot(this.g,"b")},Ii.prototype.createWebChannel=Ii.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,N1=function(){return new Ii},A1=function(){return Ta()},S1=mt,up={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ar.NO_ERROR=0,Ar.TIMEOUT=8,Ar.HTTP_ERROR=6,Ah=Ar,qo.COMPLETE="complete",E1=qo,zc.EventType=Qn,Qn.OPEN="a",Qn.CLOSE="b",Qn.ERROR="c",Qn.MESSAGE="d",xt.prototype.listen=xt.prototype.J,Ql=zc,We.prototype.listenOnce=We.prototype.K,We.prototype.getLastError=We.prototype.Ha,We.prototype.getLastErrorCode=We.prototype.ya,We.prototype.getStatus=We.prototype.ca,We.prototype.getResponseJson=We.prototype.La,We.prototype.getResponseText=We.prototype.la,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Fa,w1=We}).apply(typeof fh<"u"?fh:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oo="12.8.0";function bR(s){Oo=s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa=new rd("@firebase/firestore");function ho(){return oa.logLevel}function me(s,...e){if(oa.logLevel<=Le.DEBUG){const n=e.map(qp);oa.debug(`Firestore (${Oo}): ${s}`,...n)}}function yi(s,...e){if(oa.logLevel<=Le.ERROR){const n=e.map(qp);oa.error(`Firestore (${Oo}): ${s}`,...n)}}function So(s,...e){if(oa.logLevel<=Le.WARN){const n=e.map(qp);oa.warn(`Firestore (${Oo}): ${s}`,...n)}}function qp(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(s,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,C1(s,r,n)}function C1(s,e,n){let r=`FIRESTORE (${Oo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw yi(r),new Error(r)}function $e(s,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,s||C1(e,o,r)}function Ce(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Yn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Jt.UNAUTHENTICATED)))}shutdown(){}}class TR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class wR{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){$e(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let c=new hr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new hr,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new hr)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e(typeof r.accessToken=="string",31837,{l:r}),new R1(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new Jt(e)}}class ER{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class SR{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new ER(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Jt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class nb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Cn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){$e(this.o===void 0,3512);const r=c=>{c.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.m;return this.m=c.token,me("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const o=c=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new nb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?($e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new nb(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=NR(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<n&&(r+=e.charAt(o[c]%62))}return r}}function Pe(s,e){return s<e?-1:s>e?1:0}function hp(s,e){const n=Math.min(s.length,e.length);for(let r=0;r<n;r++){const o=s.charAt(r),c=e.charAt(r);if(o!==c)return Um(o)===Um(c)?Pe(o,c):Um(o)?1:-1}return Pe(s.length,e.length)}const CR=55296,RR=57343;function Um(s){const e=s.charCodeAt(0);return e>=CR&&e<=RR}function Ao(s,e,n){return s.length===e.length&&s.every(((r,o)=>n(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="__name__";class Ms{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ee(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ee(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ms.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ms?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const c=Ms.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Pe(e.length,n.length)}static compareSegments(e,n){const r=Ms.isNumericId(e),o=Ms.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?Ms.extractNumericId(e).compare(Ms.extractNumericId(n)):hp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ur.fromString(e.substring(4,e.length-2))}}class ct extends Ms{construct(e,n,r){return new ct(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ve(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new ct(n)}static emptyPath(){return new ct([])}}const IR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends Ms{construct(e,n,r){return new Yt(e,n,r)}static isValidIdentifier(e){return IR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sb}static keyField(){return new Yt([sb])}static fromServerFormat(e){const n=[];let r="",o=0;const c=()=>{if(r.length===0)throw new ve(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let u=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new ve(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ve(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else p==="`"?(u=!u,o++):p!=="."||u?(r+=p,o++):(c(),o++)}if(c(),u)throw new ve(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yt(n)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(ct.fromString(e))}static fromName(e){return new be(ct.fromString(e).popFirst(5))}static empty(){return new be(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ct.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new ct(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(s,e,n){if(!n)throw new ve(ce.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function OR(s,e,n,r){if(e===!0&&r===!0)throw new ve(ce.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function ib(s){if(!be.isDocumentKey(s))throw new ve(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function I1(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Fp(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ee(12329,{type:typeof s})}function pc(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ve(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fp(s);throw new ve(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(s,e){const n={typeString:s};return e&&(n.value=e),n}function Rc(s,e){if(!I1(s))throw new ve(ce.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const u=s[r];if(o&&typeof u!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(c!==void 0&&u!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new ve(ce.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb=-62135596800,ab=1e6;class rt{static now(){return rt.fromMillis(Date.now())}static fromDate(e){return rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*ab);return new rt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ve(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ve(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<rb)throw new ve(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ab}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Rc(e,rt._jsonSchema))return new rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}rt._jsonSchemaVersion="firestore/timestamp/1.0",rt._jsonSchema={type:kt("string",rt._jsonSchemaVersion),seconds:kt("number"),nanoseconds:kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new rt(0,0))}static max(){return new Ae(new rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=-1;function jR(s,e){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(r===1e9?new rt(n+1,0):new rt(n,r));return new fr(o,be.empty(),e)}function DR(s){return new fr(s.readTime,s.key,gc)}class fr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new fr(Ae.min(),be.empty(),gc)}static max(){return new fr(Ae.max(),be.empty(),gc)}}function MR(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(s.documentKey,e.documentKey),n!==0?n:Pe(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jo(s){if(s.code!==ce.FAILED_PRECONDITION||s.message!==VR)throw s;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe(((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.reject(n)}static resolve(e){return new oe(((n,r)=>{n(e)}))}static reject(e){return new oe(((n,r)=>{r(e)}))}static waitFor(e){return new oe(((n,r)=>{let o=0,c=0,u=!1;e.forEach((p=>{++o,p.next((()=>{++c,u&&c===o&&n()}),(g=>r(g)))})),u=!0,c===o&&n()}))}static or(e){let n=oe.resolve(!1);for(const r of e)n=n.next((o=>o?oe.resolve(o):r()));return n}static forEach(e,n){const r=[];return e.forEach(((o,c)=>{r.push(n.call(this,o,c))})),this.waitFor(r)}static mapArray(e,n){return new oe(((r,o)=>{const c=e.length,u=new Array(c);let p=0;for(let g=0;g<c;g++){const y=g;n(e[y]).next((x=>{u[y]=x,++p,p===c&&r(u)}),(x=>o(x)))}}))}static doWhile(e,n){return new oe(((r,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):r()};c()}))}}function PR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Do(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ud.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp=-1;function hd(s){return s==null}function Bh(s){return s===0&&1/s==-1/0}function UR(s){return typeof s=="number"&&Number.isInteger(s)&&!Bh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="";function zR(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=ob(e)),e=BR(s.get(n),e);return ob(e)}function BR(s,e){let n=e;const r=s.length;for(let o=0;o<r;o++){const c=s.charAt(o);switch(c){case"\0":n+="";break;case k1:n+="";break;default:n+=c}}return n}function ob(s){return s+k1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function pa(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function O1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){this.comparator=e,this.root=n||$t.EMPTY}insert(e,n){return new ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mh(this.root,e,this.comparator,!1)}getReverseIterator(){return new mh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mh(this.root,e,this.comparator,!0)}}class mh{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,n,r,o,c){this.key=e,this.value=n,this.color=r??$t.RED,this.left=o??$t.EMPTY,this.right=c??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,c){return new $t(e??this.key,n??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,r),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return $t.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,n,r,o,c){return this}insert(e,n,r){return new $t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new cb(this.data.getIterator())}getIteratorFrom(e){return new cb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Mt(this.comparator);return n.data=e,n}}class cb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new ls([])}unionWith(e){let n=new Mt(Yt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ls(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ao(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new j1("Invalid base64 string: "+c):c}})(e);return new Qt(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let u=0;u<o.length;++u)c+=String.fromCharCode(o[u]);return c})(e);return new Qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qt.EMPTY_BYTE_STRING=new Qt("");const HR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mr(s){if($e(!!s,39018),typeof s=="string"){let e=0;const n=HR.exec(s);if($e(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vt(s.seconds),nanos:vt(s.nanos)}}function vt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function pr(s){return typeof s=="string"?Qt.fromBase64String(s):Qt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="server_timestamp",M1="__type__",V1="__previous_value__",L1="__local_write_time__";function $p(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[M1])==null?void 0:r.stringValue)===D1}function dd(s){const e=s.mapValue.fields[V1];return $p(e)?dd(e):e}function yc(s){const e=mr(s.mapValue.fields[L1].timestampValue);return new rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,n,r,o,c,u,p,g,y,x,T){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=x,this.apiKey=T}}const Hh="(default)";class vc{constructor(e,n){this.projectId=e,this.database=n||Hh}static empty(){return new vc("","")}get isDefaultDatabase(){return this.database===Hh}isEqual(e){return e instanceof vc&&e.projectId===this.projectId&&e.database===this.database}}function GR(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new ve(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vc(s.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1="__type__",FR="__max__",ph={mapValue:{}},U1="__vector__",qh="value";function gr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?$p(s)?4:$R(s)?9007199254740991:KR(s)?10:11:Ee(28295,{value:s})}function Hs(s,e){if(s===e)return!0;const n=gr(s);if(n!==gr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return yc(s).isEqual(yc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const u=mr(o.timestampValue),p=mr(c.timestampValue);return u.seconds===p.seconds&&u.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,c){return pr(o.bytesValue).isEqual(pr(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,c){return vt(o.geoPointValue.latitude)===vt(c.geoPointValue.latitude)&&vt(o.geoPointValue.longitude)===vt(c.geoPointValue.longitude)})(s,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return vt(o.integerValue)===vt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const u=vt(o.doubleValue),p=vt(c.doubleValue);return u===p?Bh(u)===Bh(p):isNaN(u)&&isNaN(p)}return!1})(s,e);case 9:return Ao(s.arrayValue.values||[],e.arrayValue.values||[],Hs);case 10:case 11:return(function(o,c){const u=o.mapValue.fields||{},p=c.mapValue.fields||{};if(lb(u)!==lb(p))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(p[g]===void 0||!Hs(u[g],p[g])))return!1;return!0})(s,e);default:return Ee(52216,{left:s})}}function _c(s,e){return(s.values||[]).find((n=>Hs(n,e)))!==void 0}function No(s,e){if(s===e)return 0;const n=gr(s),r=gr(e);if(n!==r)return Pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pe(s.booleanValue,e.booleanValue);case 2:return(function(c,u){const p=vt(c.integerValue||c.doubleValue),g=vt(u.integerValue||u.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return ub(s.timestampValue,e.timestampValue);case 4:return ub(yc(s),yc(e));case 5:return hp(s.stringValue,e.stringValue);case 6:return(function(c,u){const p=pr(c),g=pr(u);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(c,u){const p=c.split("/"),g=u.split("/");for(let y=0;y<p.length&&y<g.length;y++){const x=Pe(p[y],g[y]);if(x!==0)return x}return Pe(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,u){const p=Pe(vt(c.latitude),vt(u.latitude));return p!==0?p:Pe(vt(c.longitude),vt(u.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return hb(s.arrayValue,e.arrayValue);case 10:return(function(c,u){var S,O,q,Z;const p=c.fields||{},g=u.fields||{},y=(S=p[qh])==null?void 0:S.arrayValue,x=(O=g[qh])==null?void 0:O.arrayValue,T=Pe(((q=y==null?void 0:y.values)==null?void 0:q.length)||0,((Z=x==null?void 0:x.values)==null?void 0:Z.length)||0);return T!==0?T:hb(y,x)})(s.mapValue,e.mapValue);case 11:return(function(c,u){if(c===ph.mapValue&&u===ph.mapValue)return 0;if(c===ph.mapValue)return 1;if(u===ph.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),y=u.fields||{},x=Object.keys(y);g.sort(),x.sort();for(let T=0;T<g.length&&T<x.length;++T){const S=hp(g[T],x[T]);if(S!==0)return S;const O=No(p[g[T]],y[x[T]]);if(O!==0)return O}return Pe(g.length,x.length)})(s.mapValue,e.mapValue);default:throw Ee(23264,{he:n})}}function ub(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Pe(s,e);const n=mr(s),r=mr(e),o=Pe(n.seconds,r.seconds);return o!==0?o:Pe(n.nanos,r.nanos)}function hb(s,e){const n=s.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const c=No(n[o],r[o]);if(c)return c}return Pe(n.length,r.length)}function Co(s){return dp(s)}function dp(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const r=mr(n);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return pr(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return be.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let r="[",o=!0;for(const c of n.values||[])o?o=!1:r+=",",r+=dp(c);return r+"]"})(s.arrayValue):"mapValue"in s?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const u of r)c?c=!1:o+=",",o+=`${u}:${dp(n.fields[u])}`;return o+"}"})(s.mapValue):Ee(61005,{value:s})}function Nh(s){switch(gr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=dd(s);return e?16+Nh(e):16;case 5:return 2*s.stringValue.length;case 6:return pr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,c)=>o+Nh(c)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return pa(r.fields,((c,u)=>{o+=c.length+Nh(u)})),o})(s.mapValue);default:throw Ee(13486,{value:s})}}function fp(s){return!!s&&"integerValue"in s}function Yp(s){return!!s&&"arrayValue"in s}function db(s){return!!s&&"nullValue"in s}function fb(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Ch(s){return!!s&&"mapValue"in s}function KR(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[P1])==null?void 0:r.stringValue)===U1}function sc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return pa(s.mapValue.fields,((n,r)=>e.mapValue.fields[n]=sc(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sc(s.arrayValue.values[n]);return e}return{...s}}function $R(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===FR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.value=e}static empty(){return new Fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ch(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sc(n)}setAll(e){let n=Yt.emptyPath(),r={},o=[];e.forEach(((u,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,r,o),r={},o=[],n=p.popLast()}u?r[p.lastSegment()]=sc(u):o.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,r,o)}delete(e){const n=this.field(e.popLast());Ch(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];Ch(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){pa(n,((o,c)=>e[o]=c));for(const o of r)delete e[o]}clone(){return new Fn(sc(this.value))}}function z1(s){const e=[];return pa(s.fields,((n,r)=>{const o=new Yt([n]);if(Ch(r)){const c=z1(r.mapValue).fields;if(c.length===0)e.push(o);else for(const u of c)e.push(o.child(u))}else e.push(o)})),new ls(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,n,r,o,c,u,p){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=c,this.data=u,this.documentState=p}static newInvalidDocument(e){return new Zt(e,0,Ae.min(),Ae.min(),Ae.min(),Fn.empty(),0)}static newFoundDocument(e,n,r,o){return new Zt(e,1,n,Ae.min(),r,o,0)}static newNoDocument(e,n){return new Zt(e,2,n,Ae.min(),Ae.min(),Fn.empty(),0)}static newUnknownDocument(e,n){return new Zt(e,3,n,Ae.min(),Ae.min(),Fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n){this.position=e,this.inclusive=n}}function mb(s,e,n){let r=0;for(let o=0;o<s.position.length;o++){const c=e[o],u=s.position[o];if(c.field.isKeyField()?r=be.comparator(be.fromName(u.referenceValue),n.key):r=No(u,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function pb(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Hs(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n="asc"){this.field=e,this.dir=n}}function YR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{}class Dt extends B1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new XR(e,n,r):n==="array-contains"?new ZR(e,r):n==="in"?new eI(e,r):n==="not-in"?new tI(e,r):n==="array-contains-any"?new nI(e,r):new Dt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new WR(e,r):new JR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(No(n,this.value)):n!==null&&gr(this.value)===gr(n)&&this.matchesComparison(No(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qs extends B1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new qs(e,n)}matches(e){return H1(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function H1(s){return s.op==="and"}function q1(s){return QR(s)&&H1(s)}function QR(s){for(const e of s.filters)if(e instanceof qs)return!1;return!0}function mp(s){if(s instanceof Dt)return s.field.canonicalString()+s.op.toString()+Co(s.value);if(q1(s))return s.filters.map((e=>mp(e))).join(",");{const e=s.filters.map((n=>mp(n))).join(",");return`${s.op}(${e})`}}function G1(s,e){return s instanceof Dt?(function(r,o){return o instanceof Dt&&r.op===o.op&&r.field.isEqual(o.field)&&Hs(r.value,o.value)})(s,e):s instanceof qs?(function(r,o){return o instanceof qs&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((c,u,p)=>c&&G1(u,o.filters[p])),!0):!1})(s,e):void Ee(19439)}function F1(s){return s instanceof Dt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Co(n.value)}`})(s):s instanceof qs?(function(n){return n.op.toString()+" {"+n.getFilters().map(F1).join(" ,")+"}"})(s):"Filter"}class XR extends Dt{constructor(e,n,r){super(e,n,r),this.key=be.fromName(r.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class WR extends Dt{constructor(e,n){super(e,"in",n),this.keys=K1("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class JR extends Dt{constructor(e,n){super(e,"not-in",n),this.keys=K1("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function K1(s,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>be.fromName(r.referenceValue)))}class ZR extends Dt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yp(n)&&_c(n.arrayValue,this.value)}}class eI extends Dt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&_c(this.value.arrayValue,n)}}class tI extends Dt{constructor(e,n){super(e,"not-in",n)}matches(e){if(_c(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!_c(this.value.arrayValue,n)}}class nI extends Dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>_c(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,n=null,r=[],o=[],c=null,u=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=u,this.endAt=p,this.Te=null}}function gb(s,e=null,n=[],r=[],o=null,c=null,u=null){return new sI(s,e,n,r,o,c,u)}function Qp(s){const e=Ce(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>mp(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),hd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Co(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Co(r))).join(",")),e.Te=n}return e.Te}function Xp(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!YR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!G1(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!pb(s.startAt,e.startAt)&&pb(s.endAt,e.endAt)}function pp(s){return be.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,n=null,r=[],o=[],c=null,u="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=u,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function iI(s,e,n,r,o,c,u,p){return new fd(s,e,n,r,o,c,u,p)}function Wp(s){return new fd(s)}function yb(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function rI(s){return be.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function aI(s){return s.collectionGroup!==null}function ic(s){const e=Ce(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let p=new Mt(Yt.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Fh(c,r))})),n.has(Yt.keyField().canonicalString())||e.Ie.push(new Fh(Yt.keyField(),r))}return e.Ie}function Us(s){const e=Ce(s);return e.Ee||(e.Ee=oI(e,ic(s))),e.Ee}function oI(s,e){if(s.limitType==="F")return gb(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new Fh(o.field,c)}));const n=s.endAt?new Gh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Gh(s.startAt.position,s.startAt.inclusive):null;return gb(s.path,s.collectionGroup,e,s.filters,s.limit,n,r)}}function gp(s,e,n){return new fd(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function md(s,e){return Xp(Us(s),Us(e))&&s.limitType===e.limitType}function $1(s){return`${Qp(Us(s))}|lt:${s.limitType}`}function fo(s){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>F1(o))).join(", ")}]`),hd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>Co(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>Co(o))).join(",")),`Target(${r})`})(Us(s))}; limitType=${s.limitType})`}function pd(s,e){return e.isFoundDocument()&&(function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):be.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(s,e)&&(function(r,o){for(const c of ic(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0})(s,e)&&(function(r,o){return!(r.startAt&&!(function(u,p,g){const y=mb(u,p,g);return u.inclusive?y<=0:y<0})(r.startAt,ic(r),o)||r.endAt&&!(function(u,p,g){const y=mb(u,p,g);return u.inclusive?y>=0:y>0})(r.endAt,ic(r),o))})(s,e)}function lI(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Y1(s){return(e,n)=>{let r=!1;for(const o of ic(s)){const c=cI(o,e,n);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function cI(s,e,n){const r=s.field.isKeyField()?be.comparator(e.key,n.key):(function(c,u,p){const g=u.data.field(c),y=p.data.field(c);return g!==null&&y!==null?No(g,y):Ee(42886)})(s.field,e,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return Ee(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){pa(this.inner,((n,r)=>{for(const[o,c]of r)e(o,c)}))}isEmpty(){return O1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=new ut(be.comparator);function vi(){return uI}const Q1=new ut(be.comparator);function Xl(...s){let e=Q1;for(const n of s)e=e.insert(n.key,n);return e}function X1(s){let e=Q1;return s.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Zr(){return rc()}function W1(){return rc()}function rc(){return new ga((s=>s.toString()),((s,e)=>s.isEqual(e)))}const hI=new ut(be.comparator),dI=new Mt(be.comparator);function Ue(...s){let e=dI;for(const n of s)e=e.add(n);return e}const fI=new Mt(Pe);function mI(){return fI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bh(e)?"-0":e}}function J1(s){return{integerValue:""+s}}function pI(s,e){return UR(e)?J1(e):Jp(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(){this._=void 0}}function gI(s,e,n){return s instanceof Kh?(function(o,c){const u={fields:{[M1]:{stringValue:D1},[L1]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&$p(c)&&(c=dd(c)),c&&(u.fields[V1]=c),{mapValue:u}})(n,e):s instanceof bc?eT(s,e):s instanceof xc?tT(s,e):(function(o,c){const u=Z1(o,c),p=vb(u)+vb(o.Ae);return fp(u)&&fp(o.Ae)?J1(p):Jp(o.serializer,p)})(s,e)}function yI(s,e,n){return s instanceof bc?eT(s,e):s instanceof xc?tT(s,e):n}function Z1(s,e){return s instanceof $h?(function(r){return fp(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class Kh extends gd{}class bc extends gd{constructor(e){super(),this.elements=e}}function eT(s,e){const n=nT(e);for(const r of s.elements)n.some((o=>Hs(o,r)))||n.push(r);return{arrayValue:{values:n}}}class xc extends gd{constructor(e){super(),this.elements=e}}function tT(s,e){let n=nT(e);for(const r of s.elements)n=n.filter((o=>!Hs(o,r)));return{arrayValue:{values:n}}}class $h extends gd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function vb(s){return vt(s.integerValue||s.doubleValue)}function nT(s){return Yp(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function vI(s,e){return s.field.isEqual(e.field)&&(function(r,o){return r instanceof bc&&o instanceof bc||r instanceof xc&&o instanceof xc?Ao(r.elements,o.elements,Hs):r instanceof $h&&o instanceof $h?Hs(r.Ae,o.Ae):r instanceof Kh&&o instanceof Kh})(s.transform,e.transform)}class _I{constructor(e,n){this.version=e,this.transformResults=n}}class fi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new fi}static exists(e){return new fi(void 0,e)}static updateTime(e){return new fi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class yd{}function sT(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new rT(s.key,fi.none()):new Ic(s.key,s.data,fi.none());{const n=s.data,r=Fn.empty();let o=new Mt(Yt.comparator);for(let c of e.fields)if(!o.has(c)){let u=n.field(c);u===null&&c.length>1&&(c=c.popLast(),u=n.field(c)),u===null?r.delete(c):r.set(c,u),o=o.add(c)}return new ya(s.key,r,new ls(o.toArray()),fi.none())}}function bI(s,e,n){s instanceof Ic?(function(o,c,u){const p=o.value.clone(),g=bb(o.fieldTransforms,c,u.transformResults);p.setAll(g),c.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(s,e,n):s instanceof ya?(function(o,c,u){if(!Rh(o.precondition,c))return void c.convertToUnknownDocument(u.version);const p=bb(o.fieldTransforms,c,u.transformResults),g=c.data;g.setAll(iT(o)),g.setAll(p),c.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(s,e,n):(function(o,c,u){c.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function ac(s,e,n,r){return s instanceof Ic?(function(c,u,p,g){if(!Rh(c.precondition,u))return p;const y=c.value.clone(),x=xb(c.fieldTransforms,g,u);return y.setAll(x),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(s,e,n,r):s instanceof ya?(function(c,u,p,g){if(!Rh(c.precondition,u))return p;const y=xb(c.fieldTransforms,g,u),x=u.data;return x.setAll(iT(c)),x.setAll(y),u.convertToFoundDocument(u.version,x).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((T=>T.field)))})(s,e,n,r):(function(c,u,p){return Rh(c.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):p})(s,e,n)}function xI(s,e){let n=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),c=Z1(r.transform,o||null);c!=null&&(n===null&&(n=Fn.empty()),n.set(r.field,c))}return n||null}function _b(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Ao(r,o,((c,u)=>vI(c,u)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Ic extends yd{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ya extends yd{constructor(e,n,r,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function iT(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=s.data.field(n);e.set(n,r)}})),e}function bb(s,e,n){const r=new Map;$e(s.length===n.length,32656,{Ve:n.length,de:s.length});for(let o=0;o<n.length;o++){const c=s[o],u=c.transform,p=e.data.field(c.field);r.set(c.field,yI(u,p,n[o]))}return r}function xb(s,e,n){const r=new Map;for(const o of s){const c=o.transform,u=n.data.field(o.field);r.set(o.field,gI(c,u,e))}return r}class rT extends yd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TI extends yd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&bI(c,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ac(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ac(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=W1();return this.mutations.forEach((o=>{const c=e.get(o.key),u=c.overlayedDocument;let p=this.applyToLocalView(u,c.mutatedFields);p=n.has(o.key)?null:p;const g=sT(u,p);g!==null&&r.set(o.key,g),u.isValidDocument()||u.convertToNoDocument(Ae.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ue())}isEqual(e){return this.batchId===e.batchId&&Ao(this.mutations,e.mutations,((n,r)=>_b(n,r)))&&Ao(this.baseMutations,e.baseMutations,((n,r)=>_b(n,r)))}}class Zp{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){$e(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return hI})();const c=e.mutations;for(let u=0;u<c.length;u++)o=o.insert(c[u].key,r[u].version);return new Zp(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,He;function AI(s){switch(s){case ce.OK:return Ee(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Ee(15467,{code:s})}}function aT(s){if(s===void 0)return yi("GRPC error has no .code"),ce.UNKNOWN;switch(s){case It.OK:return ce.OK;case It.CANCELLED:return ce.CANCELLED;case It.UNKNOWN:return ce.UNKNOWN;case It.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case It.INTERNAL:return ce.INTERNAL;case It.UNAVAILABLE:return ce.UNAVAILABLE;case It.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case It.NOT_FOUND:return ce.NOT_FOUND;case It.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case It.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case It.ABORTED:return ce.ABORTED;case It.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case It.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case It.DATA_LOSS:return ce.DATA_LOSS;default:return Ee(39323,{code:s})}}(He=It||(It={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI=new ur([4294967295,4294967295],0);function Tb(s){const e=NI().encode(s),n=new T1;return n.update(e),new Uint8Array(n.digest())}function wb(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new ur([n,r],0),new ur([o,c],0)]}class eg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wl(`Invalid padding: ${n}`);if(r<0)throw new Wl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Wl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ur.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(ur.fromNumber(r)));return o.compare(CI)===1&&(o=new ur([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Tb(e),[r,o]=wb(n);for(let c=0;c<this.hashCount;c++){const u=this.ye(r,o,c);if(!this.we(u))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),u=new eg(c,o,n);return r.forEach((p=>u.insert(p))),u}insert(e){if(this.ge===0)return;const n=Tb(e),[r,o]=wb(n);for(let c=0;c<this.hashCount;c++){const u=this.ye(r,o,c);this.be(u)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Wl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,n,r,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,kc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new vd(Ae.min(),o,new ut(Pe),vi(),Ue())}}class kc{constructor(e,n,r,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new kc(r,n,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n,r,o){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=o}}class oT{constructor(e,n){this.targetId=e,this.Ce=n}}class lT{constructor(e,n,r=Qt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class Eb{constructor(){this.ve=0,this.Fe=Sb(),this.Me=Qt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ue(),n=Ue(),r=Ue();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Ee(38017,{changeType:c})}})),new kc(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Sb()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,$e(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class RI{constructor(e){this.Ge=e,this.ze=new Map,this.je=vi(),this.He=gh(),this.Je=gh(),this.Ze=new ut(Pe)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ee(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(pp(c))if(r===0){const u=new be(c.path);this.et(n,u,Zt.newNoDocument(u,Ae.min()))}else $e(r===1,20013,{expectedCount:r});else{const u=this._t(n);if(u!==r){const p=this.ut(e),g=p?this.ct(p,e,u):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=n;let u,p;try{u=pr(r).toUint8Array()}catch(g){if(g instanceof j1)return So("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new eg(u,o,c)}catch(g){return So(g instanceof Wl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((c=>{const u=this.Ge.ht(),p=`projects/${u.projectId}/databases/${u.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,u)=>{const p=this.ot(u);if(p){if(c.current&&pp(p.target)){const g=new be(p.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,Zt.newNoDocument(g,e))}c.Be&&(n.set(u,c.ke()),c.Ke())}}));let r=Ue();this.Je.forEach(((c,u)=>{let p=!0;u.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(c))})),this.je.forEach(((c,u)=>u.setReadTime(e)));const o=new vd(e,n,this.Ze,this.je,r);return this.je=vi(),this.He=gh(),this.Je=gh(),this.Ze=new ut(Pe),o}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Eb,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Mt(Pe),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Mt(Pe),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Eb),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function gh(){return new ut(be.comparator)}function Sb(){return new ut(be.comparator)}const II={asc:"ASCENDING",desc:"DESCENDING"},kI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OI={and:"AND",or:"OR"};class jI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function yp(s,e){return s.useProto3Json||hd(e)?e:{value:e}}function Yh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cT(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function DI(s,e){return Yh(s,e.toTimestamp())}function zs(s){return $e(!!s,49232),Ae.fromTimestamp((function(n){const r=mr(n);return new rt(r.seconds,r.nanos)})(s))}function tg(s,e){return vp(s,e).canonicalString()}function vp(s,e){const n=(function(o){return new ct(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function uT(s){const e=ct.fromString(s);return $e(pT(e),10190,{key:e.toString()}),e}function _p(s,e){return tg(s.databaseId,e.path)}function zm(s,e){const n=uT(e);if(n.get(1)!==s.databaseId.projectId)throw new ve(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new ve(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new be(dT(n))}function hT(s,e){return tg(s.databaseId,e)}function MI(s){const e=uT(s);return e.length===4?ct.emptyPath():dT(e)}function bp(s){return new ct(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function dT(s){return $e(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Ab(s,e,n){return{name:_p(s,e),fields:n.value.mapValue.fields}}function VI(s,e){let n;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ee(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(y,x){return y.useProto3Json?($e(x===void 0||typeof x=="string",58123),Qt.fromBase64String(x||"")):($e(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),Qt.fromUint8Array(x||new Uint8Array))})(s,e.targetChange.resumeToken),u=e.targetChange.cause,p=u&&(function(y){const x=y.code===void 0?ce.UNKNOWN:aT(y.code);return new ve(x,y.message||"")})(u);n=new lT(r,o,c,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=zm(s,r.document.name),c=zs(r.document.updateTime),u=r.document.createTime?zs(r.document.createTime):Ae.min(),p=new Fn({mapValue:{fields:r.document.fields}}),g=Zt.newFoundDocument(o,c,u,p),y=r.targetIds||[],x=r.removedTargetIds||[];n=new Ih(y,x,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=zm(s,r.document),c=r.readTime?zs(r.readTime):Ae.min(),u=Zt.newNoDocument(o,c),p=r.removedTargetIds||[];n=new Ih([],p,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=zm(s,r.document),c=r.removedTargetIds||[];n=new Ih([],c,o,null)}else{if(!("filter"in e))return Ee(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,u=new SI(o,c),p=r.targetId;n=new oT(p,u)}}return n}function LI(s,e){let n;if(e instanceof Ic)n={update:Ab(s,e.key,e.value)};else if(e instanceof rT)n={delete:_p(s,e.key)};else if(e instanceof ya)n={update:Ab(s,e.key,e.data),updateMask:KI(e.fieldMask)};else{if(!(e instanceof TI))return Ee(16599,{dt:e.type});n={verify:_p(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(c,u){const p=u.transform;if(p instanceof Kh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof bc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof xc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof $h)return{fieldPath:u.field.canonicalString(),increment:p.Ae};throw Ee(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:DI(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ee(27497)})(s,e.precondition)),n}function PI(s,e){return s&&s.length>0?($e(e!==void 0,14353),s.map((n=>(function(o,c){let u=o.updateTime?zs(o.updateTime):zs(c);return u.isEqual(Ae.min())&&(u=zs(c)),new _I(u,o.transformResults||[])})(n,e)))):[]}function UI(s,e){return{documents:[hT(s,e.path)]}}function zI(s,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=hT(s,o);const c=(function(y){if(y.length!==0)return mT(qs.create(y,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const u=(function(y){if(y.length!==0)return y.map((x=>(function(S){return{field:mo(S.field),direction:qI(S.dir)}})(x)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const p=yp(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function BI(s){let e=MI(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){$e(r===1,65062);const x=n.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let c=[];n.where&&(c=(function(T){const S=fT(T);return S instanceof qs&&q1(S)?S.getFilters():[S]})(n.where));let u=[];n.orderBy&&(u=(function(T){return T.map((S=>(function(q){return new Fh(po(q.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(S)))})(n.orderBy));let p=null;n.limit&&(p=(function(T){let S;return S=typeof T=="object"?T.value:T,hd(S)?null:S})(n.limit));let g=null;n.startAt&&(g=(function(T){const S=!!T.before,O=T.values||[];return new Gh(O,S)})(n.startAt));let y=null;return n.endAt&&(y=(function(T){const S=!T.before,O=T.values||[];return new Gh(O,S)})(n.endAt)),iI(e,o,u,c,p,"F",g,y)}function HI(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function fT(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=po(n.unaryFilter.field);return Dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=po(n.unaryFilter.field);return Dt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=po(n.unaryFilter.field);return Dt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=po(n.unaryFilter.field);return Dt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Dt.create(po(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return qs.create(n.compositeFilter.filters.map((r=>fT(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(n.compositeFilter.op))})(s):Ee(30097,{filter:s})}function qI(s){return II[s]}function GI(s){return kI[s]}function FI(s){return OI[s]}function mo(s){return{fieldPath:s.canonicalString()}}function po(s){return Yt.fromServerFormat(s.fieldPath)}function mT(s){return s instanceof Dt?(function(n){if(n.op==="=="){if(fb(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NAN"}};if(db(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(fb(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NOT_NAN"}};if(db(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mo(n.field),op:GI(n.op),value:n.value}}})(s):s instanceof qs?(function(n){const r=n.getFilters().map((o=>mT(o)));return r.length===1?r[0]:{compositeFilter:{op:FI(n.op),filters:r}}})(s):Ee(54877,{filter:s})}function KI(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function pT(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function gT(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,n,r,o,c=Ae.min(),u=Ae.min(),p=Qt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new ar(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e){this.yt=e}}function YI(s){const e=BI({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?gp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(){this.Sn=new XI}addToCollectionParentIndex(e,n){return this.Sn.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(fr.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(fr.min())}updateCollectionGroup(e,n,r){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class XI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new Mt(ct.comparator),c=!o.has(r);return this.index[n]=o.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Mt(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yT=41943040;class pn{static withCacheSize(e){return new pn(e,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn.DEFAULT_COLLECTION_PERCENTILE=10,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pn.DEFAULT=new pn(yT,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pn.DISABLED=new pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ro(0)}static ar(){return new Ro(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb="LruGarbageCollector",WI=1048576;function Rb([s,e],[n,r]){const o=Pe(s,n);return o===0?Pe(e,r):o}class JI{constructor(e){this.Pr=e,this.buffer=new Mt(Rb),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Rb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ZI{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){me(Cb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Do(n)?me(Cb,"Ignoring IndexedDB error during garbage collection: ",n):await jo(n)}await this.Ar(3e5)}))}}class e4{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return oe.resolve(ud.ce);const r=new JI(n);return this.Vr.forEachTarget(e,(o=>r.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>r.Er(o))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(Nb)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Nb):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,o,c,u,p,g,y;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,u=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(r=T,p=Date.now(),this.removeTargets(e,r,n)))).next((T=>(c=T,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((T=>(y=Date.now(),ho()<=Le.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-x}ms
	Determined least recently used ${o} in `+(p-u)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${T} documents in `+(y-g)+`ms
Total Duration: ${y-x}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:T}))))}}function t4(s,e){return new e4(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(){this.changes=new ga((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?oe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(r!==null&&ac(r.mutation,o,ls.empty(),rt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Ue()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Ue()){const o=Zr();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,r).next((c=>{let u=Xl();return c.forEach(((p,g)=>{u=u.insert(p,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const r=Zr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Ue())))}populateOverlays(e,n,r){const o=[];return r.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((u,p)=>{n.set(u,p)}))}))}computeViews(e,n,r,o){let c=vi();const u=rc(),p=(function(){return rc()})();return n.forEach(((g,y)=>{const x=r.get(y.key);o.has(y.key)&&(x===void 0||x.mutation instanceof ya)?c=c.insert(y.key,y):x!==void 0?(u.set(y.key,x.mutation.getFieldMask()),ac(x.mutation,y,x.mutation.getFieldMask(),rt.now())):u.set(y.key,ls.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((y,x)=>u.set(y,x))),n.forEach(((y,x)=>p.set(y,new s4(x,u.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const r=rc();let o=new ut(((u,p)=>u-p)),c=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const p of u)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let x=r.get(g)||ls.empty();x=p.applyToLocalView(y,x),r.set(g,x);const T=(o.get(p.batchId)||Ue()).add(g);o=o.insert(p.batchId,T)}))})).next((()=>{const u=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,x=g.value,T=W1();x.forEach((S=>{if(!c.has(S)){const O=sT(n.get(S),r.get(S));O!==null&&T.set(S,O),c=c.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,T))}return oe.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,o){return rI(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):aI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next((c=>{const u=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-c.size):oe.resolve(Zr());let p=gc,g=c;return u.next((y=>oe.forEach(y,((x,T)=>(p<T.largestBatchId&&(p=T.largestBatchId),c.get(x)?oe.resolve():this.remoteDocumentCache.getEntry(e,x).next((S=>{g=g.insert(x,S)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,g,y,Ue()))).next((x=>({batchId:p,changes:X1(x)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next((r=>{let o=Xl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const c=n.collectionGroup;let u=Xl();return this.indexManager.getCollectionParents(e,c).next((p=>oe.forEach(p,(g=>{const y=(function(T,S){return new fd(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,r,o).next((x=>{x.forEach(((T,S)=>{u=u.insert(T,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((u=>(c=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,c,o)))).next((u=>{c.forEach(((g,y)=>{const x=y.getKey();u.get(x)===null&&(u=u.insert(x,Zt.newInvalidDocument(x)))}));let p=Xl();return u.forEach(((g,y)=>{const x=c.get(g);x!==void 0&&ac(x.mutation,y,ls.empty(),rt.now()),pd(n,y)&&(p=p.insert(g,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return oe.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:zs(o.createTime)}})(n)),oe.resolve()}getNamedQuery(e,n){return oe.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:YI(o.bundledQuery),readTime:zs(o.readTime)}})(n)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(){this.overlays=new ut(be.comparator),this.Lr=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zr();return oe.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&r.set(o,c)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((o,c)=>{this.bt(e,n,c)})),oe.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.Lr.get(r);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(r)),oe.resolve()}getOverlaysForCollection(e,n,r){const o=Zr(),c=n.length+1,u=new be(n.child("")),p=this.overlays.getIteratorFrom(u);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>r&&o.set(g.getKey(),g)}return oe.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let c=new ut(((y,x)=>y-x));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>r){let x=c.get(y.largestBatchId);x===null&&(x=Zr(),c=c.insert(y.largestBatchId,x)),x.set(y.getKey(),y)}}const p=Zr(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,x)=>p.set(y,x))),!(p.size()>=o)););return oe.resolve(p)}bt(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const u=this.Lr.get(o.largestBatchId).delete(r.key);this.Lr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new EI(n,r));let c=this.Lr.get(n);c===void 0&&(c=Ue(),this.Lr.set(n,c)),this.Lr.set(n,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(){this.sessionToken=Qt.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(){this.kr=new Mt(Ut.Kr),this.qr=new Mt(Ut.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Ut(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new Ut(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new be(new ct([])),r=new Ut(n,e),o=new Ut(n,e+1),c=[];return this.qr.forEachInRange([r,o],(u=>{this.Wr(u),c.push(u.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new be(new ct([])),r=new Ut(n,e),o=new Ut(n,e+1);let c=Ue();return this.qr.forEachInRange([r,o],(u=>{c=c.add(u.key)})),c}containsKey(e){const n=new Ut(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ut{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return be.comparator(e.key,n.key)||Pe(e.Hr,n.Hr)}static Ur(e,n){return Pe(e.Hr,n.Hr)||be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Mt(Ut.Kr)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new wI(c,n,r,o);this.mutationQueue.push(u);for(const p of o)this.Jr=this.Jr.add(new Ut(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return oe.resolve(u)}lookupMutationBatch(e,n){return oe.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.Xr(r),c=o<0?0:o;return oe.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?Kp:this.Yn-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ut(n,0),o=new Ut(n,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([r,o],(u=>{const p=this.Zr(u.Hr);c.push(p)})),oe.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Mt(Pe);return n.forEach((o=>{const c=new Ut(o,0),u=new Ut(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,u],(p=>{r=r.add(p.Hr)}))})),oe.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let c=r;be.isDocumentKey(c)||(c=c.child(""));const u=new Ut(new be(c),0);let p=new Mt(Pe);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(p=p.add(g.Hr)),!0)}),u),oe.resolve(this.Yr(p))}Yr(e){const n=[];return e.forEach((r=>{const o=this.Zr(r);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){$e(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return oe.forEach(n.mutations,(o=>{const c=new Ut(o.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new Ut(n,0),o=this.Jr.firstAfterOrEqual(r);return oe.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e){this.ti=e,this.docs=(function(){return new ut(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),c=o?o.size:0,u=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return oe.resolve(r?r.document.mutableCopy():Zt.newInvalidDocument(n))}getEntries(e,n){let r=vi();return n.forEach((o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():Zt.newInvalidDocument(o))})),oe.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let c=vi();const u=n.path,p=new be(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:x}}=g.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||MR(DR(x),r)<=0||(o.has(x.key)||pd(n,x))&&(c=c.insert(x.key,x.mutableCopy()))}return oe.resolve(c)}getAllFromCollectionGroup(e,n,r,o){Ee(9500)}ni(e,n){return oe.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new u4(this)}getSize(e){return oe.resolve(this.size)}}class u4 extends n4{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(r)})),oe.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e){this.persistence=e,this.ri=new ga((n=>Qp(n)),Xp),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.ii=0,this.si=new ng,this.targetCount=0,this.oi=Ro._r()}forEachTarget(e,n){return this.ri.forEach(((r,o)=>n(o))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),oe.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Ro(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.lr(n),oe.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,r){let o=0;const c=[];return this.ri.forEach(((u,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.ri.delete(u),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),oe.waitFor(c).next((()=>o))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return oe.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),oe.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((u=>{c.push(o.markPotentiallyOrphaned(e,u))})),oe.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return oe.resolve(r)}containsKey(e,n){return oe.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,n){this._i={},this.overlays={},this.ai=new ud(0),this.ui=!1,this.ui=!0,this.ci=new o4,this.referenceDelegate=e(this),this.li=new h4(this),this.indexManager=new QI,this.remoteDocumentCache=(function(o){return new c4(o)})((r=>this.referenceDelegate.hi(r))),this.serializer=new $I(n),this.Pi=new r4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new a4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new l4(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){me("MemoryPersistence","Starting transaction:",e);const o=new d4(this.ai.next());return this.referenceDelegate.Ti(),r(o).next((c=>this.referenceDelegate.Ii(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ei(e,n){return oe.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class d4 extends LR{constructor(e){super(),this.currentSequenceNumber=e}}class sg{constructor(e){this.persistence=e,this.Ri=new ng,this.Ai=null}static Vi(e){return new sg(e)}get di(){if(this.Ai)return this.Ai;throw Ee(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),oe.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),oe.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.di.add(c.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.di,(r=>{const o=be.fromPath(r);return this.mi(e,o).next((c=>{c||n.removeEntry(o,Ae.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return oe.or([()=>oe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Qh{constructor(e,n){this.persistence=e,this.fi=new ga((r=>zR(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=t4(this,n)}static Vi(e,n){return new Qh(e,n)}Ti(){}Ii(e){return oe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((o=>r+o))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return oe.forEach(this.fi,((r,o)=>this.wr(e,r,o).next((c=>c?oe.resolve():n(o)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ni(e,(u=>this.wr(e,u,n).next((p=>{p||(r++,c.removeEntry(u,Ae.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),oe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),oe.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),oe.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Nh(e.data.value)),n}wr(e,n,r){return oe.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return oe.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=o}static Es(e,n){let r=Ue(),o=Ue();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new ig(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return DS()?8:PR(tn())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const c={result:null};return this.gs(e,n).next((u=>{c.result=u})).next((()=>{if(!c.result)return this.ps(e,n,o,r).next((u=>{c.result=u}))})).next((()=>{if(c.result)return;const u=new f4;return this.ys(e,n,u).next((p=>{if(c.result=p,this.As)return this.ws(e,n,u,p.size)}))})).next((()=>c.result))}ws(e,n,r,o){return r.documentReadCount<this.Vs?(ho()<=Le.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",fo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),oe.resolve()):(ho()<=Le.DEBUG&&me("QueryEngine","Query:",fo(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ds*o?(ho()<=Le.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",fo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Us(n))):oe.resolve())}gs(e,n){if(yb(n))return oe.resolve(null);let r=Us(n);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=gp(n,null,"F"),r=Us(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const u=Ue(...c);return this.fs.getDocuments(e,u).next((p=>this.indexManager.getMinOffset(e,r).next((g=>{const y=this.bs(n,p);return this.Ss(n,y,u,g.readTime)?this.gs(e,gp(n,null,"F")):this.Ds(e,y,n,g)}))))})))))}ps(e,n,r,o){return yb(n)||o.isEqual(Ae.min())?oe.resolve(null):this.fs.getDocuments(e,r).next((c=>{const u=this.bs(n,c);return this.Ss(n,u,r,o)?oe.resolve(null):(ho()<=Le.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),fo(n)),this.Ds(e,u,n,jR(o,gc)).next((p=>p)))}))}bs(e,n){let r=new Mt(Y1(e));return n.forEach(((o,c)=>{pd(e,c)&&(r=r.add(c))})),r}Ss(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}ys(e,n,r){return ho()<=Le.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",fo(n)),this.fs.getDocumentsMatchingQuery(e,n,fr.min(),r)}Ds(e,n,r,o){return this.fs.getDocumentsMatchingQuery(e,r,o).next((c=>(n.forEach((u=>{c=c.insert(u.key,u)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg="LocalStore",p4=3e8;class g4{constructor(e,n,r,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new ut(Pe),this.Fs=new ga((c=>Qp(c)),Xp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new i4(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function y4(s,e,n,r){return new g4(s,e,n,r)}async function _T(s,e){const n=Ce(s);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((c=>(o=c,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((c=>{const u=[],p=[];let g=Ue();for(const y of o){u.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}for(const y of c){p.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}return n.localDocuments.getDocuments(r,g).next((y=>({Ns:y,removedBatchIds:u,addedBatchIds:p})))}))}))}function v4(s,e){const n=Ce(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),c=n.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,x){const T=y.batch,S=T.keys();let O=oe.resolve();return S.forEach((q=>{O=O.next((()=>x.getEntry(g,q))).next((Z=>{const U=y.docVersions.get(q);$e(U!==null,48541),Z.version.compareTo(U)<0&&(T.applyToRemoteDocument(Z,y),Z.isValidDocument()&&(Z.setReadTime(y.commitVersion),x.addEntry(Z)))}))})),O.next((()=>p.mutationQueue.removeMutationBatch(g,T)))})(n,r,e,c).next((()=>c.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let g=Ue();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function bT(s){const e=Ce(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function _4(s,e){const n=Ce(s),r=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const u=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const p=[];e.targetChanges.forEach(((x,T)=>{const S=o.get(T);if(!S)return;p.push(n.li.removeMatchingKeys(c,x.removedDocuments,T).next((()=>n.li.addMatchingKeys(c,x.addedDocuments,T))));let O=S.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(T)!==null?O=O.withResumeToken(Qt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):x.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(x.resumeToken,r)),o=o.insert(T,O),(function(Z,U,X){return Z.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=p4?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0})(S,O,x)&&p.push(n.li.updateTargetData(c,O))}));let g=vi(),y=Ue();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,x))})),p.push(b4(c,u,e.documentUpdates).next((x=>{g=x.Bs,y=x.Ls}))),!r.isEqual(Ae.min())){const x=n.li.getLastRemoteSnapshotVersion(c).next((T=>n.li.setTargetsMetadata(c,c.currentSequenceNumber,r)));p.push(x)}return oe.waitFor(p).next((()=>u.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,y))).next((()=>g))})).then((c=>(n.vs=o,c)))}function b4(s,e,n){let r=Ue(),o=Ue();return n.forEach((c=>r=r.add(c))),e.getEntries(s,r).next((c=>{let u=vi();return n.forEach(((p,g)=>{const y=c.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(Ae.min())?(e.removeEntry(p,g.readTime),u=u.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),u=u.insert(p,g)):me(rg,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Bs:u,Ls:o}}))}function x4(s,e){const n=Ce(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Kp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function T4(s,e){const n=Ce(s);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.li.getTargetData(r,e).next((c=>c?(o=c,oe.resolve(o)):n.li.allocateTargetId(r).next((u=>(o=new ar(e,u,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.vs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function xp(s,e,n){const r=Ce(s),o=r.vs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,(u=>r.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Do(u))throw u;me(rg,`Failed to update sequence numbers for target ${e}: ${u}`)}r.vs=r.vs.remove(e),r.Fs.delete(o.target)}function Ib(s,e,n){const r=Ce(s);let o=Ae.min(),c=Ue();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,y,x){const T=Ce(g),S=T.Fs.get(x);return S!==void 0?oe.resolve(T.vs.get(S)):T.li.getTargetData(y,x)})(r,u,Us(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(u,p.targetId).next((g=>{c=g}))})).next((()=>r.Cs.getDocumentsMatchingQuery(u,e,n?o:Ae.min(),n?c:Ue()))).next((p=>(w4(r,lI(e),p),{documents:p,ks:c})))))}function w4(s,e,n){let r=s.Ms.get(e)||Ae.min();n.forEach(((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),s.Ms.set(e,r)}class kb{constructor(){this.activeTargetIds=mI()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class E4{constructor(){this.vo=new kb,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new kb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="ConnectivityMonitor";class jb{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){me(Ob,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){me(Ob,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yh=null;function Tp(){return yh===null?yh=(function(){return 268435456+Math.round(2147483648*Math.random())})():yh++,"0x"+yh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="RestConnection",A4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class N4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${o}`,this.$o=this.databaseId.database===Hh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Wo(e,n,r,o,c){const u=Tp(),p=this.Qo(e,n.toUriEncodedString());me(Bm,`Sending RPC '${e}' ${u}:`,p,r);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,c);const{host:y}=new URL(p),x=_r(y);return this.zo(e,p,g,r,x).then((T=>(me(Bm,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw So(Bm,`RPC '${e}' ${u} failed with error: `,T,"url: ",p,"request:",r),T}))}jo(e,n,r,o,c,u){return this.Wo(e,n,r,o,c)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Oo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),r&&r.headers.forEach(((o,c)=>e[c]=o))}Qo(e,n){const r=A4[e];let o=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection",Gl=(s,e,n)=>{s.listen(e,(r=>{try{n(r)}catch(o){setTimeout((()=>{throw o}),0)}}))};class xo extends N4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!xo.c_){const e=A1();Gl(e,S1.STAT_EVENT,(n=>{n.stat===up.PROXY?me(Wt,"STAT_EVENT: detected buffering proxy"):n.stat===up.NOPROXY&&me(Wt,"STAT_EVENT: detected no buffering proxy")})),xo.c_=!0}}zo(e,n,r,o,c){const u=Tp();return new Promise(((p,g)=>{const y=new w1;y.setWithCredentials(!0),y.listenOnce(E1.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Ah.NO_ERROR:const T=y.getResponseJson();me(Wt,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),p(T);break;case Ah.TIMEOUT:me(Wt,`RPC '${e}' ${u} timed out`),g(new ve(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Ah.HTTP_ERROR:const S=y.getStatus();if(me(Wt,`RPC '${e}' ${u} failed with status:`,S,"response text:",y.getResponseText()),S>0){let O=y.getResponseJson();Array.isArray(O)&&(O=O[0]);const q=O==null?void 0:O.error;if(q&&q.status&&q.message){const Z=(function(X){const Y=X.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(Y)>=0?Y:ce.UNKNOWN})(q.status);g(new ve(Z,q.message))}else g(new ve(ce.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ve(ce.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{l_:e,streamId:u,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{me(Wt,`RPC '${e}' ${u} completed.`)}}));const x=JSON.stringify(o);me(Wt,`RPC '${e}' ${u} sending request:`,o),y.send(n,"POST",x,r,15)}))}T_(e,n,r){const o=Tp(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,n,r),p.encodeInitMessageHeaders=!0;const y=c.join("");me(Wt,`Creating RPC '${e}' stream ${o}: ${y}`,p);const x=u.createWebChannel(y,p);this.I_(x);let T=!1,S=!1;const O=new C4({Ho:q=>{S?me(Wt,`Not sending because RPC '${e}' stream ${o} is closed:`,q):(T||(me(Wt,`Opening RPC '${e}' stream ${o} transport.`),x.open(),T=!0),me(Wt,`RPC '${e}' stream ${o} sending:`,q),x.send(q))},Jo:()=>x.close()});return Gl(x,Ql.EventType.OPEN,(()=>{S||(me(Wt,`RPC '${e}' stream ${o} transport opened.`),O.i_())})),Gl(x,Ql.EventType.CLOSE,(()=>{S||(S=!0,me(Wt,`RPC '${e}' stream ${o} transport closed`),O.o_(),this.E_(x))})),Gl(x,Ql.EventType.ERROR,(q=>{S||(S=!0,So(Wt,`RPC '${e}' stream ${o} transport errored. Name:`,q.name,"Message:",q.message),O.o_(new ve(ce.UNAVAILABLE,"The operation could not be completed")))})),Gl(x,Ql.EventType.MESSAGE,(q=>{var Z;if(!S){const U=q.data[0];$e(!!U,16349);const X=U,Y=(X==null?void 0:X.error)||((Z=X[0])==null?void 0:Z.error);if(Y){me(Wt,`RPC '${e}' stream ${o} received error:`,Y);const ee=Y.status;let L=(function(N){const E=It[N];if(E!==void 0)return aT(E)})(ee),H=Y.message;L===void 0&&(L=ce.INTERNAL,H="Unknown error status: "+ee+" with message "+Y.message),S=!0,O.o_(new ve(L,H)),x.close()}else me(Wt,`RPC '${e}' stream ${o} received:`,U),O.__(U)}})),xo.u_(),setTimeout((()=>{O.s_()}),0),O}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return N1()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R4(s){return new xo(s)}function Hm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(s){return new jI(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xo.c_=!1;class xT{constructor(e,n,r=1e3,o=1.5,c=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=o,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db="PersistentStream";class TT{constructor(e,n,r,o,c,u,p,g){this.Ci=e,this.b_=r,this.S_=o,this.connection=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new xT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ce.RESOURCE_EXHAUSTED?(yi(n.toString()),yi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{e((()=>{const o=new ve(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(Db,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(me(Db,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class I4 extends TT{constructor(e,n,r,o,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,u),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=VI(this.serializer,e),r=(function(c){if(!("targetChange"in c))return Ae.min();const u=c.targetChange;return u.targetIds&&u.targetIds.length?Ae.min():u.readTime?zs(u.readTime):Ae.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=bp(this.serializer),n.addTarget=(function(c,u){let p;const g=u.target;if(p=pp(g)?{documents:UI(c,g)}:{query:zI(c,g).ft},p.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){p.resumeToken=cT(c,u.resumeToken);const y=yp(c,u.expectedCount);y!==null&&(p.expectedCount=y)}else if(u.snapshotVersion.compareTo(Ae.min())>0){p.readTime=Yh(c,u.snapshotVersion.toTimestamp());const y=yp(c,u.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const r=HI(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=bp(this.serializer),n.removeTarget=e,this.K_(n)}}class k4 extends TT{constructor(e,n,r,o,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,u),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=PI(e.writeResults,e.commitTime),r=zs(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=bp(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>LI(this.serializer,r)))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{}class j4 extends O4{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ve(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Wo(e,vp(n,r),o,c,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ve(ce.UNKNOWN,c.toString())}))}jo(e,n,r,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,p])=>this.connection.jo(e,vp(n,r),o,u,p,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ve(ce.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function D4(s,e,n,r){return new j4(s,e,n,r)}class M4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(yi(n),this.aa=!1):me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="RemoteStore";class V4{constructor(e,n,r,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((u=>{r.enqueueAndForget((async()=>{va(this)&&(me(la,"Restarting streams for network reachability change."),await(async function(g){const y=Ce(g);y.Ea.add(4),await Oc(y),y.Va.set("Unknown"),y.Ea.delete(4),await bd(y)})(this))}))})),this.Va=new M4(r,o)}}async function bd(s){if(va(s))for(const e of s.Ra)await e(!0)}async function Oc(s){for(const e of s.Ra)await e(!1)}function wT(s,e){const n=Ce(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),cg(n)?lg(n):Mo(n).O_()&&og(n,e))}function ag(s,e){const n=Ce(s),r=Mo(n);n.Ia.delete(e),r.O_()&&ET(n,e),n.Ia.size===0&&(r.O_()?r.L_():va(n)&&n.Va.set("Unknown"))}function og(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Mo(s).Z_(e)}function ET(s,e){s.da.$e(e),Mo(s).X_(e)}function lg(s){s.da=new RI({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Mo(s).start(),s.Va.ua()}function cg(s){return va(s)&&!Mo(s).x_()&&s.Ia.size>0}function va(s){return Ce(s).Ea.size===0}function ST(s){s.da=void 0}async function L4(s){s.Va.set("Online")}async function P4(s){s.Ia.forEach(((e,n)=>{og(s,e)}))}async function U4(s,e){ST(s),cg(s)?(s.Va.ha(e),lg(s)):s.Va.set("Unknown")}async function z4(s,e,n){if(s.Va.set("Online"),e instanceof lT&&e.state===2&&e.cause)try{await(async function(o,c){const u=c.cause;for(const p of c.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,u),o.Ia.delete(p),o.da.removeTarget(p))})(s,e)}catch(r){me(la,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xh(s,r)}else if(e instanceof Ih?s.da.Xe(e):e instanceof oT?s.da.st(e):s.da.tt(e),!n.isEqual(Ae.min()))try{const r=await bT(s.localStore);n.compareTo(r)>=0&&await(function(c,u){const p=c.da.Tt(u);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const x=c.Ia.get(y);x&&c.Ia.set(y,x.withResumeToken(g.resumeToken,u))}})),p.targetMismatches.forEach(((g,y)=>{const x=c.Ia.get(g);if(!x)return;c.Ia.set(g,x.withResumeToken(Qt.EMPTY_BYTE_STRING,x.snapshotVersion)),ET(c,g);const T=new ar(x.target,g,y,x.sequenceNumber);og(c,T)})),c.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(r){me(la,"Failed to raise snapshot:",r),await Xh(s,r)}}async function Xh(s,e,n){if(!Do(e))throw e;s.Ea.add(1),await Oc(s),s.Va.set("Offline"),n||(n=()=>bT(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{me(la,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await bd(s)}))}function AT(s,e){return e().catch((n=>Xh(s,n,e)))}async function xd(s){const e=Ce(s),n=yr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Kp;for(;B4(e);)try{const o=await x4(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,H4(e,o)}catch(o){await Xh(e,o)}NT(e)&&CT(e)}function B4(s){return va(s)&&s.Ta.length<10}function H4(s,e){s.Ta.push(e);const n=yr(s);n.O_()&&n.Y_&&n.ea(e.mutations)}function NT(s){return va(s)&&!yr(s).x_()&&s.Ta.length>0}function CT(s){yr(s).start()}async function q4(s){yr(s).ra()}async function G4(s){const e=yr(s);for(const n of s.Ta)e.ea(n.mutations)}async function F4(s,e,n){const r=s.Ta.shift(),o=Zp.from(r,e,n);await AT(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await xd(s)}async function K4(s,e){e&&yr(s).Y_&&await(async function(r,o){if((function(u){return AI(u)&&u!==ce.ABORTED})(o.code)){const c=r.Ta.shift();yr(r).B_(),await AT(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o))),await xd(r)}})(s,e),NT(s)&&CT(s)}async function Mb(s,e){const n=Ce(s);n.asyncQueue.verifyOperationInProgress(),me(la,"RemoteStore received new credentials");const r=va(n);n.Ea.add(3),await Oc(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await bd(n)}async function $4(s,e){const n=Ce(s);e?(n.Ea.delete(2),await bd(n)):e||(n.Ea.add(2),await Oc(n),n.Va.set("Unknown"))}function Mo(s){return s.ma||(s.ma=(function(n,r,o){const c=Ce(n);return c.sa(),new I4(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Zo:L4.bind(null,s),Yo:P4.bind(null,s),t_:U4.bind(null,s),J_:z4.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),cg(s)?lg(s):s.Va.set("Unknown")):(await s.ma.stop(),ST(s))}))),s.ma}function yr(s){return s.fa||(s.fa=(function(n,r,o){const c=Ce(n);return c.sa(),new k4(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:q4.bind(null,s),t_:K4.bind(null,s),ta:G4.bind(null,s),na:F4.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await xd(s)):(await s.fa.stop(),s.Ta.length>0&&(me(la,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,n,r,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,c){const u=Date.now()+r,p=new ug(e,n,u,o,c);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hg(s,e){if(yi("AsyncQueue",`${e}: ${s}`),Do(s))return new ve(ce.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{static emptySet(e){return new To(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||be.comparator(n.key,r.key):(n,r)=>be.comparator(n.key,r.key),this.keyedMap=Xl(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof To)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new To;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(){this.ga=new ut(be.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ee(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Io{constructor(e,n,r,o,c,u,p,g,y){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,r,o,c){const u=[];return n.forEach((p=>{u.push({type:0,doc:p})})),new Io(e,n,To.emptySet(n),u,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&md(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class Q4{constructor(){this.queries=Lb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=Ce(n),c=o.queries;o.queries=Lb(),c.forEach(((u,p)=>{for(const g of p.ba)g.onError(r)}))})(this,new ve(ce.ABORTED,"Firestore shutting down"))}}function Lb(){return new ga((s=>$1(s)),md)}async function X4(s,e){const n=Ce(s);let r=3;const o=e.query;let c=n.queries.get(o);c?!c.Sa()&&e.Da()&&(r=2):(c=new Y4,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(u){const p=hg(u,`Initialization of query '${fo(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,c),c.ba.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&dg(n)}async function W4(s,e){const n=Ce(s),r=e.query;let o=3;const c=n.queries.get(r);if(c){const u=c.ba.indexOf(e);u>=0&&(c.ba.splice(u,1),c.ba.length===0?o=e.Da()?0:1:!c.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function J4(s,e){const n=Ce(s);let r=!1;for(const o of e){const c=o.query,u=n.queries.get(c);if(u){for(const p of u.ba)p.Fa(o)&&(r=!0);u.wa=o}}r&&dg(n)}function Z4(s,e,n){const r=Ce(s),o=r.queries.get(e);if(o)for(const c of o.ba)c.onError(n);r.queries.delete(e)}function dg(s){s.Ca.forEach((e=>{e.next()}))}var wp,Pb;(Pb=wp||(wp={})).Ma="default",Pb.Cache="cache";class ek{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Io(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Io.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==wp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e){this.key=e}}class IT{constructor(e){this.key=e}}class tk{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ue(),this.mutatedKeys=Ue(),this.eu=Y1(e),this.tu=new To(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new Vb,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,u=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((x,T)=>{const S=o.get(x),O=pd(this.query,T)?T:null,q=!!S&&this.mutatedKeys.has(S.key),Z=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let U=!1;S&&O?S.data.isEqual(O.data)?q!==Z&&(r.track({type:3,doc:O}),U=!0):this.su(S,O)||(r.track({type:2,doc:O}),U=!0,(g&&this.eu(O,g)>0||y&&this.eu(O,y)<0)&&(p=!0)):!S&&O?(r.track({type:0,doc:O}),U=!0):S&&!O&&(r.track({type:1,doc:S}),U=!0,(g||y)&&(p=!0)),U&&(O?(u=u.add(O),c=Z?c.add(x):c.delete(x)):(u=u.delete(x),c=c.delete(x)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const x=this.query.limitType==="F"?u.last():u.first();u=u.delete(x.key),c=c.delete(x.key),r.track({type:1,doc:x})}return{tu:u,iu:r,Ss:p,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((x,T)=>(function(O,q){const Z=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Vt:U})}};return Z(O)-Z(q)})(x.type,T.type)||this.eu(x.doc,T.doc))),this.ou(r),o=o??!1;const p=n&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,y=g!==this.Xa;return this.Xa=g,u.length!==0||y?{snapshot:new Io(this.query,e.tu,c,u,e.mutatedKeys,g===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Vb,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Ue(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new IT(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new RT(r))})),n}cu(e){this.Za=e.ks,this.Ya=Ue();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Io.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const fg="SyncEngine";class nk{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class sk{constructor(e){this.key=e,this.hu=!1}}class ik{constructor(e,n,r,o,c,u){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new ga((p=>$1(p)),md),this.Iu=new Map,this.Eu=new Set,this.Ru=new ut(be.comparator),this.Au=new Map,this.Vu=new ng,this.du={},this.mu=new Map,this.fu=Ro.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rk(s,e,n=!0){const r=VT(s);let o;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await kT(r,e,n,!0),o}async function ak(s,e){const n=VT(s);await kT(n,e,!0,!1)}async function kT(s,e,n,r){const o=await T4(s.localStore,Us(e)),c=o.targetId,u=s.sharedClientState.addLocalQueryTarget(c,n);let p;return r&&(p=await ok(s,e,c,u==="current",o.resumeToken)),s.isPrimaryClient&&n&&wT(s.remoteStore,o),p}async function ok(s,e,n,r,o){s.pu=(T,S,O)=>(async function(Z,U,X,Y){let ee=U.view.ru(X);ee.Ss&&(ee=await Ib(Z.localStore,U.query,!1).then((({documents:N})=>U.view.ru(N,ee))));const L=Y&&Y.targetChanges.get(U.targetId),H=Y&&Y.targetMismatches.get(U.targetId)!=null,te=U.view.applyChanges(ee,Z.isPrimaryClient,L,H);return zb(Z,U.targetId,te.au),te.snapshot})(s,T,S,O);const c=await Ib(s.localStore,e,!0),u=new tk(e,c.ks),p=u.ru(c.documents),g=kc.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",o),y=u.applyChanges(p,s.isPrimaryClient,g);zb(s,n,y.au);const x=new nk(e,n,u);return s.Tu.set(e,x),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),y.snapshot}async function lk(s,e,n){const r=Ce(s),o=r.Tu.get(e),c=r.Iu.get(o.targetId);if(c.length>1)return r.Iu.set(o.targetId,c.filter((u=>!md(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await xp(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&ag(r.remoteStore,o.targetId),Ep(r,o.targetId)})).catch(jo)):(Ep(r,o.targetId),await xp(r.localStore,o.targetId,!0))}async function ck(s,e){const n=Ce(s),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ag(n.remoteStore,r.targetId))}async function uk(s,e,n){const r=yk(s);try{const o=await(function(u,p){const g=Ce(u),y=rt.now(),x=p.reduce(((O,q)=>O.add(q.key)),Ue());let T,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let q=vi(),Z=Ue();return g.xs.getEntries(O,x).next((U=>{q=U,q.forEach(((X,Y)=>{Y.isValidDocument()||(Z=Z.add(X))}))})).next((()=>g.localDocuments.getOverlayedDocuments(O,q))).next((U=>{T=U;const X=[];for(const Y of p){const ee=xI(Y,T.get(Y.key).overlayedDocument);ee!=null&&X.push(new ya(Y.key,ee,z1(ee.value.mapValue),fi.exists(!0)))}return g.mutationQueue.addMutationBatch(O,y,X,p)})).next((U=>{S=U;const X=U.applyToLocalDocumentSet(T,Z);return g.documentOverlayCache.saveOverlays(O,U.batchId,X)}))})).then((()=>({batchId:S.batchId,changes:X1(T)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(u,p,g){let y=u.du[u.currentUser.toKey()];y||(y=new ut(Pe)),y=y.insert(p,g),u.du[u.currentUser.toKey()]=y})(r,o.batchId,n),await jc(r,o.changes),await xd(r.remoteStore)}catch(o){const c=hg(o,"Failed to persist write");n.reject(c)}}async function OT(s,e){const n=Ce(s);try{const r=await _4(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const u=n.Au.get(c);u&&($e(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?$e(u.hu,14607):o.removedDocuments.size>0&&($e(u.hu,42227),u.hu=!1))})),await jc(n,r,e)}catch(r){await jo(r)}}function Ub(s,e,n){const r=Ce(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((c,u)=>{const p=u.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(u,p){const g=Ce(u);g.onlineState=p;let y=!1;g.queries.forEach(((x,T)=>{for(const S of T.ba)S.va(p)&&(y=!0)})),y&&dg(g)})(r.eventManager,e),o.length&&r.Pu.J_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function hk(s,e,n){const r=Ce(s);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),c=o&&o.key;if(c){let u=new ut(be.comparator);u=u.insert(c,Zt.newNoDocument(c,Ae.min()));const p=Ue().add(c),g=new vd(Ae.min(),new Map,new ut(Pe),u,p);await OT(r,g),r.Ru=r.Ru.remove(c),r.Au.delete(e),mg(r)}else await xp(r.localStore,e,!1).then((()=>Ep(r,e,n))).catch(jo)}async function dk(s,e){const n=Ce(s),r=e.batch.batchId;try{const o=await v4(n.localStore,e);DT(n,r,null),jT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await jc(n,o)}catch(o){await jo(o)}}async function fk(s,e,n){const r=Ce(s);try{const o=await(function(u,p){const g=Ce(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let x;return g.mutationQueue.lookupMutationBatch(y,p).next((T=>($e(T!==null,37113),x=T.keys(),g.mutationQueue.removeMutationBatch(y,T)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,x,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,x))).next((()=>g.localDocuments.getDocuments(y,x)))}))})(r.localStore,e);DT(r,e,n),jT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await jc(r,o)}catch(o){await jo(o)}}function jT(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function DT(s,e,n){const r=Ce(s);let o=r.du[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),r.du[r.currentUser.toKey()]=o}}function Ep(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((r=>{s.Vu.containsKey(r)||MT(s,r)}))}function MT(s,e){s.Eu.delete(e.path.canonicalString());const n=s.Ru.get(e);n!==null&&(ag(s.remoteStore,n),s.Ru=s.Ru.remove(e),s.Au.delete(n),mg(s))}function zb(s,e,n){for(const r of n)r instanceof RT?(s.Vu.addReference(r.key,e),mk(s,r)):r instanceof IT?(me(fg,"Document no longer in limbo: "+r.key),s.Vu.removeReference(r.key,e),s.Vu.containsKey(r.key)||MT(s,r.key)):Ee(19791,{wu:r})}function mk(s,e){const n=e.key,r=n.path.canonicalString();s.Ru.get(n)||s.Eu.has(r)||(me(fg,"New document in limbo: "+n),s.Eu.add(r),mg(s))}function mg(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new be(ct.fromString(e)),r=s.fu.next();s.Au.set(r,new sk(n)),s.Ru=s.Ru.insert(n,r),wT(s.remoteStore,new ar(Us(Wp(n.path)),r,"TargetPurposeLimboResolution",ud.ce))}}async function jc(s,e,n){const r=Ce(s),o=[],c=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,g)=>{u.push(r.pu(g,e,n).then((y=>{var x;if((y||n)&&r.isPrimaryClient){const T=y?!y.fromCache:(x=n==null?void 0:n.targetChanges.get(g.targetId))==null?void 0:x.current;r.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(y){o.push(y);const T=ig.Es(g.targetId,y);c.push(T)}})))})),await Promise.all(u),r.Pu.J_(o),await(async function(g,y){const x=Ce(g);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>oe.forEach(y,(S=>oe.forEach(S.Ts,(O=>x.persistence.referenceDelegate.addReference(T,S.targetId,O))).next((()=>oe.forEach(S.Is,(O=>x.persistence.referenceDelegate.removeReference(T,S.targetId,O)))))))))}catch(T){if(!Do(T))throw T;me(rg,"Failed to update sequence numbers: "+T)}for(const T of y){const S=T.targetId;if(!T.fromCache){const O=x.vs.get(S),q=O.snapshotVersion,Z=O.withLastLimboFreeSnapshotVersion(q);x.vs=x.vs.insert(S,Z)}}})(r.localStore,c))}async function pk(s,e){const n=Ce(s);if(!n.currentUser.isEqual(e)){me(fg,"User change. New user:",e.toKey());const r=await _T(n.localStore,e);n.currentUser=e,(function(c,u){c.mu.forEach((p=>{p.forEach((g=>{g.reject(new ve(ce.CANCELLED,u))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await jc(n,r.Ns)}}function gk(s,e){const n=Ce(s),r=n.Au.get(e);if(r&&r.hu)return Ue().add(r.key);{let o=Ue();const c=n.Iu.get(e);if(!c)return o;for(const u of c){const p=n.Tu.get(u);o=o.unionWith(p.view.nu)}return o}}function VT(s){const e=Ce(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=OT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hk.bind(null,e),e.Pu.J_=J4.bind(null,e.eventManager),e.Pu.yu=Z4.bind(null,e.eventManager),e}function yk(s){const e=Ce(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fk.bind(null,e),e}class Wh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_d(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return y4(this.persistence,new m4,e.initialUser,this.serializer)}Cu(e){return new vT(sg.Vi,this.serializer)}Du(e){return new E4}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wh.provider={build:()=>new Wh};class vk extends Wh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){$e(this.persistence.referenceDelegate instanceof Qh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ZI(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?pn.withCacheSize(this.cacheSizeBytes):pn.DEFAULT;return new vT((r=>Qh.Vi(r,n)),this.serializer)}}class Sp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ub(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=pk.bind(null,this.syncEngine),await $4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Q4})()}createDatastore(e){const n=_d(e.databaseInfo.databaseId),r=R4(e.databaseInfo);return D4(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,o,c,u,p){return new V4(r,o,c,u,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>Ub(this.syncEngine,n,0)),(function(){return jb.v()?new jb:new S4})())}createSyncEngine(e,n){return(function(o,c,u,p,g,y,x){const T=new ik(o,c,u,p,g,y);return x&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const c=Ce(o);me(la,"RemoteStore shutting down."),c.Ea.add(5),await Oc(c),c.Aa.shutdown(),c.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Sp.provider={build:()=>new Sp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):yi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr="FirestoreClient";class bk{constructor(e,n,r,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=o,this.user=Jt.UNAUTHENTICATED,this.clientId=Gp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async u=>{me(vr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(me(vr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=hg(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function qm(s,e){s.asyncQueue.verifyOperationInProgress(),me(vr,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let r=n.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await _T(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Bb(s,e){s.asyncQueue.verifyOperationInProgress();const n=await xk(s);me(vr,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((r=>Mb(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>Mb(e.remoteStore,o))),s._onlineComponents=e}async function xk(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){me(vr,"Using user provided OfflineComponentProvider");try{await qm(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ce.FAILED_PRECONDITION||o.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;So("Error using user provided cache. Falling back to memory cache: "+n),await qm(s,new Wh)}}else me(vr,"Using default OfflineComponentProvider"),await qm(s,new vk(void 0));return s._offlineComponents}async function LT(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(me(vr,"Using user provided OnlineComponentProvider"),await Bb(s,s._uninitializedComponentsProvider._online)):(me(vr,"Using default OnlineComponentProvider"),await Bb(s,new Sp))),s._onlineComponents}function Tk(s){return LT(s).then((e=>e.syncEngine))}async function wk(s){const e=await LT(s),n=e.eventManager;return n.onListen=rk.bind(null,e.syncEngine),n.onUnlisten=lk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ak.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ck.bind(null,e.syncEngine),n}function Ek(s,e,n={}){const r=new hr;return s.asyncQueue.enqueueAndForget((async()=>(function(c,u,p,g,y){const x=new _k({next:S=>{x.Nu(),u.enqueueAndForget((()=>W4(c,T)));const O=S.docs.has(p);!O&&S.fromCache?y.reject(new ve(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&S.fromCache&&g&&g.source==="server"?y.reject(new ve(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),T=new ek(Wp(p.path),x,{includeMetadataChanges:!0,Ka:!0});return X4(c,T)})(await wk(s),s.asyncQueue,e,n,r))),r.promise}function Sk(s,e){const n=new hr;return s.asyncQueue.enqueueAndForget((async()=>uk(await Tk(s),e,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak="ComponentProvider",Hb=new Map;function Nk(s,e,n,r,o){return new qR(s,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,PT(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="firestore.googleapis.com",qb=!0;class Gb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=UT,this.ssl=qb}else this.host=e.host,this.ssl=e.ssl??qb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=yT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<WI)throw new ve(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ve(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ve(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ve(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pg{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new xR;switch(r.type){case"firstParty":return new SR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ve(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Hb.get(n);r&&(me(Ak,"Removing Datastore"),Hb.delete(n),r.terminate())})(this),Promise.resolve()}}function Ck(s,e,n,r={}){var y;s=pc(s,pg);const o=_r(e),c=s._getSettings(),u={...c,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;o&&(Op(`https://${p}`),jp("Firestore",!0)),c.host!==UT&&c.host!==p&&So("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:p,ssl:o,emulatorOptions:r};if(!dr(g,u)&&(s._setSettings(g),r.mockUserToken)){let x,T;if(typeof r.mockUserToken=="string")x=r.mockUserToken,T=Jt.MOCK_USER;else{x=Ox(r.mockUserToken,(y=s._app)==null?void 0:y.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new ve(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Jt(S)}s._authCredentials=new TR(new R1(x,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new gg(this.firestore,e,this._query)}}class zt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zt(this.firestore,e,this._key)}toJSON(){return{type:zt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Rc(n,zt._jsonSchema))return new zt(e,r||null,new be(ct.fromString(n.referencePath)))}}zt._jsonSchemaVersion="firestore/documentReference/1.0",zt._jsonSchema={type:kt("string",zt._jsonSchemaVersion),referencePath:kt("string")};class Tc extends gg{constructor(e,n,r){super(e,n,Wp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zt(this.firestore,null,new be(e))}withConverter(e){return new Tc(this.firestore,e,this._path)}}function oc(s,e,...n){if(s=_t(s),arguments.length===1&&(e=Gp.newId()),kR("doc","path",e),s instanceof pg){const r=ct.fromString(e,...n);return ib(r),new zt(s,null,new be(r))}{if(!(s instanceof zt||s instanceof Tc))throw new ve(ce.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ct.fromString(e,...n));return ib(r),new zt(s.firestore,s instanceof Tc?s.converter:null,new be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb="AsyncQueue";class Kb{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new xT(this,"async_queue_retry"),this._c=()=>{const r=Hm();r&&me(Fb,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Hm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Hm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new hr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Do(e))throw e;me(Fb,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,yi("INTERNAL UNHANDLED ERROR: ",$b(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=ug.createAndSchedule(this,e,n,r,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Ee(47125,{Pc:$b(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function $b(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class yg extends pg{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new Kb,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Kb(e),this._firestoreClient=void 0,await e}}}function Rk(s,e){const n=typeof s=="object"?s:ad(),r=typeof s=="string"?s:Hh,o=br(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=Rx("firestore");c&&Ck(o,...c)}return o}function zT(s){if(s._terminated)throw new ve(ce.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||Ik(s),s._firestoreClient}function Ik(s){var r,o,c,u;const e=s._freezeSettings(),n=Nk(s._databaseId,((r=s._app)==null?void 0:r.options.appId)||"",s._persistenceKey,(o=s._app)==null?void 0:o.options.apiKey,e);s._componentsProvider||(c=e.localCache)!=null&&c._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new bk(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(g){const y=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(y),_online:y}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kn(Qt.fromBase64String(e))}catch(n){throw new ve(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Kn(Qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Rc(e,Kn._jsonSchema))return Kn.fromBase64String(e.bytes)}}Kn._jsonSchemaVersion="firestore/bytes/1.0",Kn._jsonSchema={type:kt("string",Kn._jsonSchemaVersion),bytes:kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ve(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ve(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ve(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bs._jsonSchemaVersion}}static fromJSON(e){if(Rc(e,Bs._jsonSchema))return new Bs(e.latitude,e.longitude)}}Bs._jsonSchemaVersion="firestore/geoPoint/1.0",Bs._jsonSchema={type:kt("string",Bs._jsonSchemaVersion),latitude:kt("number"),longitude:kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:cs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Rc(e,cs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new cs(e.vectorValues);throw new ve(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}cs._jsonSchemaVersion="firestore/vectorValue/1.0",cs._jsonSchema={type:kt("string",cs._jsonSchemaVersion),vectorValues:kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=/^__.*__$/;class Ok{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ya(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ic(e,this.data,n,this.fieldTransforms)}}function qT(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{dataSource:s})}}class vg{constructor(e,n,r,o,c,u){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new vg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Jh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(qT(this.dataSource)&&kk.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class jk{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||_d(e)}createContext(e,n,r,o=!1){return new vg({dataSource:e,methodName:n,targetDoc:r,path:Yt.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dk(s){const e=s._freezeSettings(),n=_d(s._databaseId);return new jk(s._databaseId,!!e.ignoreUndefinedProperties,n)}function Mk(s,e,n,r,o,c={}){const u=s.createContext(c.merge||c.mergeFields?2:0,e,n,o);$T("Data must be an object, but it was:",u,r);const p=FT(r,u);let g,y;if(c.merge)g=new ls(u.fieldMask),y=u.fieldTransforms;else if(c.mergeFields){const x=[];for(const T of c.mergeFields){const S=_g(e,T,n);if(!u.contains(S))throw new ve(ce.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);Pk(x,S)||x.push(S)}g=new ls(x),y=u.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,y=u.fieldTransforms;return new Ok(new Fn(p),g,y)}function GT(s,e){if(KT(s=_t(s)))return $T("Unsupported field value:",e,s),FT(s,e);if(s instanceof HT)return(function(r,o){if(!qT(o.dataSource))throw o.createError(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,o){const c=[];let u=0;for(const p of r){let g=GT(p,o.childContextForArray(u));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),u++}return{arrayValue:{values:c}}})(s,e)}return(function(r,o){if((r=_t(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return pI(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=rt.fromDate(r);return{timestampValue:Yh(o.serializer,c)}}if(r instanceof rt){const c=new rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yh(o.serializer,c)}}if(r instanceof Bs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Kn)return{bytesValue:cT(o.serializer,r._byteString)};if(r instanceof zt){const c=o.databaseId,u=r.firestore._databaseId;if(!u.isEqual(c))throw o.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:tg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof cs)return(function(u,p){const g=u instanceof cs?u.toArray():u;return{mapValue:{fields:{[P1]:{stringValue:U1},[qh]:{arrayValue:{values:g.map((x=>{if(typeof x!="number")throw p.createError("VectorValues must only contain numeric values.");return Jp(p.serializer,x)}))}}}}}})(r,o);if(gT(r))return r._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Fp(r)}`)})(s,e)}function FT(s,e){const n={};return O1(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pa(s,((r,o)=>{const c=GT(o,e.childContextForField(r));c!=null&&(n[r]=c)})),{mapValue:{fields:n}}}function KT(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof rt||s instanceof Bs||s instanceof Kn||s instanceof zt||s instanceof HT||s instanceof cs||gT(s))}function $T(s,e,n){if(!KT(n)||!I1(n)){const r=Fp(n);throw r==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+r)}}function _g(s,e,n){if((e=_t(e))instanceof BT)return e._internalPath;if(typeof e=="string")return Lk(s,e);throw Jh("Field path arguments must be of type string or ",s,!1,void 0,n)}const Vk=new RegExp("[~\\*/\\[\\]]");function Lk(s,e,n){if(e.search(Vk)>=0)throw Jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new BT(...e.split("."))._internalPath}catch{throw Jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Jh(s,e,n,r,o){const c=r&&!r.isEmpty(),u=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||u)&&(g+=" (found",c&&(g+=` in field ${r}`),u&&(g+=` in document ${o}`),g+=")"),new ve(ce.INVALID_ARGUMENT,p+s+g)}function Pk(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{convertValue(e,n="none"){switch(gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(pr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return pa(e,((o,c)=>{r[o]=this.convertValue(c,n)})),r}convertVectorValue(e){var r,o,c;const n=(c=(o=(r=e.fields)==null?void 0:r[qh].arrayValue)==null?void 0:o.values)==null?void 0:c.map((u=>vt(u.doubleValue)));return new cs(n)}convertGeoPoint(e){return new Bs(vt(e.latitude),vt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=dd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(yc(e));default:return null}}convertTimestamp(e){const n=mr(e);return new rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ct.fromString(e);$e(pT(r),9688,{name:e});const o=new vc(r.get(1),r.get(3)),c=new be(r.popFirst(5));return o.isEqual(n)||yi(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk extends Uk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new zt(this.firestore,null,n)}}const Yb="@firebase/firestore",Qb="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,n,r,o,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Bk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(_g("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Bk extends YT{data(){return super.data()}}function Hk(s,e,n){let r;return r=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,r}class Jl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class na extends YT{constructor(e,n,r,o,c,u){super(e,n,r,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new kh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(_g("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=na._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}na._jsonSchemaVersion="firestore/documentSnapshot/1.0",na._jsonSchema={type:kt("string",na._jsonSchemaVersion),bundleSource:kt("string","DocumentSnapshot"),bundleName:kt("string"),bundle:kt("string")};class kh extends na{data(e={}){return super.data(e)}}class lc{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Jl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new kh(this._firestore,this._userDataWriter,r.key,r,new Jl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ve(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((p=>{const g=new kh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Jl(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const g=new kh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Jl(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,x=-1;return p.type!==0&&(y=u.indexOf(p.doc.key),u=u.delete(p.doc.key)),p.type!==1&&(u=u.add(p.doc),x=u.indexOf(p.doc.key)),{type:qk(p.type),doc:g,oldIndex:y,newIndex:x}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=lc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function qk(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:s})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lc._jsonSchemaVersion="firestore/querySnapshot/1.0",lc._jsonSchema={type:kt("string",lc._jsonSchemaVersion),bundleSource:kt("string","QuerySnapshot"),bundleName:kt("string"),bundle:kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(s){s=pc(s,zt);const e=pc(s.firestore,yg),n=zT(e);return Ek(n,s._key).then((r=>Fk(e,s,r)))}function QT(s,e,n){s=pc(s,zt);const r=pc(s.firestore,yg),o=Hk(s.converter,e,n),c=Dk(r);return Gk(r,[Mk(c,"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,fi.none())])}function Gk(s,e){const n=zT(s);return Sk(n,e)}function Fk(s,e,n){const r=n.docs.get(e._key),o=new zk(s);return new na(s,o,e._key,r,new Jl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){bR(ma),us(new $n("firestore",((r,{instanceIdentifier:o,options:c})=>{const u=r.getProvider("app").getImmediate(),p=new yg(new wR(r.getProvider("auth-internal")),new AR(u,r.getProvider("app-check-internal")),GR(u,o),u);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),yn(Yb,Qb,e),yn(Yb,Qb,"esm2020")})();var Kk="firebase",$k="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yn(Kk,$k,"app");const XT="@firebase/installations",bg="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT=1e4,JT=`w:${bg}`,ZT="FIS_v2",Yk="https://firebaseinstallations.googleapis.com/v1",Qk=3600*1e3,Xk="installations",Wk="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ca=new fa(Xk,Wk,Jk);function ew(s){return s instanceof Yn&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw({projectId:s}){return`${Yk}/projects/${s}/installations`}function nw(s){return{token:s.token,requestStatus:2,expiresIn:eO(s.expiresIn),creationTime:Date.now()}}async function sw(s,e){const r=(await e.json()).error;return ca.create("request-failed",{requestName:s,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function iw({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function Zk(s,{refreshToken:e}){const n=iw(s);return n.append("Authorization",tO(e)),n}async function rw(s){const e=await s();return e.status>=500&&e.status<600?s():e}function eO(s){return Number(s.replace("s","000"))}function tO(s){return`${ZT} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nO({appConfig:s,heartbeatServiceProvider:e},{fid:n}){const r=tw(s),o=iw(s),c=e.getImmediate({optional:!0});if(c){const y=await c.getHeartbeatsHeader();y&&o.append("x-firebase-client",y)}const u={fid:n,authVersion:ZT,appId:s.appId,sdkVersion:JT},p={method:"POST",headers:o,body:JSON.stringify(u)},g=await rw(()=>fetch(r,p));if(g.ok){const y=await g.json();return{fid:y.fid||n,registrationStatus:2,refreshToken:y.refreshToken,authToken:nw(y.authToken)}}else throw await sw("Create Installation",g)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(s){return new Promise(e=>{setTimeout(e,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO=/^[cdef][\w-]{21}$/,Np="";function rO(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const n=aO(s);return iO.test(n)?n:Np}catch{return Np}}function aO(s){return sO(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow=new Map;function lw(s,e){const n=Td(s);cw(n,e),oO(n,e)}function cw(s,e){const n=ow.get(s);if(n)for(const r of n)r(e)}function oO(s,e){const n=lO();n&&n.postMessage({key:s,fid:e}),cO()}let ea=null;function lO(){return!ea&&"BroadcastChannel"in self&&(ea=new BroadcastChannel("[Firebase] FID Change"),ea.onmessage=s=>{cw(s.data.key,s.data.fid)}),ea}function cO(){ow.size===0&&ea&&(ea.close(),ea=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO="firebase-installations-database",hO=1,ua="firebase-installations-store";let Gm=null;function xg(){return Gm||(Gm=Px(uO,hO,{upgrade:(s,e)=>{switch(e){case 0:s.createObjectStore(ua)}}})),Gm}async function Zh(s,e){const n=Td(s),o=(await xg()).transaction(ua,"readwrite"),c=o.objectStore(ua),u=await c.get(n);return await c.put(e,n),await o.done,(!u||u.fid!==e.fid)&&lw(s,e.fid),e}async function uw(s){const e=Td(s),r=(await xg()).transaction(ua,"readwrite");await r.objectStore(ua).delete(e),await r.done}async function wd(s,e){const n=Td(s),o=(await xg()).transaction(ua,"readwrite"),c=o.objectStore(ua),u=await c.get(n),p=e(u);return p===void 0?await c.delete(n):await c.put(p,n),await o.done,p&&(!u||u.fid!==p.fid)&&lw(s,p.fid),p}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tg(s){let e;const n=await wd(s.appConfig,r=>{const o=dO(r),c=fO(s,o);return e=c.registrationPromise,c.installationEntry});return n.fid===Np?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function dO(s){const e=s||{fid:rO(),registrationStatus:0};return hw(e)}function fO(s,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(ca.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=mO(s,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:pO(s)}:{installationEntry:e}}async function mO(s,e){try{const n=await nO(s,e);return Zh(s.appConfig,n)}catch(n){throw ew(n)&&n.customData.serverCode===409?await uw(s.appConfig):await Zh(s.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function pO(s){let e=await Xb(s.appConfig);for(;e.registrationStatus===1;)await aw(100),e=await Xb(s.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Tg(s);return r||n}return e}function Xb(s){return wd(s,e=>{if(!e)throw ca.create("installation-not-found");return hw(e)})}function hw(s){return gO(s)?{fid:s.fid,registrationStatus:0}:s}function gO(s){return s.registrationStatus===1&&s.registrationTime+WT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yO({appConfig:s,heartbeatServiceProvider:e},n){const r=vO(s,n),o=Zk(s,n),c=e.getImmediate({optional:!0});if(c){const y=await c.getHeartbeatsHeader();y&&o.append("x-firebase-client",y)}const u={installation:{sdkVersion:JT,appId:s.appId}},p={method:"POST",headers:o,body:JSON.stringify(u)},g=await rw(()=>fetch(r,p));if(g.ok){const y=await g.json();return nw(y)}else throw await sw("Generate Auth Token",g)}function vO(s,{fid:e}){return`${tw(s)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wg(s,e=!1){let n;const r=await wd(s.appConfig,c=>{if(!dw(c))throw ca.create("not-registered");const u=c.authToken;if(!e&&xO(u))return c;if(u.requestStatus===1)return n=_O(s,e),c;{if(!navigator.onLine)throw ca.create("app-offline");const p=wO(c);return n=bO(s,p),p}});return n?await n:r.authToken}async function _O(s,e){let n=await Wb(s.appConfig);for(;n.authToken.requestStatus===1;)await aw(100),n=await Wb(s.appConfig);const r=n.authToken;return r.requestStatus===0?wg(s,e):r}function Wb(s){return wd(s,e=>{if(!dw(e))throw ca.create("not-registered");const n=e.authToken;return EO(n)?{...e,authToken:{requestStatus:0}}:e})}async function bO(s,e){try{const n=await yO(s,e),r={...e,authToken:n};return await Zh(s.appConfig,r),n}catch(n){if(ew(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await uw(s.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Zh(s.appConfig,r)}throw n}}function dw(s){return s!==void 0&&s.registrationStatus===2}function xO(s){return s.requestStatus===2&&!TO(s)}function TO(s){const e=Date.now();return e<s.creationTime||s.creationTime+s.expiresIn<e+Qk}function wO(s){const e={requestStatus:1,requestTime:Date.now()};return{...s,authToken:e}}function EO(s){return s.requestStatus===1&&s.requestTime+WT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SO(s){const e=s,{installationEntry:n,registrationPromise:r}=await Tg(e);return r?r.catch(console.error):wg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AO(s,e=!1){const n=s;return await NO(n),(await wg(n,e)).token}async function NO(s){const{registrationPromise:e}=await Tg(s);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(s){if(!s||!s.options)throw Fm("App Configuration");if(!s.name)throw Fm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!s.options[n])throw Fm(n);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function Fm(s){return ca.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="installations",RO="installations-internal",IO=s=>{const e=s.getProvider("app").getImmediate(),n=CO(e),r=br(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},kO=s=>{const e=s.getProvider("app").getImmediate(),n=br(e,fw).getImmediate();return{getId:()=>SO(n),getToken:o=>AO(n,o)}};function OO(){us(new $n(fw,IO,"PUBLIC")),us(new $n(RO,kO,"PRIVATE"))}OO();yn(XT,bg);yn(XT,bg,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed="analytics",jO="firebase_id",DO="origin",MO=60*1e3,VO="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Eg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on=new rd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},In=new fa("analytics","Analytics",LO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(s){if(!s.startsWith(Eg)){const e=In.create("invalid-gtag-resource",{gtagURL:s});return on.warn(e.message),""}return s}function mw(s){return Promise.all(s.map(e=>e.catch(n=>n)))}function UO(s,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(s,e)),n}function zO(s,e){const n=UO("firebase-js-sdk-policy",{createScriptURL:PO}),r=document.createElement("script"),o=`${Eg}?l=${s}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function BO(s){let e=[];return Array.isArray(window[s])?e=window[s]:window[s]=e,e}async function HO(s,e,n,r,o,c){const u=r[o];try{if(u)await e[u];else{const g=(await mw(n)).find(y=>y.measurementId===o);g&&await e[g.appId]}}catch(p){on.error(p)}s("config",o,c)}async function qO(s,e,n,r,o){try{let c=[];if(o&&o.send_to){let u=o.send_to;Array.isArray(u)||(u=[u]);const p=await mw(n);for(const g of u){const y=p.find(T=>T.measurementId===g),x=y&&e[y.appId];if(x)c.push(x);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),s("event",r,o||{})}catch(c){on.error(c)}}function GO(s,e,n,r){async function o(c,...u){try{if(c==="event"){const[p,g]=u;await qO(s,e,n,p,g)}else if(c==="config"){const[p,g]=u;await HO(s,e,n,r,p,g)}else if(c==="consent"){const[p,g]=u;s("consent",p,g)}else if(c==="get"){const[p,g,y]=u;s("get",p,g,y)}else if(c==="set"){const[p]=u;s("set",p)}else s(c,...u)}catch(p){on.error(p)}}return o}function FO(s,e,n,r,o){let c=function(...u){window[r].push(arguments)};return window[o]&&typeof window[o]=="function"&&(c=window[o]),window[o]=GO(c,s,e,n),{gtagCore:c,wrappedGtag:window[o]}}function KO(s){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Eg)&&n.src.includes(s))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=30,YO=1e3;class QO{constructor(e={},n=YO){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const pw=new QO;function XO(s){return new Headers({Accept:"application/json","x-goog-api-key":s})}async function WO(s){var u;const{appId:e,apiKey:n}=s,r={method:"GET",headers:XO(n)},o=VO.replace("{app-id}",e),c=await fetch(o,r);if(c.status!==200&&c.status!==304){let p="";try{const g=await c.json();(u=g.error)!=null&&u.message&&(p=g.error.message)}catch{}throw In.create("config-fetch-failed",{httpStatus:c.status,responseMessage:p})}return c.json()}async function JO(s,e=pw,n){const{appId:r,apiKey:o,measurementId:c}=s.options;if(!r)throw In.create("no-app-id");if(!o){if(c)return{measurementId:c,appId:r};throw In.create("no-api-key")}const u=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},p=new tj;return setTimeout(async()=>{p.abort()},MO),gw({appId:r,apiKey:o,measurementId:c},u,p,e)}async function gw(s,{throttleEndTimeMillis:e,backoffCount:n},r,o=pw){var p;const{appId:c,measurementId:u}=s;try{await ZO(r,e)}catch(g){if(u)return on.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:c,measurementId:u};throw g}try{const g=await WO(s);return o.deleteThrottleMetadata(c),g}catch(g){const y=g;if(!ej(y)){if(o.deleteThrottleMetadata(c),u)return on.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${y==null?void 0:y.message}]`),{appId:c,measurementId:u};throw g}const x=Number((p=y==null?void 0:y.customData)==null?void 0:p.httpStatus)===503?N_(n,o.intervalMillis,$O):N_(n,o.intervalMillis),T={throttleEndTimeMillis:Date.now()+x,backoffCount:n+1};return o.setThrottleMetadata(c,T),on.debug(`Calling attemptFetch again in ${x} millis`),gw(s,T,r,o)}}function ZO(s,e){return new Promise((n,r)=>{const o=Math.max(e-Date.now(),0),c=setTimeout(n,o);s.addEventListener(()=>{clearTimeout(c),r(In.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function ej(s){if(!(s instanceof Yn)||!s.customData)return!1;const e=Number(s.customData.httpStatus);return e===429||e===500||e===503||e===504}class tj{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function nj(s,e,n,r,o){if(o&&o.global){s("event",n,r);return}else{const c=await e,u={...r,send_to:c};s("event",n,u)}}async function sj(s,e,n,r){if(r&&r.global){const o={};for(const c of Object.keys(n))o[`user_properties.${c}`]=n[c];return s("set",o),Promise.resolve()}else{const o=await e;s("config",o,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ij(){if(Dx())try{await Mx()}catch(s){return on.warn(In.create("indexeddb-unavailable",{errorInfo:s==null?void 0:s.toString()}).message),!1}else return on.warn(In.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function rj(s,e,n,r,o,c,u){const p=JO(s);p.then(S=>{n[S.measurementId]=S.appId,s.options.measurementId&&S.measurementId!==s.options.measurementId&&on.warn(`The measurement ID in the local Firebase config (${s.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>on.error(S)),e.push(p);const g=ij().then(S=>{if(S)return r.getId()}),[y,x]=await Promise.all([p,g]);KO(c)||zO(c,y.measurementId),o("js",new Date);const T=(u==null?void 0:u.config)??{};return T[DO]="firebase",T.update=!0,x!=null&&(T[jO]=x),o("config",y.measurementId,T),y.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e){this.app=e}_delete(){return delete wo[this.app.options.appId],Promise.resolve()}}let wo={},Jb=[];const Zb={};let Km="dataLayer",oj="gtag",ex,Sg,tx=!1;function lj(){const s=[];if(jx()&&s.push("This is a browser extension environment."),MS()||s.push("Cookies are not available."),s.length>0){const e=s.map((r,o)=>`(${o+1}) ${r}`).join(" "),n=In.create("invalid-analytics-context",{errorInfo:e});on.warn(n.message)}}function cj(s,e,n){lj();const r=s.options.appId;if(!r)throw In.create("no-app-id");if(!s.options.apiKey)if(s.options.measurementId)on.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${s.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw In.create("no-api-key");if(wo[r]!=null)throw In.create("already-exists",{id:r});if(!tx){BO(Km);const{wrappedGtag:c,gtagCore:u}=FO(wo,Jb,Zb,Km,oj);Sg=c,ex=u,tx=!0}return wo[r]=rj(s,Jb,Zb,e,ex,Km,n),new aj(s)}function uj(s=ad()){s=_t(s);const e=br(s,ed);return e.isInitialized()?e.getImmediate():hj(s)}function hj(s,e={}){const n=br(s,ed);if(n.isInitialized()){const o=n.getImmediate();if(dr(e,n.getOptions()))return o;throw In.create("already-initialized")}return n.initialize({options:e})}function dj(s,e,n){s=_t(s),sj(Sg,wo[s.app.options.appId],e,n).catch(r=>on.error(r))}function fj(s,e,n,r){s=_t(s),nj(Sg,wo[s.app.options.appId],e,n,r).catch(o=>on.error(o))}const nx="@firebase/analytics",sx="0.10.19";function mj(){us(new $n(ed,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return cj(r,o,n)},"PUBLIC")),us(new $n("analytics-internal",s,"PRIVATE")),yn(nx,sx),yn(nx,sx,"esm2020");function s(e){try{const n=e.getProvider(ed).getImmediate();return{logEvent:(r,o,c)=>fj(n,r,o,c),setUserProperties:(r,o)=>dj(n,r,o)}}catch(n){throw In.create("interop-component-reg-failed",{reason:n})}}}mj();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="firebasestorage.googleapis.com",vw="storageBucket",pj=120*1e3,gj=600*1e3,yj=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht extends Yn{constructor(e,n,r=0){super($m(e),`Firebase Storage: ${n} (${$m(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ht.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return $m(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var at;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(at||(at={}));function $m(s){return"storage/"+s}function Ag(){const s="An unknown error occurred, please check the error payload for server response.";return new ht(at.UNKNOWN,s)}function vj(s){return new ht(at.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function _j(s){return new ht(at.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function bj(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ht(at.UNAUTHENTICATED,s)}function xj(){return new ht(at.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Tj(s){return new ht(at.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function _w(){return new ht(at.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bw(){return new ht(at.CANCELED,"User canceled the upload/download.")}function wj(s){return new ht(at.INVALID_URL,"Invalid URL '"+s+"'.")}function Ej(s){return new ht(at.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function Sj(){return new ht(at.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+vw+"' property when initializing the app?")}function xw(){return new ht(at.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Aj(){return new ht(at.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Nj(){return new ht(at.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Cj(s){return new ht(at.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Cp(s){return new ht(at.INVALID_ARGUMENT,s)}function Tw(){return new ht(at.APP_DELETED,"The Firebase app was deleted.")}function Rj(s){return new ht(at.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function cc(s,e){return new ht(at.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function Fl(s){throw new ht(at.INTERNAL_ERROR,"Internal error: "+s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Rn.makeFromUrl(e,n)}catch{return new Rn(e,"")}if(r.path==="")return r;throw Ej(e)}static makeFromUrl(e,n){let r=null;const o="([A-Za-z0-9.\\-_]+)";function c(L){L.path.charAt(L.path.length-1)==="/"&&(L.path_=L.path_.slice(0,-1))}const u="(/(.*))?$",p=new RegExp("^gs://"+o+u,"i"),g={bucket:1,path:3};function y(L){L.path_=decodeURIComponent(L.path)}const x="v[A-Za-z0-9_]+",T=n.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",O=new RegExp(`^https?://${T}/${x}/b/${o}/o${S}`,"i"),q={bucket:1,path:3},Z=n===yw?"(?:storage.googleapis.com|storage.cloud.google.com)":n,U="([^?#]*)",X=new RegExp(`^https?://${Z}/${o}/${U}`,"i"),ee=[{regex:p,indices:g,postModify:c},{regex:O,indices:q,postModify:y},{regex:X,indices:{bucket:1,path:2},postModify:y}];for(let L=0;L<ee.length;L++){const H=ee[L],te=H.regex.exec(e);if(te){const N=te[H.indices.bucket];let E=te[H.indices.path];E||(E=""),r=new Rn(N,E),H.postModify(r);break}}if(r==null)throw wj(e);return r}}class Ij{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kj(s,e,n){let r=1,o=null,c=null,u=!1,p=0;function g(){return p===2}let y=!1;function x(...U){y||(y=!0,e.apply(null,U))}function T(U){o=setTimeout(()=>{o=null,s(O,g())},U)}function S(){c&&clearTimeout(c)}function O(U,...X){if(y){S();return}if(U){S(),x.call(null,U,...X);return}if(g()||u){S(),x.call(null,U,...X);return}r<64&&(r*=2);let ee;p===1?(p=2,ee=0):ee=(r+Math.random())*1e3,T(ee)}let q=!1;function Z(U){q||(q=!0,S(),!y&&(o!==null?(U||(p=2),clearTimeout(o),T(0)):U||(p=1)))}return T(0),c=setTimeout(()=>{u=!0,Z(!0)},n),Z}function Oj(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jj(s){return s!==void 0}function Dj(s){return typeof s=="function"}function Mj(s){return typeof s=="object"&&!Array.isArray(s)}function Ed(s){return typeof s=="string"||s instanceof String}function ix(s){return Ng()&&s instanceof Blob}function Ng(){return typeof Blob<"u"}function rx(s,e,n,r){if(r<e)throw Cp(`Invalid value for '${s}'. Expected ${e} or greater.`);if(r>n)throw Cp(`Invalid value for '${s}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(s,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${s}`}function ww(s){const e=encodeURIComponent;let n="?";for(const r in s)if(s.hasOwnProperty(r)){const o=e(r)+"="+e(s[r]);n=n+o+"&"}return n=n.slice(0,-1),n}var sa;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(sa||(sa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(s,e){const n=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,c=e.indexOf(s)!==-1;return n||o||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e,n,r,o,c,u,p,g,y,x,T,S=!0,O=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=u,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=x,this.connectionFactory_=T,this.retry=S,this.isUsingEmulator=O,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((q,Z)=>{this.resolve_=q,this.reject_=Z,this.start_()})}start_(){const e=(r,o)=>{if(o){r(!1,new vh(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const u=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&c.addUploadProgressListener(u),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(u),this.pendingConnection_=null;const p=c.getErrorCode()===sa.NO_ERROR,g=c.getStatus();if(!p||Ew(g,this.additionalRetryCodes_)&&this.retry){const x=c.getErrorCode()===sa.ABORT;r(!1,new vh(!1,null,x));return}const y=this.successCodes_.indexOf(g)!==-1;r(!0,new vh(y,c))})},n=(r,o)=>{const c=this.resolve_,u=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());jj(g)?c(g):c()}catch(g){u(g)}else if(p!==null){const g=Ag();g.serverResponse=p.getErrorText(),this.errorCallback_?u(this.errorCallback_(p,g)):u(g)}else if(o.canceled){const g=this.appDelete_?Tw():bw();u(g)}else{const g=_w();u(g)}};this.canceled_?n(!1,new vh(!1,null,!0)):this.backoffId_=kj(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Oj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class vh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Lj(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function Pj(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Uj(s,e){e&&(s["X-Firebase-GMPID"]=e)}function zj(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function Bj(s,e,n,r,o,c,u=!0,p=!1){const g=ww(s.urlParams),y=s.url+g,x=Object.assign({},s.headers);return Uj(x,e),Lj(x,n),Pj(x,c),zj(x,r),new Vj(y,s.method,x,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,u,p)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function qj(...s){const e=Hj();if(e!==void 0){const n=new e;for(let r=0;r<s.length;r++)n.append(s[r]);return n.getBlob()}else{if(Ng())return new Blob(s);throw new ht(at.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Gj(s,e,n){return s.webkitSlice?s.webkitSlice(e,n):s.mozSlice?s.mozSlice(e,n):s.slice?s.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(s){if(typeof atob>"u")throw Cj("base-64");return atob(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ym{constructor(e,n){this.data=e,this.contentType=n||null}}function Kj(s,e){switch(s){case Vs.RAW:return new Ym(Sw(e));case Vs.BASE64:case Vs.BASE64URL:return new Ym(Aw(s,e));case Vs.DATA_URL:return new Ym(Yj(e),Qj(e))}throw Ag()}function Sw(s){const e=[];for(let n=0;n<s.length;n++){let r=s.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const c=r,u=s.charCodeAt(++n);r=65536|(c&1023)<<10|u&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function $j(s){let e;try{e=decodeURIComponent(s)}catch{throw cc(Vs.DATA_URL,"Malformed data URL.")}return Sw(e)}function Aw(s,e){switch(s){case Vs.BASE64:{const o=e.indexOf("-")!==-1,c=e.indexOf("_")!==-1;if(o||c)throw cc(s,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Vs.BASE64URL:{const o=e.indexOf("+")!==-1,c=e.indexOf("/")!==-1;if(o||c)throw cc(s,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Fj(e)}catch(o){throw o.message.includes("polyfill")?o:cc(s,"Invalid character found")}const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}class Nw{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw cc(Vs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Xj(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Yj(s){const e=new Nw(s);return e.base64?Aw(Vs.BASE64,e.rest):$j(e.rest)}function Qj(s){return new Nw(s).contentType}function Xj(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n){let r=0,o="";ix(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,n){if(ix(this.data_)){const r=this.data_,o=Gj(r,e,n);return o===null?null:new rr(o)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new rr(r,!0)}}static getBlob(...e){if(Ng()){const n=e.map(r=>r instanceof rr?r.data_:r);return new rr(qj.apply(null,n))}else{const n=e.map(u=>Ed(u)?Kj(Vs.RAW,u).data:u.data_);let r=0;n.forEach(u=>{r+=u.byteLength});const o=new Uint8Array(r);let c=0;return n.forEach(u=>{for(let p=0;p<u.length;p++)o[c++]=u[p]}),new rr(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(s){let e;try{e=JSON.parse(s)}catch{return null}return Mj(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function Jj(s,e){const n=e.split("/").filter(r=>r.length>0).join("/");return s.length===0?n:s+"/"+n}function Rw(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zj(s,e){return e}class an{constructor(e,n,r,o){this.server=e,this.local=n||e,this.writable=!!r,this.xform=o||Zj}}let _h=null;function eD(s){return!Ed(s)||s.length<2?s:Rw(s)}function Iw(){if(_h)return _h;const s=[];s.push(new an("bucket")),s.push(new an("generation")),s.push(new an("metageneration")),s.push(new an("name","fullPath",!0));function e(c,u){return eD(u)}const n=new an("name");n.xform=e,s.push(n);function r(c,u){return u!==void 0?Number(u):u}const o=new an("size");return o.xform=r,s.push(o),s.push(new an("timeCreated")),s.push(new an("updated")),s.push(new an("md5Hash",null,!0)),s.push(new an("cacheControl",null,!0)),s.push(new an("contentDisposition",null,!0)),s.push(new an("contentEncoding",null,!0)),s.push(new an("contentLanguage",null,!0)),s.push(new an("contentType",null,!0)),s.push(new an("metadata","customMetadata",!0)),_h=s,_h}function tD(s,e){function n(){const r=s.bucket,o=s.fullPath,c=new Rn(r,o);return e._makeStorageReference(c)}Object.defineProperty(s,"ref",{get:n})}function nD(s,e,n){const r={};r.type="file";const o=n.length;for(let c=0;c<o;c++){const u=n[c];r[u.local]=u.xform(r,e[u.server])}return tD(r,s),r}function kw(s,e,n){const r=Cw(e);return r===null?null:nD(s,r,n)}function sD(s,e,n,r){const o=Cw(e);if(o===null||!Ed(o.downloadTokens))return null;const c=o.downloadTokens;if(c.length===0)return null;const u=encodeURIComponent;return c.split(",").map(y=>{const x=s.bucket,T=s.fullPath,S="/b/"+u(x)+"/o/"+u(T),O=Dc(S,n,r),q=ww({alt:"media",token:y});return O+q})[0]}function Ow(s,e){const n={},r=e.length;for(let o=0;o<r;o++){const c=e[o];c.writable&&(n[c.server]=s[c.local])}return JSON.stringify(n)}class Vo{constructor(e,n,r,o){this.url=e,this.method=n,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(s){if(!s)throw Ag()}function Cg(s,e){function n(r,o){const c=kw(s,o,e);return mi(c!==null),c}return n}function iD(s,e){function n(r,o){const c=kw(s,o,e);return mi(c!==null),sD(c,o,s.host,s._protocol)}return n}function Mc(s){function e(n,r){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=xj():o=bj():n.getStatus()===402?o=_j(s.bucket):n.getStatus()===403?o=Tj(s.path):o=r,o.status=n.getStatus(),o.serverResponse=r.serverResponse,o}return e}function jw(s){const e=Mc(s);function n(r,o){let c=e(r,o);return r.getStatus()===404&&(c=vj(s.path)),c.serverResponse=o.serverResponse,c}return n}function rD(s,e,n){const r=e.fullServerUrl(),o=Dc(r,s.host,s._protocol),c="GET",u=s.maxOperationRetryTime,p=new Vo(o,c,Cg(s,n),u);return p.errorHandler=jw(e),p}function aD(s,e,n){const r=e.fullServerUrl(),o=Dc(r,s.host,s._protocol),c="GET",u=s.maxOperationRetryTime,p=new Vo(o,c,iD(s,n),u);return p.errorHandler=jw(e),p}function oD(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function Dw(s,e,n){const r=Object.assign({},n);return r.fullPath=s.path,r.size=e.size(),r.contentType||(r.contentType=oD(null,e)),r}function lD(s,e,n,r,o){const c=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function p(){let ee="";for(let L=0;L<2;L++)ee=ee+Math.random().toString().slice(2);return ee}const g=p();u["Content-Type"]="multipart/related; boundary="+g;const y=Dw(e,r,o),x=Ow(y,n),T="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+x+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,S=`\r
--`+g+"--",O=rr.getBlob(T,r,S);if(O===null)throw xw();const q={name:y.fullPath},Z=Dc(c,s.host,s._protocol),U="POST",X=s.maxUploadRetryTime,Y=new Vo(Z,U,Cg(s,n),X);return Y.urlParams=q,Y.headers=u,Y.body=O.uploadData(),Y.errorHandler=Mc(e),Y}class td{constructor(e,n,r,o){this.current=e,this.total=n,this.finalized=!!r,this.metadata=o||null}}function Rg(s,e){let n=null;try{n=s.getResponseHeader("X-Goog-Upload-Status")}catch{mi(!1)}return mi(!!n&&(e||["active"]).indexOf(n)!==-1),n}function cD(s,e,n,r,o){const c=e.bucketOnlyServerUrl(),u=Dw(e,r,o),p={name:u.fullPath},g=Dc(c,s.host,s._protocol),y="POST",x={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},T=Ow(u,n),S=s.maxUploadRetryTime;function O(Z){Rg(Z);let U;try{U=Z.getResponseHeader("X-Goog-Upload-URL")}catch{mi(!1)}return mi(Ed(U)),U}const q=new Vo(g,y,O,S);return q.urlParams=p,q.headers=x,q.body=T,q.errorHandler=Mc(e),q}function uD(s,e,n,r){const o={"X-Goog-Upload-Command":"query"};function c(y){const x=Rg(y,["active","final"]);let T=null;try{T=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{mi(!1)}T||mi(!1);const S=Number(T);return mi(!isNaN(S)),new td(S,r.size(),x==="final")}const u="POST",p=s.maxUploadRetryTime,g=new Vo(n,u,c,p);return g.headers=o,g.errorHandler=Mc(e),g}const ax=256*1024;function hD(s,e,n,r,o,c,u,p){const g=new td(0,0);if(u?(g.current=u.current,g.total=u.total):(g.current=0,g.total=r.size()),r.size()!==g.total)throw Aj();const y=g.total-g.current;let x=y;o>0&&(x=Math.min(x,o));const T=g.current,S=T+x;let O="";x===0?O="finalize":y===x?O="upload, finalize":O="upload";const q={"X-Goog-Upload-Command":O,"X-Goog-Upload-Offset":`${g.current}`},Z=r.slice(T,S);if(Z===null)throw xw();function U(L,H){const te=Rg(L,["active","final"]),N=g.current+x,E=r.size();let C;return te==="final"?C=Cg(e,c)(L,H):C=null,new td(N,E,te==="final",C)}const X="POST",Y=e.maxUploadRetryTime,ee=new Vo(n,X,U,Y);return ee.headers=q,ee.body=Z.uploadData(),ee.progressCallback=p||null,ee.errorHandler=Mc(s),ee}const gn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Qm(s){switch(s){case"running":case"pausing":case"canceling":return gn.RUNNING;case"paused":return gn.PAUSED;case"success":return gn.SUCCESS;case"canceled":return gn.CANCELED;case"error":return gn.ERROR;default:return gn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,n,r){if(Dj(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const c=e;this.next=c.next,this.error=c.error,this.complete=c.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(s){return(...e)=>{Promise.resolve().then(()=>s(...e))}}class fD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=sa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=sa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=sa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,o,c){if(this.sent_)throw Fl("cannot .send() more than once");if(_r(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),c!==void 0)for(const u in c)c.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,c[u].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Fl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Fl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Fl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Fl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class mD extends fD{initXhr(){this.xhr_.responseType="text"}}function go(){return new mD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Iw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{if(this._request=void 0,this._chunkMultiplier=1,o._codeEquals(at.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const c=this.isExponentialBackoffExpired();if(Ew(o.status,[]))if(c)o=_w();else{this.sleepTime=Math.max(this.sleepTime*2,yj),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=o,this._transition("error")}},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals(at.CANCELED)?this.completeTransitions_():(this._error=o,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((o,c)=>{this._resolve=o,this._reject=c,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=cD(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,go,e,n);this._request=o,o.getPromise().then(c=>{this._request=void 0,this._uploadUrl=c,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const o=uD(this._ref.storage,this._ref._location,e,this._blob),c=this._ref.storage._makeRequest(o,go,n,r);this._request=c,c.getPromise().then(u=>{u=u,this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=ax*this._chunkMultiplier,n=new td(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((o,c)=>{let u;try{u=hD(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(g){this._error=g,this._transition("error");return}const p=this._ref.storage._makeRequest(u,go,o,c,!1);this._request=p,p.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){ax*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=rD(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(r,go,e,n);this._request=o,o.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=lD(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,go,e,n);this._request=o,o.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=bw(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Qm(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,o){const c=new dD(n||void 0,r||void 0,o||void 0);return this._addObserver(c),()=>{this._removeObserver(c)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Qm(this._state)){case gn.SUCCESS:uo(this._resolve.bind(null,this.snapshot))();break;case gn.CANCELED:case gn.ERROR:const n=this._reject;uo(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Qm(this._state)){case gn.RUNNING:case gn.PAUSED:e.next&&uo(e.next.bind(e,this.snapshot))();break;case gn.SUCCESS:e.complete&&uo(e.complete.bind(e))();break;case gn.CANCELED:case gn.ERROR:e.error&&uo(e.error.bind(e,this._error))();break;default:e.error&&uo(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,n){this._service=e,n instanceof Rn?this._location=n:this._location=Rn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ha(e,n)}get root(){const e=new Rn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Rw(this._location.path)}get storage(){return this._service}get parent(){const e=Wj(this._location.path);if(e===null)return null;const n=new Rn(this._location.bucket,e);return new ha(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Rj(e)}}function gD(s,e,n){return s._throwIfRoot("uploadBytesResumable"),new pD(s,new rr(e),n)}function yD(s){s._throwIfRoot("getDownloadURL");const e=aD(s.storage,s._location,Iw());return s.storage.makeRequestWithTokens(e,go).then(n=>{if(n===null)throw Nj();return n})}function vD(s,e){const n=Jj(s._location.path,e),r=new Rn(s._location.bucket,n);return new ha(s.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(s){return/^[A-Za-z]+:\/\//.test(s)}function bD(s,e){return new ha(s,e)}function Mw(s,e){if(s instanceof Ig){const n=s;if(n._bucket==null)throw Sj();const r=new ha(n,n._bucket);return e!=null?Mw(r,e):r}else return e!==void 0?vD(s,e):s}function xD(s,e){if(e&&_D(e)){if(s instanceof Ig)return bD(s,e);throw Cp("To use ref(service, url), the first argument must be a Storage instance.")}else return Mw(s,e)}function ox(s,e){const n=e==null?void 0:e[vw];return n==null?null:Rn.makeFromBucketSpec(n,s)}function TD(s,e,n,r={}){s.host=`${e}:${n}`;const o=_r(e);o&&(Op(`https://${s.host}/b`),jp("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:c}=r;c&&(s._overrideAuthToken=typeof c=="string"?c:Ox(c,s.app.options.projectId))}class Ig{constructor(e,n,r,o,c,u=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=u,this._bucket=null,this._host=yw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pj,this._maxUploadRetryTime=gj,this._requests=new Set,o!=null?this._bucket=Rn.makeFromBucketSpec(o,this._host):this._bucket=ox(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Rn.makeFromBucketSpec(this._url,e):this._bucket=ox(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){rx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){rx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ha(this,e)}_makeRequest(e,n,r,o,c=!0){if(this._deleted)return new Ij(Tw());{const u=Bj(e,this._appId,r,o,n,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[r,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,o).getPromise()}}const lx="@firebase/storage",cx="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw="storage";function wD(s,e,n){return s=_t(s),gD(s,e,n)}function ED(s){return s=_t(s),yD(s)}function SD(s,e){return s=_t(s),xD(s,e)}function AD(s=ad(),e){s=_t(s);const r=br(s,Vw).getImmediate({identifier:e}),o=Rx("storage");return o&&ND(r,...o),r}function ND(s,e,n,r={}){TD(s,e,n,r)}function CD(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),r=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new Ig(n,r,o,e,ma)}function RD(){us(new $n(Vw,CD,"PUBLIC").setMultipleInstances(!0)),yn(lx,cx,""),yn(lx,cx,"esm2020")}RD();const ID={apiKey:"AIzaSyAGphhC3qC1qLA_ErvpWk9QAaHc0N3ovQM",authDomain:"appaistudio-55b77.firebaseapp.com",projectId:"appaistudio-55b77",storageBucket:"appaistudio-55b77.firebasestorage.app",messagingSenderId:"98616437820",appId:"1:98616437820:web:10b78e2f4718d35b3ee739",measurementId:"G-Q8Q00T026N"},Sd=Ux(ID);uj(Sd);const Zl=vR(Sd),uc=Rk(Sd),kD=AD(Sd),nd={registerUser:async(s,e,n,r,o="user")=>{try{const u=(await eC(Zl,s,e)).user;await sC(u,{displayName:n});const p={id:u.uid,username:n,email:s,phone:r,role:o,allowedApps:[],createdAt:Date.now()};return n==="huytamky"&&(p.role="admin",p.allowedApps=["video-viral","image-script","zenshot-ai","translation","new-tool"]),await QT(oc(uc,"users",u.uid),p),p}catch(c){throw c}},loginUser:async(s,e)=>{try{const r=(await tC(Zl,s,e)).user,o=await Ap(oc(uc,"users",r.uid));return o.exists()?o.data():{id:r.uid,username:r.displayName||s.split("@")[0],email:s,role:"user",createdAt:Date.now()}}catch(n){throw n}},getUserProfile:async s=>{try{const e=await Ap(oc(uc,"users",s));return e.exists()?e.data():null}catch(e){return console.error("Error fetching user profile:",e),null}},logoutUser:async()=>oC(Zl),resetPassword:async s=>ZN(Zl,s)},OD=({onLogin:s})=>{const[e,n]=le.useState(!1),[r,o]=le.useState(""),[c,u]=le.useState(""),[p,g]=le.useState(""),[y,x]=le.useState(""),[T,S]=le.useState(""),[O,q]=le.useState(""),[Z,U]=le.useState(!1),X=async()=>{if(q(""),U(!0),!y||!c){q("Vui lng nhp Email v Mt khu"),U(!1);return}try{let Y;if(e){if(!r||!T){q("Vui lng nhp y  Tn v ST"),U(!1);return}if(c!==p){q("Mt khu nhp li khng khp"),U(!1);return}Y=await nd.registerUser(y,c,r,T)}else Y=await nd.loginUser(y,c);s(Y)}catch(Y){console.error(Y),Y.code==="auth/email-already-in-use"?q("Email ny  c s dng."):Y.code==="auth/invalid-email"?q("a ch Email khng hp l (V d: ten@gmail.com)."):Y.code==="auth/invalid-credential"?q("Email hoc mt khu khng ng."):Y.code==="auth/weak-password"?q("Mt khu qu yu (cn t nht 6 k t)."):q(" c li xy ra: "+Y.message)}finally{U(!1)}};return f.jsx("div",{className:"min-h-screen bg-[#020617] flex items-center justify-center p-4",children:f.jsxs("div",{className:"bg-[#1e293b] p-8 rounded-2xl shadow-xl w-full max-w-md border border-white/10",children:[f.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:e?"ng K Ti Khon":"ng Nhp"}),f.jsxs("div",{className:"space-y-4",children:[e&&f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-2",children:"Tn hin th"}),f.jsx("input",{type:"text",value:r,onChange:Y=>o(Y.target.value),className:"w-full bg-[#0f172a] border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 outline-none"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-2",children:"Email"}),f.jsx("input",{type:"email",value:y,onChange:Y=>x(Y.target.value),className:"w-full bg-[#0f172a] border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 outline-none"})]}),e&&f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-2",children:"S in thoi"}),f.jsx("input",{type:"tel",value:T,onChange:Y=>S(Y.target.value),className:"w-full bg-[#0f172a] border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 outline-none"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-2",children:"Mt khu"}),f.jsx("input",{type:"password",value:c,onChange:Y=>u(Y.target.value),className:"w-full bg-[#0f172a] border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 outline-none"})]}),e&&f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-2",children:"Nhp li mt khu"}),f.jsx("input",{type:"password",value:p,onChange:Y=>g(Y.target.value),className:"w-full bg-[#0f172a] border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 outline-none"})]}),O&&f.jsx("p",{className:"text-red-400 text-sm text-center",children:O}),f.jsx("button",{onClick:X,disabled:Z,className:`w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg transition-colors mt-4 ${Z?"opacity-50 cursor-not-allowed":""}`,children:Z?"ang x l...":e?"ng K":"ng Nhp"}),f.jsx("p",{className:"text-center text-slate-400 text-sm mt-4 cursor-pointer hover:text-white",onClick:()=>n(!e),children:e?" c ti khon? ng nhp ngay":"Cha c ti khon? ng k mi"})]})]})})},bh=[{id:"Cinematic Realistic",label:"Cinematic High-End Realistic (in nh thc t cao cp)"},{id:"3D Pixar Animation",label:"3D Pixar/Disney Style Animation (Hot hnh 3D Pixar/Disney)"},{id:"Japanese Anime 90s",label:"Classic 90s Japanese Anime (Hot hnh Nht Bn thp nin 90)"},{id:"Modern Makoto Shinkai",label:"Makoto Shinkai Cinematic Style (Phong cch Makoto Shinkai hin i)"},{id:"Studio Ghibli Aesthetic",label:"Studio Ghibli Hand-painted Aesthetic (Phong cch v tay Ghibli)"},{id:"Cyberpunk Neon 2077",label:"Cyberpunk Neon / Sci-Fi Futurism (Tng lai vin tng Neon)"},{id:"Hyper-realistic 8K Photo",label:"Hyper-realistic 8K RAW Photography (Nhip nh siu thc 8K)"},{id:"Spider-Verse Vibrant Comic",label:"Into the Spider-Verse Vibrant Comic (Truyn tranh phong cch Spider-Verse)"},{id:"Vintage 16mm Film",label:"Vintage 16mm Grainy Film Style (Phim nha 16mm c in)"},{id:"Noir Black and White",label:"Classic Film Noir / Moody Black & White (Phim en trng Noir su lng)"},{id:"Oil Painting Impressionism",label:"Classic Oil Painting / Impressionist Art (Tranh sn du n tng)"},{id:"Lo-fi Aesthetic Retro",label:"Lo-fi / Vaporwave Retro Aesthetic (Phong cch Lo-fi c in)"},{id:"Claymation Stop Motion",label:"Claymation Claymation Style (Hot hnh t st)"},{id:"Minimalist Vector Art",label:"Clean Minimalist Vector Illustration (Minh ha Vector ti gin)"},{id:"Dark Fantasy Gothic",label:"Dark Fantasy / Gothic Horror Style (Gi tng en ti / Gothic)"},{id:"Ukiyo-e Woodblock",label:"Traditional Japanese Ukiyo-e Woodblock (Tranh khc g Nht Bn)"},{id:"Surrealist Dreamscape",label:"Surrealist / Dreamlike Visual Art (Ngh thut siu thc o mng)"},{id:"Paper Cutout Collage",label:"Hand-crafted Paper Cutout Collage (Ct dn giy th cng)"},{id:"Sketch Graphite Art",label:"Detailed Graphite Pencil Sketch (Phc tho bt ch chi tit)"},{id:"Glitch Art Digital",label:"Experimental Glitch Art / Digital Distortion (Ngh thut li k thut s)"}];let jD=class extends le.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught error:",e,n)}render(){var e;return this.state.hasError?f.jsxs("div",{className:"p-8 m-8 bg-slate-900 border border-slate-700 rounded-3xl space-y-4 text-center text-white",children:[f.jsx("h2",{className:"text-xl font-bold text-rose-500",children:" xy ra li hin th"}),f.jsx("p",{className:"text-slate-300",children:(e=this.state.error)==null?void 0:e.message}),f.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"px-6 py-3 bg-white text-slate-900 font-bold rounded-xl hover:bg-slate-200 transition-all",children:"Th li"}),f.jsx("p",{className:"text-xs text-slate-500",children:"D liu vn c lu trong b nh tm."})]}):this.props.children}};const DD=({userId:s})=>{const[e,n]=le.useState({opponentScript:"",skeleton:null,ideas:[],selectedIdeaIndex:null,outlines:{},finalScripts:{},selectedStyle:bh[0].id,characters:[],tags:{},showCharacterSection:!1,loading:{analysis:!1,ideas:!1,outline:!1,script:!1,characters:!1}}),[r,o]=le.useState("");le.useEffect(()=>{if(!s)return;const L=`app_api_keys_${s}`,H=localStorage.getItem(L);if(H)try{const te=JSON.parse(H),E=atob(te.gemini||"").split(`
`).map(C=>C.trim()).filter(C=>C);E.length>0&&(o(E.join(`
`)),tp(E))}catch(te){console.error("Failed to load Gemini keys",te)}},[s]);const[c,u]=le.useState(null),p=(L,H="info")=>{u({message:L,type:H}),setTimeout(()=>u(null),5e3)},g=le.useRef(null),y=L=>/[\u3040-\u30ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff\uff66-\uff9f\uac00-\ud7af]/.test(L)?L.replace(/\s/g,"").length:L.trim().split(/\s+/).filter(Boolean).length,x=async()=>{if(e.opponentScript.trim()){n(L=>({...L,loading:{...L.loading,analysis:!0}}));try{const L=await uS(e.opponentScript,r),H=y(e.opponentScript),te=L.split(/PHONG CCH I TH/i),N=te.length>1?te[1].trim():"T nhin, viral";n(E=>({...E,skeleton:{content:L,wordCount:H,style:N},loading:{...E.loading,analysis:!1}}))}catch(L){console.error(L),p("Li Phn tch: "+(L instanceof Error?L.message:String(L)),"error"),n(H=>({...H,loading:{...H.loading,analysis:!1}}))}}},T=async()=>{if(e.skeleton){n(L=>({...L,loading:{...L.loading,ideas:!0}}));try{const L=await hS(e.skeleton.content,r);n(H=>({...H,ideas:L,loading:{...H.loading,ideas:!1}}))}catch(L){console.error(L),p("Li Sinh  tng: "+(L instanceof Error?L.message:String(L)),"error"),n(H=>({...H,loading:{...H.loading,ideas:!1}}))}}},S=async L=>{if(!(!e.skeleton||!e.ideas[L])){n(H=>({...H,selectedIdeaIndex:L,loading:{...H.loading,outline:!0}}));try{const H=await dS(e.skeleton.content,e.ideas[L],e.skeleton.wordCount,r);n(te=>({...te,outlines:{...te.outlines,[L]:H},loading:{...te.loading,outline:!1}}))}catch(H){console.error(H),p("Li Lp dn : "+(H instanceof Error?H.message:String(H)),"error"),n(te=>({...te,loading:{...te.loading,outline:!1}}))}}},O=async L=>{if(!(!e.outlines[L]||!e.skeleton)){n(H=>({...H,loading:{...H.loading,script:!0}}));try{const H=await fS(e.outlines[L],e.skeleton.style,r);n(te=>({...te,finalScripts:{...te.finalScripts,[L]:H},loading:{...te.loading,script:!1}}))}catch(H){console.error(H),p("Li Vit kch bn: "+(H instanceof Error?H.message:String(H)),"error"),n(te=>({...te,loading:{...te.loading,script:!1}}))}}},q=async()=>{const L=e.selectedIdeaIndex,H=L!==null?e.finalScripts[L]:null;if(n(te=>({...te,showCharacterSection:!0})),setTimeout(()=>{var te;(te=g.current)==null||te.scrollIntoView({behavior:"smooth",block:"start"})},100),H)try{const te=await mS(H,bh.map(E=>E.id),r),N=bh.find(E=>E.id===te||te.includes(E.id));N&&n(E=>({...E,selectedStyle:N.id}))}catch(te){console.error("Style recommendation failed",te)}},Z=async()=>{const L=e.selectedIdeaIndex;if(!(L===null||!e.finalScripts[L])){n(H=>({...H,loading:{...H.loading,characters:!0}}));try{const H=await pS(e.finalScripts[L],e.selectedStyle,r);n(te=>({...te,characters:H,loading:{...te.loading,characters:!1}}))}catch(H){console.error(H),p("Li Thit k NV: "+(H instanceof Error?H.message:String(H)),"error"),n(te=>({...te,loading:{...te.loading,characters:!1}}))}}},U=L=>{const H=e.finalScripts[L];if(!H)return;const te=2e3;let N=[];if(H.length<=te)N=[H];else{let C=H;for(;C.length>0;){let j=C.lastIndexOf(`
`,te);(j===-1||j<500)&&(j=te),N.push(C.substring(0,j).trim()),C=C.substring(j).trim()}}const E=N.map(C=>({content:C,actions:[],isAnalyzing:!1}));n(C=>({...C,tags:{...C.tags,[L]:E}}))},X=async(L,H)=>{var N;const te=(N=e.tags[L])==null?void 0:N[H];if(!te||!e.characters.length){p("Vui lng thc hin bc 'Thit k Nhn Vt' trc khi phn tch hnh ng.","info");return}n(E=>{const C={...E.tags},j=[...C[L]||[]];return j[H]&&(j[H]={...j[H],isAnalyzing:!0}),C[L]=j,{...E,tags:C}});try{const E=await gS(te.content,e.selectedStyle,e.characters,r);n(C=>{const j={...C.tags},D=[...j[L]||[]];return D[H]&&(D[H]={...D[H],actions:E,isAnalyzing:!1}),j[L]=D,{...C,tags:j}})}catch(E){console.error(E),p("Li Phn tch Tag: "+(E instanceof Error?E.message:String(E)),"error"),n(C=>{const j={...C.tags},D=[...j[L]||[]];return D[H]&&(D[H]={...D[H],isAnalyzing:!1}),j[L]=D,{...C,tags:j}})}},Y=L=>{navigator.clipboard.writeText(L),p(" sao chp prompt!","success")},ee=L=>{const H=L.map(te=>te.motionPrompt).join(`
`);navigator.clipboard.writeText(H),p(" sao chp tt c prompt video!","success")};return f.jsx(jD,{children:f.jsxs(Ip.Fragment,{children:[c&&f.jsx("div",{className:"fixed top-4 right-4 z-50 animate-in slide-in-from-right fade-in duration-300",children:f.jsxs("div",{className:`px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-3 font-bold text-sm ${c.type==="error"?"bg-rose-50 text-rose-600 border border-rose-100":c.type==="success"?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-white text-slate-700 border border-slate-100"}`,children:[c.type==="success"&&f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),c.type==="error"&&f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.message]})}),f.jsxs("main",{className:"w-full grid grid-cols-1 md:grid-cols-10 gap-8 p-4 md:p-10",children:[f.jsxs("div",{className:"md:col-span-3 space-y-10",children:[f.jsxs("section",{className:"bg-white rounded-3xl shadow-xl shadow-slate-200/50 border border-slate-100 p-8 group transition-all",children:[f.jsxs("h2",{className:"text-xl font-black text-slate-800 uppercase tracking-tighter mb-6 flex items-center gap-3",children:[f.jsx("span",{className:"w-2 h-6 bg-indigo-600 rounded-full"}),"Kch bn i th"]}),f.jsx("textarea",{className:"w-full h-80 p-6 bg-slate-50 border border-slate-100 rounded-2xl focus:ring-8 focus:ring-indigo-600/5 focus:border-indigo-600/20 focus:bg-white outline-none transition-all text-sm leading-relaxed placeholder:text-slate-300 font-medium custom-scrollbar mb-6",placeholder:"Dn kch bn i th vo y...",value:e.opponentScript,onChange:L=>n(H=>({...H,opponentScript:L.target.value}))}),f.jsx("button",{onClick:x,disabled:e.loading.analysis||!e.opponentScript,className:"w-full bg-[#020617] hover:bg-indigo-700 disabled:bg-slate-100 disabled:text-slate-300 text-white font-black py-6 rounded-2xl transition-all shadow-2xl hover:scale-[1.02] active:scale-95 flex justify-center items-center gap-4 text-sm uppercase tracking-widest",children:e.loading.analysis?"ang x l...":"Phn tch Cu trc & Phong cch"})]}),e.skeleton&&f.jsxs("div",{className:"space-y-8 animate-in slide-in-from-left-8 duration-700",children:[f.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 to-indigo-800 rounded-3xl p-8 text-white shadow-2xl relative overflow-hidden",children:[f.jsx("h3",{className:"text-[10px] font-black uppercase opacity-60 mb-2 tracking-[0.3em]",children:"Quantitative Data"}),f.jsxs("div",{className:"text-5xl font-black italic tracking-tighter",children:[e.skeleton.wordCount," ",f.jsx("span",{className:"text-xs font-bold uppercase opacity-60",children:"Units"})]})]}),f.jsxs("section",{className:"bg-white rounded-3xl shadow-xl border border-slate-100 p-8",children:[f.jsx("h2",{className:"text-lg font-black text-slate-800 uppercase tracking-tighter mb-6",children:"Khung xng Logic"}),f.jsx("div",{className:"max-h-96 overflow-y-auto pr-4 text-sm text-slate-600 leading-relaxed whitespace-pre-wrap font-medium custom-scrollbar",children:e.skeleton.content}),f.jsx("button",{onClick:T,disabled:e.loading.ideas,className:"w-full mt-8 bg-rose-500 hover:bg-rose-600 disabled:bg-slate-100 text-white font-black py-6 rounded-2xl transition-all shadow-xl hover:scale-[1.02] active:scale-95 uppercase tracking-widest text-xs",children:"SINH 5  TNG LIN QUAN"})]})]}),e.showCharacterSection&&f.jsxs("div",{ref:g,className:"animate-in fade-in slide-in-from-bottom-12 duration-1000 space-y-8",children:[f.jsxs("section",{className:"bg-white rounded-3xl shadow-xl border border-slate-100 p-8",children:[f.jsx("h2",{className:"text-lg font-black text-slate-800 uppercase tracking-tighter mb-6",children:"B lc Phong cch"}),f.jsxs("div",{className:"space-y-6 mb-8",children:[f.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest px-1",children:"Visual Architecture"}),f.jsx("select",{value:e.selectedStyle,onChange:L=>n(H=>({...H,selectedStyle:L.target.value})),className:"w-full p-5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-4 focus:ring-amber-500/10 outline-none text-sm font-bold text-slate-800 transition-all cursor-pointer",children:bh.map(L=>f.jsx("option",{value:L.id,children:L.label},L.id))})]}),f.jsx("button",{onClick:Z,disabled:e.loading.characters,className:"w-full bg-amber-500 hover:bg-amber-600 disabled:bg-slate-100 text-white font-black py-6 rounded-2xl shadow-xl transition-all hover:scale-[1.02] active:scale-95 uppercase tracking-widest text-xs",children:"Thit k Nhn Vt"})]}),e.characters.length>0&&f.jsx("div",{className:"space-y-6",children:e.characters.map((L,H)=>f.jsxs("div",{className:"bg-[#020617] text-white p-8 rounded-[2rem] border-l-[10px] border-amber-500 shadow-3xl",children:[f.jsx("input",{className:"bg-transparent border-none text-2xl font-black text-white tracking-tighter mb-1 w-full focus:ring-0 placeholder-white/30",value:L.name,onChange:te=>{const N=[...e.characters];N[H].name=te.target.value,n(E=>({...E,characters:N}))},placeholder:"Tn nhn vt"}),f.jsx("div",{className:"text-[10px] font-bold text-amber-500/60 uppercase tracking-widest mb-4",children:"Neural Casting Profile"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4 text-[11px] mb-4",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"opacity-40 uppercase whitespace-nowrap",children:"G.Tnh:"}),f.jsx("input",{className:"bg-white/10 rounded px-2 py-1 w-full border-none focus:ring-1 focus:ring-amber-500 text-white",value:L.gender,onChange:te=>{const N=[...e.characters];N[H].gender=te.target.value,n(E=>({...E,characters:N}))}})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"opacity-40 uppercase whitespace-nowrap",children:"Tui:"}),f.jsx("input",{className:"bg-white/10 rounded px-2 py-1 w-full border-none focus:ring-1 focus:ring-amber-500 text-white",value:L.age,onChange:te=>{const N=[...e.characters];N[H].age=te.target.value,n(E=>({...E,characters:N}))}})]}),f.jsxs("div",{className:"flex items-center gap-2 col-span-2",children:[f.jsx("span",{className:"opacity-40 uppercase whitespace-nowrap",children:"Quc tch:"}),f.jsx("input",{className:"bg-white/10 rounded px-2 py-1 w-full border-none focus:ring-1 focus:ring-amber-500 text-white",value:L.country,onChange:te=>{const N=[...e.characters];N[H].country=te.target.value,n(E=>({...E,characters:N}))}})]}),f.jsxs("div",{className:"flex items-center gap-2 col-span-2",children:[f.jsx("span",{className:"opacity-40 uppercase whitespace-nowrap",children:"Dng ngi:"}),f.jsx("input",{className:"bg-white/10 rounded px-2 py-1 w-full border-none focus:ring-1 focus:ring-amber-500 text-white",value:L.bodyType,onChange:te=>{const N=[...e.characters];N[H].bodyType=te.target.value,n(E=>({...E,characters:N}))}})]})]}),f.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10",children:[f.jsx("label",{className:"text-[10px] text-slate-400 uppercase tracking-widest block mb-1",children:"c im khun mt (Trung tnh)"}),f.jsx("textarea",{className:"w-full bg-white/5 rounded-xl p-3 text-xs text-slate-300 italic leading-relaxed border border-white/10 focus:ring-1 focus:ring-amber-500 outline-none resize-none h-24",value:L.facialDetails,onChange:te=>{const N=[...e.characters];N[H].facialDetails=te.target.value,n(E=>({...E,characters:N}))}})]})]},H))})]})]}),f.jsx("div",{className:"md:col-span-7 space-y-12",children:e.ideas.length>0?f.jsxs("div",{className:"space-y-16 animate-in fade-in zoom-in-95 duration-1000",children:[f.jsx("div",{className:"flex items-center justify-between border-b-4 border-slate-100 pb-8",children:f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsx("div",{className:"bg-[#020617] text-white w-14 h-14 rounded-2xl flex items-center justify-center text-3xl font-black shadow-2xl",children:"#"}),f.jsx("h2",{className:"text-4xl font-black text-slate-900 tracking-tighter uppercase",children:"Production Suite"})]})}),e.ideas.map((L,H)=>f.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl border border-slate-100 p-10 md:p-16 space-y-12 transition-all hover:border-indigo-200",children:[f.jsxs("div",{className:"space-y-8",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("span",{className:"bg-indigo-600 text-white text-[11px] font-black px-6 py-2 rounded-full uppercase",children:["Module ",H+1]}),f.jsx("span",{className:"text-rose-500 text-xs font-black uppercase tracking-widest",children:L.highlightValue})]}),f.jsx("h3",{className:"text-5xl font-black text-slate-900 tracking-tighter leading-none",children:L.title}),f.jsx("p",{className:"text-xl text-slate-500 leading-relaxed font-medium",children:L.description}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 pt-4",children:[f.jsxs("div",{className:"bg-slate-50 p-8 rounded-3xl border border-slate-100",children:[f.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase mb-2 tracking-widest",children:"Environment Context"}),f.jsx("p",{className:"font-bold text-slate-700",children:L.charactersContext})]}),f.jsxs("div",{className:"bg-slate-50 p-8 rounded-3xl border border-slate-100",children:[f.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase mb-2 tracking-widest",children:"Growth Potential"}),f.jsx("p",{className:"font-bold text-slate-700",children:L.viralPotential})]})]})]}),f.jsx("div",{className:"pt-12 border-t-2 border-slate-50 space-y-12",children:e.outlines[H]?f.jsxs("div",{className:"space-y-16",children:[f.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-[2.5rem] p-12 shadow-inner",children:[f.jsxs("h4",{className:"text-slate-900 font-black mb-8 uppercase tracking-[0.4em] text-[10px] flex items-center gap-3",children:[f.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-ping"})," Structural Protocol"]}),f.jsx("div",{className:"whitespace-pre-wrap text-base text-slate-600 leading-[2] font-medium opacity-80 max-h-[500px] overflow-y-auto pr-8 custom-scrollbar",children:e.outlines[H]}),!e.finalScripts[H]&&f.jsx("button",{onClick:()=>O(H),disabled:e.loading.script,className:`mt-12 bg-emerald-600 hover:bg-emerald-700 text-white font-black px-12 py-8 rounded-2xl shadow-2xl transition-all uppercase tracking-widest text-xs ${e.loading.script?"opacity-30 cursor-not-allowed":"hover:scale-[1.02] active:scale-95"}`,children:e.loading.script?"ang vit...":"Vit kch bn hon chnh"})]}),e.finalScripts[H]&&f.jsxs("div",{className:"space-y-12 animate-in zoom-in-95 duration-[1200ms]",children:[f.jsxs("div",{className:"bg-[#020617] text-white rounded-[3.5rem] p-16 lg:p-24 shadow-[0_50px_100px_-20px_rgba(0,0,0,0.5)]",children:[f.jsx("h4",{className:"text-indigo-400 font-black uppercase text-xs tracking-[0.5em] border-b border-white/5 pb-8 mb-12",children:"Final Master Copy"}),f.jsx("div",{className:"whitespace-pre-wrap text-lg lg:text-xl font-bold tracking-tight leading-relaxed text-slate-100",children:e.finalScripts[H]})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8",children:[f.jsxs("button",{onClick:q,className:"bg-amber-500 hover:bg-amber-600 text-white font-black px-12 py-10 rounded-3xl shadow-2xl transition-all hover:scale-[1.03] active:scale-95 flex flex-col items-center gap-4 text-center group",children:[f.jsx("svg",{className:"w-8 h-8 group-hover:rotate-45 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xl",children:"Thit lp Styles & NV"}),f.jsx("div",{className:"text-[10px] opacity-60 mt-2 uppercase tracking-widest",children:"Tip tc thit k hnh nh"})]})]}),f.jsxs("button",{onClick:()=>U(H),className:"bg-indigo-600 hover:bg-indigo-700 text-white font-black px-12 py-10 rounded-3xl shadow-2xl transition-all hover:scale-[1.03] active:scale-95 flex flex-col items-center gap-4 text-center group",children:[f.jsx("svg",{className:"w-8 h-8 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xl",children:"Bt u Chia TAGS"}),f.jsx("div",{className:"text-[10px] opacity-60 mt-2 uppercase tracking-widest",children:"Shot Decomposition"})]})]})]}),e.tags[H]&&f.jsxs("div",{className:"space-y-16 pt-24 border-t-8 border-slate-100",children:[f.jsx("h3",{className:"text-5xl font-black text-slate-900 tracking-tighter italic",children:"Alpha Production Tags"}),e.tags[H].map((te,N)=>f.jsxs("div",{className:"bg-white border-4 border-slate-50 rounded-[4rem] p-12 md:p-16 space-y-12 shadow-sm transition-all animate-in slide-in-from-bottom-16 duration-700",children:[f.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-8",children:[f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsxs("div",{className:"bg-[#020617] text-white px-6 py-2 rounded-xl text-xs font-black uppercase tracking-widest",children:["TAG #",N+1]}),f.jsxs("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:[y(te.content)," units identified"]})]}),f.jsxs("div",{className:"flex gap-4",children:[f.jsx("button",{onClick:()=>ee(te.actions),disabled:te.actions.length===0,className:"bg-indigo-50 hover:bg-indigo-100 text-indigo-600 px-6 py-3 rounded-xl text-xs font-black uppercase tracking-widest transition-all shadow-sm border border-indigo-100 disabled:opacity-30",children:"Copy All Video"}),f.jsx("button",{onClick:()=>X(H,N),disabled:te.isAnalyzing,className:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-100 text-white font-black px-10 py-4 rounded-xl text-xs transition-all shadow-xl uppercase tracking-widest",children:te.isAnalyzing?"Processing...":"To Motion Prompts"})]})]}),f.jsx("div",{className:"p-10 bg-slate-50 rounded-[2.5rem] text-slate-500 text-lg italic font-medium leading-relaxed border-2 border-slate-100",children:te.content}),te.actions.length>0&&f.jsx("div",{className:"grid grid-cols-1 gap-12 mt-12",children:te.actions.map((E,C)=>f.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom-12 duration-1000",children:[f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsx("div",{className:"w-10 h-10 bg-slate-900 text-white rounded-lg flex items-center justify-center font-black text-sm",children:C+1}),f.jsx("div",{className:"h-px flex-1 bg-slate-100"})]}),f.jsxs("div",{className:"grid grid-cols-1 gap-8",children:[f.jsxs("div",{className:"bg-[#020617] text-white p-10 rounded-[2.5rem] shadow-3xl",children:[f.jsx("div",{className:"text-[10px] font-black uppercase text-indigo-400 mb-4 tracking-widest",children:"Shot Execution"}),f.jsx("div",{className:"text-xl font-bold leading-relaxed",children:E.action})]}),f.jsxs("div",{className:"bg-indigo-50 border-l-[10px] border-indigo-400 p-10 rounded-[2.5rem] shadow-inner",children:[f.jsx("div",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-4",children:"Master Transcript"}),f.jsx("div",{className:"text-xl font-bold text-indigo-900 italic font-serif",children:E.voiceText?`"${E.voiceText}"`:"--- Instrumental Segment ---"})]}),f.jsxs("div",{className:"bg-[#FFF1F2] border-l-[10px] border-rose-400 p-10 rounded-[2.5rem] relative group shadow-lg",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("div",{className:"text-[10px] font-black text-rose-400 uppercase tracking-[0.3em]",children:"Video Motion AI Prompt"}),f.jsx("button",{onClick:()=>Y(E.motionPrompt),className:"bg-white/80 hover:bg-white p-2 rounded-lg text-rose-500 shadow-sm transition-all active:scale-90",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})})]}),f.jsx("div",{className:"text-sm font-bold text-rose-950 leading-relaxed italic bg-white/40 p-6 rounded-2xl border border-rose-200",children:E.motionPrompt})]})]})]},C))})]},N))]})]})]}):f.jsx("button",{onClick:()=>S(H),disabled:e.loading.outline,className:"bg-[#020617] text-white px-12 py-8 rounded-2xl font-black shadow-2xl hover:bg-indigo-700 hover:scale-[1.02] active:scale-95 transition-all text-sm uppercase tracking-widest",children:e.loading.outline&&e.selectedIdeaIndex===H?"Kin trc...":"Chn & Lp dn "})})]},H))]}):f.jsxs("div",{className:"h-full min-h-[900px] flex flex-col items-center justify-center text-slate-200 space-y-16 border-8 border-dashed border-slate-100 rounded-[6rem] bg-white/50 backdrop-blur-3xl group hover:border-indigo-100 transition-all duration-[2000ms]",children:[f.jsx("div",{className:"relative",children:f.jsx("div",{className:"w-56 h-56 bg-white rounded-[4.5rem] flex items-center justify-center shadow-3xl group-hover:rotate-12 transition-all",children:f.jsx("svg",{className:"w-24 h-24 text-slate-100",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})})}),f.jsxs("div",{className:"text-center space-y-6",children:[f.jsx("h3",{className:"text-4xl font-black italic uppercase tracking-[0.5em] text-slate-300",children:"Quang Huy Production"}),f.jsx("p",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest opacity-40 italic",children:"Waiting for initial data analysis to start production sequence..."})]})]})})]}),f.jsxs("footer",{className:"w-full p-20 text-center border-t border-slate-100 bg-white mt-40",children:[f.jsxs("h4",{className:"text-2xl font-black tracking-tighter uppercase text-[#020617]",children:["QUANG HUY ",f.jsx("span",{className:"text-indigo-600",children:"VIDEO"})]}),f.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.5em] text-slate-400 mt-4",children:"AI Viral Content Engine  2024"})]})]})})},Xm={},MD=s=>{let e=[];if(s&&(e=s.split(`
`).map(n=>n.trim()).filter(n=>n)),e.length===0){const n=Xm==null?void 0:Xm.VITE_GEMINI_API_KEY;n&&e.push(n)}return e},VD=["gemini-2.0-flash-lite-preview-02-05","gemini-2.5-flash","gemini-2.0-flash-lite-001","gemini-2.0-flash-exp","gemini-2.0-flash-001","gemini-2.0-flash","gemini-2.5-pro","gemini-flash-latest"],Vc=async(s,e)=>{const n=MD(s);if(n.length===0)throw new Error("No API Keys provided.");let r;for(const o of n){const c=new sd(o);for(const u of VD)try{const p=c.getGenerativeModel({model:u});return await e(p)}catch(p){console.warn(`Failed: Key(...${o.slice(-4)}) Model(${u}) error: ${p.message}`),r=p}}throw r||new Error("All keys and models failed to generate content.")},LD=async(s,e)=>Vc(e,async n=>(await n.generateContent([{inlineData:{mimeType:"image/jpeg",data:s}},{text:"Hy phn tch chi tit phong cch hnh nh trong bc nh ny: nh sng, mu sc, gc my, cht liu ngh thut (medium), tm trng v cc c im hnh nh c trng khc. Tr v m t ngn gn nhng sc tch bng ting Vit."}])).response.text()||"Khng th phn tch phong cch."),PD=async(s,e)=>Vc(e,async n=>{const r=`Nhim v: c kch bn di y v chia tch thnh cc phn cnh hnh nh tiu biu (Scene Breakdown). Mi phn on phi i din cho mt thng ip hoc giai on cm xc. Sau  hy m tng s phn on.
      
      Kch bn: "${s}"
      
      Tr v JSON: { "breakdown": string, "count": number }`,o={responseMimeType:"application/json"},c=await n.generateContent({contents:[{role:"user",parts:[{text:r}]}],generationConfig:o}),u=JSON.parse(c.response.text()||"{}");let p=u.breakdown||"";return typeof p!="string"&&(p=JSON.stringify(p)),{breakdown:p,count:Number(u.count)||0}}),UD=async(s,e,n,r)=>Vc(r,async o=>{const c=`Da vo phn tch phn cnh: "${e}" v s lng ${n} phn on. Hy chia ni dung kch bn gc di y thnh ng ${n} hng tng ng vi cc phn on.
        
        QUY TC CC K QUAN TRNG:
        - KHNG C XO B BT C K T NO ca kch bn gc.
        - Ch c thm xung dng  phn tch cc on.
        - Tr v danh sch cc chui tng ng vi mi phn cnh.
        
        Kch bn gc: "${s}"`,u=await o.generateContent({contents:[{role:"user",parts:[{text:c}]}],generationConfig:{responseMimeType:"application/json"}}),p=JSON.parse(u.response.text()||"[]");return Array.isArray(p)?p.map(g=>typeof g=="string"?g:typeof g=="object"&&g!==null?g.content||g.text||g.description||g.script_content||g.row||JSON.stringify(g):String(g)):[]}),zD=async(s,e,n)=>Vc(n,async r=>{const o=`Hy to ra Image Prompts cho Midjourney/Stable Diffusion da trn cc on kch bn sau v phong cch hnh nh c cung cp.
        
        Phong cch (Style): ${e}
        
        Cu trc Prompt (Ting Anh): [Subject], [Action], [Environment], [Lighting/Atmosphere], [Camera Angle/Lens], [Style].
        
        Cc on kch bn cn to prompt:
        ${s.map((u,p)=>`${p+1}. ${u}`).join(`
`)}
        
        Tr v mng JSON cha cc prompt tng ng theo th t (mng string).`,c=await r.generateContent({contents:[{role:"user",parts:[{text:o}]}],generationConfig:{responseMimeType:"application/json"}});return JSON.parse(c.response.text()||"[]")}),BD=async(s,e,n)=>Vc(n,async r=>{const o=`Da vo ni dung kch bn v cc prompt nh  c, hy to ra cc "Video Motion Prompts" (Prompt chuyn ng cho video) tng ng.
        
        Yu cu:
        - Mi prompt video phi m t chuyn ng ca ch th v my nh (Camera motion, subject action, dynamic transitions).
        - Ngn ng: Ting Anh.
        - Kt qu phi l mt mng chui, mi chui tng ng vi mt hng kch bn.
        
        Kch bn & Prompt nh:
        ${s.map((u,p)=>`Hng ${p+1}: [Kch bn: ${u}] [Prompt nh: ${e[p]||"N/A"}]`).join(`
`)}
        
        Tr v mng JSON (mng string).`,c=await r.generateContent({contents:[{role:"user",parts:[{text:o}]}],generationConfig:{responseMimeType:"application/json"}});return JSON.parse(c.response.text()||"[]")});let Lw=class extends Ip.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught error:",e,n)}render(){var e;return this.state.hasError?f.jsxs("div",{className:"p-8 m-8 bg-red-50 border border-red-200 rounded-xl space-y-4 text-center",children:[f.jsx("h2",{className:"text-xl font-bold text-red-700",children:" xy ra li hin th"}),f.jsx("p",{className:"text-red-600",children:(e=this.state.error)==null?void 0:e.message}),f.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"px-4 py-2 bg-white border border-red-200 text-red-600 rounded-lg hover:bg-red-50",children:"Th li"}),f.jsx("p",{className:"text-xs text-slate-500",children:"D liu vn c lu trong b nh tm."})]}):this.props.children}};const HD=le.forwardRef(({tag:s,style:e,index:n,apiKey:r,onNotify:o},c)=>{const[u,p]=le.useState(s),g=le.useRef(u);le.useEffect(()=>{g.current=u},[u]);const[y,x]=le.useState({}),T=X=>new Promise(Y=>setTimeout(Y,X)),S=async()=>{x(X=>({...X,analyze:!0}));try{const X=await PD(u.content,r);return p(Y=>({...Y,analysis:X.breakdown,sceneCount:X.count})),X}catch(X){throw console.error(X),o("Li khi phn tch phn cnh","error"),X}finally{x(X=>({...X,analyze:!1}))}},O=async(X,Y)=>{const ee=X||u.analysis,L=Y||u.sceneCount;if(!ee||!L){o("Cn phn tch phn cnh trc","info");return}x(H=>({...H,split:!0}));try{const H=await UD(u.content,ee,L,r);return p(te=>({...te,rows:H})),H}catch(H){throw console.error(H),o("Li khi chia hng","error"),H}finally{x(H=>({...H,split:!1}))}},q=async X=>{const Y=X||u.rows;if(!Y||Y.length===0){o("Cn chia hng trc","info");return}x(ee=>({...ee,prompt:!0}));try{const ee=await zD(Y,e,r);return p(L=>({...L,prompts:ee})),ee}catch(ee){throw console.error(ee),o("Li khi to prompt","error"),ee}finally{x(ee=>({...ee,prompt:!1}))}},Z=async()=>{if(!u.rows||u.rows.length===0){o("Cn chia hng trc","info");return}x(X=>({...X,videoPrompt:!0}));try{const X=await BD(u.rows,u.prompts||[],r);p(Y=>({...Y,videoPrompts:X}))}catch(X){console.error(X),o("Li khi to prompt video","error")}finally{x(X=>({...X,videoPrompt:!1}))}},U=X=>{if(!X||X.length===0)return;const Y=X.map(ee=>ee.trim()).filter(ee=>ee.length>0).map(ee=>ee.replace(/\r?\n|\r/g," ")).map(ee=>ee.replace(/^["']+|["']+$/g,"")).join(`
`);navigator.clipboard.writeText(Y),o(" sao chp ni dung chnh xc theo tng hng!","success")};return le.useImperativeHandle(c,()=>({runAutoSequence:async()=>{const X=await S();await T(5e3);const Y=await O(X.breakdown,X.count);await T(5e3),await q(Y)},getRows:()=>g.current.rows||[],getPrompts:()=>g.current.prompts||[]}),[]),f.jsxs("div",{className:`bg-white rounded-2xl shadow-sm border p-6 space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500 transition-colors ${Object.values(y).some(X=>X)?"border-indigo-300 ring-1 ring-indigo-100":"border-gray-100"}`,children:[f.jsxs("div",{className:"flex items-center justify-between border-b border-gray-50 pb-4",children:[f.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[f.jsxs("span",{className:"w-10 h-10 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center text-xs font-bold",children:["TAG ",n+1]}),"Phn kch bn"]}),u.sceneCount!==void 0&&f.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold",children:[u.sceneCount," Phn on"]})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"space-y-1",children:[f.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Ni dung kch bn"}),f.jsx("div",{className:"p-4 bg-gray-50 rounded-xl border border-gray-100 text-sm text-gray-700 max-h-48 overflow-y-auto whitespace-pre-wrap leading-relaxed",children:u.content})]}),f.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[f.jsx("button",{onClick:()=>S(),disabled:y.analyze,className:`py-2.5 px-3 rounded-xl text-xs font-semibold transition-all flex items-center justify-center gap-2 ${y.analyze?"bg-gray-100 text-gray-400":"bg-blue-50 text-blue-700 hover:bg-blue-100 active:scale-95"}`,children:y.analyze?"...":"Phn Tch"}),f.jsx("button",{onClick:()=>O(),disabled:y.split||!u.analysis,className:`py-2.5 px-3 rounded-xl text-xs font-semibold transition-all flex items-center justify-center gap-2 ${y.split||!u.analysis?"bg-gray-100 text-gray-400":"bg-teal-50 text-teal-700 hover:bg-teal-100 active:scale-95"}`,children:y.split?"...":"Chia hng"}),f.jsx("button",{onClick:()=>q(),disabled:y.prompt||!u.rows,className:`py-2.5 px-3 rounded-xl text-xs font-semibold transition-all flex items-center justify-center gap-2 ${y.prompt||!u.rows?"bg-gray-100 text-gray-400":"bg-purple-50 text-purple-700 hover:bg-purple-100 active:scale-95"}`,children:y.prompt?"...":"Prompt nh"}),f.jsx("button",{onClick:()=>Z(),disabled:y.videoPrompt||!u.rows,className:`py-2.5 px-3 rounded-xl text-xs font-semibold transition-all flex items-center justify-center gap-2 ${y.videoPrompt||!u.rows?"bg-gray-100 text-gray-400":"bg-rose-50 text-rose-700 hover:bg-rose-100 active:scale-95"}`,children:y.videoPrompt?"...":"Prompt Video"})]}),u.analysis&&f.jsxs("div",{className:"p-4 bg-indigo-50 border border-indigo-100 rounded-xl space-y-2",children:[f.jsx("h4",{className:"text-xs font-bold text-indigo-700 uppercase",children:"Phn tch phn cnh"}),f.jsx("p",{className:"text-sm text-indigo-900 leading-relaxed whitespace-pre-wrap",children:u.analysis})]}),u.rows&&u.rows.length>0&&f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:["Kch bn  chia hng (",u.rows.length,")"]}),f.jsx("button",{onClick:()=>U(u.rows||[]),className:"text-[10px] font-bold text-indigo-500 hover:text-indigo-700 uppercase flex items-center gap-1",children:"Copy All"})]}),f.jsx("div",{className:"space-y-2",children:u.rows.map((X,Y)=>f.jsxs("div",{className:"p-3 bg-white border border-gray-100 rounded-lg text-sm flex gap-3",children:[f.jsx("span",{className:"text-indigo-300 font-mono text-xs",children:Y+1}),f.jsxs("span",{className:"text-gray-700 italic",children:['"',X,'"']})]},Y))})]}),u.prompts&&u.prompts.length>0&&f.jsxs("div",{className:"space-y-3 pt-4 border-t border-gray-50",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h4",{className:"text-xs font-bold text-purple-700 uppercase tracking-wider",children:"Image Prompts"}),f.jsx("button",{onClick:()=>U(u.prompts||[]),className:"text-[10px] font-bold text-purple-500 hover:text-purple-700 uppercase flex items-center gap-1",children:"Copy All"})]}),f.jsx("div",{className:"space-y-3",children:u.prompts.map((X,Y)=>f.jsxs("div",{className:"p-4 bg-purple-50 border border-purple-100 rounded-xl text-sm font-mono text-purple-900 leading-relaxed",children:[f.jsxs("div",{className:"text-[10px] font-bold text-purple-400 mb-1",children:["PROMPT #",Y+1]}),X]},Y))})]})]})]})}),qD=({onStyleChange:s,onSplitScript:e,apiKey:n})=>{const[r,o]=le.useState(null),[c,u]=le.useState(""),[p,g]=le.useState(""),[y,x]=le.useState(!1),T=async O=>{var U;const q=(U=O.target.files)==null?void 0:U[0];if(!q)return;const Z=new FileReader;Z.onloadend=async()=>{const X=Z.result.split(",")[1];o(Z.result),x(!0);try{const Y=await LD(X,n);u(Y),s(Y)}catch(Y){console.error(Y),alert("Li khi phn tch nh: "+(Y instanceof Error?Y.message:String(Y)))}finally{x(!1)}},Z.readAsDataURL(q)},S=()=>{p.trim()&&e(p)};return f.jsxs("div",{className:"flex flex-col h-full space-y-6 p-6 border-r border-gray-200 bg-white",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("h2",{className:"text-xl font-bold text-indigo-700",children:"HOT AI Visual Director"}),f.jsx("p",{className:"text-xs text-gray-500 italic",children:"Professional image direction & analysis"})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Ti nh phong cch"}),f.jsxs("div",{className:"relative group",children:[f.jsxs("div",{className:`border-2 border-dashed rounded-xl p-4 transition-all duration-300 flex flex-col items-center justify-center cursor-pointer ${r?"border-indigo-400 bg-indigo-50":"border-gray-300 hover:border-indigo-500 hover:bg-gray-50"}`,children:[f.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:T,accept:"image/*"}),r?f.jsx("img",{src:r,alt:"Reference",className:"w-full h-32 object-cover rounded-lg shadow-sm"}):f.jsxs("div",{className:"text-center",children:[f.jsx("svg",{className:"mx-auto h-10 w-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),f.jsx("span",{className:"mt-2 block text-xs font-medium text-gray-600",children:"Click hoc ko th nh vo y"})]})]}),y&&f.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-70 flex items-center justify-center rounded-xl",children:f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Phong cch phn tch"}),f.jsx("textarea",{value:c,onChange:O=>{u(O.target.value),s(O.target.value)},className:"w-full h-32 p-3 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none bg-gray-50",placeholder:"c im phong cch s hin  y..."})]}),f.jsxs("div",{className:"flex-grow flex flex-col space-y-2",children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nhp kch bn"}),f.jsx("textarea",{value:p,onChange:O=>g(O.target.value),className:"flex-grow w-full p-3 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",placeholder:"Dn kch bn ca bn vo y..."})]}),f.jsx("button",{onClick:S,className:"w-full py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl shadow-lg transform transition-all active:scale-95 focus:outline-none focus:ring-4 focus:ring-indigo-200",children:"Chia Kch Bn"}),f.jsx("div",{className:"text-[10px] text-gray-400 text-center uppercase tracking-widest",children:" 2024 HOT AI Studio"})]})},GD=({tags:s,style:e,apiKey:n,onNotify:r})=>{const o=le.useRef([]),[c,u]=le.useState(!1),[p,g]=le.useState(""),y=async()=>{if(s.length!==0){u(!0),g("ang x l...");try{for(let S=0;S<o.current.length;S++){const O=o.current[S];O&&(g(`ang x l Tag ${S+1}/${s.length}...`),console.log(`Auto processing tag ${S+1}/${s.length}...`),await O.runAutoSequence())}g("Hon tt!")}catch(S){console.error(S),g("C li xy ra!"),r("Qu trnh t ng b gin on do li.","error")}finally{u(!1),setTimeout(()=>g(""),5e3)}}},x=()=>{const S=[];if(o.current.forEach(O=>{if(O){const Z=O.getRows().map(U=>U.trim()).filter(U=>U.length>0).map(U=>U.replace(/\r?\n|\r/g," ")).map(U=>U.replace(/^["']+|["']+$/g,""));S.push(...Z)}}),S.length===0){r("Khng c kch bn  chia hng  copy!","info");return}navigator.clipboard.writeText(S.join(`
`)),r(` copy chnh xc ${S.length} hng kch bn!`,"success")},T=()=>{const S=[];if(o.current.forEach(O=>{if(O){const Z=O.getPrompts().map(U=>U.trim()).filter(U=>U.length>0).map(U=>U.replace(/\r?\n|\r/g," ")).map(U=>U.replace(/^["']+|["']+$/g,""));S.push(...Z)}}),S.length===0){r("Khng c prompt  copy!","info");return}navigator.clipboard.writeText(S.join(`
`)),r(` copy chnh xc ${S.length} prompt!`,"success")};return s.length===0?f.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 space-y-4 p-12 bg-white rounded-3xl border border-gray-100 border-dashed",children:[f.jsx("svg",{className:"w-16 h-16 opacity-20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),f.jsx("p",{className:"text-lg font-medium",children:"Cha c kch bn c chia"}),f.jsx("p",{className:"text-sm",children:'Vui lng nhp kch bn v nhn "Chia Kch Bn"  ct tri'})]}):(o.current.length!==s.length&&(o.current=new Array(s.length).fill(null)),f.jsxs("div",{className:"space-y-8 pb-12",children:[f.jsxs("div",{className:"flex flex-wrap items-center gap-3 p-4 bg-gray-100 rounded-2xl sticky top-4 z-10 shadow-sm border border-gray-200",children:[f.jsx("button",{onClick:y,disabled:c,className:`px-6 py-2.5 rounded-xl font-bold text-sm transition-all flex items-center gap-2 ${c?"bg-gray-400 text-white cursor-not-allowed":"bg-gradient-to-r from-indigo-600 to-blue-600 hover:from-indigo-700 hover:to-blue-700 text-white shadow-md active:scale-95"}`,children:c?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"ang T ng..."]}):f.jsxs(f.Fragment,{children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"T ng Hon Ton"]})}),f.jsxs("button",{onClick:x,className:"px-5 py-2.5 bg-white border border-gray-200 text-gray-700 rounded-xl font-bold text-sm hover:bg-gray-50 transition-all shadow-sm active:scale-95 flex items-center gap-2",children:[f.jsx("svg",{className:"w-4 h-4 text-teal-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Copy All Kch Bn"]}),f.jsxs("button",{onClick:T,className:"px-5 py-2.5 bg-white border border-gray-200 text-gray-700 rounded-xl font-bold text-sm hover:bg-gray-50 transition-all shadow-sm active:scale-95 flex items-center gap-2",children:[f.jsx("svg",{className:"w-4 h-4 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Copy All Prompt Anh"]})]}),p&&f.jsxs("div",{className:`mx-4 mt-2 p-3 rounded-xl text-sm font-bold flex items-center gap-2 ${p==="C li xy ra!"?"bg-red-50 text-red-600":"bg-green-50 text-green-700 border border-green-200"}`,children:[p==="Hon tt!"?f.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}):f.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-current border-t-transparent animate-spin"}),p]}),f.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[f.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Bng iu Khin Tags"}),f.jsx("div",{className:"h-px flex-grow bg-gray-100"}),f.jsxs("span",{className:"text-sm font-medium text-gray-400",children:[s.length," TAGS SN SNG"]})]}),f.jsx("div",{className:"space-y-8",children:s.map((S,O)=>f.jsx(HD,{tag:S,style:e,index:O,apiKey:n,ref:q=>{o.current[O]=q},onNotify:r},S.id))})]}))},FD=({userId:s})=>{const[e,n]=le.useState(""),[r,o]=le.useState([]),[c,u]=le.useState(""),[p,g]=le.useState(null),y=(S,O="info")=>{g({message:S,type:O}),setTimeout(()=>g(null),5e3)};le.useEffect(()=>{if(s)try{const S=`app_api_keys_${s}`,O=localStorage.getItem(S);if(O){const q=JSON.parse(O),U=atob(q.gemini||"").split(`
`).map(X=>X.trim()).filter(X=>X);u(U.join(`
`))}}catch(S){console.error("Failed to load API key",S)}},[s]);const x=le.useCallback(S=>{const O=/[\u3040-\u30ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff\uff66-\uff9f]/.test(S);let q=[];if(O)for(let U=0;U<S.length;U+=2e3)q.push(S.substring(U,U+2e3));else{const U=S.split(/\s+/),X=1400;for(let Y=0;Y<U.length;Y+=X)q.push(U.slice(Y,Y+X).join(" "))}const Z=q.map((U,X)=>({id:crypto.randomUUID(),content:U}));o(Z)},[]),T=S=>{n(S)};return f.jsxs("div",{className:"flex h-screen w-full overflow-hidden bg-gray-50",children:[f.jsx("aside",{className:"w-[30%] min-w-[320px] max-w-[450px] flex-shrink-0 h-full",children:f.jsx(qD,{onStyleChange:T,onSplitScript:x,apiKey:c})}),f.jsx("main",{className:"flex-grow h-full overflow-y-auto p-8 lg:p-12 scroll-smooth",children:f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsxs("header",{className:"mb-12",children:[f.jsxs("h1",{className:"text-4xl font-extrabold text-gray-900 tracking-tight",children:["HOT ",f.jsx("span",{className:"text-indigo-600",children:"AI"})]}),f.jsx("p",{className:"mt-2 text-gray-500 font-medium",children:"H thng sn xut Visual Prompts chuyn nghip"})]}),f.jsx(Lw,{children:f.jsxs("div",{className:"relative",children:[p&&f.jsx("div",{className:"fixed top-4 right-4 z-50 animate-in slide-in-from-right fade-in duration-300",children:f.jsxs("div",{className:`px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-3 font-bold text-sm ${p.type==="error"?"bg-rose-50 text-rose-600 border border-rose-100":p.type==="success"?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-white text-slate-700 border border-slate-100"}`,children:[p.type==="success"&&f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),p.type==="error"&&f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),p.message]})}),f.jsx(GD,{tags:r,style:e,apiKey:c,onNotify:y})]})})]})})]})};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$D=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),ux=s=>{const e=$D(s);return e.charAt(0).toUpperCase()+e.slice(1)},Pw=(...s)=>s.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),YD=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var QD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=le.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:c,iconNode:u,...p},g)=>le.createElement("svg",{ref:g,...QD,width:e,height:e,stroke:s,strokeWidth:r?Number(n)*24/Number(e):n,className:Pw("lucide",o),...!c&&!YD(p)&&{"aria-hidden":"true"},...p},[...u.map(([y,x])=>le.createElement(y,x)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=(s,e)=>{const n=le.forwardRef(({className:r,...o},c)=>le.createElement(XD,{ref:c,iconNode:e,className:Pw(`lucide-${KD(ux(s))}`,`lucide-${s}`,r),...o}));return n.displayName=ux(s),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],JD=vn("activity",WD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],e6=vn("camera",ZD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Uw=vn("circle-check",t6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],s6=vn("clipboard-list",n6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],zw=vn("copy",i6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],hx=vn("image",r6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],o6=vn("layers",a6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ta=vn("loader-circle",l6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Bw=vn("play",c6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],Hw=vn("scissors",u6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],qw=vn("trash-2",h6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],dx=vn("upload",d6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],m6=vn("video",f6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],fx=vn("zap",p6),Wm={},g6=s=>{let e=[];if(s&&(e=s.split(`
`).map(n=>n.trim()).filter(n=>n)),e.length===0){const n=Wm==null?void 0:Wm.VITE_GEMINI_API_KEY;n&&e.push(n)}return e},y6=["gemini-2.0-flash-lite-preview-02-05","gemini-2.5-flash","gemini-2.0-flash-lite-001","gemini-2.0-flash-exp","gemini-2.0-flash-001","gemini-2.0-flash","gemini-2.5-pro","gemini-flash-latest"],Lo=async(s,e)=>{const n=g6(s);if(n.length===0)throw new Error("No API Keys provided.");let r;for(const o of n){const c=new sd(o);for(const u of y6)try{const p=c.getGenerativeModel({model:u});return await e(p)}catch(p){console.warn(`Failed: Key(...${o.slice(-4)}) Model(${u}) error: ${p.message}`),r=p}}throw r||new Error("All keys and models failed to generate content.")},v6=async(s,e)=>Lo(e,async n=>(await n.generateContent([{inlineData:{mimeType:"image/jpeg",data:s}},{text:"Analyze this image and describe its visual style in detail (lighting, color palette, texture, composition, atmosphere). Provide a concise but comprehensive paragraph suitable for an image generation prompt style reference."}])).response.text()||"No analysis found."),_6=async(s,e)=>Lo(e,async n=>{const r={type:Ds.ARRAY,items:{type:Ds.OBJECT,properties:{name:{type:Ds.STRING},gender:{type:Ds.STRING},country:{type:Ds.STRING},age:{type:Ds.STRING},physique:{type:Ds.STRING},features:{type:Ds.STRING}},required:["name","gender","country","age","physique","features"]}},o=`Analyze the following script and extract/create characters. For each character, provide: Name, Gender, Country, Age, Physique, and Detailed Facial Features. 
        
        CRITICAL RULES:
        1. If details are missing in the script (Gender, Country, Age, Physique, or Face), you MUST creatively generate them to make the character visually distinct.
        2. Focus HEAVILY on specific facial features: eye shape/color, nose shape, skin texture, wrinkles, hair style/texture/color, and any unique facial markings.
        3. ABSOLUTELY NO clothing, NO personality traits, and NO equipment.
        4. Format the 'features' field as descriptive sentences about the face and hair only.
        
        Example structure: "Mi tc en bng mt vi nhng si bc thanh lch c bi cht thnh kiu tc truyn thng gn gng. Ln da mn mng. i mt nu sm hnh qu hnh m p, np nhn nh quanh khe mt, chic mi nh nhn, thanh t."
        
        Output in JSON format as an array of objects. Script: ${s}`,c=await n.generateContent({contents:[{role:"user",parts:[{text:o}]}],generationConfig:{responseMimeType:"application/json",responseSchema:r}});return JSON.parse(c.response.text()||"[]")}),b6=async(s,e)=>Lo(e,async n=>{var u;const r=`Bn l chuyn gia phn tch kch bn. Hy m s lng "hnh ng th gic" (visual actions) chnh trong kch bn di y.
        
        QUY TC:
        1. Ch m cc hnh ng c th c th dng thnh hnh nh (v d: "chy", "cm bento", "nhn xa xm").
        2. B qua cc li dn truyn (narration) mang tnh suy tng v cc suy ngh ni tm khng th hin qua hnh ng/biu cm.
        3. Tr v DUY NHT mt con s.
        
        KCH BN:
        ${s}`,o=await n.generateContent(r),c=parseInt(((u=o.response.text())==null?void 0:u.trim())||"0");return isNaN(c)?0:c}),x6=async(s,e,n)=>Lo(n,async r=>{const o=`Bn l mt cng c chia kch bn chuyn nghip. Hy chia kch bn di y thnh ng ${e} hng.
        
        CC QUY TC TI THNG:
        1. CH TR V CC HNG KCH BN. Khng c bt k cu dn nhp no.
        2. GI NGUYN 100% VN BN GC. Tuyt i khng xa b, khng chnh sa, khng thm bt bt k k t no.
        3. Tr v ng ${e} dng, mi dng l mt phn on logic.
        
        KCH BN:
        ${s}`;return((await r.generateContent(o)).response.text()||"").trim().split(`
`).filter(p=>p.trim().length>0)}),T6=async(s,e,n,r,o)=>Lo(o,async c=>{const p=`Bn l ZenShot AI - Mt Visual Director k lut st . Nhim v ca bn l chuyn i kch bn thnh Image Prompts cho Midjourney.
    
    QUY TC CT LI (BT BUC TUN TH 100%):
    1. NH DNG: Mi prompt phi nm trn MT HNG DUY NHT (Single line). Khng xung dng bn trong mt prompt.
    2. KHNG TM TT: Copy-paste NGUYN VN m t nhn vt t d liu bn di.
    3. B NH TRNG THI:
       - Nu c thng tin cnh trc (Previous Context), hy k tha trang phc v bi cnh t  tr khi kch bn thay i.
       - Lun duy tr tnh nht qun v qun o v bi cnh cho cc phn on lin tip.
    4. CU TRC PROMPT (Vit lin thnh 1 on vn): 
       [Phong cch/Gc my] + [Hnh ng/Biu cm] + [Tn nhn vt: M t chi tit nguyn vn] + [Trang phc hin ti] + [Bi cnh chi tit] + --ar 16:9
    
    D LIU NHN VT:
    ${n.map(x=>`${x.name}: ${x.gender}, ${x.country}, ${x.age}, ${x.physique}. ${x.features}`).join(`
`)}
    
    PHONG CCH VISUAL:
    ${e}
    
    BI CNH/TRANG PHC CA CC TAG TRC (NU C):
    ${r||"Khng c cnh trc."}
    
    HY TO PROMPT CHO CC PHN ON SAU (Mi prompt 1 hng):
    ${s.map((x,T)=>`Row ${T+1}: ${x}`).join(`
`)}
    
    Ch tr v danh sch cc prompt. Mi prompt l 1 hng.`;return{prompts:((await c.generateContent(p)).response.text()||"").split(`
`).filter(x=>x.trim().length>0)}}),w6=async(s,e,n,r,o)=>Lo(o,async c=>{const p=`Bn l o din hnh nh (Visual Director) chuyn v Video/Cinematic. Nhim v ca bn l phn tch ni dung on "Hook" v to Video Prompts (din t chuyn ng).
    
    YU CU CHI TIT:
    1. PHN TCH HNH NG: Mi hnh ng c th trong on Hook phi c mt prompt ring bit.
    2. NG B NHN VT: Copy-paste NGUYN VN m t nhn vt t d liu bn di khi nhn vt  xut hin trong hnh ng.
    3. CHUYN NG (MOTION): M t r loi chuyn ng (v d: "Slo-mo walking", "Cinematic drone shot following", "Close-up of facial expression change").
    4. BI CNH/TRANG PHC: K tha t thng tin bi cnh  cung cp.
    5. NH DNG: Mi prompt l 1 hng duy nht.
    
    CU TRC PROMPT:
    [Loi chuyn ng/Gc my] + [Hnh ng nhn vt] + [M t nhn vt chi tit] + [Trang phc & Bi cnh]
    
    D LIU NHN VT:
    ${n.map(y=>`${y.name}: ${y.gender}, ${y.country}, ${y.age}, ${y.physique}. ${y.features}`).join(`
`)}
    
    PHONG CCH VISUAL:
    ${e}
    
    BI CNH/TRANG PHC K THA:
    ${r||"T do sng to da trn khng kh chung."}
    
    NI DUNG ON HOOK CN X L:
    ${s}
    
    Ch tr v danh sch cc prompt video, mi prompt mt hng.`;return((await c.generateContent(p)).response.text()||"").split(`
`).filter(y=>y.trim().length>0)});class E6 extends le.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught error:",e,n)}render(){var e;return this.state.hasError?f.jsxs("div",{className:"p-8 m-8 bg-slate-900 border border-slate-700 rounded-3xl space-y-4 text-center text-white",children:[f.jsx("h2",{className:"text-xl font-bold text-rose-500",children:" xy ra li hin th"}),f.jsx("p",{className:"text-slate-300",children:(e=this.state.error)==null?void 0:e.message}),f.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"px-6 py-3 bg-white text-slate-900 font-bold rounded-xl hover:bg-slate-200 transition-all",children:"Th li"}),f.jsx("p",{className:"text-xs text-slate-500",children:"D liu vn c lu trong b nh tm."})]}):this.props.children}}const S6=({userId:s})=>{const[e,n]=le.useState({visualStyle:"",script:"",characters:[],tags:[],hook:"",hookPrompts:[],isAnalyzing:!1,isProcessingScript:!1,isGeneratingHook:!1}),[r,o]=le.useState(!1),[c,u]=le.useState(!1),[p,g]=le.useState(""),[y,x]=le.useState(null),[T,S]=le.useState(null),O=(P,Q="info")=>{S({message:P,type:Q}),setTimeout(()=>S(null),5e3)};le.useEffect(()=>{if(s)try{const P=`app_api_keys_${s}`,Q=localStorage.getItem(P);if(Q){const R=JSON.parse(Q),de=atob(R.gemini||"").split(`
`).map(ge=>ge.trim()).filter(ge=>ge);g(de.join(`
`))}}catch(P){console.error("Failed to load API key",P)}},[s]);const q=le.useRef(e.tags);le.useEffect(()=>{q.current=e.tags},[e.tags]);const Z=P=>new Promise(Q=>setTimeout(Q,P)),U=async P=>{var se;const Q=(se=P.target.files)==null?void 0:se[0];if(!Q)return;o(!0);const R=new FileReader;R.onload=async de=>{var M;const ge=(M=de.target)==null?void 0:M.result;x(ge);const Be=ge.split(",")[1];try{const ne=await v6(Be,p);n(ue=>({...ue,visualStyle:ne}))}catch(ne){O(`Li phn tch style: ${ne.message||ne}`,"error")}finally{o(!1)}},R.readAsDataURL(Q)},X=async()=>{if(e.script){n(P=>({...P,isProcessingScript:!0}));try{const P=await _6(e.script,p);n(Q=>({...Q,characters:P,isProcessingScript:!1}))}catch(P){O(`Li x l kch bn: ${P.message||P}`,"error"),n(Q=>({...Q,isProcessingScript:!1}))}}},Y=P=>{const Q=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf\uac00-\ud7af]/.test(P),R=[];let se=P;const de=Q?1800:1200,ge=Q?2e3:1500,Be=Q?[`
`,"","","",".","!","?"]:[`
`,".","!","?"];for(;se.length>0;)if(Q){if(se.length<=ge){R.push(se);break}let M=se.slice(de,ge),ne=-1;for(const ue of Be){const fe=M.lastIndexOf(ue);fe>ne&&(ne=fe)}if(ne!==-1){const ue=de+ne+1;R.push(se.slice(0,ue)),se=se.slice(ue)}else R.push(se.slice(0,ge)),se=se.slice(ge)}else{const M=se.split(/(\s+)/);let ne=0,ue=0,fe=-1,Te=!1;for(let Se=0;Se<M.length;Se++){const Oe=M[Se];/\S/.test(Oe)&&ne++;const nt=ue;if(ue+=Oe.length,ne>=de&&ne<=ge&&Be.some(kn=>Oe.includes(kn))&&(fe=ue),ne>ge){const kn=fe!==-1?fe:nt;R.push(se.slice(0,kn)),se=se.slice(kn),Te=!0;break}}if(!Te){R.push(se);break}}return R},ee=()=>{if(!e.script)return;const Q=Y(e.script).map((R,se)=>({id:`tag-${Date.now()}-${se}`,originalContent:R,rows:[R],imageCount:10,prompts:[],status:"idle"}));n(R=>({...R,tags:Q}))},L=(P,Q)=>{n(R=>({...R,tags:R.tags.map(se=>se.id===P?{...se,...Q}:se)}))},H=(P,Q)=>{n(R=>({...R,characters:R.characters.map((se,de)=>de===P?{...se,...Q}:se)}))},te=async P=>{const Q=q.current.find(R=>R.id===P);if(!Q)return!1;L(P,{status:"splitting"});try{const R=await x6(Q.originalContent,Q.imageCount,p);return L(P,{rows:R,status:"ready"}),!0}catch(R){return console.error(`Error splitting rows for TAG: ${P}`,R),O(`Li chia hng: ${R.message||R}`,"error"),L(P,{status:"idle"}),!1}},N=async P=>{const Q=q.current,R=Q.findIndex(ge=>ge.id===P);if(R===-1)return!1;const se=Q[R];let de="";if(R>0){const ge=Q[R-1];ge&&ge.prompts.length>0&&(de=`y l prompt cui ca Tag trc  bn k tha bi cnh v trang phc: ${ge.prompts[ge.prompts.length-1]}`)}L(P,{status:"generating"});try{const ge=await T6(se.rows,e.visualStyle,e.characters,de,p);if(!ge.prompts||ge.prompts.length===0)throw new Error("Empty prompts generated");return L(P,{prompts:ge.prompts,status:"ready"}),!0}catch(ge){return console.error(`Error generating prompts for TAG: ${P}`,ge),L(P,{status:"ready"}),!1}},E=async()=>{if(!e.hook||e.characters.length===0){O("Vui lng nhp ni dung Hook v m bo  phn tch nhn vt.","info");return}n(R=>({...R,isGeneratingHook:!0}));let P="";const Q=e.tags[e.tags.length-1];Q&&Q.prompts.length>0&&(P=`K tha bi cnh t prompt ny: ${Q.prompts[Q.prompts.length-1]}`);try{const R=await w6(e.hook,e.visualStyle,e.characters,P,p);n(se=>({...se,hookPrompts:R,isGeneratingHook:!1}))}catch(R){O(`Li to Prompt Video Hook: ${R.message||R}`,"error"),n(se=>({...se,isGeneratingHook:!1}))}},C=async P=>{const Q=e.tags.find(R=>R.id===P);if(Q){L(P,{status:"analyzing"});try{const R=await b6(Q.originalContent,p);L(P,{actionCount:R,status:"idle"})}catch(R){O(`Li phn tch hnh ng: ${R.message||R}`,"error"),L(P,{status:"idle"})}}},j=async()=>{if(e.tags.length===0)return;u(!0);const P=e.tags.map(Q=>Q.id);for(const Q of P){if(!await te(Q)&&!await te(Q))break;await Z(1e4);let se=await N(Q);if(se||(await Z(1e4),se=await N(Q)),!se&&!confirm(`TAG ${Q} khng th to prompt sau 2 ln th. Bn c mun tip tc cc TAG sau khng?`))break;await Z(1e4)}u(!1),O("Hon thnh quy trnh t ng cho tt c cc TAG!","success")},D=()=>{const Q=e.tags.flatMap(R=>(R.status==="ready"||R.status==="generating"?R.rows.join(`
`):R.originalContent).split(`
`).map(de=>de.trim()).filter(de=>de.length>0)).join(`
`);navigator.clipboard.writeText(Q),O(" copy ton b kch bn ca tt c cc TAG!","success")},z=()=>{const P=e.tags.flatMap(Q=>Q.prompts).map(Q=>Q.trim()).filter(Q=>Q.length>0).join(`
`);navigator.clipboard.writeText(P),O(" copy ton b Prompt ca tt c cc TAG!","success")},I=()=>{const P=e.hookPrompts.join(`
`);navigator.clipboard.writeText(P),O(" copy Prompt Video cho Hook!","success")};return f.jsx(E6,{children:f.jsxs("div",{className:"flex h-screen bg-slate-50 overflow-hidden text-slate-900 w-full relative",children:[T&&f.jsx("div",{className:"absolute top-4 right-4 z-50 animate-in slide-in-from-right fade-in duration-300",children:f.jsxs("div",{className:`px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-3 font-bold text-sm ${T.type==="error"?"bg-rose-50 text-rose-600 border border-rose-100":T.type==="success"?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-white text-slate-700 border border-slate-100"}`,children:[T.type==="success"&&f.jsx(Uw,{className:"w-5 h-5"}),T.type==="error"&&f.jsx(qw,{className:"w-5 h-5"}),T.message]})}),f.jsxs("aside",{className:"w-[30%] bg-white border-r border-slate-200 overflow-y-auto p-6 space-y-8 flex flex-col shrink-0",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg",children:f.jsx(e6,{className:"text-white w-6 h-6"})}),f.jsx("h1",{className:"text-xl font-black text-slate-800 tracking-tight uppercase",children:"ZenShot AI"})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-slate-500 uppercase tracking-widest",children:[f.jsx(hx,{className:"w-3.5 h-3.5"})," Phong cch hnh nh"]}),f.jsxs("div",{className:`border-2 border-dashed border-slate-200 rounded-xl p-4 transition hover:border-indigo-400 bg-slate-50/50 relative group overflow-hidden ${y?"border-none p-0":""}`,children:[f.jsx("input",{type:"file",accept:"image/*",onChange:U,className:"hidden",id:"image-upload"}),f.jsx("label",{htmlFor:"image-upload",className:`cursor-pointer flex flex-col items-center justify-center gap-2 py-2 w-full h-full ${y?"p-0":""}`,children:r?f.jsxs("div",{className:"py-8 flex flex-col items-center",children:[f.jsx(ta,{className:"animate-spin text-indigo-500 w-8 h-8"}),f.jsx("span",{className:"text-[10px] text-indigo-500 font-bold mt-2 uppercase tracking-wider",children:"ang phn tch..."})]}):y?f.jsxs("div",{className:"relative w-full h-48",children:[f.jsx("img",{src:y,alt:"Style Reference",className:"w-full h-full object-cover rounded-lg shadow-sm"}),f.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-lg",children:f.jsxs("div",{className:"flex items-center gap-2 text-white text-xs font-bold uppercase tracking-widest bg-black/50 px-3 py-2 rounded-full backdrop-blur-sm border border-white/20",children:[f.jsx(dx,{className:"w-3 h-3"})," Thay i nh"]})})]}):f.jsxs(f.Fragment,{children:[f.jsx(dx,{className:"text-slate-400 w-6 h-6"}),f.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-tighter",children:"Phn tch phong cch qua nh"})]})})]}),f.jsx("textarea",{className:"w-full h-24 p-3 text-sm bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none transition placeholder:italic",placeholder:"Phong cch chi tit s hin  y...",value:e.visualStyle,onChange:P=>n(Q=>({...Q,visualStyle:P.target.value}))})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("label",{className:"flex items-center gap-2 text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Nhp kch bn chnh"}),f.jsx("textarea",{className:"w-full h-40 p-3 text-sm border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none transition leading-relaxed",placeholder:"Dn kch bn ca bn vo y...",value:e.script,onChange:P=>n(Q=>({...Q,script:P.target.value}))}),f.jsxs("button",{onClick:X,disabled:e.isProcessingScript||!e.script,className:"w-full flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-300 text-white font-bold py-3.5 px-4 rounded-xl transition shadow-lg shadow-indigo-100 uppercase text-xs tracking-widest",children:[e.isProcessingScript?f.jsx(ta,{className:"animate-spin w-4 h-4"}):f.jsx(Bw,{className:"w-4 h-4 fill-current"}),"Bt u phn tch kch bn"]})]}),e.characters.length>0&&f.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-100",children:[f.jsx("label",{className:"flex items-center gap-2 text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Thng tin nhn vt (C th chnh sa)"}),f.jsx("div",{className:"space-y-4 max-h-[500px] overflow-y-auto pr-1",children:e.characters.map((P,Q)=>f.jsxs("div",{className:"p-4 bg-white rounded-xl border border-slate-200 shadow-sm relative overflow-hidden transition hover:border-indigo-300 group",children:[f.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-indigo-500"}),f.jsxs("div",{className:"flex flex-col gap-2",children:[f.jsx("input",{className:"font-black text-slate-800 text-[11px] uppercase bg-transparent border-none p-0 focus:ring-0",value:P.name,onChange:R=>H(Q,{name:R.target.value})}),f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[f.jsx("input",{className:"text-[10px] bg-slate-50 border border-slate-100 rounded px-2 py-1 focus:ring-1 focus:ring-indigo-400",value:P.gender,placeholder:"Gender",onChange:R=>H(Q,{gender:R.target.value})}),f.jsx("input",{className:"text-[10px] bg-slate-50 border border-slate-100 rounded px-2 py-1 focus:ring-1 focus:ring-indigo-400",value:P.age,placeholder:"Age",onChange:R=>H(Q,{age:R.target.value})})]}),f.jsx("textarea",{className:"text-[10px] text-slate-700 leading-relaxed font-medium bg-slate-50 border border-slate-100 rounded p-2 focus:ring-1 focus:ring-indigo-400 resize-none h-20",value:P.features,onChange:R=>H(Q,{features:R.target.value})})]})]},Q))})]}),f.jsx("div",{className:"mt-auto pt-6",children:f.jsxs("button",{onClick:ee,disabled:!e.script,className:"w-full flex items-center justify-center gap-2 bg-slate-800 hover:bg-slate-900 text-white font-bold py-3.5 px-4 rounded-xl transition uppercase text-xs tracking-widest",children:[f.jsx(Hw,{className:"w-4 h-4"}),"Chia kch bn sang TAG"]})})]}),f.jsxs("main",{className:"flex-1 overflow-y-auto bg-slate-50 scroll-smooth flex flex-col",children:[e.tags.length>0&&f.jsxs("div",{className:"sticky top-0 z-10 bg-white/80 backdrop-blur-md border-b border-slate-200 px-8 py-4 flex items-center justify-between shadow-sm",children:[f.jsx("div",{className:"flex items-center gap-3",children:f.jsxs("button",{onClick:j,disabled:c,className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-300 text-white px-5 py-2.5 rounded-xl font-black text-[11px] uppercase tracking-widest shadow-lg shadow-indigo-100 transition-all active:scale-95",children:[c?f.jsx(ta,{className:"animate-spin w-4 h-4"}):f.jsx(fx,{className:"w-4 h-4 fill-amber-400 text-amber-400"}),"T ng Hon Ton"]})}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("button",{onClick:D,className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-900 text-white px-5 py-2.5 rounded-xl font-black text-[11px] uppercase tracking-widest transition-all active:scale-95",children:[f.jsx(s6,{className:"w-4 h-4"}),"Copy All Kch Bn"]}),f.jsxs("button",{onClick:z,className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-900 text-white px-5 py-2.5 rounded-xl font-black text-[11px] uppercase tracking-widest transition-all active:scale-95",children:[f.jsx(o6,{className:"w-4 h-4"}),"Copy All Prompt nh"]})]})]}),f.jsx("div",{className:"max-w-4xl mx-auto space-y-8 p-8 w-full",children:e.tags.length===0?f.jsxs("div",{className:"h-[70vh] flex flex-col items-center justify-center text-slate-300 space-y-6",children:[f.jsx("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center shadow-sm border border-slate-100",children:f.jsx(hx,{className:"w-10 h-10 opacity-40"})}),f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-xl font-bold text-slate-400",children:"ZenShot Visual Director"}),f.jsx("p",{className:"text-sm text-slate-400 mt-1 uppercase tracking-widest font-bold opacity-60",children:"Split script and start generating prompts"})]})]}):f.jsxs(f.Fragment,{children:[e.tags.map((P,Q)=>f.jsx(A6,{tag:P,index:Q,onSplit:()=>te(P.id),onAnalyze:()=>C(P.id),onGenerate:()=>N(P.id),onUpdateCount:R=>L(P.id,{imageCount:R}),onCopy:()=>{const R=P.prompts.map(se=>se.trim()).join(`
`);navigator.clipboard.writeText(R),O("Copied prompts for this TAG!","success")},onUpdateContent:R=>L(P.id,{originalContent:R}),onDelete:()=>n(R=>({...R,tags:R.tags.filter(se=>se.id!==P.id)}))},P.id)),f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden transition hover:shadow-lg mt-12 mb-20 p-8 space-y-6",children:[f.jsxs("div",{className:"flex items-center justify-between border-b border-slate-50 pb-4",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("span",{className:"bg-amber-500 text-white text-[10px] font-black px-3 py-1 rounded-full uppercase tracking-widest",children:"VIDEO HOOK"}),f.jsx("h2",{className:"text-sm font-black text-slate-800 uppercase tracking-widest",children:"Phn tch chuyn ng"})]}),f.jsx(m6,{className:"w-5 h-5 text-slate-300"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Ni dung on Hook"}),f.jsx("textarea",{className:"w-full h-40 p-4 text-sm bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:outline-none resize-none leading-relaxed transition font-medium",placeholder:"Nhp ni dung on Hook kch bn ti y...",value:e.hook,onChange:P=>n(Q=>({...Q,hook:P.target.value}))})]}),e.hookPrompts.length>0&&f.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Prompts Video Chuyn ng"}),f.jsxs("button",{onClick:I,className:"flex items-center gap-1.5 text-amber-600 hover:text-amber-700 text-[10px] font-black px-4 py-2 bg-amber-50 rounded-xl transition uppercase tracking-widest shadow-sm shadow-amber-50",children:[f.jsx(zw,{className:"w-3.5 h-3.5"})," Copy Hook Prompts"]})]}),f.jsx("div",{className:"space-y-4",children:e.hookPrompts.map((P,Q)=>f.jsxs("div",{className:"p-4 bg-slate-900 rounded-xl border border-slate-800 relative group transition hover:border-amber-500 shadow-lg",children:[f.jsx("div",{className:"absolute -left-3 top-4 w-7 h-7 bg-amber-500 text-white flex items-center justify-center text-[10px] font-black rounded-full border-2 border-slate-50 shadow-md",children:Q+1}),f.jsx("p",{className:"text-slate-300 text-[11px] font-mono break-words leading-relaxed pl-4",children:P})]},Q))})]}),f.jsxs("button",{onClick:E,disabled:e.isGeneratingHook||!e.hook,className:"w-full flex items-center justify-center gap-2 bg-slate-800 hover:bg-slate-900 disabled:bg-slate-300 text-white font-black py-4.5 rounded-2xl transition shadow-xl shadow-slate-200 uppercase text-xs tracking-[0.2em]",children:[e.isGeneratingHook?f.jsx(ta,{className:"animate-spin w-5 h-5"}):f.jsx(fx,{className:"w-5 h-5 fill-amber-400 text-amber-400"}),"To Prompt Video"]})]})]})})]})]})})},A6=({tag:s,index:e,onSplit:n,onAnalyze:r,onGenerate:o,onUpdateCount:c,onCopy:u,onUpdateContent:p,onDelete:g})=>f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden transition hover:shadow-lg",children:[f.jsxs("div",{className:"px-6 py-4 bg-slate-50/80 border-b border-slate-100 flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("span",{className:"bg-slate-800 text-white text-[10px] font-black px-3 py-1 rounded-full uppercase tracking-widest",children:["TAG ",e+1]}),f.jsxs("span",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:[s.originalContent.length," k t"]})]}),f.jsx("button",{onClick:g,className:"text-slate-300 hover:text-red-500 transition p-1",children:f.jsx(qw,{className:"w-4 h-4"})})]}),f.jsxs("div",{className:"p-6 space-y-6",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Kch bn phn on"}),f.jsxs("div",{className:"relative group",children:[f.jsx("textarea",{className:"w-full h-40 p-4 text-sm bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:outline-none resize-none leading-relaxed transition font-medium",value:s.status==="ready"||s.status==="generating"?s.rows.join(`
`):s.originalContent,readOnly:s.status==="ready"||s.status==="generating",onChange:y=>p(y.target.value)}),(s.status==="ready"||s.status==="generating")&&s.rows.length>1&&f.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-1.5 bg-white text-emerald-600 px-3 py-1.5 rounded-lg text-[10px] font-black border border-emerald-100 shadow-sm uppercase",children:[f.jsx(Uw,{className:"w-3 h-3"})," Chia hng xong"]})]})]}),f.jsxs("div",{className:"flex flex-wrap gap-6 items-end border-y border-slate-50 py-4",children:[f.jsxs("div",{className:"flex-1 space-y-2",children:[f.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[f.jsx(JD,{className:"w-3 h-3"})," Phn tch hnh ng"]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("button",{onClick:r,disabled:s.status==="analyzing",className:"flex items-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-800 text-[10px] font-black rounded-lg transition uppercase tracking-widest",children:s.status==="analyzing"?f.jsx(ta,{className:"animate-spin w-3 h-3"}):"Phn tch"}),s.actionCount!==void 0&&f.jsxs("div",{className:"flex items-center gap-1.5 text-indigo-600 font-black text-sm",children:[f.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:"S hnh ng:"})," ",s.actionCount]})]})]}),f.jsxs("div",{className:"w-40 space-y-2",children:[f.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"S lng nh"}),f.jsxs("div",{className:"relative flex items-center",children:[f.jsx("button",{onClick:()=>c(Math.max(1,s.imageCount-1)),className:"absolute left-1 w-7 h-7 flex items-center justify-center bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-lg font-bold",children:"-"}),f.jsx("input",{type:"number",min:"1",max:"100",className:"w-full h-10 px-8 text-center border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:outline-none font-bold text-slate-700",value:s.imageCount,onChange:y=>c(parseInt(y.target.value)||1)}),f.jsx("button",{onClick:()=>c(s.imageCount+1),className:"absolute right-1 w-7 h-7 flex items-center justify-center bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-lg font-bold",children:"+"})]})]}),f.jsxs("button",{onClick:n,disabled:s.status==="splitting",className:"h-10 px-6 flex items-center justify-center gap-2 bg-slate-800 hover:bg-slate-900 text-white font-bold rounded-xl transition uppercase text-[10px] tracking-widest shadow-sm",children:[s.status==="splitting"?f.jsx(ta,{className:"animate-spin w-3 h-3"}):f.jsx(Hw,{className:"w-3 h-3"}),"Chia hng"]})]}),s.prompts.length>0&&f.jsxs("div",{className:"space-y-4 pt-6",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Prompts Midjourney"}),f.jsxs("button",{onClick:u,className:"flex items-center gap-1.5 text-indigo-600 hover:text-indigo-700 text-[10px] font-black px-4 py-2 bg-indigo-50 rounded-xl transition uppercase tracking-widest shadow-sm shadow-indigo-50",children:[f.jsx(zw,{className:"w-3.5 h-3.5"})," Sao chp Tag ny"]})]}),f.jsx("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar",children:s.prompts.map((y,x)=>f.jsxs("div",{className:"p-4 bg-slate-900 rounded-xl border border-slate-800 relative group transition hover:border-indigo-500 shadow-lg",children:[f.jsx("div",{className:"absolute -left-3 top-4 w-7 h-7 bg-indigo-600 text-white flex items-center justify-center text-[10px] font-black rounded-full border-2 border-slate-50 shadow-md",children:x+1}),f.jsx("p",{className:"text-slate-300 text-[11px] font-mono break-words leading-relaxed pl-4",children:y})]},x))})]}),f.jsxs("button",{onClick:o,disabled:s.status==="generating",className:"w-full flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-300 text-white font-black py-4.5 rounded-2xl transition shadow-xl shadow-indigo-200 uppercase text-xs tracking-[0.2em]",children:[s.status==="generating"?f.jsx(ta,{className:"animate-spin w-5 h-5"}):f.jsx(Bw,{className:"w-5 h-5 fill-current"}),"To Prompt nh"]})]})]}),N6=le.forwardRef(({value:s,onChange:e,className:n=""},r)=>{const o=le.useRef(null),c=le.useRef(null);le.useEffect(()=>{o.current&&o.current.innerHTML!==s&&(s===""&&o.current.innerHTML!==""?o.current.innerHTML="":o.current.innerHTML===""&&s&&(o.current.innerHTML=s))},[s]),le.useImperativeHandle(r,()=>({insertText:x=>{p(),document.execCommand("insertText",!1,x),y()}}));const u=()=>{const x=window.getSelection();x&&x.rangeCount>0&&o.current&&o.current.contains(x.anchorNode)&&(c.current=x.getRangeAt(0))},p=()=>{var T;const x=window.getSelection();x&&c.current?(x.removeAllRanges(),x.addRange(c.current)):(T=o.current)==null||T.focus()},g=(x,T=void 0)=>{document.execCommand(x,!1,T),y()},y=()=>{o.current&&e(o.current.innerHTML),u()};return f.jsxs("div",{className:`border border-slate-700 rounded-lg overflow-hidden flex flex-col ${n}`,children:[f.jsxs("div",{className:"bg-slate-800 border-b border-slate-700 p-2 flex gap-1 flex-wrap",children:[f.jsx("button",{onMouseDown:x=>{x.preventDefault(),g("bold")},className:"p-1 px-2 text-slate-300 hover:bg-white/10 rounded font-bold",type:"button",title:"Bold",children:"B"}),f.jsx("button",{onMouseDown:x=>{x.preventDefault(),g("italic")},className:"p-1 px-2 text-slate-300 hover:bg-white/10 rounded italic",type:"button",title:"Italic",children:"I"}),f.jsx("button",{onMouseDown:x=>{x.preventDefault(),g("underline")},className:"p-1 px-2 text-slate-300 hover:bg-white/10 rounded underline",type:"button",title:"Underline",children:"U"}),f.jsx("div",{className:"w-px h-6 bg-slate-600 mx-1 self-center"}),f.jsx("button",{onMouseDown:x=>{x.preventDefault(),g("justifyLeft")},className:"p-1 px-2 text-slate-300 hover:bg-white/10 rounded",type:"button",title:"Align Left",children:""}),f.jsx("button",{onMouseDown:x=>{x.preventDefault(),g("justifyCenter")},className:"p-1 px-2 text-slate-300 hover:bg-white/10 rounded",type:"button",title:"Align Center",children:""}),f.jsx("button",{onMouseDown:x=>{x.preventDefault(),g("justifyRight")},className:"p-1 px-2 text-slate-300 hover:bg-white/10 rounded",type:"button",title:"Align Right",children:""}),f.jsx("div",{className:"w-px h-6 bg-slate-600 mx-1 self-center"}),f.jsx("button",{onMouseDown:x=>{x.preventDefault();const T=prompt("Nhp ng dn URL:");T&&g("createLink",T)},className:"p-1 px-2 text-slate-300 hover:bg-white/10 rounded text-blue-400",type:"button",title:"Link",children:"Link"}),f.jsxs("select",{onChange:x=>g("formatBlock",x.target.value),className:"bg-slate-700 text-white text-xs rounded px-2 py-1 outline-none border border-slate-600",children:[f.jsx("option",{value:"p",children:"Normal"}),f.jsx("option",{value:"h3",children:"Heading 1"}),f.jsx("option",{value:"h4",children:"Heading 2"}),f.jsx("option",{value:"blockquote",children:"Quote"})]})]}),f.jsx("div",{ref:o,contentEditable:!0,onInput:y,onBlur:u,onMouseUp:u,onKeyUp:u,className:"flex-grow bg-slate-900 text-white p-4 outline-none min-h-[150px] overflow-auto prose prose-invert prose-sm max-w-none"})]})}),C6=({currentImage:s,onImageUploaded:e,onClear:n})=>{const[r,o]=le.useState(s||null),[c,u]=le.useState(!1),[p,g]=le.useState(0),[y,x]=le.useState(null),T=le.useRef(null),S=le.useRef(null),O=le.useRef(null);le.useEffect(()=>{o(s||null)},[s]),le.useEffect(()=>{const ee=L=>{if(L.clipboardData&&L.clipboardData.items){const H=L.clipboardData.items;for(let te=0;te<H.length;te++)if(H[te].type.indexOf("image")!==-1){const N=H[te].getAsFile();N&&Z(N);break}}};return window.addEventListener("paste",ee),()=>window.removeEventListener("paste",ee)},[]);const q=ee=>ee.type.startsWith("image/")?ee.size>2*1024*1024?(x("Dung lng hnh nh phi di 2MB."),!1):!0:(x("Ch chp nhn file hnh nh (JPG, PNG, GIF, WEBP)."),!1),Z=ee=>{if(x(null),!q(ee))return;const L=URL.createObjectURL(ee);o(L),u(!0);const H=`news_images/${Date.now()}_${ee.name}`,te=SD(kD,H),N=wD(te,ee);O.current=N,N.on("state_changed",E=>{const C=E.bytesTransferred/E.totalBytes*100;g(C)},E=>{console.error("Upload error:",E);let C="C li xy ra khi ti nh ln.";E.code==="storage/unauthorized"?C="Li quyn truy cp: Bn khng c quyn ti nh ln (Kim tra Rules).":E.code==="storage/canceled"?C=" hy ti ln.":E.code==="storage/unknown"&&(C="Li khng xc nh. Nu ang chy Localhost (127.0.0.1), hy kim tra CORS ca Firebase Storage."),x(C),u(!1)},()=>{ED(N.snapshot.ref).then(E=>{u(!1),e(E)})})},U=ee=>{ee.target.files&&ee.target.files[0]&&Z(ee.target.files[0])},X=ee=>{ee.preventDefault(),ee.stopPropagation(),ee.dataTransfer.files&&ee.dataTransfer.files[0]&&Z(ee.dataTransfer.files[0])},Y=ee=>{ee.preventDefault(),ee.stopPropagation()};return f.jsxs("div",{className:"space-y-3",children:[f.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400",children:"Hnh nh i din (Ti a 2MB)"}),r?f.jsxs("div",{className:"relative group rounded-xl overflow-hidden border border-slate-700 bg-slate-900",children:[f.jsx("img",{src:r,alt:"Preview",className:"w-full h-48 object-cover opacity-80 group-hover:opacity-100 transition-opacity"}),f.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-3",children:[f.jsx("button",{onClick:()=>{var ee;return(ee=T.current)==null?void 0:ee.click()},className:"bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-1.5 rounded text-xs font-bold",children:"Thay i"}),f.jsx("button",{onClick:()=>{o(null),n()},className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded text-xs font-bold",children:"Xa"})]}),c&&f.jsxs("div",{className:"absolute inset-0 bg-black/70 flex flex-col items-center justify-center z-10",children:[f.jsx("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mb-2"}),f.jsxs("span",{className:"text-white text-xs font-bold mb-2",children:["ang ti ln... ",Math.round(p),"%"]}),f.jsx("button",{onClick:ee=>{var L;ee.stopPropagation(),(L=O.current)==null||L.cancel(),u(!1),x(" hy ti ln.")},className:"bg-white/20 hover:bg-white/30 text-white px-3 py-1 rounded text-xs",children:"Hy"})]})]}):f.jsxs("div",{ref:S,onDrop:X,onDragOver:Y,className:"border-2 border-dashed border-slate-700 hover:border-indigo-500 bg-slate-800/50 hover:bg-slate-800 rounded-xl p-8 text-center cursor-pointer transition-all flex flex-col items-center justify-center gap-2 group",onClick:()=>{var ee;return(ee=T.current)==null?void 0:ee.click()},tabIndex:0,children:[f.jsx("svg",{className:"w-8 h-8 text-slate-500 group-hover:text-indigo-400 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),f.jsxs("div",{children:[f.jsx("span",{className:"text-indigo-400 font-bold text-sm",children:"Upload File"}),f.jsx("span",{className:"text-slate-500 text-sm",children:" hoc ko th vo y"})]}),f.jsx("div",{className:"text-[10px] text-slate-500 uppercase font-bold tracking-widest mt-1",children:"H tr Paste (Ctrl+V) nh trc tip"})]}),y&&f.jsx("div",{className:"text-red-400 text-xs font-bold bg-red-400/10 p-2 rounded",children:y}),f.jsx("input",{type:"file",ref:T,onChange:U,accept:"image/*",className:"hidden"})]})},R6=({news:s,formatDate:e,onImageClick:n})=>{const[r,o]=le.useState(!1),p=(y=>{const x=document.createElement("DIV");return x.innerHTML=y,x.textContent||x.innerText||""})(s.content).split(/\s+/).filter(y=>y.length>0),g=p.length>50;return f.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:[f.jsx("h3",{className:"text-xl font-bold text-indigo-700 mb-2",children:s.title}),f.jsxs("div",{className:"text-xs text-gray-400 mb-4",children:[e(s.date)," | Bi ",s.author]}),s.imageUrl&&f.jsx("div",{className:"mb-4 rounded-xl overflow-hidden cursor-zoom-in shadow-sm hover:shadow-md transition-all",children:f.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-full h-auto object-cover hover:scale-105 transition-transform duration-500",onClick:y=>{y.stopPropagation(),n(s.imageUrl)}})}),f.jsx("div",{className:`prose prose-slate max-w-none ${!r&&g?"line-clamp-3":""}`,onClick:y=>{const x=y.target;x.tagName==="IMG"&&(y.stopPropagation(),n(x.src))},children:r||!g?f.jsx("div",{dangerouslySetInnerHTML:{__html:s.content},className:"[&_img]:cursor-zoom-in [&_img]:rounded-lg [&_img]:shadow-sm hover:[&_img]:shadow-md [&_img]:transition-all"}):f.jsx("div",{children:f.jsxs("p",{children:[p.slice(0,50).join(" "),"..."]})})}),g&&f.jsx("button",{onClick:()=>o(!r),className:"mt-3 text-sm font-bold text-indigo-600 hover:text-indigo-800 underline decoration-2 underline-offset-4",children:r?"Thu gn":"Xem thm"})]})},I6=({user:s,onNavigate:e})=>{var I;const[n,r]=le.useState({layout:"modern",news:[],welcomeTitle:"",welcomeMessage:"",statusTitle:"",statusMessage:""}),[o,c]=le.useState(!1),[u,p]=le.useState({}),[g,y]=le.useState(!1),x=le.useRef(null),[T,S]=le.useState(null),[O,q]=le.useState(null);le.useEffect(()=>{const P=localStorage.getItem("app_settings");if(P)r(JSON.parse(P));else{const Q=[{id:"1",title:"Cho mng n vi Quang Huy Studio",content:"<p>H thng <b>Multi-App Engine</b>  chnh thc vn hnh. Hy chn ng dng  bt u!</p>",date:Date.now(),author:"System"}];r({layout:"modern",news:Q,welcomeTitle:"Cho mng, {username}!",welcomeMessage:"H thng AI Studio cung cp cc cng c ti tn nht  t ng ha quy trnh sng to ni dung ca bn.",statusTitle:"Stable",statusMessage:"Tt c dch v API ang hot ng bnh thng.",zaloPhone:"0987654321",sidebarWidgets:[{id:"w1",type:"status",title:"Trng thi",order:0},{id:"w2",type:"shortcuts",title:"Li tt",order:1}]})}},[]),le.useEffect(()=>{o&&S(n)},[o,n]);const Z=P=>{r(P),localStorage.setItem("app_settings",JSON.stringify(P))},U=()=>{T&&(Z(T),alert(" lu cu hnh thnh cng!"))},X=(P,Q)=>{T&&S({...T,[P]:Q})},Y=()=>{if(!u.title||!u.content)return;const P={id:u.id||crypto.randomUUID(),title:u.title,content:u.content,imageUrl:u.imageUrl,date:u.date||Date.now(),author:s.username};let Q=[...n.news];u.id?Q=Q.map(R=>R.id===u.id?P:R):Q=[P,...Q],Z({...n,news:Q}),y(!1),p({})},ee=P=>{if(confirm("Bn c chc mun xa tin tc ny?")){const Q=n.news.filter(R=>R.id!==P);Z({...n,news:Q})}},L=P=>new Date(P).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric"}),H=P=>P?P.replace("{username}",s.username||"User"):"",te=(P,Q)=>{if(!T)return;const R=[...T.sidebarWidgets||[]];Q==="up"&&P>0?[R[P],R[P-1]]=[R[P-1],R[P]]:Q==="down"&&P<R.length-1&&([R[P],R[P+1]]=[R[P+1],R[P]]),X("sidebarWidgets",R)},N=()=>{var Q;if(!T)return;const P={id:crypto.randomUUID(),type:"custom",title:"Tiu  mi",content:"<p>Ni dung ty chnh...</p>",order:((Q=T.sidebarWidgets)==null?void 0:Q.length)||0};X("sidebarWidgets",[...T.sidebarWidgets||[],P])},E=P=>{var Q;if(T&&confirm("Xa widget ny?")){const R=((Q=T.sidebarWidgets)==null?void 0:Q.filter(se=>se.id!==P))||[];X("sidebarWidgets",R)}},C=(P,Q,R)=>{var de;if(!T)return;const se=((de=T.sidebarWidgets)==null?void 0:de.map(ge=>ge.id===P?{...ge,[Q]:R}:ge))||[];X("sidebarWidgets",se)},j=(P,Q)=>{const R=[...n.news];Q==="up"&&P>0?[R[P],R[P-1]]=[R[P-1],R[P]]:Q==="down"&&P<R.length-1&&([R[P],R[P+1]]=[R[P+1],R[P]]),Z({...n,news:R})},D=()=>f.jsxs("div",{className:"flex flex-col h-full overflow-y-auto",children:[n.zaloPhone&&f.jsxs("a",{href:`https://zalo.me/${n.zaloPhone}`,target:"_blank",rel:"noreferrer",className:"fixed bottom-24 right-6 z-40 bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full shadow-lg flex items-center gap-2 animate-bounce transition-transform hover:scale-110",title:"Chat Zalo",children:[f.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"currentColor",children:f.jsx("path",{d:"M12 2C6.48 2 2 5.92 2 10.5c0 2.37 1.17 4.54 3.12 6.13-.15.86-.54 1.95-1.42 2.62-.23.18-.08.57.21.57 2.39 0 4.19-1.29 4.88-1.93.7.13 1.43.21 2.21.21 5.52 0 10-3.92 10-8.5S17.52 2 12 2zm0 15c-.71 0-1.39-.07-2.04-.2-.27-.05-.54.04-.73.23-.74.72-2.12 1.58-3.73 1.66.44-.8 1.05-2.22 1.05-2.22.06-.16.03-.35-.09-.48C4.94 14.54 4 12.63 4 10.5 4 7.02 7.7 4 12 4s8 3.02 8 6.5-3.7 6.5-8 6.5z"})}),f.jsx("span",{className:"font-bold text-xs",children:n.zaloPhone})]}),f.jsxs("div",{className:"relative py-24 px-6 md:px-12 text-center overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-900 via-[#0f172a] to-slate-900 z-0"}),f.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 z-0"}),f.jsxs("div",{className:"relative z-10 space-y-6 max-w-4xl mx-auto",children:[f.jsx("span",{className:"inline-block py-1 px-3 rounded-full bg-indigo-500/20 border border-indigo-400/30 text-indigo-300 text-xs font-bold uppercase tracking-widest animate-in fade-in slide-in-from-bottom-4",children:"H thng iu hnh AI tp trung"}),f.jsx("h1",{className:"text-5xl md:text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-indigo-200 to-indigo-400 leading-tight drop-shadow-2xl animate-in zoom-in-95 duration-700",children:n.welcomeTitle?H(n.welcomeTitle):"QUANG HUY AI STUDIO"}),f.jsx("p",{className:"text-lg md:text-xl text-slate-400 font-light max-w-2xl mx-auto leading-relaxed animate-in fade-in slide-in-from-bottom-6 delay-200",children:n.welcomeMessage||"Nn tng tch hp a cng c mnh m, gip bn ti u ha quy trnh sng to Video v Hnh nh Viral ch vi mt c click."}),f.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 pt-8 animate-in fade-in slide-in-from-bottom-8 delay-300",children:[f.jsxs("button",{onClick:()=>e("video-viral"),className:"group relative px-8 py-4 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-2xl shadow-xl shadow-indigo-600/20 transition-all hover:-translate-y-1 active:scale-95 overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300 transform skew-y-12"}),"VIDEO VIRAL ENGINE"]}),f.jsx("button",{onClick:()=>e("image-script"),className:"px-8 py-4 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-white font-bold rounded-2xl shadow-xl transition-all hover:-translate-y-1 active:scale-95",children:"VISUAL SCRIPT ENGINE"})]})]})]}),f.jsxs("div",{className:"max-w-5xl mx-auto w-full px-6 py-16 space-y-12",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("h2",{className:"text-2xl font-bold text-gray-800 border-l-4 border-indigo-600 pl-4 uppercase tracking-wider",children:"Tin Tc Mi Nht"}),f.jsx("div",{className:"h-px bg-gray-200 flex-grow"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[n.news.map(P=>f.jsxs("div",{className:"group bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-2xl hover:border-indigo-100 transition-all",children:[f.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400 mb-4 font-bold uppercase tracking-wider",children:[f.jsx("span",{children:L(P.date)}),f.jsx("span",{className:"text-indigo-500",children:P.author})]}),P.imageUrl&&f.jsx("div",{className:"mb-3 rounded-lg overflow-hidden h-40 w-full relative",children:f.jsx("img",{src:P.imageUrl,alt:P.title,className:"absolute inset-0 w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500 cursor-zoom-in",onClick:()=>q(P.imageUrl)})}),f.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3 group-hover:text-indigo-600 transition-colors line-clamp-2",children:P.title}),f.jsx("div",{className:"prose prose-sm text-gray-500 line-clamp-4 [&_img]:cursor-zoom-in",dangerouslySetInnerHTML:{__html:P.content},onClick:Q=>{const R=Q.target;R.tagName==="IMG"&&(Q.stopPropagation(),q(R.src))}}),f.jsxs("button",{className:"mt-6 text-sm font-bold text-indigo-600 hover:text-indigo-800 flex items-center gap-2 group/btn",children:["Xem chi tit",f.jsx("svg",{className:"w-4 h-4 group-hover/btn:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})]},P.id)),n.news.length===0&&f.jsx("p",{className:"text-gray-400 italic",children:"Cha c tin tc no."})]})]})]}),z=()=>{var P;return f.jsxs("div",{className:"h-full overflow-y-auto bg-gray-50",children:[n.zaloPhone&&f.jsxs("a",{href:`https://zalo.me/${n.zaloPhone}`,target:"_blank",rel:"noreferrer",className:"fixed bottom-24 right-6 z-40 bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-full shadow-lg flex items-center gap-2 animate-bounce transition-transform hover:scale-110",title:"Chat Zalo",children:[f.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"currentColor",children:f.jsx("path",{d:"M12 2C6.48 2 2 5.92 2 10.5c0 2.37 1.17 4.54 3.12 6.13-.15.86-.54 1.95-1.42 2.62-.23.18-.08.57.21.57 2.39 0 4.19-1.29 4.88-1.93.7.13 1.43.21 2.21.21 5.52 0 10-3.92 10-8.5S17.52 2 12 2zm0 15c-.71 0-1.39-.07-2.04-.2-.27-.05-.54.04-.73.23-.74.72-2.12 1.58-3.73 1.66.44-.8 1.05-2.22 1.05-2.22.06-.16.03-.35-.09-.48C4.94 14.54 4 12.63 4 10.5 4 7.02 7.7 4 12 4s8 3.02 8 6.5-3.7 6.5-8 6.5z"})}),f.jsxs("span",{className:"font-bold text-sm",children:["H tr: ",n.zaloPhone]})]}),f.jsx("div",{className:"max-w-6xl mx-auto px-6 py-12",children:f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[f.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[f.jsxs("div",{className:"bg-white rounded-3xl p-10 shadow-xl border border-gray-100 relative overflow-hidden",children:[f.jsx("div",{className:"absolute top-0 right-0 p-8 w-64 opacity-10",children:f.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zm0 9l2.5-1.25L12 8.5l-2.5 1.25L12 11zm0 2.5l-5-2.5-5 2.5L12 22l10-8.5-5-2.5-5 2.5z"})})}),f.jsx("h1",{className:"text-4xl font-black text-gray-900 mb-6",children:H(n.welcomeTitle)||`Cho mng, ${s.username}!`}),f.jsx("p",{className:"text-lg text-gray-600 mb-8 leading-relaxed",children:n.welcomeMessage||"H thng AI Studio cung cp cc cng c ti tn nht  t ng ha quy trnh sng to ni dung ca bn."}),f.jsx("div",{className:"flex flex-wrap gap-4"})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Cp nht h thng"}),n.news.map(Q=>f.jsx(R6,{news:Q,formatDate:L,onImageClick:q},Q.id))]})]}),f.jsx("div",{className:"space-y-6",children:(P=n.sidebarWidgets)==null?void 0:P.map(Q=>f.jsxs("div",{className:`${Q.type==="status"?"bg-gradient-to-br from-indigo-500 to-purple-600 text-white":"bg-white text-gray-800 border-gray-100"} rounded-3xl p-8 shadow-xl border`,children:[f.jsx("h3",{className:"text-lg font-bold uppercase tracking-widest mb-4 opacity-80",children:Q.title}),Q.type==="status"&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"text-4xl font-black mb-4",children:n.statusTitle||"Stable"}),f.jsx("p",{className:"text-sm opacity-90",children:n.statusMessage||"Tt c dch v API ang hot ng bnh thng."})]}),Q.type==="shortcuts"&&f.jsxs("ul",{className:"space-y-3 text-sm text-gray-600",children:[f.jsxs("li",{className:"flex items-center gap-2 cursor-pointer hover:text-indigo-600",children:[f.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})," User Guide"]}),f.jsxs("li",{className:"flex items-center gap-2 cursor-pointer hover:text-indigo-600",children:[f.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"})," API Docs"]}),f.jsxs("li",{className:"flex items-center gap-2 cursor-pointer hover:text-indigo-600",children:[f.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-500"})," Support"]})]}),Q.type==="custom"&&Q.content&&f.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:Q.content}})]},Q.id))})]})})]})};return f.jsxs("div",{className:"relative h-full w-full bg-slate-50",children:[n.layout==="modern"&&f.jsx(D,{}),n.layout==="classic"&&f.jsx(z,{}),n.layout==="news-focus"&&f.jsx(z,{})," ",s.role==="admin"&&f.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:f.jsx("button",{onClick:()=>c(!0),className:"w-14 h-14 bg-red-600 hover:bg-red-700 text-white rounded-full shadow-2xl flex items-center justify-center transition-transform hover:scale-110 active:scale-95",title:"Qun tr trang ch",children:f.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),O&&f.jsx("div",{className:"fixed inset-0 z-[300] bg-black/95 backdrop-blur-md flex items-center justify-center p-4 md:p-10 animate-in fade-in duration-300",onClick:()=>q(null),children:f.jsxs("div",{className:"relative max-w-full max-h-full flex flex-col items-center",children:[f.jsx("img",{src:O,alt:"Full View",className:"max-w-full max-h-[85vh] object-contain rounded-lg shadow-2xl",onClick:P=>P.stopPropagation()}),f.jsxs("button",{onClick:()=>q(null),className:"mt-6 bg-white/10 hover:bg-white/20 text-white px-6 py-2 rounded-full backdrop-blur-md border border-white/20 font-bold transition-all hover:scale-105 active:scale-95 flex items-center gap-2",children:[f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),"ng hnh nh"]})]})}),o&&f.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[200] flex items-center justify-center p-6",children:f.jsxs("div",{className:"bg-[#1e293b] w-full max-w-4xl h-[90vh] rounded-2xl border border-white/10 shadow-2xl flex flex-col animate-in zoom-in-95",children:[f.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-white/10",children:[f.jsx("h2",{className:"text-xl font-bold text-white uppercase tracking-widest",children:"Cu hnh Trang Ch"}),f.jsx("button",{onClick:()=>c(!1),className:"text-slate-400 hover:text-white",children:f.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"flex-grow flex overflow-hidden",children:[f.jsxs("div",{className:"w-1/3 bg-black/20 p-6 border-r border-white/5 space-y-8 overflow-y-auto flex flex-col",children:[f.jsxs("div",{className:"flex-grow space-y-8",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-3",children:"Chn B Cc (Layout)"}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{onClick:()=>X("layout","modern"),className:`p-4 rounded-xl border-2 cursor-pointer transition-all ${(T==null?void 0:T.layout)==="modern"?"border-indigo-500 bg-indigo-500/10":"border-slate-700 hover:border-slate-500"}`,children:[f.jsx("div",{className:"font-bold text-white text-sm mb-1",children:"Modern Visual (Default)"}),f.jsx("div",{className:"text-xs text-slate-400",children:"Hero ln, nn ng, card trong sut."})]}),f.jsxs("div",{onClick:()=>X("layout","classic"),className:`p-4 rounded-xl border-2 cursor-pointer transition-all ${(T==null?void 0:T.layout)==="classic"?"border-indigo-500 bg-indigo-500/10":"border-slate-700 hover:border-slate-500"}`,children:[f.jsx("div",{className:"font-bold text-white text-sm mb-1",children:"Classic Dashboard"}),f.jsx("div",{className:"text-xs text-slate-400",children:"Gn gng, tp trung thng tin."})]})]})]}),f.jsx("hr",{className:"border-white/10"}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-3",children:"Thng tin Zalo (0 n)"}),f.jsx("input",{type:"text",value:(T==null?void 0:T.zaloPhone)||"",onChange:P=>X("zaloPhone",P.target.value),placeholder:"ST Zalo (V d: 0987654321)",className:"w-full bg-slate-800 border-slate-700 text-white p-2 rounded text-sm"})]}),f.jsx("hr",{className:"border-white/10"}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-center mb-3",children:[f.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400",children:"Qun l Ct Bn Phi"}),f.jsx("button",{onClick:N,className:"text-xs bg-indigo-600 px-2 py-1 rounded text-white hover:bg-indigo-700",children:"+ Thm Ct"})]}),f.jsx("div",{className:"space-y-3",children:(I=T==null?void 0:T.sidebarWidgets)==null?void 0:I.map((P,Q)=>{var R;return f.jsxs("div",{className:"bg-slate-800 p-3 rounded-lg border border-slate-700",children:[f.jsxs("div",{className:"flex justify-between items-center mb-2",children:[f.jsxs("span",{className:"text-xs font-bold text-slate-300",children:["#",Q+1," - ",P.type==="custom"?"Ty chnh":P.title]}),f.jsxs("div",{className:"flex gap-1",children:[f.jsx("button",{onClick:()=>te(Q,"up"),disabled:Q===0,className:"p-1 text-slate-400 hover:text-white disabled:opacity-30",children:""}),f.jsx("button",{onClick:()=>te(Q,"down"),disabled:Q===(((R=T.sidebarWidgets)==null?void 0:R.length)||0)-1,className:"p-1 text-slate-400 hover:text-white disabled:opacity-30",children:""}),f.jsx("button",{onClick:()=>E(P.id),className:"p-1 text-red-400 hover:text-red-300",children:""})]})]}),f.jsx("input",{type:"text",value:P.title,onChange:se=>C(P.id,"title",se.target.value),className:"w-full bg-slate-900 border border-slate-700 text-white p-1 rounded text-xs mb-2",placeholder:"Tiu  widget..."}),P.type==="custom"&&f.jsx("textarea",{value:P.content||"",onChange:se=>C(P.id,"content",se.target.value),className:"w-full bg-slate-900 border border-slate-700 text-white p-1 rounded text-xs h-16",placeholder:"Ni dung HTML..."})]},P.id)})})]}),f.jsx("hr",{className:"border-white/10"}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-3",children:"Ni dung Cho mng"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsxs("label",{className:"text-xs text-slate-500 block mb-1",children:["Tiu  (dng ","{username}","  chn tn)"]}),f.jsx("input",{type:"text",value:(T==null?void 0:T.welcomeTitle)||"",onChange:P=>X("welcomeTitle",P.target.value),placeholder:"Cho mng, {username}!",className:"w-full bg-slate-800 border-slate-700 text-white p-2 rounded text-sm"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"M t"}),f.jsx("textarea",{value:(T==null?void 0:T.welcomeMessage)||"",onChange:P=>X("welcomeMessage",P.target.value),placeholder:"M t ngn...",className:"w-full bg-slate-800 border-slate-700 text-white p-2 rounded text-sm h-20"})]})]})]})]}),f.jsx("div",{className:"pt-6 border-t border-white/10",children:f.jsx("button",{onClick:U,className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl shadow-lg transition-all",children:"Lu Cu Hnh"})})]}),f.jsxs("div",{className:"w-2/3 p-6 flex flex-col bg-[#0f172a]",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h3",{className:"font-bold text-white",children:"Qun l Tin Tc"}),f.jsx("button",{onClick:()=>{y(!0),p({})},className:"bg-indigo-600 hover:bg-indigo-700 text-white text-xs font-bold px-4 py-2 rounded-lg",children:"+ Thm Tin Mi"})]}),g?f.jsxs("div",{className:"flex-grow flex flex-col min-h-0",children:[f.jsxs("div",{className:"flex-grow overflow-y-auto pr-2 space-y-4",children:[f.jsx("input",{type:"text",placeholder:"Tiu  bi vit...",value:u.title||"",onChange:P=>p({...u,title:P.target.value}),className:"bg-slate-800 border-slate-700 text-white p-3 rounded-lg outline-none focus:border-indigo-500 w-full"}),f.jsx("div",{className:"flex flex-col min-h-[300px]",children:f.jsx(N6,{ref:x,value:u.content||"",onChange:P=>p({...u,content:P}),className:"flex-grow h-full"})}),f.jsxs("div",{className:"flex gap-2 flex-wrap pt-2 pb-2",children:[["","","","","","","","","","","","","","Ok",""].map(P=>f.jsx("button",{type:"button",onMouseDown:Q=>{var R;Q.preventDefault(),(R=x.current)==null||R.insertText(P)},className:"bg-slate-700 hover:bg-slate-600 text-white px-2 py-1 rounded text-sm transition-colors",title:"Chn vo ni dung",children:P},P)),f.jsx("span",{className:"text-[10px] text-slate-500 self-center ml-2 uppercase font-bold tracking-wider opacity-60",children:"Click  chn vo ni dung"})]}),f.jsx("div",{className:"pt-2",children:f.jsx(C6,{currentImage:u.imageUrl,onImageUploaded:P=>p({...u,imageUrl:P}),onClear:()=>p({...u,imageUrl:void 0})})})]}),f.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-700 mt-2 flex-shrink-0 bg-[#0f172a]",children:[f.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 text-slate-400 hover:text-white",children:"Hy"}),f.jsx("button",{onClick:Y,className:"px-6 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-bold",children:"Lu Tin"})]})]}):f.jsx("div",{className:"flex-grow overflow-y-auto space-y-3 pr-2",children:n.news.map((P,Q)=>f.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl border border-slate-700 flex justify-between items-start group",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-white text-sm",children:P.title}),f.jsxs("div",{className:"text-[10px] text-slate-400 mt-1",children:[L(P.date)," - ",P.author]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("div",{className:"flex flex-col gap-1 mr-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[f.jsx("button",{onClick:()=>j(Q,"up"),disabled:Q===0,className:"text-slate-500 hover:text-white disabled:opacity-20",children:""}),f.jsx("button",{onClick:()=>j(Q,"down"),disabled:Q===n.news.length-1,className:"text-slate-500 hover:text-white disabled:opacity-20",children:""})]}),f.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity items-center",children:[f.jsx("button",{onClick:()=>{p(P),y(!0)},className:"p-1 text-blue-400 hover:bg-blue-400/10 rounded",children:"Sa"}),f.jsx("button",{onClick:()=>ee(P.id),className:"p-1 text-red-400 hover:bg-red-400/10 rounded",children:"Xa"})]})]})]},P.id))})]})]})]})})]})},mx=[{id:"CHINESE",name:"Ting Trung",icon:""},{id:"JAPANESE",name:"Ting Nht",icon:""},{id:"KOREAN",name:"Ting Hn",icon:""}],px={CHINESE:{batchSize:50,delaySeconds:1,customPrompt:"Dch sang ting Vit phong cch kim hip, xng h huynh-, vn phong c trang, gi nguyn cc danh xng c th.",removeSourceText:!0,autoFixFormat:!0},JAPANESE:{batchSize:40,delaySeconds:1.5,customPrompt:"Dch sang ting Vit phong cch Anime/Manga, gi nguyn cc hu t nh -san, -kun, -sama nu cn thit, dch st ngha nhng t nhin.",removeSourceText:!0,autoFixFormat:!0},KOREAN:{batchSize:45,delaySeconds:1,customPrompt:"Dch sang ting Vit phong cch phim truyn hnh Hn Quc (K-Drama), xng h Oppa/Unnie/Noona ph hp ng cnh, vn phong gn gi.",removeSourceText:!0,autoFixFormat:!0}},k6=s=>(s=s.replace(/\r\n/g,`
`),s.trim().split(/\n\s*\n/).map(n=>{const r=n.split(`
`);if(r.length<3)return{index:"",timecode:"",text:""};const o=r[0].trim(),c=r[1].trim(),u=r.slice(2).join(`
`).trim();return{index:o,timecode:c,text:u}}).filter(n=>n.index!=="")),O6=s=>s.map(e=>`${e.index}
${e.timecode}
${e.text}
`).join(`
`),j6=(s,e)=>{const n=new Uint8Array([239,187,191]),r=new Blob([n,e],{type:"text/srt;charset=utf-8"}),o=URL.createObjectURL(r),c=document.createElement("a");c.href=o,c.download=s.replace(/\.(srt|txt)$/i,"")+"_VIET.srt",document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(o)},D6=(s,e)=>{let n;switch(e){case"CHINESE":n=/[\u4e00-\u9fa5]/g;break;case"JAPANESE":n=/[\u3040-\u30ff\u4e00-\u9faf]/g;break;case"KOREAN":n=/[\uac00-\ud7af]/g;break;default:n=/$/}return s.replace(n,"").trim()},M6=s=>{const e=(s==null?void 0:s.message)||(s==null?void 0:s.toString())||"";throw e.includes("429")||e.includes("Quota")||e.includes("quota")||e.includes("Resource has been exhausted")?e.includes("quota")||e.includes("Exceeded")?new Error("Ht API key, bn hy nhp thm API key  tip tc cng vic"):new Error("Hy thao tc chm li v api key ca bn khng p ng  x l nhanh"):e.includes("Network")||e.includes("fetch")?new Error("Li kt ni mng. Vui lng kim tra ng truyn."):new Error(`Li h thng: ${e}`)};class V6{constructor(e){this.apiKeys=e}getModel(){if(this.apiKeys.length===0)throw new Error("No API Keys provided");const e=this.apiKeys[Math.floor(Math.random()*this.apiKeys.length)];return new sd(e).getGenerativeModel({model:"gemini-flash-latest"})}async translateBatch(e,n,r,o){const c=`
Bn l mt chuyn gia dch thut phim nh cao cp t ${n==="CHINESE"?"Ting Trung":n==="JAPANESE"?"Ting Nht":"Ting Hn"} sang Ting Vit.
Nhim v: Dch ni dung cc ph  di y sang Ting Vit.

Yu cu c th:
1. ${r}
2. Gi nguyn nh dng ca tng mc (Index, Timecode).
3. CH tr v bn dch Ting Vit cho phn text ca ph . Khng c bao gm ngn ng gc.
4. KHNG gii thch, KHNG thm li dn.
5. m bo cu trc SRT chnh xc:
Index
Timecode
Ni dung dch

D liu u vo:
${e.map(u=>`${u.index}
${u.timecode}
${u.text}`).join(`

`)}
    `;try{const x=((await(await this.getModel().generateContent({contents:[{role:"user",parts:[{text:c}]}],generationConfig:{temperature:.3,topP:.8}})).response).text()||"").trim().split(/\n\s*\n/);return e.map((T,S)=>{const O=x[S];if(!O)return{...T,text:"[Li dch]"};const q=O.split(`
`),Z=q.length>=3?q.slice(2).join(`
`).trim():q.join(`
`).trim();return{...T,text:Z||T.text}})}catch(u){console.error("Translation error:",u),M6(u)}}}const gx=({className:s="w-6 h-6",size:e=24})=>f.jsx("svg",{width:e,height:e,className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),L6=({className:s="w-6 h-6",size:e=24})=>f.jsx("svg",{width:e,height:e,className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),P6=({className:s="w-6 h-6",size:e=24})=>f.jsx("svg",{width:e,height:e,className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Kl=({className:s="w-6 h-6",size:e=24})=>f.jsx("svg",{width:e,height:e,className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),U6=({className:s="w-6 h-6",size:e=24})=>f.jsxs("svg",{width:e,height:e,className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),yx=({className:s="w-6 h-6",size:e=24})=>f.jsx("svg",{width:e,height:e,className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),z6=({className:s="w-6 h-6",size:e=24})=>f.jsx("svg",{width:e,height:e,className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),B6=({className:s="w-6 h-6",size:e=24})=>f.jsx("svg",{width:e,height:e,className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),H6=({className:s="w-6 h-6",size:e=24})=>f.jsxs("svg",{width:e,height:e,className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),q6=({className:s="w-6 h-6",size:e=24})=>f.jsx("svg",{width:e,height:e,className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),Jm=({className:s="w-6 h-6",size:e=24})=>f.jsx("svg",{width:e,height:e,className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),G6=({className:s="w-6 h-6",size:e=24})=>f.jsx("svg",{width:e,height:e,className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),F6=({userId:s})=>{var ee;const[e,n]=le.useState(null),[r,o]=le.useState(""),[c,u]=le.useState("CHINESE"),[p,g]=le.useState(!1),[y,x]=le.useState(px.CHINESE),[T,S]=le.useState({isProcessing:!1,progress:0,currentBatch:0,totalBatches:0}),[O,q]=le.useState(""),Z=le.useRef(null);le.useEffect(()=>{const L=localStorage.getItem(`app_api_keys_${s}`);if(L)try{const H=JSON.parse(L),N=atob(H.gemini||"").split(`
`).map(E=>E.trim()).filter(E=>E!=="");N.length>0&&q(N[0])}catch(H){console.error("Failed to load keys",H)}},[s]);const U=L=>{var te;const H=(te=L.target.files)==null?void 0:te[0];if(H){n(H);const N=new FileReader;N.onload=E=>{var C;o(((C=E.target)==null?void 0:C.result)||"")},N.readAsText(H),S(E=>({...E,result:void 0,error:void 0}))}},X=()=>{e&&(g(!0),x(px[c]))},Y=async()=>{if(!r)return;if(!O){S(C=>({...C,isProcessing:!1,error:"Cha c API Key. Vui lng cu hnh  trang ch."}));return}const L=k6(r),H=y.batchSize,te=Math.ceil(L.length/H);S({isProcessing:!0,progress:0,currentBatch:0,totalBatches:te,error:void 0});const N=new V6([O]);let E=[];try{for(let j=0;j<te;j++){const D=j*H,z=Math.min(D+H,L.length),I=L.slice(D,z);S(R=>({...R,currentBatch:j+1,progress:Math.round(j/te*100)}));const Q=(await N.translateBatch(I,c,y.customPrompt,y.autoFixFormat)).map(R=>({...R,text:y.removeSourceText?D6(R.text,c):R.text}));E=[...E,...Q],j<te-1&&await new Promise(R=>setTimeout(R,y.delaySeconds*1e3))}const C=O6(E);S(j=>({...j,isProcessing:!1,progress:100,result:C}))}catch(C){S(j=>({...j,isProcessing:!1,error:" xy ra li trong qu trnh dch: "+(C.message||"Unknown error")}))}};return O?f.jsx(Lw,{children:f.jsxs("div",{className:"min-h-full p-4 md:p-8 flex flex-col items-center bg-transparent",children:[f.jsxs("header",{className:"w-full max-w-4xl text-center mb-12",children:[f.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-indigo-600 rounded-2xl mb-4 text-white shadow-lg",children:f.jsx(gx,{size:32})}),f.jsx("h1",{className:"text-4xl font-extrabold text-slate-900 mb-2",children:"Dch Thut Chuyn Gia"}),f.jsx("p",{className:"text-slate-500",children:"Nng tm bn dch ph  ca bn vi sc mnh ca AI"})]}),f.jsxs("main",{className:"w-full max-w-4xl bg-white rounded-3xl shadow-xl shadow-slate-200/50 border border-slate-100 overflow-hidden",children:[T.isProcessing&&f.jsx("div",{className:"h-1.5 w-full bg-slate-100 relative",children:f.jsx("div",{className:"absolute top-0 left-0 h-full bg-indigo-600 transition-all duration-500 ease-out",style:{width:`${T.progress}%`}})}),f.jsxs("div",{className:"p-8",children:[!p&&!T.isProcessing&&!T.result&&f.jsxs("div",{className:"space-y-8",children:[f.jsxs("section",{children:[f.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Ti ln file ngun (.srt, .txt)"}),f.jsxs("div",{onClick:()=>{var L;return(L=Z.current)==null?void 0:L.click()},className:`border-2 border-dashed rounded-2xl p-10 flex flex-col items-center justify-center cursor-pointer transition-all ${e?"border-indigo-500 bg-indigo-50/30":"border-slate-200 hover:border-indigo-400 hover:bg-slate-50"}`,children:[f.jsx("input",{type:"file",ref:Z,onChange:U,accept:".srt,.txt",className:"hidden"}),e?f.jsxs(f.Fragment,{children:[f.jsx(P6,{className:"text-indigo-600 mb-4 w-12 h-12",size:48}),f.jsx("p",{className:"text-indigo-900 font-medium",children:e.name}),f.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:[(e.size/1024).toFixed(2)," KB"]})]}):f.jsxs(f.Fragment,{children:[f.jsx(L6,{className:"text-slate-400 mb-4 w-12 h-12",size:48}),f.jsx("p",{className:"text-slate-600 font-medium text-lg",children:"Ko th hoc nhp  chn file"}),f.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Ch h tr nh dng .srt v .txt"})]})]})]}),e&&f.jsxs("section",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[f.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Chn ngn ng ngun"}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:mx.map(L=>f.jsxs("button",{onClick:()=>u(L.id),className:`flex items-center gap-3 p-4 rounded-xl border-2 transition-all ${c===L.id?"border-indigo-600 bg-indigo-50 text-indigo-700":"border-slate-100 hover:border-slate-200"}`,children:[f.jsx("span",{className:"text-2xl",children:L.icon}),f.jsx("span",{className:"font-semibold",children:L.name}),c===L.id&&f.jsx(Kl,{size:20,className:"ml-auto"})]},L.id))})]}),e&&f.jsxs("button",{onClick:X,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-lg shadow-lg shadow-indigo-200 transition-all flex items-center justify-center gap-2",children:[f.jsx(U6,{size:20}),"Bt u thit lp"]})]}),p&&!T.isProcessing&&!T.result&&f.jsxs("div",{className:"space-y-8 animate-in zoom-in-95 duration-300",children:[f.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[f.jsx("button",{onClick:()=>g(!1),className:"p-2 hover:bg-slate-100 rounded-lg text-slate-500",children:f.jsx(yx,{size:20})}),f.jsxs("h2",{className:"text-xl font-bold text-slate-800",children:["Cu hnh chuyn gia cho ",(ee=mx.find(L=>L.id===c))==null?void 0:ee.name]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700",children:[f.jsx(z6,{size:16,className:"text-indigo-500"}),"S ph  mi gi (Batch Size)"]}),f.jsx("input",{type:"number",value:y.batchSize,onChange:L=>x({...y,batchSize:parseInt(L.target.value)||1}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all"}),f.jsx("p",{className:"text-xs text-slate-400",children:"Gom nhiu dng gip AI hiu ng cnh tt hn v trnh b ngt qung."})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700",children:[f.jsx(B6,{size:16,className:"text-indigo-500"}),"Thi gian ngh (s)"]}),f.jsx("input",{type:"number",step:"0.5",value:y.delaySeconds,onChange:L=>x({...y,delaySeconds:parseFloat(L.target.value)||.1}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all"}),f.jsx("p",{className:"text-xs text-slate-400",children:"Thi gian ch gia cc ln gi API  trnh b gii hn bng thng."})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700",children:[f.jsx(H6,{size:16,className:"text-indigo-500"}),"Kim sot cht lng dch (Prompt ty chnh)"]}),f.jsx("textarea",{rows:4,value:y.customPrompt,onChange:L=>x({...y,customPrompt:L.target.value}),className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all resize-none",placeholder:"V d: Dch phong cch kim hip, xng h huynh-..."})]}),f.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl space-y-4",children:[f.jsx("h3",{className:"font-bold text-slate-800 text-sm uppercase tracking-wider",children:"Hu k chuyn su"}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"checkbox",checked:y.removeSourceText,onChange:L=>x({...y,removeSourceText:L.target.checked}),className:"sr-only peer"}),f.jsx("div",{className:"w-10 h-6 bg-slate-200 rounded-full peer peer-checked:bg-indigo-600 transition-all"}),f.jsx("div",{className:"absolute left-1 top-1 w-4 h-4 bg-white rounded-full peer-checked:translate-x-4 transition-all"})]}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Loi b k t tha (Regex)"}),f.jsx("span",{className:"text-xs text-slate-400",children:"T ng xa cc k t tng hnh cn st li sau khi dch."})]})]}),f.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"checkbox",checked:y.autoFixFormat,onChange:L=>x({...y,autoFixFormat:L.target.checked}),className:"sr-only peer"}),f.jsx("div",{className:"w-10 h-6 bg-slate-200 rounded-full peer peer-checked:bg-indigo-600 transition-all"}),f.jsx("div",{className:"absolute left-1 top-1 w-4 h-4 bg-white rounded-full peer-checked:translate-x-4 transition-all"})]}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Kim tra & Sa cha nh dng SRT"}),f.jsx("span",{className:"text-xs text-slate-400",children:"m bo m thi gian v s th t chun xc 100%."})]})]})]})]}),f.jsxs("button",{onClick:Y,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-lg shadow-lg shadow-indigo-200 transition-all flex items-center justify-center gap-2",children:[f.jsx(gx,{size:20}),"Tin hnh dch ngay"]})]}),T.isProcessing&&f.jsxs("div",{className:"py-12 flex flex-col items-center justify-center space-y-6",children:[f.jsxs("div",{className:"relative",children:[f.jsx(G6,{size:64,className:"text-indigo-600 animate-spin w-16 h-16"}),f.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:f.jsxs("span",{className:"text-sm font-bold text-indigo-700",children:[T.progress,"%"]})})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"ang x l d liu..."}),f.jsxs("p",{className:"text-slate-500 mt-1",children:["ang dch gi ",T.currentBatch," / ",T.totalBatches]}),f.jsxs("div",{className:"mt-6 p-4 bg-amber-50 rounded-xl border border-amber-100 flex items-center gap-3 text-amber-800 text-sm max-w-md",children:[f.jsx(Jm,{size:18}),"Vui lng khng ng trnh duyt cho n khi qu trnh hon tt."]})]})]}),T.result&&f.jsxs("div",{className:"py-8 flex flex-col items-center space-y-6 animate-in fade-in duration-500",children:[f.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center text-green-600 mb-2",children:f.jsx(Kl,{size:40,className:"w-10 h-10"})}),f.jsxs("div",{className:"text-center",children:[f.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Dch thnh cng!"}),f.jsx("p",{className:"text-slate-500 mt-2",children:"File ca bn  c ti u ha v sn sng s dng."})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 w-full max-w-lg",children:[f.jsxs("button",{onClick:()=>j6((e==null?void 0:e.name)||"translated.srt",T.result),className:"flex items-center justify-center gap-3 p-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 transition-all",children:[f.jsx(q6,{size:20}),"Ti file (.srt)"]}),f.jsxs("button",{onClick:()=>{n(null),S({isProcessing:!1,progress:0,currentBatch:0,totalBatches:0}),g(!1)},className:"flex items-center justify-center gap-3 p-4 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-bold transition-all",children:[f.jsx(yx,{size:20}),"Dch file khc"]})]}),f.jsxs("div",{className:"w-full mt-6 space-y-2",children:[f.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Xem trc ni dung"}),f.jsx("div",{className:"w-full h-48 bg-slate-950 rounded-2xl p-4 font-mono text-xs text-slate-300 overflow-y-auto border border-slate-800",children:f.jsxs("pre",{className:"whitespace-pre-wrap",children:[T.result.slice(0,1e3),"..."]})})]})]}),T.error&&f.jsxs("div",{className:"mt-8 p-6 bg-rose-50 border border-rose-100 rounded-2xl flex items-start gap-4 text-rose-800",children:[f.jsx(Jm,{size:24,className:"flex-shrink-0"}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold",children:"Li x l"}),f.jsx("p",{className:"text-sm mt-1",children:T.error}),f.jsx("button",{onClick:()=>S(L=>({...L,error:void 0})),className:"mt-3 text-sm font-bold underline hover:no-underline",children:"Th li"})]})]})]})]}),f.jsxs("footer",{className:"mt-12 text-slate-400 text-sm flex flex-col items-center gap-4",children:[f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsxs("span",{className:"flex items-center gap-1",children:[f.jsx(Kl,{size:14})," UTF-8 with BOM"]}),f.jsxs("span",{className:"flex items-center gap-1",children:[f.jsx(Kl,{size:14})," Ti u ng cnh"]}),f.jsxs("span",{className:"flex items-center gap-1",children:[f.jsx(Kl,{size:14})," T ng sa li"]})]}),f.jsx("p",{children:" 2024 Dch Thut Chuyn Gia  Bn quyn thuc v AI Studio"})]})]})}):f.jsx("div",{className:"flex flex-col items-center justify-center p-10 h-full",children:f.jsxs("div",{className:"bg-red-50 text-red-600 p-6 rounded-xl border border-red-200 text-center shadow-sm",children:[f.jsx(Jm,{className:"w-12 h-12 mx-auto mb-2 text-red-500"}),f.jsx("h3",{className:"font-bold text-lg mb-2",children:"Cha cu hnh API Key"}),f.jsx("p",{children:"Vui lng nhp Gemini API Key  phn qun l Key pha trn trc khi s dng ng dng ny."})]})})},K6=()=>f.jsxs("div",{className:"w-full h-full min-h-[500px] flex flex-col items-center justify-center p-10 bg-white rounded-3xl shadow-xl border border-dashed border-slate-300",children:[f.jsx("div",{className:"w-20 h-20 bg-indigo-50 rounded-full flex items-center justify-center mb-6",children:f.jsx("svg",{className:"w-10 h-10 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),f.jsx("h2",{className:"text-2xl font-black text-slate-800 uppercase tracking-tighter mb-2",children:"New Application"}),f.jsxs("p",{className:"text-slate-500 text-center max-w-md",children:["This is a placeholder for your future application. ",f.jsx("br",{}),"You can start building your new features here within the ",f.jsx("code",{children:"apps/NewToolApp.tsx"})," file."]}),f.jsx("button",{className:"mt-8 px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition-all",children:"Initialize Project"})]}),$6=[{id:"video-viral",label:"Video Viral"},{id:"image-script",label:"Visual Script"},{id:"zenshot-ai",label:"ZenShot AI"},{id:"translation",label:"Translation"},{id:"new-tool",label:"New Tool"}],Y6=({onClose:s})=>{const[e,n]=le.useState({}),[r,o]=le.useState(""),c=()=>{const y=JSON.parse(localStorage.getItem("app_users")||"{}");n(y)};le.useEffect(()=>{c()},[]);const u=(y,x)=>{const T={...e},S=T[y];S.allowedApps||(S.allowedApps=[]),S.allowedApps.includes(x)?S.allowedApps=S.allowedApps.filter(O=>O!==x):S.allowedApps.push(x),n(T),localStorage.setItem("app_users",JSON.stringify(T))},p=y=>{const x={...e},T=x[y];T.role=T.role==="admin"?"user":"admin",n(x),localStorage.setItem("app_users",JSON.stringify(x))},g=Object.values(e).filter(y=>y.username.toLowerCase().includes(r.toLowerCase())||y.email&&y.email.toLowerCase().includes(r.toLowerCase()));return f.jsx("div",{className:"fixed inset-0 bg-slate-900/90 backdrop-blur-md flex items-center justify-center z-[400] p-6",children:f.jsxs("div",{className:"bg-white w-full max-w-5xl rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-300",children:[f.jsxs("div",{className:"bg-[#020617] text-white p-8 flex justify-between items-center shrink-0 gap-4",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h2",{className:"text-2xl font-black uppercase tracking-tighter",children:"Admin Control Panel (v1.2)"}),f.jsx("p",{className:"text-xs text-indigo-400 font-bold uppercase tracking-[0.3em] mt-1",children:"User & Access Management"})]}),f.jsxs("button",{onClick:c,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-bold text-xs uppercase tracking-widest shadow-lg transition-all flex items-center gap-2",children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Force Refresh"]}),f.jsx("button",{onClick:s,className:"bg-white/10 hover:bg-white/20 p-3 rounded-xl transition-all",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsx("div",{className:"p-6 border-b border-slate-100 bg-slate-50 flex items-center gap-4 shrink-0 justify-between",children:f.jsx("div",{className:"flex items-center gap-4 flex-1",children:f.jsxs("div",{className:"relative flex-1 max-w-md",children:[f.jsx("svg",{className:"w-5 h-5 absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),f.jsx("input",{type:"text",placeholder:"Search users...",className:"w-full pl-12 pr-4 py-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none font-medium",value:r,onChange:y=>o(y.target.value)})]})})}),f.jsx("div",{className:"overflow-y-auto flex-1 p-6 bg-slate-100",children:f.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:f.jsxs("table",{className:"w-full text-left border-collapse",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200 text-xs font-black text-slate-500 uppercase tracking-wider",children:[f.jsx("th",{className:"p-4 pl-6",children:"User Identity"}),f.jsx("th",{className:"p-4",children:"Role"}),f.jsx("th",{className:"p-4 text-center",children:"Video Viral"}),f.jsx("th",{className:"p-4 text-center",children:"Visual Script"}),f.jsx("th",{className:"p-4 text-center",children:"ZenShot New"}),f.jsx("th",{className:"p-4 text-center",children:"Translation"}),f.jsx("th",{className:"p-4 text-center",children:"New App"})]})}),f.jsx("tbody",{className:"divide-y divide-slate-100",children:g.map(y=>f.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[f.jsxs("td",{className:"p-4 pl-6",children:[f.jsx("div",{className:"font-bold text-slate-800",children:y.username}),f.jsx("div",{className:"text-xs text-slate-400 font-medium",children:y.email||"No email"})]}),f.jsx("td",{className:"p-4",children:f.jsx("button",{onClick:()=>p(y.username),className:`px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${y.role==="admin"?"bg-indigo-100 text-indigo-700 hover:bg-indigo-200":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:y.role})}),$6.map(x=>{var S;const T=(S=y.allowedApps)==null?void 0:S.includes(x.id);return f.jsx("td",{className:"p-4 text-center",children:f.jsxs("label",{className:"inline-flex items-center cursor-pointer relative",children:[f.jsx("input",{type:"checkbox",className:"peer sr-only",checked:T,onChange:()=>u(y.username,x.id)}),f.jsx("div",{className:"w-11 h-6 bg-slate-200 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-500"})]})},x.id)})]},y.id))})]})})}),f.jsxs("div",{className:"p-4 bg-black text-xs font-mono text-green-400 overflow-auto h-32 border-t border-slate-700 shrink-0",children:[f.jsx("p",{className:"font-bold text-white mb-2",children:"DEBUG RAW DATA (Search here for username):"}),f.jsx("pre",{className:"whitespace-pre-wrap",children:JSON.stringify(e,null,2)})]})]})})},vx="settings/app_config",Gw={async getAppNames(){try{const s=oc(uc,vx),e=await Ap(s);return e.exists()?e.data().appNames||{}:{}}catch(s){return console.error("Error fetching app names:",s),{}}},async saveAppConfig(s){try{const e=oc(uc,vx);await QT(e,{appNames:s},{merge:!0})}catch(e){throw console.error("Error saving app config:",e),e}}},Zm={"video-viral":"Video Viral Engine","image-script":"Visual Script Engine","zenshot-ai":"ZenShot AI (New)",translation:"Translation AI","new-tool":"New Application"},Q6=({currentNames:s,onClose:e,onUpdate:n})=>{const[r,o]=le.useState(s),[c,u]=le.useState(!1);le.useEffect(()=>{o({...Zm,...s})},[s]);const p=(y,x)=>{o(T=>({...T,[y]:x}))},g=async()=>{u(!0);try{await Gw.saveAppConfig(r),n(),e()}catch(y){console.error("Failed to save app names",y),alert("Failed to save changes. Please try again.")}finally{u(!1)}};return f.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[200]",children:f.jsxs("div",{className:"bg-slate-900 rounded-3xl border border-indigo-500/20 shadow-2xl w-full max-w-lg overflow-hidden",children:[f.jsxs("div",{className:"p-6 border-b border-indigo-500/10 bg-indigo-500/5",children:[f.jsxs("h2",{className:"text-xl font-black text-white uppercase tracking-wider flex items-center gap-3",children:[f.jsx("span",{className:"p-2 bg-indigo-500/10 rounded-lg text-indigo-400",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),"Manage App Names"]}),f.jsx("p",{className:"text-slate-400 text-xs mt-2 ml-14",children:"Customize how application names appear in the navigation bar."})]}),f.jsx("div",{className:"p-6 max-h-[60vh] overflow-y-auto space-y-4 custom-scrollbar",children:Object.keys(Zm).map(y=>f.jsxs("div",{className:"group",children:[f.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 group-hover:text-indigo-400 transition-colors",children:y.replace("-"," ")}),f.jsx("input",{type:"text",value:r[y]||"",onChange:x=>p(y,x.target.value),className:"w-full bg-slate-800/50 border border-slate-700 rounded-xl px-4 py-3 text-sm text-white focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 outline-none transition-all placeholder:text-slate-600",placeholder:Zm[y]})]},y))}),f.jsxs("div",{className:"p-6 border-t border-indigo-500/10 bg-slate-800/20 flex justify-end gap-3",children:[f.jsx("button",{onClick:e,className:"px-5 py-2.5 rounded-xl text-slate-400 font-bold text-xs uppercase tracking-wider hover:text-white hover:bg-white/5 transition-all",children:"Cancel"}),f.jsx("button",{onClick:g,disabled:c,className:"px-6 py-2.5 rounded-xl bg-indigo-600 text-white font-bold text-xs uppercase tracking-wider hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-indigo-500/20 transition-all flex items-center gap-2",children:c?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"w-3 h-3 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Saving..."]}):"Save Changes"})]})]})})},X6=({user:s,onUpdateUser:e,onClose:n,appNames:r={},onUpdateAppNames:o=()=>{}})=>{const[c,u]=le.useState(s.email||""),[p,g]=le.useState(s.phone||""),[y,x]=le.useState(""),[T,S]=le.useState(""),[O,q]=le.useState(!1),[Z,U]=le.useState(!1),X=()=>{const Y=JSON.parse(localStorage.getItem("app_users")||"{}"),ee=Y[s.username];if(ee){const L={...ee,email:c,phone:p,...y?{password:y}:{}};Y[s.username]=L,localStorage.setItem("app_users",JSON.stringify(Y));const H={...L};delete H.password,e(H),S("Cp nht thnh cng!"),setTimeout(()=>S(""),3e3)}};return O?f.jsx(Y6,{onClose:()=>q(!1)}):Z?f.jsx(Q6,{currentNames:r,onClose:()=>U(!1),onUpdate:o}):f.jsx("div",{className:"fixed inset-0 bg-slate-900/80 backdrop-blur-sm flex items-center justify-center z-[300] p-4",children:f.jsxs("div",{className:"bg-[#1e293b] w-full max-w-lg rounded-2xl border border-white/10 shadow-2xl p-6 md:p-8 animate-in zoom-in-95 duration-200",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-white/5 pb-4",children:[f.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[f.jsx("svg",{className:"w-5 h-5 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Qun l ti khon"]}),f.jsx("button",{onClick:n,className:"text-slate-400 hover:text-white transition-colors",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-xl border border-white/5 flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-[10px] text-slate-400 uppercase font-bold tracking-widest",children:"Tn ng nhp"}),f.jsx("p",{className:"text-lg font-bold text-white",children:s.username})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("p",{className:"text-[10px] text-slate-400 uppercase font-bold tracking-widest",children:"Vai tr"}),f.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold uppercase ${s.role==="admin"?"bg-indigo-500/20 text-indigo-400":"bg-slate-700 text-slate-300"}`,children:s.role})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-2",children:"Email"}),f.jsx("input",{type:"email",value:c,onChange:Y=>u(Y.target.value),className:"w-full bg-[#0f172a] border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 outline-none text-sm"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-2",children:"S in thoi"}),f.jsx("input",{type:"tel",value:p,onChange:Y=>g(Y.target.value),className:"w-full bg-[#0f172a] border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 outline-none text-sm"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs uppercase font-bold text-slate-400 mb-2",children:"i mt khu mi (Nu cn)"}),f.jsx("input",{type:"password",value:y,onChange:Y=>x(Y.target.value),placeholder:" trng nu khng i",className:"w-full bg-[#0f172a] border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 outline-none text-sm placeholder-slate-600"})]}),T&&f.jsx("div",{className:"p-3 bg-emerald-500/10 text-emerald-400 text-sm font-bold rounded-lg text-center animate-in fade-in slide-in-from-top-2",children:T}),f.jsxs("div",{className:"pt-4 border-t border-white/5 flex justify-between gap-3 items-center",children:[s.role==="admin"?f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("button",{onClick:()=>q(!0),className:"px-4 py-2 rounded-lg text-sm font-bold bg-amber-500/10 text-amber-500 hover:bg-amber-500/20 transition-all uppercase tracking-wider flex items-center gap-2",children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),"Admin Panel"]}),f.jsxs("button",{onClick:()=>U(!0),className:"px-4 py-2 rounded-lg text-sm font-bold bg-indigo-500/10 text-indigo-400 hover:bg-indigo-500/20 transition-all uppercase tracking-wider flex items-center gap-2",children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Manage App Names"]})]}):f.jsx("div",{}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx("button",{onClick:n,className:"px-4 py-2 rounded-lg text-sm font-bold text-slate-400 hover:text-white hover:bg-white/5 transition-all",children:"ng"}),f.jsx("button",{onClick:X,className:"px-6 py-2 rounded-lg text-sm font-bold bg-indigo-600 text-white hover:bg-indigo-500 transition-all shadow-lg active:scale-95",children:"Lu Thay i"})]})]})]})]})})},W6=()=>{var q,Z,U,X,Y;const[s,e]=le.useState(null),[n,r]=le.useState("home"),[o,c]=le.useState(!1),[u,p]=le.useState(!0),[g,y]=le.useState({}),x=async()=>{const ee=await Gw.getAppNames();y(ee)};le.useEffect(()=>{x()},[]),le.useEffect(()=>{const ee=aC(Zl,async L=>{var H;if(L){const te=await nd.getUserProfile(L.uid);if(te)e(te);else{const N={id:L.uid,username:L.displayName||((H=L.email)==null?void 0:H.split("@")[0])||"User",email:L.email||"",role:"user",createdAt:Date.now()};e(N)}}else e(null);p(!1)});return()=>ee()},[]);const T=ee=>{e(ee)},S=ee=>{e(ee)},O=async()=>{p(!0),await nd.logoutUser()};return u?f.jsx("div",{className:"min-h-screen bg-[#020617] flex items-center justify-center",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):s?f.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col items-center",children:[f.jsx(yS,{userId:s.id}),f.jsxs("nav",{className:"w-full bg-[#020617] text-white border-b border-white/5 sticky top-0 z-[100] px-6 md:px-12 py-4 backdrop-blur-2xl bg-opacity-95 shadow-2xl flex flex-col md:flex-row items-center justify-between gap-4",children:[f.jsxs("div",{className:"flex items-center gap-6 cursor-pointer",onClick:()=>r("home"),children:[f.jsx("div",{className:"bg-gradient-to-tr from-indigo-500 via-indigo-600 to-violet-600 p-3 rounded-2xl shadow-2xl shadow-indigo-500/30 ring-4 ring-indigo-500/10",children:f.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),f.jsxs("div",{className:"flex flex-col",children:[f.jsxs("h1",{className:"text-2xl font-black tracking-tighter uppercase leading-none",children:["QUANG HUY ",f.jsx("span",{className:"text-indigo-400",children:"STUDIO"})]}),f.jsx("span",{className:"text-[10px] font-black text-indigo-400/70 uppercase tracking-[0.4em] mt-1",children:"Multi-App Engine"})]})]}),f.jsxs("div",{className:"flex items-center bg-white/5 rounded-2xl p-1 border border-white/10",children:[(s.role==="admin"||((q=s.allowedApps)==null?void 0:q.includes("video-viral")))&&f.jsx("button",{onClick:()=>r("video-viral"),className:`px-6 py-2 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${n==="video-viral"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:g["video-viral"]||"Video Viral Engine"}),(s.role==="admin"||((Z=s.allowedApps)==null?void 0:Z.includes("image-script")))&&f.jsx("button",{onClick:()=>r("image-script"),className:`px-6 py-2 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${n==="image-script"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:g["image-script"]||"Visual Script Engine"}),(s.role==="admin"||((U=s.allowedApps)==null?void 0:U.includes("zenshot-ai")))&&f.jsx("button",{onClick:()=>r("zenshot-ai"),className:`px-6 py-2 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${n==="zenshot-ai"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:g["zenshot-ai"]||"ZenShot AI (New)"}),(s.role==="admin"||((X=s.allowedApps)==null?void 0:X.includes("translation")))&&f.jsx("button",{onClick:()=>r("translation"),className:`px-6 py-2 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${n==="translation"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:g.translation||"Translation AI"}),(s.role==="admin"||((Y=s.allowedApps)==null?void 0:Y.includes("new-tool")))&&f.jsx("button",{onClick:()=>r("new-tool"),className:`px-6 py-2 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${n==="new-tool"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:g["new-tool"]||"New Application"})]}),f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsxs("div",{className:"text-right hidden md:block",children:[f.jsxs("div",{className:"text-xs font-black uppercase text-indigo-400",children:["Hello, ",s.username]}),f.jsx("button",{onClick:O,className:"text-[10px] uppercase font-bold text-slate-500 hover:text-white transition-colors",children:"Logout"})]}),f.jsx("div",{className:"w-10 h-10 bg-indigo-600 rounded-full flex items-center justify-center font-black text-sm shadow-lg ring-2 ring-indigo-400/20 cursor-pointer hover:ring-indigo-400 hover:scale-105 transition-all",onClick:()=>c(!0),children:s.username.charAt(0).toUpperCase()})]})]}),f.jsxs("div",{className:"w-full h-[calc(100vh-140px)]",children:[n==="home"&&f.jsx(I6,{user:s,onNavigate:r},s.id),n==="video-viral"&&f.jsx(DD,{userId:s.id},s.id),n==="image-script"&&f.jsx(FD,{userId:s.id},s.id),n==="zenshot-ai"&&f.jsx(S6,{userId:s.id},s.id),n==="translation"&&f.jsx(F6,{userId:s.id},s.id),n==="new-tool"&&f.jsx(K6,{},s.id)]}),o&&f.jsx(X6,{user:s,onUpdateUser:S,onClose:()=>c(!1),appNames:g,onUpdateAppNames:x})]}):f.jsx(OD,{onLogin:T})},Fw=document.getElementById("root");if(!Fw)throw new Error("Could not find root element to mount to");const J6=O2.createRoot(Fw);J6.render(f.jsx(Ip.StrictMode,{children:f.jsx(W6,{})}));
